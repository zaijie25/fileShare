{"version":3,"sources":["assets\\hall\\scripts\\framework\\setting\\Storage.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { Logger } from \"../debug/Logger\";\r\n\r\nexport default class Storage\r\n{\r\n    //默认为string格式存储  包括数字\r\n    public set(key:string, value:any)\r\n    {\r\n        if(value == null)\r\n            value = \"\"\r\n        let newKey = this.getFinalKey(key);\r\n        cc.sys.localStorage.setItem(newKey, value)\r\n    }\r\n\r\n    public setObject(key, value)\r\n    {\r\n        if(value == null)\r\n            return;\r\n        let content = \"\"\r\n        try\r\n        {\r\n            content = JSON.stringify(value)\r\n            this.set(key, content);\r\n        }\r\n        catch(e)\r\n        {\r\n            Logger.error(\"Storage.setObject 出错\", e && e.message)\r\n            return;\r\n        }\r\n    }\r\n\r\n    public setBool(key, value:boolean)\r\n    {\r\n        let content = value? \"1\" : \"0\"\r\n        this.set(key, content);\r\n    }\r\n\r\n    public hasKey(key)\r\n    {\r\n        return this.get(key) != \"\"\r\n    }\r\n\r\n\r\n    public get(key)\r\n    {\r\n        let newKey = this.getFinalKey(key);\r\n        let value = cc.sys.localStorage.getItem(newKey);\r\n        if(value == null)\r\n            value = \"\"\r\n        return value;\r\n    }\r\n\r\n    public getNumber(key, defalut = 0)\r\n    {\r\n        let content = this.get(key);\r\n        if(content == \"\")\r\n            return defalut;\r\n        let value = Number(content);\r\n        if(!isNaN(value))\r\n            return value\r\n        else    \r\n            return defalut;\r\n    }\r\n\r\n    public getObject(key):any\r\n    {\r\n        let content = this.get(key);\r\n        if(content == \"\")\r\n            return null;\r\n        let obj = null;\r\n        try\r\n        {\r\n            obj = JSON.parse(content);\r\n        }\r\n        catch(e)\r\n        {\r\n           Logger.error(\"Storage.getObject 出错\", e && e.message)\r\n        }\r\n        return obj;\r\n    }\r\n\r\n    public getBool(key):boolean\r\n    {\r\n        let content = this.get(key);\r\n        return content == \"1\";\r\n    }\r\n\r\n    public removeKey(key)\r\n    {\r\n        let newKey = this.getFinalKey(key); \r\n        cc.sys.localStorage.removeItem(newKey);\r\n    }\r\n\r\n\r\n    //对key做加工\r\n    private getFinalKey(key)\r\n    {\r\n        return key;\r\n    }\r\n}"]}