{"version":3,"sources":["assets\\hall\\scripts\\logic\\core\\net\\tcp\\italk_msg_buffer.ts"],"names":[],"mappings":";;;;;;AACA,+CAAsC;AAEtC;IAAA;IAoBA,CAAC;IAnBU,yBAAU,GAAjB,UAAkB,MAAiB,EAAC,IAA2B;QAC3D,IAAI,MAAM,GAAU,MAAM,CAAC,MAAM,CAAC;QAClC,IAAI,KAAK,GAAU,IAAI,CAAC,KAAK,CAAC,MAAM,GAAC,KAAK,CAAC,CAAC;QAC5C,IAAI,UAAU,GAAU,MAAM,GAAG,KAAK,CAAC;QACvC,IAAI,OAAO,GAAc,IAAI,UAAU,CAAC,EAAE,GAAC,MAAM,CAAC,CAAC;QACnD,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QACf,OAAO,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;QAC5B,OAAO,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC;QACnB,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QACf,OAAO,CAAC,CAAC,CAAC,GAAG,IAAI,GAAG,UAAU,CAAC;QAC/B,OAAO,CAAC,CAAC,CAAC,GAAG,IAAI,GAAG,UAAU,IAAI,CAAC,CAAC;QACpC,IAAI,MAAM,GAAI,sBAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QACtC,OAAO,CAAC,CAAC,CAAC,GAAG,IAAI,GAAG,MAAM,CAAC;QAC3B,OAAO,CAAC,CAAC,CAAC,GAAG,IAAI,GAAG,MAAM,IAAI,CAAC,CAAC;QAChC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,EAAE,CAAC,EAAE,EAAE;YAC7B,OAAO,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;SAC/B;QACD,OAAO,OAAO,CAAC;IACnB,CAAC;IACL,qBAAC;AAAD,CApBA,AAoBC,IAAA;AACD,kBAAe,cAAc,CAAA","file":"","sourceRoot":"/","sourcesContent":["import { italk } from \"./italkmsg_pb\";\r\nimport ItalkCrc from \"./italkmsg_crc\";\r\n\r\nclass ItalkMsgBuffer {\r\n    static buildBufer(buffer:Uint8Array,type:italk.pb.ItalkTypeEnum):Uint8Array{\r\n        let length:number = buffer.length;\r\n        let totel:number = Math.floor(length/10240);\r\n        let bodylength:number = length % 10240;\r\n        let headbuf:Uint8Array = new Uint8Array(24+length);\r\n        headbuf[0] = 2;\r\n        headbuf[1] = type.valueOf();\r\n        headbuf[2] = totel;\r\n        headbuf[3] = 0;\r\n        headbuf[4] = 0xff & bodylength;\r\n        headbuf[5] = 0xff & bodylength >> 8;\r\n        let crcnum =  ItalkCrc.crc16(headbuf);\r\n        headbuf[6] = 0xff & crcnum;\r\n        headbuf[7] = 0xff & crcnum >> 8;\r\n        for (var i = 0; i < length; i++) {\r\n            headbuf[24 + i] = buffer[i];\r\n        }\r\n        return headbuf;\r\n    }\r\n}\r\nexport default ItalkMsgBuffer"]}