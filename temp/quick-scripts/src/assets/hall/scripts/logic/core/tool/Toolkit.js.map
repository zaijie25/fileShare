{"version":3,"sources":["assets\\hall\\scripts\\logic\\core\\tool\\Toolkit.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import * as Crypto from \"../../../framework/libs/cryptoTs/crypto-ts\"\r\nimport { MD5 } from \"../../../framework/libs/cryptoTs/algo/MD5\";\r\nimport { Hasher } from \"../../../framework/libs/cryptoTs/lib/Hasher\";\r\nimport { QRErrorCorrectLevel, QRCode } from \"../../../framework/libs/qrcode\"\r\nimport { NetLogin, NetClientLog } from \"../net/hall/NetEvent\";\r\nimport HallStorageKey from \"../../hallcommon/const/HallStorageKey\";\r\nimport { DUNTYPE } from \"../../../framework/net/dun/AppDunControl\";\r\nimport { ServerUrl } from \"../setting/ServerRoutes\";\r\nimport { ReportTool } from \"../../../logic/core/tool/ReportTool\";\r\nimport Setting from \"../setting/Setting\";\r\nimport { SceneType } from \"../scene/SceneManager\";\r\nimport PreLoadProxy from \"../loadingMVC/PreLoadProxy\";\r\nimport SkinConfig from \"../../hallcommon/app/SkinConfig\";\r\n// import QRCodeTip from \"../../hall/ui/waiting/QRCodeTip\";\r\nexport default class Toolkit {\r\n    public cryptoKey: string = \"yaoxing8901234561234567890123488\";\r\n    public cryptoIv: string = \"yaoxing890123488\";\r\n\r\n    public routeCrypKey: string = \"kjhlouyuf20987677869887978987277\";\r\n    public routeCrypIv: string = \"kjhlouyuf2098767\";\r\n\r\n    /** 密码检测字符串*/\r\n    private _pwCheckString: string = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\";\r\n\r\n    private MD5Hasher;\r\n\r\n    private uuid: number = 0;\r\n\r\n\r\n    private static _underscore = null;\r\n\r\n    static get underscore() {\r\n        if (!Toolkit._underscore) {\r\n            Toolkit._underscore = require('underscore')\r\n        }\r\n        return Toolkit._underscore\r\n    }\r\n    public removeDir(gid, err) {\r\n        if (!gid) {\r\n            Logger.error(\"传入的Gid为空\")\r\n            return\r\n        }\r\n        Global.UI.fastTip(\"进入子游戏失败\")\r\n        let curGameUpdatePath = Global.HotUpdateManager.getNativeHotUpdatePath(gid.toString())\r\n        Global.SceneManager.removeGameSearchPath(gid.toString())\r\n        Global.SceneManager.releaseCurGameBundle()\r\n        cc.sys.garbageCollect()\r\n        if (jsb.fileUtils.isDirectoryExist(curGameUpdatePath)) {\r\n            jsb.fileUtils.removeDirectory(curGameUpdatePath)\r\n        }\r\n        Global.SceneManager.sceneType = SceneType.Hall\r\n        Global.Event.event(GlobalEvent.UPDATE_SUB_GAME_FAILED, gid)\r\n        let reportParam = { \"result\": err, \"gid\": gid.toString() }\r\n        Global.ReportTool.ReportClientError(ReportTool.REPORT_TYPE_LOADSUBGAME_ERROR, reportParam);\r\n    }\r\n\r\n\r\n    adjustUrl(url: string) {\r\n        if (!url) return url\r\n        if (url.length > 0 && url[url.length - 1] != '/') {\r\n            url += \"/\"\r\n        }\r\n        return url\r\n    }\r\n\r\n\r\n    //判断是否是iphone6  \r\n    //iPhone6P : iPhone7,1   iPhone66 : iPhone7,2\r\n    //iPhone6s : iPhone8,1  iPhone6sp : iPhone8,2  iphoneSE : iPhone8,4\r\n    public isIphone6() {\r\n        if (cc.sys.platform != cc.sys.IPHONE)\r\n            return false;\r\n        let brand = Global.Setting.SystemInfo.osBuildModel;\r\n        if (brand.indexOf(\"iPhone7\") >= 0 || brand.indexOf(\"iPhone8\") >= 0)\r\n            return true;\r\n        // return false;\r\n    }\r\n\r\n    /**\r\n     * 调整iphoneX坐标\r\n     * @param widgetsList  需要调整的widget节点\r\n     * @param offset 偏移值，默认为60\r\n     * @param isPortrait 新增竖屏变量, 处理按钮在顶部状态栏点不到\r\n     */\r\n    public adjustIphoneX(widgetsList: cc.Node[], offset = 60, isPortrait: boolean = false) {\r\n        if (widgetsList == null)\r\n            return;\r\n        if (!cc.sys.isNative)\r\n            return;\r\n        if (!Global.Setting.SystemInfo.isIphoneX)\r\n            return;\r\n        for (let i = 0; i < widgetsList.length; i++) {\r\n            let node = widgetsList[i];\r\n            if (node == null || !node.isValid)\r\n                continue;\r\n            let widght = node.getComponent(cc.Widget);\r\n            if (widght) {\r\n                if (isPortrait)\r\n                    widght.top += offset;\r\n                else\r\n                    widght.left += offset;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 各个方向的适配\r\n     * @param widgetsList 适配节点\r\n     * @param offset 偏移 默认60\r\n     * @param dir 方向 \"left\" \"right\" \"top\" \"bottom\" 默认\"left\"\r\n     */\r\n    public freeAdjustIphoneX(widgetsList: cc.Node[], offset = 60, dir: string = \"left\") {\r\n        if (widgetsList == null)\r\n            return;\r\n        if (!cc.sys.isNative)\r\n            return;\r\n        if (!Global.Setting.SystemInfo.isIphoneX)\r\n            return;\r\n        for (let i = 0; i < widgetsList.length; i++) {\r\n            let node = widgetsList[i];\r\n            if (node == null || !node.isValid)\r\n                continue;\r\n            let widght = node.getComponent(cc.Widget);\r\n            if (widght) {\r\n                switch (dir) {\r\n                    case \"left\":\r\n                        widght.left += offset;\r\n                        break;\r\n                    case \"right\":\r\n                        widght.right += offset;\r\n                        break;\r\n                    case \"top\":\r\n                        widght.top += offset;\r\n                        break;\r\n                    case \"bottom\":\r\n                        widght.bottom += offset;\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public getSpreadImgPath() {\r\n        let filePath = jsb.fileUtils.getWritablePath() + Global.Toolkit.md5(Global.Setting.Urls.inviteUrl) + '_capImage.png';\r\n        return filePath\r\n    }\r\n\r\n    public removeEmoji(content: string) {\r\n        return content.replace(/(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/g, \"?\");\r\n    }\r\n\r\n    public checkContainsEmoji(content: string) {\r\n        let reg = /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/g\r\n        return content.match(reg) != null\r\n    }\r\n\r\n\r\n    public genDeviceId() {\r\n        // return \"123456788999\";\r\n        function S4() {\r\n            return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n        }\r\n        function guid() {\r\n            return (S4() + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + S4() + S4());\r\n        }\r\n        return guid();\r\n    }\r\n\r\n\r\n    public genDeviceInfo() {\r\n        let device: any = {}\r\n        device.device_id = \"[\" + Global.Setting.SystemInfo.deviceId + \"]\";\r\n        device.os_type = Global.Toolkit.getOsType();\r\n        device.os_version = cc.sys.os + \"|\" + cc.sys.osVersion + \"|\" + Global.Setting.SystemInfo.bundleName;\r\n        device.app_version = Global.Setting.SystemInfo.appVersion;\r\n        device.phone_model = Global.Setting.SystemInfo.osBuildModel;\r\n        device.sign = Global.Setting.SystemInfo.loginSign;\r\n        device.phone_device_brand = Global.Setting.SystemInfo.deviceBrand\r\n        device.wx_key = Global.Setting.SystemInfo.wxKey;\r\n        let hallSkin = Global.Setting.SystemInfo.hallSkin || \"\"\r\n        let gameSkin = Global.Setting.SystemInfo.gameSkin || \"\"\r\n        let packageTag = Global.Setting.SystemInfo.packageTag || \"\"\r\n        device.tagInfo = cc.js.formatStr(\"%s|%s|%s\", hallSkin, gameSkin, packageTag)\r\n        var nativeScreenWidth = Global.Setting.SystemInfo.nativeScreenWidth;\r\n        device.udid = Global.Setting.SystemInfo.udid.toString() || \"0\"\r\n        device.app_sign = Global.Setting.SystemInfo.appSign\r\n        var nativeScreenHeight = Global.Setting.SystemInfo.nativeScreenHeight;\r\n        if (Global.Setting.SystemInfo.webglData) {\r\n            let webglData = JSON.parse(Global.Setting.SystemInfo.webglData)\r\n            device.gv = webglData.version\r\n            device.gr = webglData.renderer\r\n        }\r\n        //屏幕宽度（像素）\r\n        device.w = Number(nativeScreenWidth < nativeScreenHeight ? nativeScreenWidth : nativeScreenHeight) || 0;\r\n        // 屏幕高度（像素）\r\n        device.h = Number(nativeScreenWidth > nativeScreenHeight ? nativeScreenWidth : nativeScreenHeight) || 0;\r\n        // Logger.error(\"++++++++++++++++++++++nativeScreenWidth::\"+device.w);\r\n        // Logger.error(\"-------------------------nativeScreenHeight::\"+device.h);\r\n        //Android 高版本设备码处理\r\n        if (cc.sys.os == cc.sys.OS_ANDROID && (Global.Toolkit.versionCompare(cc.sys.osVersion, \"9\") >= 0)) {\r\n            device.need_sid = 1\r\n        }\r\n        device.server_id = Global.Setting.SystemInfo.server_id\r\n        //模拟器\r\n        device.simulator = Global.Setting.SystemInfo.simulator;\r\n        device.entry = Global.Setting.SystemInfo.entry.toString() || \"\"\r\n        device.sign_type = Global.Setting.SystemInfo.sign_type.toString() || \"\"\r\n        device.ios_type = Global.Toolkit.getIosSignType()\r\n        return device;\r\n    }\r\n\r\n    public genRegInfo() {\r\n        let regInfo: any = {};\r\n        regInfo.packInfo = Global.Setting.ChannelInfo;   //渠道信息\r\n        regInfo.bundleName = Global.Setting.SystemInfo.bundleName;  //包名\r\n        regInfo.appVersion = Global.Setting.SystemInfo.appVersion;  //版本号\r\n        regInfo.firstOpenTime = this.getFirstOpenTime();  //第一次打开时间\r\n        regInfo.osType = this.getOsType();              //系统类型\r\n        //模拟器\r\n        regInfo.simulator = Global.Setting.SystemInfo.simulator;\r\n        regInfo.entry = Global.Setting.SystemInfo.entry.toString() || \"\"\r\n        regInfo.ios_type = Global.Toolkit.getIosSignType()\r\n        regInfo.udid = Global.Setting.SystemInfo.udid.toString() || \"0\"\r\n        regInfo.sign_type = Global.Setting.SystemInfo.sign_type.toString() || \"\"\r\n        regInfo.app_sign = Global.Setting.SystemInfo.appSign\r\n        let hallSkin = Global.Setting.SystemInfo.hallSkin || \"\"\r\n        let gameSkin = Global.Setting.SystemInfo.gameSkin || \"\"\r\n        let packageTag = Global.Setting.SystemInfo.packageTag || \"\"\r\n        regInfo.tagInfo = cc.js.formatStr(\"%s|%s|%s\", hallSkin, gameSkin, packageTag)\r\n        return JSON.stringify(regInfo);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @returns ios签名类型 0 未识别 1 MDM内部企业签 2非MDM内部企业签 3 MDM内部超级签 4非MDM内部超级签 5 外部超级签  7 TF包 6 自建TF\r\n     */\r\n    getIosSignType() {\r\n        let entry = Global.Setting.SystemInfo.entry.toString()\r\n        let signType = Global.Setting.SystemInfo.sign_type.toString()\r\n        let platform = Global.Setting.SystemInfo.nativePlatform\r\n\r\n        if (platform == \"TF\") {\r\n            return 7\r\n        }\r\n\r\n        if (platform == \"TF\" && signType == \"4\") {\r\n            return 6\r\n        }\r\n\r\n        if (signType == \"1\") {\r\n            if (entry == \"1\") {\r\n                return 1\r\n            }\r\n            return 2\r\n        }\r\n        else if (signType == \"2\") {\r\n            if (entry == \"1\") {\r\n                return 3\r\n            }\r\n            return 4\r\n        }\r\n        else if (signType == \"3\") {\r\n            return 5\r\n        }\r\n        else {\r\n            return 0\r\n        }\r\n    }\r\n\r\n    secondFormatHMS(s) {\r\n        var t = \"\";\r\n        if (s > -1) {\r\n            let hour = Math.floor(s / 3600);\r\n            let min = Math.floor(s / 60) % 60;\r\n            let sec = s % 60;\r\n            if (hour < 10) {\r\n                t += \"0\"\r\n            }\r\n            t += hour + \":\";\r\n            if (min < 10) { t += \"0\"; }\r\n            t += min + \":\";\r\n            if (sec < 10) { t += \"0\"; }\r\n            t += sec;\r\n        }\r\n        return t\r\n    }\r\n\r\n    //渠道号  包版本号  资源版本号\r\n    public genLoadingAppInfo() {\r\n        //直接调用原生方法 “getNativeParams” 返回所需数据。  数据来源-> 打包时使用的配置文件 例如588_588.json 中的\"ChannelID\"字段\r\n        //非原生 是 null\r\n        let packId = Global.Setting.SystemInfo.packChannel;\r\n\r\n        //直接调用原生方法 “getNativeParams” 返回所需数据。  数据来源-> 打包时使用的配置文件 例如588_588.json 中的\"AppVersion\"字段 或者命令打包时传递的参数 -Pver 附带的数据  \r\n        //如果配置文件中没有，并且打包时未传递-Pver参数，则使用 build.gradle 中的默认配置 \"1000\"\r\n        //非原生 客户端写死的是 40000\r\n        let appVer = Global.Setting.SystemInfo.appVersion;\r\n\r\n        //读取热更文件中的版本号，直接通过原生路径直接访问 project.manifest 中的cfgVersion字段\r\n        //非原生 客户端写死的是 0.0.0 \r\n        let cfgVer = Global.HotUpdateManager.getNativeHotUpdateVersion(\"hall\", true);\r\n\r\n        let isYunDunInit = Global.AppDun.getDunIsInitByType(DUNTYPE.YUN_DUN)\r\n        let isZADunInit = Global.AppDun.getDunIsInitByType(DUNTYPE.ZA_DUN)\r\n        let isAliDunInit = Global.AppDun.getDunIsInitByType(DUNTYPE.Ali_DUN)\r\n        let verStr = cfgVer + \"_\" + packId  //111_0_10000\r\n\r\n        if (isYunDunInit) {\r\n            verStr = verStr + \"_Y\"\r\n        }\r\n        if (isZADunInit) {\r\n            verStr = verStr + \"_Z\"\r\n        }\r\n        if (isAliDunInit) {\r\n            verStr = verStr + \"_A\"\r\n        }\r\n        verStr = verStr + \"_\" + appVer\r\n        //return verStr;\r\n\r\n        // appId 和 channelPack 都是通过服务器请求的，数据来自PreLoadProxy.ts 的reqServerAppConfig()方法\r\n        //  000 _  000 _40000 _3002 • 0\r\n        //cfgVer_packId_appVer_appId•channelPack\r\n\r\n\r\n        //  let skintype = Global.Setting.SystemInfo.hallSkin;\r\n        //临时使用appid代替 ，应该使用上行代码\r\n        let skintype = Global.Setting.appId;\r\n\r\n        let codeVersion = Global.HotUpdateManager.hallNewVersion;\r\n        return skintype + \"_\" + codeVersion;\r\n    }\r\n\r\n    public genAppInfo() {\r\n        let loadingAppInfo = this.genLoadingAppInfo();\r\n        // let appId = Global.Setting.appId;\r\n        // let channelPack = Global.Setting.ChannelInfo.configChannel;\r\n        let ChannelID = Global.Setting.ChannelInfo.getRegistChannel();\r\n        let appid = Global.Setting.appId;\r\n        return appid + \"_\" + ChannelID + \"_\" + loadingAppInfo;\r\n    }\r\n\r\n\r\n    public getFirstOpenTime() {\r\n        let time = Global.Setting.storage.get(\"FirstOpenTime\");\r\n        if (time == null || time == \"\") {\r\n            time = Date.now().toString();\r\n            Global.Setting.storage.set(\"FirstOpenTime\", time);\r\n        }\r\n        return time;\r\n    }\r\n\r\n    //从[0-max)中选 随机一个整数\r\n    public getRoundInteger(to: number, from: number = 0) {\r\n        return Math.floor(from + Math.random() * (to - from));\r\n    }\r\n\r\n    /**\r\n     * 将数据乱序排列(Fisher–Yates shuffle 洗牌算法)\r\n     * @param arr 原数组\r\n     */\r\n    public getOutOrderArray(arr: Array<any>) {\r\n        if (!arr) {\r\n            return [];\r\n        }\r\n        let tmpArr = [...arr];\r\n        let m = tmpArr.length,\r\n            t, i;\r\n        while (m) {\r\n            i = Math.floor(Math.random() * m--);\r\n            t = tmpArr[m];\r\n            tmpArr[m] = tmpArr[i];\r\n            tmpArr[i] = t;\r\n        }\r\n        return tmpArr;\r\n    }\r\n\r\n    public md5(content) {\r\n        if (this.MD5Hasher == null) {\r\n            this.MD5Hasher = Hasher._createHelper(MD5);\r\n        }\r\n        return this.MD5Hasher(content).toString();\r\n    }\r\n\r\n    //获取客户端运行时唯一id\r\n    public getClientUuid() {\r\n        this.uuid++;\r\n        return this.uuid;\r\n    }\r\n\r\n\r\n    public getOsType() {\r\n        if (!cc.sys.isNative)\r\n            return 1;\r\n        if (cc.sys.os == cc.sys.OS_ANDROID)\r\n            return 2;\r\n        if (cc.sys.os == cc.sys.OS_IOS)\r\n            return 3;\r\n        return 1;\r\n    }\r\n\r\n\r\n    public checkMegeServer() {\r\n\r\n        let packageAppid = Number(Global.Setting.SystemInfo.appID)\r\n        let dataAppid = Global.Setting.appId\r\n        if (dataAppid && packageAppid && packageAppid != dataAppid && !Global.Setting.isCloseMegeServer) {\r\n            return true\r\n        }\r\n        return false\r\n    }\r\n    public getOsTypeStr() {\r\n        let type = this.getOsType();\r\n        if (type == 2)\r\n            return \"android\";\r\n        if (type == 3)\r\n            return \"ios\"\r\n        return \"web\"\r\n    }\r\n\r\n    public loadWebPic(node: cc.Node, url: string) {\r\n        Global.ResourceManager.load(url, (error, texture) => {\r\n            if (error) {\r\n                Logger.error(\"--------------load pic error-------\" + error.msg);\r\n                return;\r\n            }\r\n            let sp = node.getComponent(cc.Sprite);\r\n            if (!sp) {\r\n                return Logger.error(\"_________找不到Sprite_________\");\r\n            }\r\n            let headwidth = node.width;\r\n            let headHeight = node.height;\r\n            sp.spriteFrame = new cc.SpriteFrame(texture);\r\n            node.width = headwidth;\r\n            node.height = headHeight;\r\n        })\r\n    }\r\n\r\n    public getLocalHeadSf(sfName: string, sprite?: cc.Sprite, width?: number, height?: number) {\r\n        // return Global.ResourceManager.getSprite(\"hall/texture/common/headImg\", sfName);\r\n        if (sfName == null || sfName == undefined || sfName == \"\") {\r\n            Logger.error(\"getLocalHeadSf() sfName is empty, return!!!\");\r\n            return null;\r\n        }\r\n\r\n        if (Number(sfName) && Number(sfName) > Global.Setting.headNameRange) {\r\n            let id = Number(sfName) % Global.Setting.headNameRange // 2020.1.20暂时特殊处理 防止大批头像一样的问题 // grace\r\n            if (id == 0) {\r\n                id = 1\r\n            }\r\n            sfName = (id).toString()\r\n        }\r\n        let spriteFrame = Global.ResourceManager.getSprite(\"hall/texture/common/headImg\", sfName);\r\n        if (spriteFrame == null) {\r\n            Logger.error(\"getLocalHeadSf() 找不到头像, sfName = \" + sfName + \", return!!!\");\r\n            return null;\r\n        }\r\n\r\n        if (sprite != null && sprite != undefined) {\r\n            width = (width != null) ? width : sprite.node.width;\r\n            height = (height != null) ? height : sprite.node.height;\r\n            sprite.sizeMode = cc.Sprite.SizeMode.RAW\r\n            sprite.trim = false\r\n            sprite.spriteFrame = spriteFrame;\r\n            sprite.node.width = width;\r\n            sprite.node.height = height;\r\n        }\r\n        return spriteFrame;\r\n    }\r\n\r\n\r\n    /**\r\n     * 加载头像框 -  子游戏专用（圆头像框）\r\n     * @param sprite 图片精灵\r\n     * @param headKuang 头像框的id值字符串\r\n     * @param bGuang 是否发光的框\r\n     */\r\n    public loadLocalHeadFrameByGames(sprite: cc.Sprite, headKuang: string, bGuang: boolean = false, isCustom: boolean = false) {\r\n        var atlasString = \"hall/texture/hall/game_head_kuang/game_head_kuang\";\r\n        //var atlasString = Global.Setting.SkinConfig.playerInfoAtlasPath;\r\n        var sfString = \"txkuang_vip\" + headKuang;\r\n        if (bGuang) {\r\n            sfString += \"_guang\";\r\n        }\r\n        return Global.ResourceManager.loadAutoAtlas(sprite, atlasString, sfString, () => {\r\n            sprite.sizeMode = isCustom ? cc.Sprite.SizeMode.CUSTOM : cc.Sprite.SizeMode.RAW\r\n            sprite.trim = false\r\n        }, false);\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * 加载头像框\r\n     * @param sprite 图片精灵\r\n     * @param headKuang 头像框的id值字符串  by cris\r\n     * @param bGuang 是否发光的框\r\n     */\r\n    public loadLocalHeadFrame(sprite: cc.Sprite, headKuang: string, bGuang: boolean = false, isCustom: boolean = false) {\r\n        //var atlasString = \"hall/texture/hall/playerInfo/AutoAtlas_playerinfo\";\r\n        var atlasString = Global.Setting.SkinConfig.playerInfoAtlasPath;\r\n        var sfString = \"txkuang_vip\" + headKuang;\r\n        if (bGuang) {\r\n            sfString += \"_guang\";\r\n        }\r\n        return Global.ResourceManager.loadAutoAtlas(sprite, atlasString, sfString, () => {\r\n            sprite.sizeMode = isCustom ? cc.Sprite.SizeMode.CUSTOM : cc.Sprite.SizeMode.RAW\r\n            sprite.trim = false\r\n        }, false);\r\n    }\r\n\r\n\r\n    /**\r\n    * 加载头像框 ,加载VIP里面的资源\r\n    * @param sprite 图片精灵\r\n    * @param headKuang 头像框的id值字符串\r\n    * @param bGuang 是否发光的框\r\n    */\r\n    public loadLocalHeadFrameByVip(sprite: cc.Sprite, headKuang: string, bGuang: boolean = false, isCustom: boolean = false) {\r\n        var atlasString = \"hall/texture/hall/playerInfo/AutoAtlas_playerinfo\";\r\n        //var atlasString = Global.Setting.SkinConfig.playerInfoAtlasPath;\r\n        var sfString = \"txkuang_vip\" + headKuang;\r\n        if (bGuang) {\r\n            sfString += \"_guang\";\r\n        }\r\n        return Global.ResourceManager.loadAutoAtlas(sprite, atlasString, sfString, () => {\r\n            sprite.sizeMode = isCustom ? cc.Sprite.SizeMode.CUSTOM : cc.Sprite.SizeMode.RAW\r\n            sprite.trim = false\r\n        }, false);\r\n    }\r\n\r\n    /**\r\n     * 加载vip大图标\r\n     * @param sprite 图片精灵\r\n     * @param vip vip等级\r\n     */\r\n    public loadLocalVip(sprite: cc.Sprite, vip) {\r\n        //var atlasString = \"hall/texture/hall/playerInfo/AutoAtlas_playerinfo\";\r\n        var atlasString = Global.Setting.SkinConfig.playerInfoAtlasPath;\r\n        var sfString = \"icon_v\" + vip;\r\n        return Global.ResourceManager.loadAutoAtlas(sprite, atlasString, sfString, null, false);\r\n    }\r\n\r\n    /**\r\n     * 加载vip小标识\r\n     * @param sprite 图片精灵\r\n     * @param vip vip等级\r\n     */\r\n    public loadLocalVipIcon(sprite: cc.Sprite, vip) {\r\n        //var atlasString = \"hall/texture/hall/playerInfo/AutoAtlas_playerinfo\";\r\n        var atlasString = Global.Setting.SkinConfig.playerInfoAtlasPath;\r\n        var sfString = \"vip_tq\" + vip;\r\n        return Global.ResourceManager.loadAutoAtlas(sprite, atlasString, sfString, null, false);\r\n    }\r\n\r\n\r\n    /**\r\n    * 加载vip小标识\r\n    * @param sprite 图片精灵\r\n    * @param vip vip等级\r\n    */\r\n    public loadVipIcon(sprite: cc.Sprite, vip) {\r\n        var atlasString = \"hall/texture/hall/playerInfo/AutoAtlas_playerinfo\";\r\n        // var atlasString = Global.Setting.SkinConfig.playerInfoAtlasPath;\r\n        var sfString = \"vip_tq\" + vip;\r\n        return Global.ResourceManager.loadAutoAtlas(sprite, atlasString, sfString, null, false);\r\n    }\r\n\r\n    /**\r\n     * 加载游戏里的任务指引图片\r\n     * @param sprite 图片精灵\r\n     * @param string 路径\r\n     * @param name 任务图片\r\n     */\r\n    public loadTaskIcon(sprite: cc.Sprite, string, name) {\r\n        var atlasString = Global.Setting.SkinConfig.playerInfoAtlasPath;\r\n        var sfString = \"atlasString\" + name;\r\n        return Global.ResourceManager.loadAutoAtlas(sprite, atlasString, sfString, null, false);\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    /**\r\n     * 加载vip小标识子游戏调用\r\n     * @param sprite 图片精灵\r\n     * @param vip vip等级\r\n     */\r\n    public loadLocalVipIconGame(sprite: cc.Sprite, vip) {\r\n        //var atlasString = \"hall/texture/hall/playerInfo/AutoAtlas_playerinfo\";\r\n        var atlasString = Global.Setting.SkinConfig.playerInfoAtlasPath;\r\n        var sfString = \"icon_v\" + vip;\r\n        return Global.ResourceManager.loadAutoAtlas(sprite, atlasString, sfString, null, false);\r\n    }\r\n\r\n\r\n\r\n    public isInteger(obj) {\r\n        return parseInt(obj, 10) === obj\r\n    }\r\n\r\n    /**\r\n     * 获取玩家金钱格式文本\r\n     */\r\n    public GetMoneyFormat(money: number = 0) {\r\n        // var realNum = money / Global.Setting.glodRatio;\r\n        // return realNum.toFixed(2);\r\n        return this.formatPointStr(money, true, false);//2019-7-15 xiaoC 捕鱼中可能出现小数点后3位，toFixed(2)会四舍五入导致显示>实际，统一使用截断处理\r\n    }\r\n\r\n    //格式化货币\r\n    //1 round  2 ceil 3 floor\r\n    public formatPoint(point: number, type = 3, defaultFix = 2): number {\r\n        let rate = Global.Setting.glodRatio;\r\n        let factor = Math.pow(10, defaultFix);      // 放大系数 决定了保留多少小数位取整\r\n        switch (type) {\r\n            case 1:\r\n                return Math.round(point * factor / rate) / factor;\r\n            case 2: {\r\n                let plus = point > 0 ? 1 : -1;               // debug记录正负, 处理负值情况\r\n                point = Math.abs(point);\r\n                return plus * Math.ceil(point * factor / rate) / factor;\r\n            }\r\n            case 3: {\r\n                let plus = point > 0 ? 1 : -1;               // debug记录正负, 处理负值情况\r\n                point = Math.abs(point);\r\n                return plus * Math.floor(point * factor / rate) / factor;\r\n            }\r\n            default:\r\n                return Math.round(point * factor / rate) / factor;\r\n        }\r\n    }\r\n\r\n    public dumpRes(full?: boolean) {\r\n        let fullMap = cc.loader['_cache'];\r\n        let dump = [];\r\n        for (let k in fullMap) {\r\n            let v = fullMap[k];\r\n            if (!full && (v.type == 'js' || v.type == 'uuid' || v.id.indexOf('res/raw-internal') >= 0 || v.id.indexOf('preview-scene') >= 0)) {\r\n                continue;\r\n            }\r\n            dump.push(v);\r\n        }\r\n        // console.info(dump);\r\n        // console.info(dump.length);\r\n    }\r\n\r\n\r\n    /**\r\n     * 格式化货币\r\n     * @param {number} point  服务器货币数量\r\n     * @param {boolean} [fix=false] 是否固定小数位\r\n     * @param {boolean} [withPlus=false] 是否显示加号\r\n     * @param {number} nFix? 设定小数位 fix=true有效\r\n     * @returns {string}\r\n     * @memberof Toolkit\r\n     */\r\n    public formatPointStr(point: number, fix: boolean = false, withPlus: boolean = false, nFix?: number): string {\r\n        if (!fix) {\r\n            let resStr = this.formatPoint(point, 3).toString();\r\n            if (withPlus && point >= 0)\r\n                resStr = \"+\" + resStr;\r\n            return resStr;\r\n        }\r\n        let fixNum = nFix || Global.Setting.fixCount;\r\n        let resStr = this.formatPoint(point, 3, nFix).toFixed(fixNum);\r\n        if (withPlus && point >= 0)\r\n            resStr = \"+\" + resStr;\r\n        return resStr;\r\n    }\r\n\r\n    /**\r\n     * 获取188****1234\r\n     * @param str 字符串\r\n     * @param preCount 保留前几位\r\n     * @param lastCount 保留后几位\r\n     */\r\n    public formateStrWithAsterisk(str: string = '', preCount = 0, lastCount = 0) {\r\n        if (str == '') return ''\r\n        let count = str.length;\r\n        if (preCount + lastCount <= count) {\r\n            let preStr = str.substr(0, preCount);\r\n            let lastStr = str.substr(-lastCount, lastCount);\r\n            let addStr = \"\"\r\n            for (let s = 0; s < count - preCount - lastCount; s++) {\r\n                addStr = addStr + \"*\";\r\n            }\r\n            return preStr.concat(addStr, lastStr);\r\n        }\r\n        else {\r\n            return '*********'\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 截取字符串，超出的用..代替\r\n     * @param str 字符串\r\n     * @param byteLen 保留长度，中文算两个字符\r\n     * @param notAppend true强制不添加..\r\n     */\r\n    public substrEndWithElli(str: string = '', byteLen: number, notAppend = false) {\r\n        str = Global.Toolkit.removeEmoji(str)\r\n        let count = this.getTotalBytes(str),\r\n            len = byteLen;\r\n        if (str == '' || count <= byteLen)\r\n            return str;\r\n        let result = '';\r\n        for (let i = 0; i < str.length; i++) {\r\n            let s = str.charAt(i);\r\n            len -= this.getByte(s);\r\n            if (len < 0)\r\n                break;\r\n            result += s;\r\n        }\r\n        if (notAppend) {\r\n            return result;\r\n        }\r\n        else {\r\n            return result + \"..\";\r\n        }\r\n    }\r\n\r\n    public getByte(str: string = '') {\r\n        let nByte = 0;\r\n        if (str.match(/[^\\x00-\\xff]/ig) != null) {\r\n            nByte = 2;\r\n        } else {\r\n            nByte = 1;\r\n        }\r\n        return nByte;\r\n    }\r\n\r\n    public getTotalBytes(str: string = '') {\r\n        let byteValLen = 0;\r\n        for (var i = 0; i < str.length; i++) {\r\n            let nByte = this.getByte(str[i]);\r\n            byteValLen += nByte;\r\n        }\r\n        return byteValLen;\r\n    }\r\n\r\n    /**\r\n     * 判断是否为{}或者[]\r\n     * @param obj 对象\r\n     */\r\n    public isEmptyObject(obj) {\r\n        for (let key in obj)\r\n            return !1;\r\n        return !0;\r\n    }\r\n\r\n    /**\r\n     * 获取圆上指定角度的点坐标\r\n     * @param centerPoint 圆心坐标\r\n     * @param radius 半径\r\n     * @param angle 角度\r\n     */\r\n    public getCirclePoint(centerPoint: cc.Vec3, radius: number, angle: number): cc.Vec3 {\r\n        let x = centerPoint.x + radius * Math.cos(2 * angle * Math.PI / 360);\r\n        let y = centerPoint.y + radius * Math.sin(2 * angle * Math.PI / 360);\r\n        return new cc.Vec3(x, y);\r\n    }\r\n\r\n    /**\r\n     * 随机获取圆内坐标\r\n     * @param centerPoint 圆心坐标\r\n     * @param radius 半径\r\n     */\r\n    public getCircleRandomInPoint(centerPoint: cc.Vec3, radius: number): cc.Vec3 {\r\n        let r = Math.random() * radius;     // [0, radius)\r\n        let a = Math.random() * 360;        // [0, 360)\r\n        return this.getCirclePoint(centerPoint, r, a);\r\n    }\r\n\r\n    /**\r\n     * 随机获取矩形内坐标\r\n     * @param centerPoint 中心\r\n     * @param w 宽\r\n     * @param h 高\r\n     */\r\n    public getRectRandomInPoint(centerPoint: cc.Vec3, w: number, h: number): cc.Vec3 {\r\n        let x = -w / 2 + Math.random() * w;\r\n        let y = -h / 2 + Math.random() * h;\r\n        return centerPoint.add(new cc.Vec3(x, y));\r\n    }\r\n\r\n    /**\r\n     * 计算两个向量的夹角 以startx正向为基准 返回[0, 90)U(90, 180]U(180, 270)U(-90, 0)取值\r\n     * @param start \r\n     * @param end \r\n     */\r\n    public getVec2Angle(start: cc.Vec3, end: cc.Vec3) {\r\n        let tan = (end.y - start.y) / (end.x - start.x);\r\n        if (end.x > start.x)                // 一、四象限为end相对start夹角\r\n            return Math.atan(tan) * 180 / Math.PI;\r\n        else                                // 二、三象限为start相对end夹角 取补角\r\n            return Math.atan(tan) * 180 / Math.PI + 180;\r\n    }\r\n\r\n    /**\r\n     * 计算两个平面向量距离\r\n     * @param start 起点\r\n     * @param end 终点\r\n     */\r\n    public getVec2Distance(start: cc.Vec3, end: cc.Vec3) {\r\n        return end.sub(start).mag();\r\n    }\r\n\r\n    /**\r\n     * 将node1坐标系下的point转换到node2坐标系下的本地坐标\r\n     * @param node1 要转换坐标的父节点\r\n     * @param node2 目的父节点\r\n     * @param point 转换坐标\r\n     */\r\n    public convertSameNodePos(node1: cc.Node, node2: cc.Node, point = cc.Vec3.ZERO) {\r\n        let worldPos = node1.convertToWorldSpaceAR(point);\r\n        return node2.convertToNodeSpaceAR(worldPos);\r\n    }\r\n    /**\r\n     * \r\n     * @param num \r\n     */\r\n    GetText(num: any) {\r\n        // let txt;\r\n        // if (num > 10000) {\r\n        //     txt = \r\n        // }\r\n        // else {\r\n        //     txt = num\r\n        // }\r\n        return (num / 10000).toFixed(2)\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param node 生成二维码的节点\r\n     * @param url 二维码的url\r\n     * @param margin 二维码边界空隙长宽\r\n     */\r\n    initQRCode(node, url, margin = 10) {\r\n        var ctx = Global.UIHelper.safeGetComponent(node, \"\", cc.Graphics)//node.addComponent(cc.Graphics);\r\n        if (ctx) {\r\n            ctx.clear()\r\n        }\r\n        // let Tip = new QRCodeTip()\r\n        // Global.ResourceManager.loadRes(\"hall/prefabs/ui/QRCodeTip\", (error, prefab)=>\r\n        // {\r\n        //     if(prefab)\r\n        //     {\r\n        //         Tip.setNode(cc.instantiate(prefab));\r\n        //         Tip.node.setParent(node);\r\n        //     }\r\n        // })\r\n        // Global.UI.showLodingTip(\"加载中\",node);\r\n        if (typeof (url) !== 'string') {\r\n            Logger.log('url is not string', url);\r\n            // Global.UI.hideLodingTip(\"加载失败\",node);\r\n            return;\r\n        }\r\n        this.QRCreate(ctx, url, margin, node);\r\n        // Global.UI.hideLodingTip(\"加载成功\",node);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param ctx 绘制api\r\n     * @param url 二维码的url\r\n     * @param margin 二维码边界空隙长宽\r\n     * @param node 生成二维码的节点\r\n     */\r\n    QRCreate(ctx, url, margin, node) {\r\n\r\n        ctx.clear();\r\n\r\n        //背景色\r\n        ctx.fillColor = cc.Color.WHITE;\r\n        let width = node.width;\r\n        ctx.rect(0 - width * 0.5, 0 - width * 0.5, width, width);\r\n        ctx.fill();\r\n        ctx.close();\r\n\r\n        //生成二维码数据\r\n        let qrcode = new QRCode(-1, QRErrorCorrectLevel.H);\r\n        qrcode.addData(url);\r\n        qrcode.make();\r\n        ctx.fillColor = cc.Color.BLACK;\r\n        let size = width - margin * 2;\r\n        let num = qrcode.getModuleCount();\r\n\r\n        let tileW = size / num;\r\n        let tileH = size / num;\r\n        let w = Math.ceil(tileW);\r\n        let h = Math.ceil(tileH);\r\n        for (let row = 0; row < num; row++) {\r\n            for (let col = 0; col < num; col++) {\r\n                if (qrcode.isDark(row, col)) {\r\n                    ctx.rect(margin + col * tileW - width * 0.5, size - tileH - Math.round(row * tileH) + margin - width * 0.5, w, h);\r\n                    ctx.fill();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**检测密码字符串是否合法 */\r\n    checkPWFormat(text: string) {\r\n        if (text.length < 6 || text.length > 16) {\r\n            return false;\r\n        }\r\n        for (let i = 0; i < text.length; i++) {\r\n            let c = text.charAt(i);\r\n            if (this._pwCheckString.indexOf(c) < 0) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    //比对版本\r\n    versionCompare(versionA: string, versionB: string) {\r\n        // Logger.log(\"JS Custom Version Compare: version A is \" + versionA + ', version B is ' + versionB);\r\n        // var vA = versionA.split('.');\r\n        // var vB = versionB.split('.');\r\n        // for (var i = 0; i < vA.length; ++i) {\r\n        //     var a = parseInt(vA[i]);\r\n        //     var b = parseInt(vB[i] || \"0\");\r\n        //     if (a === b) { continue; }\r\n        //     else { return a - b; }\r\n        // }\r\n        // if (vB.length > vA.length) { return -1; }\r\n        // else { return 0; }\r\n        // console.log(\"JS 自定义版本比较: version A : \" + versionA + ', version B : ' + versionB);\r\n        return versionA === versionB ? 0 : -1;\r\n    }\r\n\r\n    /**\r\n     * 深拷贝对象\r\n     * @param obj \r\n     */\r\n    public copyObj(obj: any) {\r\n        if (obj) {\r\n            return JSON.parse(JSON.stringify(obj));\r\n        }\r\n        else {\r\n            return {}\r\n        }\r\n    }\r\n\r\n    //请求appInfo   暂不卡主流程，如果时序出问题考虑等请求完成后再\r\n    private getDownloadAppInfo() {\r\n        if (!cc.sys.isNative)\r\n            return;\r\n        if (Global.Setting.ChannelInfo.serverAppInfoContent != null && Global.Setting.ChannelInfo.serverAppInfoContent != \"\")\r\n            return;\r\n        let param: any = {}\r\n        param.type = 2;\r\n        param.app = Global.Setting.appId.toString();\r\n        param.os = Global.Toolkit.getOsTypeStr();\r\n        param.sw = Global.Setting.SystemInfo.nativeScreenHeight.toString();\r\n        param.sh = Global.Setting.SystemInfo.nativeScreenWidth.toString();\r\n        param.sp = Global.Setting.SystemInfo.nativeScreenDensity.toString();\r\n        param.li = Global.Setting.SystemInfo.hostIp;\r\n        param.osBuildModel = Global.Setting.SystemInfo.osBuildModel;\r\n        param.osBuildVersionSDK = Global.Setting.SystemInfo.osBuildVersionSDK;\r\n        param.osBuildVersionRelease = Global.Setting.SystemInfo.osBuildVersionRelease;\r\n        param.device = this.genDeviceInfo();\r\n        Global.HallServer.sendClientLog(NetClientLog.DownloadAppInfo, param, (msg) => {\r\n            if (msg) {\r\n                let tmp: any = {}\r\n                tmp.ch = msg.pack;\r\n                tmp.ic = msg.invite_code;\r\n                Global.Setting.ChannelInfo.serverAppInfoContent = tmp;\r\n                if ((tmp.ch && tmp.ch != 0) || (tmp.ic && tmp.ic != 0))\r\n                    Global.Setting.ChannelInfo.sourceType = 4;\r\n            }\r\n        }, () => { return false })\r\n    }\r\n\r\n\r\n    /**\r\n     * 检查版本号是否支持\r\n     * @param supportVersion 默认版本号，当有iosVersion时，为安卓版本号\r\n     * @param iosVersion ios支持版本号，默认为0\r\n     */\r\n    public checkVersionSupport(supportVersion, iosVersion = 0) {\r\n        if (!cc.sys.isNative)\r\n            return true\r\n        let version = Global.Setting.SystemInfo.appVersion\r\n        let numVer = Number(version)\r\n\r\n        //iosVersion不为0时  ios版本号以iosVersion为准\r\n        if (cc.sys.platform == cc.sys.IPHONE && iosVersion && iosVersion > 0) {\r\n            supportVersion = iosVersion;\r\n        }\r\n\r\n        if (isNaN(numVer) || numVer >= supportVersion)\r\n            return true;\r\n        return false;\r\n    }\r\n\r\n    //--------------------------------------------------------------------------------\r\n\r\n    /**\r\n     * 游戏退出后在大厅弹提示框\r\n     * @param content 文本\r\n     * @param yFunc 确定回调\r\n     * @param nFunc 取消或者关闭回调\r\n     * @param type 1 显示确定提示框  2 显示确定取消提示框\r\n     */\r\n    public transmitHallMsg(content: string, yFunc?: Function, nFunc?: Function, type: number = 1) {\r\n        if (typeof (content) != \"string\")\r\n            return;\r\n        let info: any = {}\r\n        info.content = content;\r\n        info.yFunc = yFunc;\r\n        info.nFunc = nFunc;\r\n        info.type = type;\r\n        Game.DataBridge.msg = info;\r\n    }\r\n\r\n    /**\r\n     * 游戏tips大厅显示\r\n     * @param tips tips内容\r\n     */\r\n    public transmitHallTip(tips) {\r\n        Game.DataBridge.fastTipMsg = tips;\r\n    }\r\n\r\n    /**退出游戏后大厅显示Window */\r\n    public transmitHallWindow(window, args?) {\r\n        if (window == null) {\r\n            return\r\n        }\r\n        let info: any = {}\r\n        info.window = window\r\n        info.args = args\r\n        Game.DataBridge.cacheShow = info;\r\n    }\r\n\r\n    public reportLog(key: string, param: any) {\r\n        let data: any = {};\r\n        data.type = \"debug\";\r\n        data.key = key;\r\n        let uid = Number(Global.Setting.storage.get(HallStorageKey.Uid)) || 0;\r\n        data.appid = Global.Setting.appId;\r\n        data.uid = uid;\r\n        data.phone_code = this.getOsTypeStr();\r\n        try {\r\n            data.data = JSON.stringify(param);\r\n        }\r\n        catch (e) {\r\n            Logger.error(\"encode error\", key);\r\n            return;\r\n        }\r\n        data.device = this.genDeviceInfo();\r\n        Global.HallServer.sendClientLog(NetClientLog.ClientLogReq, data, null, () => { return false }, false);\r\n    }\r\n\r\n    public parseTime(time, cFormat = \"\") {\r\n        if (arguments.length === 0) {\r\n            return null;\r\n        }\r\n        const format = cFormat || '{y}-{m}-{d} {h}:{i}:{s}';\r\n        let date;\r\n        if (typeof time === 'object') {\r\n            date = time;\r\n        } else {\r\n            if ((typeof time === 'string') && (/^[0-9]+$/.test(time))) {\r\n                time = parseInt(time);\r\n            }\r\n            if ((typeof time === 'number') && (time.toString().length === 10)) {\r\n                time = time * 1000;\r\n            }\r\n            date = new Date(time);\r\n        }\r\n        const formatObj = {\r\n            y: date.getFullYear(),\r\n            m: date.getMonth() + 1,\r\n            d: date.getDate(),\r\n            h: date.getHours(),\r\n            i: date.getMinutes(),\r\n            s: date.getSeconds(),\r\n            a: date.getDay()\r\n        }\r\n        const time_str = format.replace(/{(y|m|d|h|i|s|a)+}/g, (result, key) => {\r\n            let value = formatObj[key];\r\n            // Note: getDay() returns 0 on Sunday\r\n            if (key === 'a') { return ['日', '一', '二', '三', '四', '五', '六'][value] };\r\n            if (result.length > 0 && value < 10) {\r\n                value = '0' + value;\r\n            }\r\n            return value || 0;\r\n        })\r\n        return time_str;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param url 图片地址\r\n     * @param id 唯一标识\r\n     * @param callback 加载完成的回调\r\n     */\r\n    public LoadPicToNative(url, id, callback?) {\r\n        let name = Global.Toolkit.md5(id)\r\n        let filePath = jsb.fileUtils.getWritablePath() + name + '.jpg';\r\n        if (!jsb.fileUtils.isFileExist(filePath)) {\r\n            let xhr = cc.loader.getXMLHttpRequest();\r\n            xhr.onreadystatechange = function () {\r\n                if (xhr.readyState === 4) {\r\n                    if (xhr.status === 200) {\r\n                        this.saveFileToNative(filePath, xhr.response, callback);\r\n                    } else {\r\n                        this.saveFileToNative(null);\r\n                    }\r\n                }\r\n            }.bind(this);\r\n            xhr.responseType = 'arraybuffer';\r\n            xhr.open(\"GET\", url, true);\r\n            xhr.send();\r\n        }\r\n        else {\r\n            this.loadEnd(filePath, callback);\r\n        }\r\n    }\r\n\r\n    public saveFileToNative(filepath, data, callback?) {\r\n        if (typeof data !== 'undefined') {\r\n            // if( !jsb.fileUtils.isDirectoryExist(filepath) ){\r\n            //     jsb.fileUtils.createDirectory(filepath);\r\n            // }\r\n            if (jsb.fileUtils.writeDataToFile(new Uint8Array(data), filepath)) {\r\n                Logger.log('Remote write file succeed.');\r\n                this.loadEnd(filepath, callback);\r\n            } else {\r\n                Logger.log('Remote write file failed.');\r\n            }\r\n        } else {\r\n            Logger.log('Remote download file failed.');\r\n            if (callback) {\r\n                callback(null)\r\n            }\r\n        }\r\n    }\r\n\r\n    public loadEnd(filepath, callback) {\r\n        cc.loader.load(filepath, function (err, texture) {\r\n            if (err) {\r\n                if (jsb.fileUtils.isFileExist(filepath)) {\r\n                    jsb.fileUtils.removeFile(filepath)\r\n                }\r\n                Logger.log(err);\r\n            } else {\r\n                if (texture) {\r\n                    if (callback) {\r\n                        callback(texture);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    public showMoneyNotEnough(str = \"金币不够啦，请前往充值！\") {\r\n        Global.UI.showSingleBox(str, () => {\r\n            Global.UI.show(\"WndRecharge\");\r\n        })\r\n    }\r\n\r\n    /***\r\n     * 检测是否为有效的数字\r\n     * ***/\r\n    public checkNumValid(value) {\r\n        let num = Number(value)\r\n        if (num) {\r\n            let isBigNum = BigNumber(num).gt(Number.MAX_SAFE_INTEGER)\r\n            if (isBigNum) {\r\n                return false;\r\n            } else {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public checkMoney(level = \"l0\", gameData) {\r\n        if (!gameData) {\r\n            Logger.error(\"游戏数据为空\")\r\n            return false\r\n        }\r\n        if (gameData.levels) {\r\n            for (let index = 0; index < gameData.levels.length; index++) {\r\n                let levelStr = gameData.levels[index].level;\r\n                if (levelStr && levelStr == level) {\r\n                    let pointLow = gameData.levels[index].PointLow;\r\n                    if (pointLow && Global.PlayerData.point < pointLow) {\r\n                        let limit = Global.Toolkit.formatPointStr(pointLow);\r\n                        let str = \"游戏准入\" + limit + \"金币，请您充值哦！\"\r\n                        Global.Toolkit.showMoneyNotEnough(str)\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * 跟进配置判断是否限制充值\r\n     */\r\n    public checkRechargeLimited() {\r\n        if (Global.Setting.rechargeLimited) {\r\n            if (Global.PlayerData.phone == \"\") {\r\n                Global.UI.showSingleBox(\"该功能需要绑定手机号后才能使用，是否立即绑定手机？\", () => {\r\n                    Global.UI.show(\"WndBindPhone\");\r\n                })\r\n                return true\r\n            }\r\n        }\r\n        return false\r\n    }\r\n\r\n\r\n    /**\r\n     * \r\n     * @param reason 错误码\r\n     */\r\n\r\n    public checkMoneyError(errno) {\r\n        if (errno == 102) {\r\n            Global.UI.showSingleBox(\"金币不够啦，是否前往充值？\", () => {\r\n                Global.UI.show(\"WndRecharge\");\r\n            })\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /* 设置节点的父节点，保持位置不变\r\n    * @param child 要操作节点\r\n    * @param parent 要设置到的父节点\r\n    * @param isFixed 是否保持位置不变\r\n    */\r\n    public setNodeParent(child: cc.Node, parent: cc.Node, isFixed: boolean = true) {\r\n        if (child && parent && cc.isValid(child) && cc.isValid(parent)) {\r\n            if (isFixed) {\r\n                let pos = this.convertSameNodePos(child.parent, parent, child.position);\r\n                child.setParent(parent);\r\n                child.setPosition(pos);\r\n            }\r\n            else {\r\n                child.setParent(parent);\r\n            }\r\n        }\r\n        else {\r\n            Logger.error('父子节点非法');\r\n        }\r\n    }\r\n\r\n    /* 超过万元显示 多少万\r\n    * @param value 金额\r\n    */\r\n    public formatMillion(value: number): string {\r\n        if (value > 9999)\r\n            return (Math.floor(value / 1000) / 10) + \"万\";  //保留一位小数\r\n        else if (value <= 9999 && value >= -9999)\r\n            return value + \"\";\r\n        else\r\n            return -(Math.floor(Math.abs(value) / 1000) / 10) + \"万\";\r\n    }\r\n\r\n\r\n    public CheckGameVersion(version) {\r\n        if (version == null || version == undefined)//服务器不发表示版本正常\r\n        {\r\n            return true\r\n        }\r\n        let gameInfo = Global.GameData.getGameInfo(Global.HotUpdateManager.CurrentGame)\r\n        if (version == gameInfo.native_version) {\r\n            return true\r\n        }\r\n        else if (this.versionCompare(version, gameInfo.native_version) < 0) {\r\n            return false\r\n        }\r\n        else {\r\n            return true\r\n        }\r\n    }\r\n\r\n    public CheckFileExist(fileName: string) {\r\n        if (CC_JSB) {\r\n            return jsb.fileUtils.isFileExist(fileName)\r\n        }\r\n        return false\r\n    }\r\n\r\n    public getFirstLoginTime() {\r\n        let time = Global.Setting.storage.get(HallStorageKey.BaiduIntervelTimes);\r\n        if (time == null || time == \"\") {\r\n            time = new Date().getTime()\r\n            Global.Setting.storage.set(HallStorageKey.BaiduIntervelTimes, time);\r\n        }\r\n        return time;\r\n    }\r\n\r\n    //检测是否可以使用微信\r\n    public checkIsPlatformShowWX() {\r\n        let isShow = true\r\n        let platform = Global.Setting.SystemInfo.nativePlatform\r\n        switch (platform) {\r\n            case \"majiabao\":\r\n            case \"appstore\":\r\n            case \"testflight\":\r\n            case \"appstore_sdktype\":\r\n                isShow = false;\r\n                break;\r\n        }\r\n        return isShow;\r\n    }\r\n\r\n    //检测是否可以使用支付宝\r\n    public checkIsPlatformShowZhifubao() {\r\n        let isShow = true\r\n        let platform = Global.Setting.SystemInfo.nativePlatform\r\n        switch (platform) {\r\n            case \"appstore\":\r\n            case \"appstore_sdktype\":\r\n                isShow = false;\r\n                break;\r\n        }\r\n        return isShow;\r\n    }\r\n\r\n    public SectionToChinese(section) {\r\n        var chnNumChar = [\"零\", \"\", \"二\", \"三\", \"四\", \"五\", \"六\", \"七\", \"八\", \"九\"];\r\n        var chnUnitChar = [\"\", \"十\", \"百\", \"千\", \"万\", \"亿\", \"万亿\", \"亿亿\"];\r\n        var strIns = '', chnStr = '';\r\n        var unitPos = 0;\r\n        var zero = true;\r\n        while (section > 0) {\r\n            var v = section % 10;\r\n            if (v === 0) {\r\n                if (!zero) {\r\n                    zero = true;\r\n                    chnStr = chnNumChar[v] + chnStr;\r\n                }\r\n            } else {\r\n                zero = false;\r\n                strIns = chnNumChar[v];\r\n                strIns += chnUnitChar[unitPos];\r\n                chnStr = strIns + chnStr;\r\n            }\r\n            unitPos++;\r\n            section = Math.floor(section / 10);\r\n        }\r\n        return chnStr;\r\n    }\r\n\r\n    public DealWithUrl(url: string) {\r\n\r\n        if (typeof (url) != \"string\" || !url) {\r\n            Logger.error(\"链接格式不对\")\r\n            return null\r\n        }\r\n        return encodeURI(url.replace(\"\\t\", \"\").trim())\r\n\r\n    }\r\n\r\n    //替换控制字符\r\n    public strReplaceCtrChar(str) {\r\n        if (str) {\r\n            return str.replace(/[\\x00-\\x1f]+/g, '');\r\n        }\r\n        return str\r\n    }\r\n    //通过排序比较2个数组是否包含相同的元素\r\n    public compareArraySort(a1, a2) {\r\n        if ((!a1 && a2) || (a1 && !a2)) return false;\r\n        if (a1.length !== a2.length) return false;\r\n        let a11 = [].concat(a1);\r\n        let a22 = [].concat(a2);\r\n        a11 = a11.sort();\r\n        a22 = a22.sort();\r\n        for (var i = 0, n = a11.length; i < n; i++) {\r\n            if (a11[i] !== a22[i]) return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /**\r\n    * 如果是艾特外链组装参数\r\n    * @param url 原有链接\r\n    * @returns \r\n    */\r\n    AssembyUrl(url) {\r\n        let userid = Global.PlayerData.uid;\r\n        let appid = Global.customApp.getAppID()\r\n        let vip = Global.PlayerData.vip\r\n        let appName = Global.Setting.SystemInfo.appName\r\n        let userName = Global.PlayerData.nickname\r\n        let ip = Global.PlayerData.ip\r\n        let ostype = Global.Toolkit.getOsType()\r\n        let point = Global.PlayerData.point\r\n        let checkStr = cc.js.formatStr(\"%s-%s-[%s]-%s-%s-game688@aite\", appid, 1, userid, vip, userName)\r\n\r\n        let appKey = Global.AESUtil.md5(checkStr)\r\n\r\n        url = `${url}&userid=${userid}&appid=${appid}&username=${userName}&appname=${appName}&appkey=${appKey}&vip=${vip}&ip=${ip}&ostype=${ostype}&point=${point}`\r\n\r\n        return url\r\n    }\r\n\r\n}"]}