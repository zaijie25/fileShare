{"version":3,"sources":["assets\\hall\\scripts\\logic\\core\\tool\\AppHelper.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAIA,SAAS;AACT;IAAA;IAmTA,CAAC;IA3SiB,cAAI,GAAlB;QACI,IAAI,CAAC,mBAAmB,GAAG,EAAE,CAAA;QAC7B,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,aAAa,EAAE,CAAC,CAAC;IAEvD,CAAC;IAEa,sBAAY,GAA1B;QACI,OAAQ,uBAAuB,CAAC;IACpC,CAAC;IAGa,mBAAS,GAAvB,UAAwB,GAAU;QAE9B,YAAY;QACZ,qDAAqD;QACrD,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,SAAS,EAAE,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC,QAAQ,EAAE,CAAC,CAAC;QACvF,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,YAAY,EAAE,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC;QACjE,8EAA8E;QAC9E,yFAAyF;QACzF,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,kBAAkB,EAAE,kBAAkB,CAAC,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;QAE/G,IAAG,MAAM,CAAC,UAAU,IAAI,IAAI;YACxB,OAAO,GAAG,CAAC;QACf,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,UAAU,EAAE,MAAM,CAAC,UAAU,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC;QAChE,IAAI,MAAM,GAAG,GAAG,CAAC;QACjB,IACA;YACI,IAAG,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAE,CAAC;gBAC5B,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,WAAW,EAAE,kBAAkB,CAAE,MAAM,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC;YACvF,IAAG,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;gBACxB,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,WAAW,EAAE,kBAAkB,CAAC,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC;YACzF,GAAG,GAAG,MAAM,CAAC;SAChB;QACD,OAAM,CAAC,EACP;YACI,MAAM,CAAC,KAAK,CAAC,0BAA0B,CAAC,CAAC;YACzC,MAAM,CAAC,UAAU,CAAC,iBAAiB,CAAC,gBAAgB,EACpD;gBACI,GAAG,EAAC,0BAA0B;gBAC9B,KAAK,EAAC,MAAM,CAAC,UAAU,CAAC,KAAK;gBAC7B,QAAQ,EAAC,MAAM,CAAC,UAAU,CAAC,QAAQ;gBACnC,GAAG,EAAC,GAAG;aACV,CAAC,CAAA;SACL;QAGD,OAAO,GAAG,CAAC;IACf,CAAC;IAED,sBAAkB,0BAAa;aAA/B;YAEI,OAAO,IAAI,CAAA;QACf,CAAC;;;OAAA;IAGD,sBAAkB,0BAAa;QAD/B,UAAU;aACV;YACI,OAAO,IAAI,CAAA;QACf,CAAC;;;OAAA;IAGD,sBAAkB,2BAAc;QADhC,WAAW;aACX;YACI,OAAO,IAAI,CAAA;QACf,CAAC;;;OAAA;IAGD,sBAAkB,4BAAe;QADjC,cAAc;aACd;YACI,OAAO,IAAI,CAAA;QACf,CAAC;;;OAAA;IAED,sBAAkB,wBAAW;QAD7B,aAAa;aACb;YACI,OAAO,IAAI,CAAA;QACf,CAAC;;;OAAA;IAED,sBAAkB,2CAA8B;QADhD,sBAAsB;aACtB;YACI,OAAO,IAAI,CAAA;QACf,CAAC;;;OAAA;IAGD,sBAAkB,oCAAuB;QADzC,cAAc;aACd;YACI,OAAO,IAAI,CAAA;QACf,CAAC;;;OAAA;IAGD,sBAAkB,qCAAwB;QAD1C,WAAW;aACX;YACI,OAAO,IAAI,CAAA;QACf,CAAC;;;OAAA;IAGD,sBAAkB,wCAA2B;QAD7C,WAAW;aACX;YACI,OAAO,IAAI,CAAA;QACf,CAAC;;;OAAA;IAGD,sBAAkB,4CAA+B;QADjD,wBAAwB;aACxB;YACI,OAAO,IAAI,CAAA;QACf,CAAC;;;OAAA;IAGD,sBAAkB,yBAAY;QAD9B,cAAc;aACd;YACI,OAAO,IAAI,CAAA;QACf,CAAC;;;OAAA;IAED,sBAAkB,uBAAU;QAD5B,eAAe;aACf;YACI,OAAO,IAAI,CAAA;QACf,CAAC;;;OAAA;IAED,sBAAkB,sBAAS;QAD3B,WAAW;aACX;YACI,OAAO,IAAI,CAAA;QACf,CAAC;;;OAAA;IAqBD,SAAS;IACK,yBAAe,GAA7B;QAEI,OAAO,IAAI,CAAC,mBAAmB;eACxB,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC;eAC3B,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,gBAAgB,EAAE,CAAC;IAC1D,CAAC;IAED,WAAW;IACG,6BAAmB,GAAjC;QAEI,IAAG,CAAC,IAAI,CAAC,eAAe,EAAE;YACtB,OAAO,KAAK,CAAC;QACjB,eAAe;QACf,OAAO,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC;IACjD,CAAC;IAIa,mBAAS,GAAvB;QAEI,IAAI,KAAK,GAAG,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC;QACjC,OAAO,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IAC9B,CAAC;IAEa,6BAAmB,GAAjC;QAEI,IAAG,CAAC,IAAI,CAAC,UAAU,EAAE;YACjB,OAAO,KAAK,CAAC;QACjB,IAAI,GAAG,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;QAC3B,IAAG,GAAG,IAAI,IAAI;YACV,OAAO,IAAI,CAAC;QAChB,IAAI,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC;QACtB,IAAG,GAAG,CAAC,MAAM,GAAG,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,EACjC;YACI,MAAM,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;SAC7B;QACD,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC;IAEa,6BAAmB,GAAjC;QAEI,IAAG,CAAC,IAAI,CAAC,UAAU,EAAE;YACjB,OAAO,KAAK,CAAC;QACjB,IAAI,GAAG,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;QAC3B,IAAG,GAAG,IAAI,IAAI;YACV,OAAO,IAAI,CAAC;QAChB,IAAI,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC;QACtB,IAAG,GAAG,CAAC,MAAM,GAAG,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,EACjC;YACI,MAAM,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;SAC7B;QACD,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC;IAEa,+BAAqB,GAAnC,UAAoC,UAAiB;QAAjB,2BAAA,EAAA,iBAAiB;QACjD,IAAI,QAAQ,GAAG,MAAM,CAAC,OAAO,CAAC,qBAAqB,EAAE,CAAA;QACrD,IAAI,CAAC,QAAQ,IAAI,UAAU,EAAC;YACxB,MAAM,CAAC,EAAE,CAAC,OAAO,CAAC,qBAAqB,CAAC,CAAC;SAC5C;QACD,OAAO,QAAQ,CAAC;IACpB,CAAC;IAGD,UAAU;IACI,sBAAY,GAA1B,UAA2B,GAAG;QAE1B,IAAG,CAAC,IAAI,CAAC,eAAe,EAAE;YACtB,OAAO,KAAK,CAAC;QACjB,IAAI,aAAa,GAAG,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;QAChD,IAAG,aAAa,IAAI,aAAa,CAAC,eAAe,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YAC/D,OAAO,IAAI,CAAC;QAChB,OAAO,KAAK,CAAC;IACjB,CAAC;IAGa,oBAAU,GAAxB,UAAyB,UAAiB;QAAjB,2BAAA,EAAA,iBAAiB;QAEtC,UAAU;QACV,uFAAuF;QACvF,mBAAmB;QACnB,IAAG,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,UAAU,IAAI,IAAI,IAAI,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,UAAU,IAAI,EAAE;YACzF,OAAO,IAAI,CAAC;QAChB,eAAe;QACf,IAAG,MAAM,CAAC,OAAO,CAAC,WAAW,IAAI,EAAE,IAAI,MAAM,CAAC,OAAO,CAAC,WAAW,IAAI,IAAI;YACrE,OAAO,IAAI,CAAC;QAChB,IAAI,SAAS,GAAG,MAAM,CAAC,OAAO,CAAC,kBAAkB,CAAC;QAClD,IAAG,EAAE,CAAC,GAAG,CAAC,QAAQ,IAAI,EAAE,CAAC,GAAG,CAAC,MAAM;YAC/B,SAAS,GAAG,MAAM,CAAC,OAAO,CAAC,cAAc,CAAC;QAC9C,IAAG,SAAS,IAAI,IAAI,IAAI,SAAS,IAAI,EAAE;YACnC,OAAO,IAAI,CAAC;QAChB,IAAG,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,UAAU,CAAC,IAAI,SAAS;eACrE,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,WAAW;YAChF,OAAO,IAAI,CAAC;QAChB,IAAI,UAAU,EAAC;YACX,MAAM,CAAC,EAAE,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;SACpC;QAED,OAAO,KAAK,CAAC;IACjB,CAAC;IAEG;;;;;GAKD;IACW,4BAAkB,GAAhC,UAAiC,KAAK,EAAE,OAAc,EAAE,mBAA2B;QAA3C,wBAAA,EAAA,cAAc;QAAE,oCAAA,EAAA,2BAA2B;QAE/E,IAAI;QACJ,IAAG,MAAM,CAAC,OAAO,CAAC,KAAK,IAAI,KAAK;YAC5B,OAAO,KAAK,CAAC;QACjB,IAAG,OAAO,IAAI,IAAI,IAAI,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,OAAO;YAC1E,OAAO,IAAI,CAAC;QAChB,IAAG,mBAAmB,IAAI,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,OAAO;YACjF,OAAO,IAAI,CAAC;QAChB,OAAO,KAAK,CAAC;IACjB,CAAC;IAEO;;;;EAIL;IACW,sBAAY,GAA1B,UAA2B,OAAc,EAAE,mBAA2B;QAA3C,wBAAA,EAAA,cAAc;QAAE,oCAAA,EAAA,2BAA2B;QAElE,IAAG,OAAO,IAAI,IAAI,IAAI,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,OAAO;YAC1E,OAAO,IAAI,CAAC;QAChB,IAAG,mBAAmB,IAAI,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,OAAO;YACjF,OAAO,IAAI,CAAC;QAChB,OAAO,KAAK,CAAC;IACjB,CAAC;IAEa,sBAAY,GAA1B,UAA2B,WAAW,EAAE,gBAAgB,EAAE,gBAAgB;QAEtE,KAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,mBAAmB,CAAC,MAAM,EAAE,CAAC,EAAE,EACvD;YACI,IAAI,QAAQ,GAAG,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;YAC3C,IAAG,QAAQ,CAAC,gBAAgB,EAAE,EAC9B;gBACI,QAAQ,CAAC,YAAY,CAAC,WAAW,EAAE,gBAAgB,EAAE,gBAAgB,CAAC,CAAA;aACzE;SACJ;IACL,CAAC;IAEa,wBAAc,GAA5B;QAEI,KAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,mBAAmB,CAAC,MAAM,EAAE,CAAC,EAAE,EACvD;YACI,IAAI,QAAQ,GAAG,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;YAC3C,IAAG,QAAQ,CAAC,gBAAgB,EAAE,EAC9B;gBACI,QAAQ,CAAC,cAAc,EAAE,CAAA;aAC5B;SACJ;IACL,CAAC;IAEa,yBAAe,GAA7B,UAA8B,IAAI,EAAE,IAAI,EAAE,MAAM;QAE5C,KAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,mBAAmB,CAAC,MAAM,EAAE,CAAC,EAAE,EACvD;YACI,IAAI,QAAQ,GAAG,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;YAC3C,IAAG,QAAQ,CAAC,gBAAgB,EAAE,EAC9B;gBACI,QAAQ,CAAC,eAAe,CAAC,IAAI,EAAE,IAAI,EAAE,MAAM,CAAC,CAAA;aAC/C;SACJ;IACL,CAAC;IA7Sa,6BAAmB,GAAoB,EAAE,CAAA;IAGvD,OAAO;IACO,gBAAM,GAAW,KAAK,CAAC;IA8GrC,iBAAiB;IACH,gBAAM,GACpB;QACI,IAAI,EACJ;YACI,OAAO,EAAC,CAAC,KAAK,EAAE,aAAa,CAAC;YAC9B,OAAO,EAAC,CAAC,KAAK,EAAE,aAAa,CAAC;SACjC;QACD,IAAI,EACJ;YACI,OAAO,EAAC,CAAC,KAAK,EAAE,aAAa,CAAC;YAC9B,OAAO,EAAC,CAAC,KAAK,EAAE,aAAa,CAAC;SACjC;QACD,IAAI,EACJ;YACI,OAAO,EAAC,CAAC,KAAK,EAAE,aAAa,CAAC;YAC9B,OAAO,EAAC,CAAC,KAAK,EAAE,aAAa,CAAC;SACjC;KACJ,CAAA;IA4KL,gBAAC;CAnTD,AAmTC,IAAA;kBAnToB,SAAS;AAsT9B,UAAU;AACV;IAAA;IAuBA,CAAC;IArBU,iCAAO,GAAd;QAEI,OAAO,EAAE,CAAA;IACb,CAAC;IACM,0CAAgB,GAAvB;QAEI,OAAO,KAAK,CAAC;IACjB,CAAC;IACD,0BAA0B;IACnB,sCAAY,GAAnB,UAAoB,WAAW,EAAE,gBAAgB,EAAE,gBAAgB,IAAE,CAAC;IAAA,CAAC;IAEvE,6BAA6B;IACtB,wCAAc,GAArB;IAEA,CAAC;IAED,qCAAqC;IAC9B,yCAAe,GAAtB,UAAuB,IAAI,EAAE,IAAI,EAAE,MAAM;IAGzC,CAAC;IACL,sBAAC;AAAD,CAvBA,AAuBC,IAAA;AAvBY,0CAAe;AAyB5B,2EAA2E;AAC3E;IAAmC,iCAAe;IAAlD;QAAA,qEAsDC;QApDW,iBAAW,GAAG,KAAK,CAAC;QACpB,aAAO,GAAG,IAAI,CAAA;QACf,qBAAe,GAAG,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;;IAkDhD,CAAC;IAhDU,+BAAO,GAAd;QAEI,OAAO,OAAO,CAAA;IAClB,CAAC;IAEM,wCAAgB,GAAvB;QAEI,OAAO,KAAK,CAAC;QACb,wFAAwF;IAC5F,CAAC;IAEM,sCAAc,GAArB;IAIA,CAAC;IAID,sBAAW,mCAAQ;aAAnB;YAEI,OAAO,IAAI,CAAC,WAAW,CAAC;QAC5B,CAAC;aAED,UAAqB,IAAI;YAErB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAA;YACvB,IAAG,IAAI,EACP;gBACI,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,kBAAkB,CAAC,CAAC;gBACnD,IAAG,IAAI,CAAC,OAAO,EACf;oBACI,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,CAAA;iBAC9B;aACJ;QACL,CAAC;;;OAbA;IAeM,uCAAe,GAAtB,UAAuB,IAAI,EAAE,MAAM,EAAE,MAAM;QAEvC,IAAG,IAAI,IAAI,SAAS,EACpB;YACI,4DAA4D;YAC5D,mBAAmB;YACnB,cAAc;YACd,yCAAyC;YACzC,0GAA0G;SAC7G;IACL,CAAC;IACL,oBAAC;AAAD,CAtDA,AAsDC,CAtDkC,eAAe,GAsDjD;AAtDY,sCAAa","file":"","sourceRoot":"/","sourcesContent":["import CustomAppInfo from \"../../hallcommon/app/CustomApp\";\r\nimport HallStorageKey from \"../../hallcommon/const/HallStorageKey\";\r\n\r\n\r\n//渠道包配置相关\r\nexport default class AppHelper {\r\n    public static cfg;\r\n\r\n    public static specialPlatfromList: BaiduPlatform[] = []\r\n\r\n   \r\n    //是否为提现\r\n    public static isCash:boolean = false;\r\n    public static init(){\r\n        this.specialPlatfromList = []\r\n        this.specialPlatfromList.push(new BaiduPlatform());\r\n        \r\n    }\r\n\r\n    public static getConfigUrl(){\r\n        return  \"https://d.dtdsnt.com/\";\r\n    }\r\n\r\n    \r\n    public static formatUrl(url:string)\r\n    {\r\n        //使用正则可以匹配多个\r\n        // url = url.replace(\"\\[app\\]\", LinkParamHelper.app);\r\n        url = url.replace(/\\[ch\\]/g, Global.Setting.ChannelInfo.getPlayerChannel().toString());\r\n        url = url.replace(/\\[appid\\]/g, Global.Setting.appId.toString());\r\n        // url = url.replace(\"\\[backurl\\]\", encodeURI(URLDefine.getWebBackGameUrl()));\r\n        // url = url.replace(/\\[invite_code\\]/g, encodeURIComponent(ToolKit.getInviteCode()[1]));\r\n        url = url.replace(/\\[invite_code\\]/g, encodeURIComponent(Global.Setting.ChannelInfo.getInviteId().toString()));\r\n\r\n        if(Global.PlayerData == null)\r\n            return url;\r\n        url = url.replace(/\\[uid\\]/g, Global.PlayerData.uid.toString());\r\n        let tmpUrl = url;\r\n        try\r\n        {\r\n            if(tmpUrl.indexOf(\"token\") > - 1)\r\n                tmpUrl = tmpUrl.replace(\"\\[token\\]\", encodeURIComponent( Global.PlayerData.token));\r\n            if(url.indexOf(\"uname\") > -1)\r\n                tmpUrl = tmpUrl.replace(\"\\[uname\\]\", encodeURIComponent(Global.PlayerData.nickname));\r\n            url = tmpUrl;\r\n        }\r\n        catch(e)\r\n        {\r\n            Logger.error(\"encodeURIComponent error\");\r\n            Global.ReportTool.ReportClientError(\"formatUrlError\", \r\n            {\r\n                des:\"encodeURIComponent error\",\r\n                token:Global.PlayerData.token,\r\n                nickname:Global.PlayerData.nickname,\r\n                url:url,\r\n            })\r\n        }\r\n\r\n        \r\n        return url;\r\n    }\r\n\r\n    public static get enableWxShare()\r\n    {\r\n        return true\r\n    }\r\n\r\n    //是否支持艾特跳转\r\n    public static get enableAiTeApp(){\r\n        return true\r\n    }\r\n\r\n    //是否支持跳转支付宝\r\n    public static get enableAwakeAli(){\r\n        return true\r\n    }\r\n    \r\n    //是否支持支付宝SDK支付\r\n    public static get enableAliPaySDK(){\r\n        return true\r\n    }\r\n    //是否支持微信SDK支付\r\n    public static get enableWXSDK(){\r\n        return true\r\n    }\r\n    //是否支持支付宝h5 转native 支付\r\n    public static get enableAliPayInterceptorWithUrl(){\r\n        return true\r\n    }\r\n\r\n    //是否支持支付宝h5 授权\r\n    public static get enableAliPayAuthWithUrl(){\r\n        return true\r\n    }\r\n\r\n    //是否支持支付宝检测\r\n    public static get enableAliPayCheckInstall(){\r\n        return true\r\n    }\r\n\r\n    //是否开启强更包逻辑\r\n    public static get enableForceUpdateAppInstall(){\r\n        return true\r\n    }\r\n\r\n    //是否支持支付宝通过payAuthInfo授权\r\n    public static get enableAliPayAuthWithPayAuthInfo(){\r\n        return true\r\n    }\r\n\r\n    //是否支持新版本SDK支付\r\n    public static get enableSDKPay(){\r\n        return true\r\n    }\r\n    //是否支持UpaySDK支付\r\n    public static get enableUPay(){\r\n        return true\r\n    }\r\n    //是否支持SDK支付\r\n    public static get enableSDK(){\r\n        return true\r\n    }\r\n    //app平台配置，后续做为可配置\r\n    public static appCfg = \r\n    {\r\n        1001:\r\n        {\r\n            wxLogin:[false, \"体验服暂不支持微信登录\"],\r\n            wxShare:[false, \"体验服暂不支持微信分享\"],\r\n        },\r\n        1002:\r\n        {\r\n            wxLogin:[false, \"体验服暂不支持微信登录\"],\r\n            wxShare:[false, \"体验服暂不支持微信分享\"],\r\n        },\r\n        1003:\r\n        {\r\n            wxLogin:[false, \"体验服暂不支持微信登录\"],\r\n            wxShare:[false, \"体验服暂不支持微信分享\"],\r\n        },\r\n    }\r\n\r\n    //是否是百度平台\r\n    public static isBaiduPlatform()\r\n    {\r\n        return this.specialPlatfromList \r\n            && this.specialPlatfromList[0] \r\n            && this.specialPlatfromList[0].isTargetPlatform();\r\n    }\r\n\r\n    //百度登录后计时状态\r\n    public static isBaiduSpecialState()\r\n    {\r\n        if(!this.isBaiduPlatform())\r\n            return false;\r\n        //在计时过程中 才算特殊状态\r\n        return !this.specialPlatfromList[0].isTimeup;\r\n    }\r\n\r\n\r\n\r\n    public static getAppCfg()\r\n    {\r\n        let appid = Global.Setting.appId;\r\n        return this.appCfg[appid];\r\n    }\r\n\r\n    public static getAppWXShareEnable()\r\n    {\r\n        if(!this.checkWxkey())\r\n            return false;\r\n        let cfg = this.getAppCfg();\r\n        if(cfg == null)\r\n            return true;\r\n        let arr = cfg.wxShare;\r\n        if(arr.length > 1 && arr[1] != \"\")\r\n        {\r\n            Global.UI.fastTip(arr[1]);\r\n        }\r\n        return arr[0];\r\n    }\r\n\r\n    public static getAppWXLoginEnable()\r\n    {\r\n        if(!this.checkWxkey())\r\n            return false;\r\n        let cfg = this.getAppCfg();\r\n        if(cfg == null)\r\n            return true;\r\n        let arr = cfg.wxLogin;\r\n        if(arr.length > 1 && arr[1] != \"\")\r\n        {\r\n            Global.UI.fastTip(arr[1]);\r\n        }\r\n        return arr[0];\r\n    }\r\n\r\n    public static checkPlatformWXEnable(isShowTips = true){\r\n        let isEnable = Global.Toolkit.checkIsPlatformShowWX()\r\n        if (!isEnable && isShowTips){\r\n            Global.UI.fastTip(\"该版本暂不支持微信功能，请手动打开微信\"); \r\n        }\r\n        return isEnable;\r\n    }\r\n\r\n\r\n    //游戏是否需要过滤\r\n    public static isFilterGame(gid)\r\n    {\r\n        if(!this.isBaiduPlatform())\r\n            return false;\r\n        let baiduPlatform = this.specialPlatfromList[0];\r\n        if(baiduPlatform && baiduPlatform.filterGameArray.indexOf(gid) > -1)\r\n            return true;\r\n        return false;\r\n    }\r\n\r\n\r\n    public static checkWxkey(isShowTips = true)\r\n    {\r\n        // //兼容老版本\r\n        // if(Global.Setting.SystemInfo.wxKey == null || Global.Setting.SystemInfo.wxKey == \"\")\r\n        //     return true;\r\n        if(Global.Setting.SystemInfo.bundleName == null || Global.Setting.SystemInfo.bundleName == \"\")\r\n            return true;\r\n        //服务器没有配置 暂时不处理\r\n        if(Global.Setting.serverWxMd5 == \"\" || Global.Setting.serverWxMd5 == null)\r\n            return true;\r\n        let bundleMd5 = Global.Setting.serverAndroidIdMd5;\r\n        if(cc.sys.platform == cc.sys.IPHONE)\r\n            bundleMd5 = Global.Setting.serverIOSIdMd5;\r\n        if(bundleMd5 == null || bundleMd5 == \"\")\r\n            return true;\r\n        if(Global.Toolkit.md5(Global.Setting.SystemInfo.bundleName) == bundleMd5\r\n        && Global.Toolkit.md5(Global.Setting.SystemInfo.wxKey) == Global.Setting.serverWxMd5)\r\n            return true;\r\n        if (isShowTips){\r\n            Global.UI.fastTip(\"该版本暂不支持微信功能\");  \r\n        }\r\n          \r\n        return false;\r\n    }\r\n\r\n        /**\r\n     * 检测APPID和包渠道号是否相同   主要用于定制部分渠道包和app特殊需求\r\n     * @param appId \r\n     * @param channel 指定包渠道号，如果channel为空，则表示所有渠道通用\r\n     * @param enbaleConfigChannel  是否检测config渠道号\r\n     */\r\n    public static checkAPPAndChannel(appId, channel = null, enbaleConfigChannel = false)\r\n    {\r\n        //检测\r\n        if(Global.Setting.appId != appId)\r\n            return false;\r\n        if(channel != null && Number(Global.Setting.SystemInfo.packChannel) == channel)\r\n            return true;\r\n        if(enbaleConfigChannel && Number(Global.Setting.ChannelInfo.configChannel) == channel)\r\n            return true;\r\n        return false;\r\n    }\r\n\r\n            /**\r\n     * 检测包渠道号是否相同   主要用于定制部分渠道包和app特殊需求\r\n     * @param channel 指定包渠道号，如果channel为空，则表示所有渠道通用\r\n     * @param enbaleConfigChannel  是否检测config渠道号\r\n     */\r\n    public static checkChannel(channel = null, enbaleConfigChannel = false)\r\n    {\r\n        if(channel != null && Number(Global.Setting.SystemInfo.packChannel) == channel)\r\n            return true;\r\n        if(enbaleConfigChannel && Number(Global.Setting.ChannelInfo.configChannel) == channel)\r\n            return true;\r\n        return false;\r\n    }\r\n\r\n    public static onPreloadRes(requireList, requireAtlasList, requireSpineList)\r\n    {\r\n        for(let i = 0; i < this.specialPlatfromList.length; i++)\r\n        {\r\n            let platform = this.specialPlatfromList[i];\r\n            if(platform.isTargetPlatform())\r\n            {\r\n                platform.onPreloadRes(requireList, requireAtlasList, requireSpineList)\r\n            }\r\n        }\r\n    }\r\n\r\n    public static afterGetConfig()\r\n    {\r\n        for(let i = 0; i < this.specialPlatfromList.length; i++)\r\n        {\r\n            let platform = this.specialPlatfromList[i];\r\n            if(platform.isTargetPlatform())\r\n            {\r\n                platform.afterGetConfig()\r\n            }\r\n        }\r\n    }\r\n\r\n    public static afterWindowInit(name, node, window)\r\n    {\r\n        for(let i = 0; i < this.specialPlatfromList.length; i++)\r\n        {\r\n            let platform = this.specialPlatfromList[i];\r\n            if(platform.isTargetPlatform())\r\n            {\r\n                platform.afterWindowInit(name, node, window)\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n//特殊平台定制需求\r\nexport class SpecialPlatform\r\n{\r\n    public getName()\r\n    {\r\n        return \"\"\r\n    }\r\n    public isTargetPlatform()\r\n    {\r\n        return false;\r\n    }\r\n    //预加载大厅资源调用 可以修改或者添加预加载资源。\r\n    public onPreloadRes(requireList, requireAtlasList, requireSpineList){};\r\n\r\n    //设置好gamecfg之后  用于修改gameData，\r\n    public afterGetConfig()\r\n    {\r\n    }\r\n\r\n    //window initView之后调用，负责修改UI，重定向点击事件等\r\n    public afterWindowInit(name, node, window)\r\n    {\r\n\r\n    }\r\n}\r\n\r\n//百度渠道包  688 36渠道  798 30渠道   http://192.168.1.21/zentao/task-view-851.html\r\nexport class BaiduPlatform extends SpecialPlatform\r\n{\r\n    private timeupState = false;\r\n    private timerID = null\r\n    public filterGameArray = [7005, 2008, 1001]; \r\n\r\n    public getName()\r\n    {\r\n        return \"baidu\"\r\n    }\r\n\r\n    public isTargetPlatform()\r\n    {\r\n        return false;\r\n        //return AppHelper.checkAPPAndChannel(688, 36) || AppHelper.checkAPPAndChannel(798, 30);\r\n    }\r\n\r\n    public afterGetConfig()\r\n    {\r\n\r\n    \r\n    }\r\n\r\n  \r\n\r\n    public get isTimeup()\r\n    {\r\n        return this.timeupState;\r\n    }\r\n\r\n    public set isTimeup( flag)\r\n    {\r\n        this.timeupState = flag\r\n        if(flag)\r\n        {\r\n            Global.Event.event(GlobalEvent.UPDATE_BAIDU_STATE);\r\n            if(this.timerID)\r\n            {\r\n                clearInterval(this.timerID)\r\n            }\r\n        }\r\n    }\r\n\r\n    public afterWindowInit(name, uiNode, window)\r\n    {\r\n        if(name == \"WndHall\")\r\n        {\r\n            // let node = cc.find(\"bottomNode/tixianNode/icon\", uiNode);\r\n            // if(node == null)\r\n            //     return;\r\n            // let sp = node.getComponent(cc.Sprite);\r\n            // Global.ResourceManager.loadAutoAtlas(sp,\"hall/specialPlatform/baidu/atlas/baiduAtlas\",\"dilanzi_txian\");\r\n        }\r\n    }\r\n}"]}