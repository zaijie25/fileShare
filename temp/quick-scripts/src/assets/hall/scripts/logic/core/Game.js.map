{"version":3,"sources":["assets\\hall\\scripts\\logic\\core\\Game.ts"],"names":[],"mappings":";;;;;;AAAA,yEAAoE;AACpE,mEAA8D;AAC9D,oDAA+C;AAC/C,gDAA2C;AAC3C,sDAA+C;AAC/C,kDAA6C;AAC7C,qDAAgD;AAChD,0DAAqD;AAErD,UAAU;AACV;IAAA;IA+EA,CAAC;IAzBiB,UAAK,GAAnB;QAEI,IAAI,CAAC,OAAO,GAAG,IAAI,uBAAW,EAAE,CAAC;QACjC,IAAI,CAAC,KAAK,GAAG,IAAI,yBAAe,EAAE,CAAC;QACnC,IAAI,CAAC,SAAS,GAAG,IAAI,2BAAiB,CAAC,YAAY,CAAC,CAAC;QACrD,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC7E,IAAI,CAAC,KAAK,GAAG,IAAI,sBAAY,EAAE,CAAC;QAChC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC;QACnB,IAAI,CAAC,MAAM,GAAG,IAAI,oBAAU,EAAE,CAAC;QAC/B,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;QACpB,IAAI,CAAC,OAAO,GAAG,IAAI,qBAAW,EAAE,CAAC;QACjC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;QACrB,IAAI,CAAC,UAAU,GAAG,IAAI,oBAAU,EAAE,CAAC;QACnC,IAAI,CAAC,eAAe,GAAG,IAAI,yBAAe,EAAE,CAAC;IACjD,CAAC;IAEa,aAAQ,GAAtB,UAAuB,EAAE;QAErB,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QACxB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;IAC7B,CAAC;IAEa,iBAAY,GAA1B,cACC,CAAC;IA3EF,SAAS;IACK,sBAAiB,GAAG,mBAAmB,CAAC,CAAG,cAAc;IACzD,wBAAmB,GAAG,qBAAqB,CAAC,CAAE,oBAAoB;IAClE,qBAAgB,GAAG,kBAAkB,CAAC,CAAI,MAAM;IAC9D,QAAQ;IACM,sBAAiB,GAAG,mBAAmB,CAAC,CAAE,YAAY;IACtD,uBAAkB,GAAG,oBAAoB,CAAC,CAAE,YAAY;IACxD,uBAAkB,GAAG,oBAAoB,CAAC,CAAE,YAAY;IACxD,2BAAsB,GAAG,wBAAwB,CAAC,CAAE,QAAQ;IAC5D,yBAAoB,GAAG,sBAAsB,CAAC,CAAE,UAAU;IAC1D,wBAAmB,GAAG,qBAAqB,CAAC,CAAE,sBAAsB;IAElF,WAAW;IACG,0BAAqB,GAAG,uBAAuB,CAAC;IAG9D,iBAAiB;IACH,2BAAsB,GAAG,wBAAwB,CAAC;IAChE,cAAc;IACA,uBAAkB,GAAG,oBAAoB,CAAC;IACxD,aAAa;IACC,uBAAkB,GAAG,oBAAoB,CAAC;IAExD,eAAe;IACD,0BAAqB,GAAG,uBAAuB,CAAC;IAE9D,iBAAiB;IACH,uBAAkB,GAAG,oBAAoB,CAAC;IAGxD,qBAAqB;IACP,sBAAiB,GAAG,mBAAmB,CAAC;IA8C1D,WAAC;CA/ED,AA+EC,IAAA;kBA/EoB,IAAI","file":"","sourceRoot":"/","sourcesContent":["import EventDispatcher from \"../../framework/event/EventDispatcher\";\r\nimport ComponentProvider from \"./component/ComponentProvider\";\r\nimport TweenManager from \"./game/TweenManager\";\r\nimport GameServer from \"./game/GameServer\";\r\nimport GameCommand from \"./game/CommandDefine\";\r\nimport GameControl from \"./game/GameControl\";\r\nimport DataBridge from \"./game/data/DataBridge\";\r\nimport GamePreloadTool from \"./game/GamePreloadTool\";\r\n\r\n//游戏公共逻辑入口\r\nexport default class Game\r\n{\r\n    //游戏内通用事件\r\n    public static EVENT_ADDTIMELOCK = \"EVENT_ADDTIMELOCK\";   //时间锁  到时间自动解锁\r\n    public static EVENT_ADDMANUALLOCK = \"EVENT_ADDMANUALLOCK\";  //手动锁，需要手动解锁  或者等待超时\r\n    public static EVENT_REMOVELOCK = \"EVENT_REMOVELOCK\";    //解锁消息\r\n    //游戏网络接通\r\n    public static EVENT_SOCKET_OPEN = \"EVENT_SOCKET_OPEN\";  //游戏socket链接\r\n    public static EVENT_SOCKET_CLOSE = \"EVENT_SOCKET_CLOSE\";  //游戏socket关闭\r\n    public static EVENT_SOCKET_ERROR = \"EVENT_SOCKET_ERROR\";  //游戏socket异常\r\n    public static EVENT_SOCKET_RECONNECT = \"EVENT_SOCKET_RECONNECT\";  //游戏重连通知\r\n    public static EVENT_CALL_RECONNECT = \"EVENT_CALL_RECONNECT\";  //游戏内部强制重连\r\n    public static EVENT_SOCKET_RESUME = \"EVENT_SOCKET_RESUME\";  //从后台切回来后事件  参数：切后台时间。\r\n\r\n    //插入消息到队列头部\r\n    public static EVENT_UNSHFIT_MSGLIST = \"EVENT_UNSHFIT_MSGLIST\";\r\n\r\n\r\n    //强制退出游戏  常用与网络异常\r\n    public static EVENT_FORCE_LEAVE_GAME = \"EVENT_FORCE_LEAVE_GAME\";\r\n    //不在桌上 对应901错误\r\n    public static EVENT_NOT_IN_TABLE = \"EVENT_NOT_IN_TABLE\";\r\n    // 通知子游戏匹配玩家中\r\n    public static EVENT_MATCH_PLAYER = \"EVENT_MATCH_PLAYER\";\r\n\r\n    //设置大厅选场点击场次的回调\r\n    public static EVENT_SETINTOGAME_FUN = \"EVENT_SETINTOGAME_FUN\";\r\n\r\n    // 拉霸游戏socket连上通知\r\n    public static EVENT_LABA_CONNECT = \"EVENT_LABA_CONNECT\";\r\n\r\n\r\n    //子游戏内显示自定义messagebox\r\n    public static EVENT_MESSAGE_BOX = \"EVENT_MESSAGE_BOX\";\r\n\r\n\r\n    public static Event:EventDispatcher;\r\n    public static Component:ComponentProvider;\r\n    public static Tween:TweenManager;\r\n    public static Server:GameServer;\r\n    public static Command:GameCommand;\r\n    //游戏链接管理\r\n    public static Control:GameControl;\r\n\r\n    //游戏运行时数据  每个子游戏定制\r\n    public static Context:any;\r\n\r\n    //子游戏全局节点   \r\n    public static Entry:any;\r\n\r\n    public static DataBridge:any;\r\n    public static GamePreloadTool: GamePreloadTool;\r\n\r\n\r\n    public static setup()\r\n    {\r\n        this.Command = new GameCommand();\r\n        this.Event = new EventDispatcher();\r\n        this.Component = new ComponentProvider(\"GameDriver\");\r\n        this.Component.setup(this.onUpdate.bind(this), this.onLateUpdate.bind(this));\r\n        this.Tween = new TweenManager();\r\n        this.Tween.setup();\r\n        this.Server = new GameServer();\r\n        this.Server.setup();\r\n        this.Control = new GameControl();\r\n        this.Control.setup();\r\n        this.DataBridge = new DataBridge();\r\n        this.GamePreloadTool = new GamePreloadTool();\r\n    }\r\n\r\n    public static onUpdate(dt)\r\n    {\r\n        this.Tween.onUpdate(dt);\r\n        this.Server.onUpdate(dt);\r\n    }\r\n\r\n    public static onLateUpdate()\r\n    {}\r\n    \r\n}"]}