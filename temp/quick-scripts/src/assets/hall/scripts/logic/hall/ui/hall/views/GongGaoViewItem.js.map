{"version":3,"sources":["assets\\hall\\scripts\\logic\\hall\\ui\\hall\\views\\GongGaoViewItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ViewBase from \"../../../../core/ui/ViewBase\";\r\nimport AppHelper from \"../../../../core/tool/AppHelper\";\r\nimport { SpreadEvent } from \"../../Spread/SpreadEvent\";\r\nimport SpreadModel from \"../../../../hallcommon/model/SpreadModel\";\r\nimport CodeTipView from \"../../waiting/CodeTipView\";\r\nimport BindingButtonEffect from \"../../../../core/component/BindingButtonEffect\";\r\nexport default class GongGaoViewItem extends ViewBase {\r\n    public icon: cc.Sprite;\r\n    private info: any;\r\n    SpreadModel: SpreadModel;\r\n    private pageView:any\r\n    private codeTip: CodeTipView;\r\n    private childrenRoot:cc.Node\r\n    protected initView() {\r\n        this.icon = this.getComponent(\"content/guangao_di\", cc.Sprite);\r\n        this.childrenRoot = this.getChild(\"content\");\r\n        //let btn = this.getChild(\"btn\")\r\n        //btn.on(\"click\", this.onClick, this);\r\n        Global.UIHelper.addCommonClick(this.node,\"content/btn\",this.onClick,this)\r\n        this.childrenRoot.addComponent(BindingButtonEffect)\r\n        if (cc.isValid(this.getChild(\"content/codeTip\"))){\r\n            this.codeTip = this.getChild(\"content/codeTip\").getComponent(CodeTipView);\r\n        }\r\n        this.SpreadModel = <SpreadModel>Global.ModelManager.getModel(\"SpreadModel\");\r\n    }\r\n\r\n    //{type:1, subtype, param}\r\n    //1 弹窗 点击\r\n    //2 二维码\r\n    public setData(info,pageView = null) {\r\n        if (info == null) {\r\n            this.node.active = false;\r\n            return;\r\n        }\r\n        this.pageView = pageView\r\n        if(!this.node || !this.node.isValid)\r\n        {\r\n            return\r\n        }\r\n        this.info = info;\r\n        if (info.type == 2) {\r\n            \r\n            this.SpreadModel.on(SpreadEvent.RefreshShortUrl, this, this.initQrImg)\r\n            this.initQrImg();\r\n        }\r\n    }\r\n\r\n    moveSpine(rootNode)\r\n    {\r\n        \r\n    }\r\n\r\n    onOpen()\r\n    {\r\n    }\r\n   \r\n    public getData() {\r\n        return this.info;\r\n    }\r\n\r\n    private initQrImg() {\r\n        if(!this.node || !this.node.isValid)\r\n        {\r\n            return\r\n        }\r\n        let node = this.getChild(\"content/qrNode\");\r\n        this.codeTip.tips.string = \"正在获取\";\r\n        if (node != null) {\r\n            let url = Global.Setting.Urls.inviteUrl;\r\n            url = this.SpreadModel.Url || url\r\n            // if (this.SpreadModel.urlType != 1) {\r\n            //     this.codeTip.error();\r\n            // }else{\r\n                Global.Toolkit.initQRCode(node, url, 5);\r\n                if(this.pageView && cc.isValid(this.pageView))\r\n                {\r\n                    this.pageView.updatePage(this.node)\r\n                }\r\n                this.codeTip.success();\r\n            // }\r\n        }\r\n    }\r\n\r\n    protected onDestoy()\r\n    {\r\n        this.SpreadModel.off(SpreadEvent.RefreshShortUrl, this, this.initQrImg)\r\n    }\r\n\r\n    private onClick() {\r\n\r\n        if (this.info.type == 1) {\r\n            switch (this.info.subtype) {\r\n                //财富秘籍\r\n                case 1:\r\n                    {\r\n                        Global.Event.event(GlobalEvent.SHOW_NET_WAITING, \"WndSpread\")\r\n                        Global.UI.show(\"WndSpread\");\r\n                        break;\r\n                    }\r\n                //复制官网\r\n                case 2:\r\n                    {\r\n                        this.copyUrl();\r\n                        break;\r\n                    }\r\n                //修复\r\n                case 3:\r\n                    {\r\n                        this.openBackUrl();\r\n                        break;\r\n                    }\r\n                //充值\r\n                case 4:\r\n                    {\r\n                        Global.UI.show(\"WndRecharge\", \"vippay\");\r\n                        break;\r\n                    }\r\n            }\r\n        }else if (this.info.type == 2) {\r\n            Global.UI.show(\"WndSpreadCenter\");\r\n        }else if(this.info.type == 3){\r\n            cc.sys.openURL(Global.Toolkit.DealWithUrl(this.info.subtype));\r\n        }\r\n    }\r\n\r\n    InitVipCharge() {\r\n        let vipNum =  Global.ModelManager.getModel(\"RechagreTipModel\").Salenum\r\n        let rateLabel : cc.Label =this.getComponent(\"content/rateLabel\",cc.Label)\r\n        if(rateLabel)\r\n        {\r\n            rateLabel.string = vipNum\r\n        }\r\n    }\r\n\r\n    private copyUrl() {\r\n        let url = Global.Setting.Urls.downLoadUrl\r\n        Global.NativeEvent.copyTextToClipboard(url, (retStr) => {\r\n            if (retStr.result == 0)\r\n                Global.UI.fastTip(\"复制成功\");\r\n            else\r\n                Global.UI.fastTip(\"复制失败\");\r\n        });\r\n    }\r\n\r\n    hideChild(flag)\r\n    {\r\n        if(cc.isValid(this.childrenRoot))\r\n        {\r\n            this.childrenRoot.active = flag\r\n        }\r\n    }\r\n\r\n    private openBackUrl() {\r\n        let url = Global.Setting.Urls.getBackUrl();\r\n        cc.sys.openURL(url);\r\n    }\r\n\r\n\r\n\r\n}\r\n"]}