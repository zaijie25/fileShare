{"version":3,"sources":["assets\\hall\\scripts\\logic\\hall\\ui\\money\\ui\\bank\\WndBankUI.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import WndBase from \"../../../../../core/ui/WndBase\";\r\nimport BankModel from \"../../../../../hallcommon/model/BankModel\";\r\nimport BankSave from \"./BankSaveWin\";\r\nimport BankDraw from \"./BankDrawWin\";\r\n\r\nexport default class WndBankUI extends WndBase {\r\n\r\n    private model : BankModel;\r\n\r\n    private saveToggle : cc.Toggle;\r\n    private drawToggle : cc.Toggle;\r\n\r\n    private curWin = 1; //1存 2取\r\n\r\n    private saveWin : BankSave;\r\n    private drawWin : BankDraw;\r\n\r\n    private msgtip:cc.Label;\r\n    private bindPhoneBtn:cc.Node;\r\n\r\n    protected onInit() {\r\n        this.isNeedDelay = true\r\n        this.name = \"WndBankUI\";\r\n        this.layer = Global.UI.PopLayer;\r\n        this.resPath = \"hall/prefabs/ui/money/bank/BankUI\";\r\n        this.model = <BankModel>Global.ModelManager.getModel(\"BankModel\");\r\n    }\r\n\r\n    protected initView()\r\n    {\r\n        // this.node.width = cc.Canvas.instance.node.width;\r\n        // this.node.height = cc.Canvas.instance.node.height;\r\n        this.addCommonClick(\"bg_popup_almost/close\",this.close,this);\r\n        //leftBtn\r\n        this.saveToggle = this.getComponent(\"leftBtns/layout/saveBtn\",cc.Toggle);\r\n        this.drawToggle = this.getComponent(\"leftBtns/layout/drawBtn\",cc.Toggle);\r\n        this.saveToggle.node.on(\"click\",this.changeInfoNode,this);\r\n        this.drawToggle.node.on(\"click\",this.changeInfoNode,this);\r\n        //winNodes\r\n        this.saveWin = <BankSave>this.addView(\"saveWin\",this.getChild(\"winsNode/saveWin\"),BankSave,false);\r\n        this.drawWin = <BankDraw>this.addView(\"drawWin\",this.getChild(\"winsNode/drawWin\"),BankDraw),false;\r\n        // 提示栏\r\n        this.bindPhoneBtn = this.getChild(\"winsNode/msgInfo/bandNode/bandBtn\");\r\n        this.msgtip = this.getChild(\"winsNode/msgInfo/bandNode/msgLabel\").getComponent(cc.Label);\r\n\r\n        this.addCommonClick(\"winsNode/msgInfo/bandNode/bandBtn\",this.openBindPhoneBtn,this);\r\n    }\r\n\r\n    \r\n    // public open(args?)\r\n    // {\r\n    //     this.onOpen(args)\r\n    // }\r\n\r\n     //面板打开回调\r\n     protected onOpen(args?:any[])\r\n     {\r\n        var havePhone = (Global.PlayerData.phone != null && Global.PlayerData.phone != \"\");\r\n        if(havePhone){ //已绑定电话\r\n            this.bindPhoneBtn.active = false;\r\n            this.msgtip.string = \"温馨提示：银行存取款不收取任何手续费哦~\"\r\n        }else{ //未绑定电话\r\n            this.bindPhoneBtn.active = true;\r\n            this.msgtip.string = \"温馨提示：为了您的资金安全，请您绑定手机号码！\"\r\n        }\r\n        this.updateInfoNode();\r\n     }\r\n\r\n     public afterOpen()\r\n     {\r\n        // this.animComp.doFullScreenOpenAnim(this.getChild(\"topBar\"), \r\n        // this.getChild(\"leftBtns\"), \r\n        // [this.getChild(\"winsNode\"), this.getChild(\"zhuangshi\")]);\r\n     }\r\n\r\n    closeAllWin(){\r\n        this.saveWin.subViewState = false;\r\n        this.drawWin.subViewState = false;\r\n    }\r\n\r\n    updateInfoNode(){\r\n        this.closeAllWin();\r\n        if(this.curWin == 1){\r\n            this.saveWin.subViewState = true;\r\n            this.saveToggle.isChecked = true;\r\n        }else if(this.curWin == 2){\r\n            this.drawWin.subViewState = true;\r\n            this.drawToggle.isChecked = true;\r\n        }\r\n    }\r\n\r\n    //提现界面切换\r\n    changeInfoNode( target : any ){\r\n        var curWin = 1;\r\n        if(target == this.drawToggle){\r\n            curWin = 2;\r\n        }else if(target == this.saveToggle){\r\n            curWin = 1;\r\n        }\r\n        if(curWin == this.curWin){\r\n            return;\r\n        }\r\n        Global.Audio.playBtnSound();\r\n        this.curWin = curWin;\r\n        this.updateInfoNode();\r\n    }\r\n\r\n    openBindPhoneBtn() {\r\n        Global.UI.show(\"WndBindPhone\");\r\n    }\r\n\r\n}\r\n"]}