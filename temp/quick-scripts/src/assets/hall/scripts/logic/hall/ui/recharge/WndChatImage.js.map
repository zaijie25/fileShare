{"version":3,"sources":["assets\\hall\\scripts\\logic\\hall\\ui\\recharge\\WndChatImage.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,oDAAgE;AAEhE;IAA0C,gCAAO;IAAjD;;IAuCA,CAAC;IArCa,6BAAM,GAAhB;QACI,IAAI,CAAC,IAAI,GAAG,cAAc,CAAC;QAC3B,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,EAAE,CAAC,QAAQ,CAAC;QAChC,IAAI,CAAC,OAAO,GAAG,oCAAoC,CAAC;QACpD,IAAI,CAAC,WAAW,GAAG,qBAAW,CAAC,IAAI,CAAC;IACxC,CAAC;IACS,+BAAQ,GAAlB;QACI,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC;QAChD,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC;QAClD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;QACpE,mCAAmC;QACnC,IAAI,CAAC,SAAS,CAAC,WAAW,GAAG,IAAI,CAAC;QAClC,IAAI,CAAC,cAAc,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;IACtD,CAAC;IACD,6BAAM,GAAN;QAAA,iBASC;QARG,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACxB,iCAAiC;QACjC,IAAI,CAAC,SAAS,CAAC,WAAW,GAAG,IAAI,CAAC;QAClC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,GAAG,EAAC,UAAC,KAAK;YAChC,KAAI,CAAC,SAAS,CAAC,WAAW,GAAG,KAAK,CAAC;YACnC,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,GAAG,KAAI,CAAC,IAAI,CAAC,KAAK,CAAC;YAC5C,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,KAAI,CAAC,IAAI,CAAC,KAAK,GAAC,IAAI,CAAC,UAAU,CAAC,GAAC,IAAI,CAAC,WAAW,CAAC;QACpF,CAAC,CAAC,CAAA;IACN,CAAC;IACO,6BAAM,GAAd;QACI,IAAI,CAAC,KAAK,EAAE,CAAC;IACjB,CAAC;IACM,sCAAe,GAAtB,UAAuB,GAAG,EAAC,QAAiB;QACxC,MAAM;QACN,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC;YACX,GAAG,EAAE,GAAG;YACR,IAAI,EAAE,KAAK;SACd,EAAE,UAAU,GAAG,EAAE,OAAO;YACjB,IAAI,KAAK,GAAG,IAAI,EAAE,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;YACxC,QAAQ,CAAC,KAAK,CAAC,CAAC;QACxB,CAAC,CAAC,CAAA;IACN,CAAC;IACL,mBAAC;AAAD,CAvCA,AAuCC,CAvCyC,iBAAO,GAuChD","file":"","sourceRoot":"/","sourcesContent":["import WndBase, { DestoryType } from \"../../../core/ui/WndBase\";\r\n\r\nexport default class WndChatImage extends WndBase {\r\n    private imageNode: cc.Sprite;\r\n    protected onInit() {\r\n        this.name = \"WndChatImage\";\r\n        this.layer = Global.UI.PopLayer;\r\n        this.resPath = \"hall/prefabs/ui/Recharge/ChatImage\";\r\n        this.destoryType = DestoryType.None;\r\n    }\r\n    protected initView() {\r\n        this.node.width = cc.Canvas.instance.node.width;\r\n        this.node.height = cc.Canvas.instance.node.height;\r\n        this.imageNode = this.getChild(\"imageNode\").getComponent(cc.Sprite);\r\n        // this.bgNode.node.active = false;\r\n        this.imageNode.spriteFrame = null;\r\n        this.addCommonClick(\"btnBack\", this.goBack, this);\r\n    }\r\n    onOpen(){\r\n        let data = this.args[0];\r\n        // console.log(\"URL= \",data.url);\r\n        this.imageNode.spriteFrame = null;\r\n        this.loadSeverHeader(data.url,(frame)=>{\r\n            this.imageNode.spriteFrame = frame;\r\n            this.imageNode.node.width = this.node.width;\r\n            this.imageNode.node.height = (this.node.width/data.imageWidth)*data.imageHeight;\r\n        })\r\n    }\r\n    private goBack() {\r\n        this.close();\r\n    }\r\n    public loadSeverHeader(url,callback:Function){\r\n        //获取图片\r\n        cc.loader.load({\r\n            url: url,\r\n            type: \"jpg\"\r\n        }, function (err, texture) {\r\n                var frame = new cc.SpriteFrame(texture);\r\n                callback(frame);\r\n        })\r\n    }\r\n}"]}