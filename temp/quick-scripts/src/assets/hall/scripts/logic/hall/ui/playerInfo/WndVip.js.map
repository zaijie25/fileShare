{"version":3,"sources":["assets\\hall\\scripts\\logic\\hall\\ui\\playerInfo\\WndVip.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,oDAAgE;AAChE,6EAAwE;AACxE,qCAAgC;AAEhC;IAAoC,0BAAO;IAA3C;QAAA,qEAiRC;QA3QG;;WAEG;QACH,cAAQ,GAAgB,IAAI,CAAC;QAC7B;;WAEG;QACH,gBAAU,GAAc,EAAE,CAAC;QAC3B;;WAEG;QACH,oBAAc,GAAc,EAAE,CAAC;QAEvB,cAAQ,GAAY,IAAI,CAAA;QAExB,cAAQ,GAAW,EAAE,CAAC;QAEtB,YAAM,GAAG,KAAK,CAAC;QACvB;;WAEG;QACK,iBAAW,GAAG,CAAC,CAAC,CAAC;QAEzB;;WAEG;QACH,kBAAY,GAAgB,EAAE,CAAC;QAC/B;;WAEG;QACH,qBAAe,GAAgB,IAAI,CAAC;QACpC;;WAEG;QACH,gBAAU,GAAmB,IAAI,CAAC;QAClC;;WAEG;QACH,gBAAU,GAAa,IAAI,CAAC;;IAqOhC,CAAC;IAnOG;;OAEG;IACO,uBAAM,GAAhB;QACI,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC;QACvB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAA;QACvB,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC;QACrB,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,EAAE,CAAC,QAAQ,CAAC;QAChC,IAAI,CAAC,OAAO,GAAG,kCAAkC,CAAC;QAClD,8CAA8C;QAC9C,iFAAiF;IACrF,CAAC;IAED,0BAAS,GAAT;QACI,IAAI,CAAC,UAAU,GAAG,EAAE,CAAA;QACpB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC;IAC3B,CAAC;IAED;;OAEG;IACO,yBAAQ,GAAlB;QAAA,iBA8DC;QA7DG,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;QAEzD,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;QAC9E,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;QAE9E,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;QACxF,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC,IAAI,CAAC,4BAA4B,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC;QAEhG,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;QAE/E,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;QACzE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,cAAc,EAAE,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;QACnE,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC,IAAI,CAAC,8BAA8B,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;QACnE,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,KAAK,CAAC;QAC7B,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,yBAAe,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC;QAC3F,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,IAAI,CAAC,QAAQ,GAAG,yBAAe,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC;QAC5D,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC;YACtB,IAAI,KAAK,IAAI,KAAI,CAAC,QAAQ,EAAE;gBACxB,KAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,GAAG,KAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,yBAAe,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC;gBAC3F,KAAI,CAAC,gBAAgB,EAAE,CAAC;gBACxB,KAAI,CAAC,MAAM,GAAG,IAAI,CAAC;gBACnB,KAAI,CAAC,cAAc,EAAE,CAAA;gBACrB,OAAO;aACV;YACD,IAAI,GAAG,GAAG,KAAK,GAAG,CAAC,CAAC;YACpB,IAAI,KAAK,GAAG,KAAK,CAAC;YAClB,KAAK,IAAI,CAAC,GAAG,KAAK,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;gBAC9B,IAAI,CAAC,IAAI,KAAI,CAAC,QAAQ,EAAE;oBACpB,KAAK,EAAE,CAAC;oBACR,OAAO;iBACV;gBACD,IAAI,IAAI,GAAY,EAAE,CAAC,WAAW,CAAC,KAAI,CAAC,QAAQ,CAAC,CAAC;gBAClD,IAAI,CAAC,IAAI,GAAG,OAAO,GAAG,KAAK,CAAC;gBAC5B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;gBACnB,IAAI,CAAC,CAAC,GAAG,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,KAAI,CAAC,QAAQ,CAAC,KAAK,CAAC;gBAC3C,IAAI,OAAO,GAAY,IAAI,CAAC,YAAY,CAAC,iBAAO,CAAC,CAAC;gBAClD,OAAO,CAAC,GAAG,GAAG,KAAK,CAAC;gBACpB,OAAO,CAAC,QAAQ,EAAE,CAAA;gBAClB,KAAI,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBAC9B,IAAI,CAAC,SAAS,CAAC,KAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;gBACrC,KAAK,EAAE,CAAC;aACX;QACL,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAA;QACxB,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,EAAE,cAAc,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;QAC3G,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,EAAE,eAAe,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;QAE7G,IAAI,UAAU,GAAG,GAAG,CAAC;QACrB,IAAI,IAAI,GAAG,GAAG,CAAC;QACf,IAAI,GAAG,GAAG,EAAE,CAAC,OAAO,CAAC,IAAI,EAAE,UAAU,EAAE,UAAU,CAAC,CAAC;QACnD,IAAI,GAAG,GAAG,EAAE,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACjC,IAAI,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;QAChC,IAAI,MAAM,GAAG,EAAE,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;QACnC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;QAEzC,IAAI,GAAG,GAAG,EAAE,CAAC,OAAO,CAAC,IAAI,EAAE,UAAU,EAAE,UAAU,CAAC,CAAC;QACnD,IAAI,GAAG,GAAG,EAAE,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACjC,IAAI,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;QAChC,IAAI,MAAM,GAAG,EAAE,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;QACnC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;IAE7C,CAAC;IAED;;OAEG;IACO,uBAAM,GAAhB;QACI,IAAI,IAAI,CAAC,MAAM;YACX,IAAI,CAAC,cAAc,EAAE,CAAC;QAE1B,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,WAAW,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;IAChE,CAAC;IAED,+BAAc,GAAd;QACI,IAAI,CAAC,gBAAgB,EAAE,CAAA;QACvB,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,UAAU,CAAC,GAAG,CAAA;QACxC,IAAI,CAAC,QAAQ,EAAE,CAAA;QACf,IAAI,CAAC,aAAa,EAAE,CAAC;IACzB,CAAC;IACD;;OAEG;IACO,wBAAO,GAAjB;QACI,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,WAAW,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;IACjE,CAAC;IAED;;OAEG;IACK,6BAAY,GAApB;QACI,IAAI,CAAC,KAAK,EAAE,CAAC;IACjB,CAAC;IAED;;OAEG;IACH,yBAAQ,GAAR;QACI,IAAI,KAAK,GAAG,MAAM,CAAC,UAAU,CAAC,GAAG,CAAC;QAClC,IAAI,QAAQ,GAAG,KAAK,GAAG,CAAC,CAAC;QACzB,IAAI,OAAO,GAAG,CAAC,CAAC;QAChB,IAAI,UAAU,GAAG,CAAC,CAAC;QACnB,IAAI,YAAY,GAAG,yBAAe,CAAC,QAAQ,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC;QACvE,IAAI,UAAU,GAAG,YAAY,GAAG,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC;QACzD,IAAI,UAAU,GAAG,CAAC,EAAE;YAChB,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,iHAAgG,UAAU,wGAAuE,CAAA;YAC/M,IAAI,KAAK,GAAG,QAAQ,EAAE;gBAClB,OAAO,GAAG,MAAM,CAAC,UAAU,CAAC,MAAM,GAAG,YAAY,CAAC;aACrD;SACJ;aAAI;YACD,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,+CAA+C,GAAG,KAAK,GAAG,gBAAgB,CAAC;YACzG,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,MAAM,GAAG,KAAK,CAAC;SAC5C;QAED,IAAI,CAAC,UAAU,CAAC,QAAQ,GAAG,OAAO,CAAC;QAEnC,IAAI,WAAW,GAAG,mDAAmD,CAAC;QACtE,IAAI,SAAS,GAAG,QAAQ,GAAG,KAAK,CAAC;QACjC,MAAM,CAAC,eAAe,CAAC,aAAa,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,WAAW,EAAE,SAAS,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;QAEhG,IAAI,SAAS,GAAG,QAAQ,GAAG,QAAQ,CAAC;QACpC,MAAM,CAAC,eAAe,CAAC,aAAa,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,WAAW,EAAE,SAAS,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;QAEhG,IAAI,MAAM,CAAC,UAAU,CAAC,GAAG,GAAG,CAAC,IAAI,MAAM,CAAC,UAAU,CAAC,GAAG,GAAG,CAAC,EAAE;YACxD,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;SACtC;aAAM;YACH,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;SACvC;QAED,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC7C,IAAI,OAAO,GAAY,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YAC1C,OAAO,CAAC,QAAQ,EAAE,CAAC;SACtB;QAED,IAAI,IAAI,CAAC,WAAW,IAAI,CAAC,EAAE;YACvB,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,UAAU,CAAC,GAAG,CAAA;SAC3C;QACD,IAAI,IAAI,CAAC,WAAW,IAAI,yBAAe,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,EAAE;YAC7D,IAAI,CAAC,WAAW,GAAG,yBAAe,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC;SAClE;QACD,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;IAEvD,CAAC;IAED;;OAEG;IACH,8BAAa,GAAb;QACI,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,mBAAmB,EAAE,CAAC;QAChD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,mBAAmB,EAAE,CAAC;QACvD,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,GAAG,CAAC;YACzB,KAAK,GAAG,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;QAC9B,IAAI,KAAK,IAAI,CAAC,EAAE;YACZ,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,KAAK,CAAC;YACtC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;SACxC;aAAM,IAAI,KAAK,IAAI,yBAAe,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE;YAC7D,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;YACrC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,KAAK,CAAC;SACzC;aAAM;YACH,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;YACrC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;SACxC;QACD,wBAAwB;IAC5B,CAAC;IAED;;OAEG;IACH,iCAAgB,GAAhB;QACI,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,mBAAmB,EAAE,CAAC;QAChD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,mBAAmB,EAAE,CAAC;QACvD,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,GAAG,yBAAe,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAA;QAC3F,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,GAAG,CAAC,EAAE;YAC3B,KAAK,GAAG,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;SAC7B;QACD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC7C,IAAI,CAAC,GAAG,KAAK,GAAG,CAAC,IAAI,CAAC,GAAG,KAAK,GAAG,CAAC;gBAC9B,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;;gBAEvC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;SAC7C;QACD,IAAI,CAAC,aAAa,EAAE,CAAC;IACzB,CAAC;IAED;;OAEG;IACH,4BAAW,GAAX;QACI,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,mBAAmB,EAAE,CAAC;QAChD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,mBAAmB,EAAE,CAAC;QACvD,IAAI,KAAK,GAAG,CAAC,EAAE;YACX,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,KAAK,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;SAC9C;IACL,CAAC;IAED;;OAEG;IACH,6BAAY,GAAZ;QACI,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,mBAAmB,EAAE,CAAC;QAChD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,mBAAmB,EAAE,CAAC;QACvD,IAAI,KAAK,GAAG,yBAAe,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE;YACrD,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,KAAK,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;SAC9C;IACL,CAAC;IA/QD;;OAEG;IACI,eAAQ,GAAW,IAAI,CAAC;IA6QnC,aAAC;CAjRD,AAiRC,CAjRmC,iBAAO,GAiR1C;kBAjRoB,MAAM","file":"","sourceRoot":"/","sourcesContent":["import WndBase, { DestoryType } from \"../../../core/ui/WndBase\";\r\nimport PlayerInfoModel from \"../../../hallcommon/model/PlayerInfoModel\";\r\nimport VipView from \"./VipView\";\r\n\r\nexport default class WndVip extends WndBase {\r\n    /**\r\n     * 全局对象\r\n     */\r\n    static instance: WndVip = null;\r\n\r\n    /**\r\n     * 滑动容器\r\n     */\r\n    pageView: cc.PageView = null;\r\n    /**\r\n     * pageview对象数组\r\n     */\r\n    vipViewArr: VipView[] = [];\r\n    /**\r\n     * 左右箭头数组\r\n     */\r\n    jiantouNodeArr: cc.Node[] = [];\r\n\r\n    private itemNode: cc.Node = null\r\n\r\n    private vipCount: number = 15;\r\n\r\n    private uiInit = false;\r\n    /**\r\n     * 当前显示的页面\r\n     */\r\n    private LockvipView = -1;\r\n\r\n    /**\r\n     * 左右2个vip图标\r\n     */\r\n    spriteVipArr: cc.Sprite[] = [];\r\n    /**\r\n     * 到下一级vip的提示文本\r\n     */\r\n    richTextNextVip: cc.RichText = null;\r\n    /**\r\n     * 到下一级vip的进度\r\n     */\r\n    processBar: cc.ProgressBar = null;\r\n    /**\r\n     * vip4前每天加速的tips文本\r\n     */\r\n    labelJiasu: cc.Label = null;\r\n    \r\n    /**\r\n     * 初始化脚本\r\n     */\r\n    protected onInit() {\r\n        WndVip.instance = this;\r\n        this.isNeedDelay = true\r\n        this.name = \"WndVip\";\r\n        this.layer = Global.UI.PopLayer;\r\n        this.resPath = \"hall/prefabs/ui/PlayerInfo/VipUI\";\r\n        // this.destoryType = DestoryType.ChangeScene;\r\n        // this.model = <PlayerInfoModel>Global.ModelManager.getModel(\"PlayerInfoModel\");\r\n    }\r\n\r\n    onDispose() {\r\n        this.vipViewArr = []\r\n        this.uiInit = false;\r\n        WndVip.instance = null;\r\n    }\r\n\r\n    /**\r\n     * 初始化UI\r\n     */\r\n    protected initView() {\r\n        this.addCommonClick(\"bg/close\", this.closeBtnFunc, this);\r\n\r\n        this.spriteVipArr[0] = cc.find(\"top/vip0\", this.node).getComponent(cc.Sprite);\r\n        this.spriteVipArr[1] = cc.find(\"top/vip1\", this.node).getComponent(cc.Sprite);\r\n\r\n        this.richTextNextVip = cc.find(\"top/richText_vip\", this.node).getComponent(cc.RichText);\r\n        this.processBar = cc.find(\"top/process_di/progressBar\", this.node).getComponent(cc.ProgressBar);\r\n\r\n        this.labelJiasu = cc.find(\"top/label_jiasu\", this.node).getComponent(cc.Label);\r\n\r\n        this.pageView = cc.find(\"pageview\", this.node).getComponent(cc.PageView);\r\n        this.pageView.node.on(\"page-turning\", this.PageTurnCallback, this);\r\n        this.itemNode = cc.find(\"pageview/view/content/page_1\", this.node);\r\n        this.itemNode.active = false;\r\n        this.itemNode.parent.width = this.itemNode.width * PlayerInfoModel.instance.vip_cfg.length;\r\n        let index = 1;\r\n        this.vipCount = PlayerInfoModel.instance.vip_cfg.length + 1;\r\n        Global.Component.schedule(() => {\r\n            if (index >= this.vipCount) {\r\n                this.itemNode.parent.width = this.itemNode.width * PlayerInfoModel.instance.vip_cfg.length;\r\n                this.PageTurnCallback();\r\n                this.uiInit = true;\r\n                this.OnDataPrepared()\r\n                return;\r\n            }\r\n            let end = index + 2;\r\n            let begin = index;\r\n            for (let i = begin; i < end; i++) {\r\n                if (i >= this.vipCount) {\r\n                    index++;\r\n                    return;\r\n                }\r\n                var item: cc.Node = cc.instantiate(this.itemNode);\r\n                item.name = \"page_\" + index;\r\n                item.active = true;\r\n                item.x = (index - 1) * this.itemNode.width;\r\n                var vipView: VipView = item.getComponent(VipView);\r\n                vipView.vip = index;\r\n                vipView.initView()\r\n                this.vipViewArr.push(vipView);\r\n                item.setParent(this.itemNode.parent);\r\n                index++;\r\n            }\r\n        }, 0, this.vipCount / 2)\r\n        this.jiantouNodeArr[0] = Global.UIHelper.addCommonClick(this.node, \"jiantou_left\", this.leftBtnFunc, this);\r\n        this.jiantouNodeArr[1] = Global.UIHelper.addCommonClick(this.node, \"jiantou_right\", this.rightBtnFunc, this);\r\n\r\n        var scaleValue = 1.2;\r\n        var time = 0.8;\r\n        var ac1 = cc.scaleTo(time, scaleValue, scaleValue);\r\n        var ac2 = cc.scaleTo(time, 1, 1);\r\n        var seq = cc.sequence(ac1, ac2);\r\n        var action = cc.repeatForever(seq);\r\n        this.jiantouNodeArr[1].runAction(action);\r\n\r\n        var ac1 = cc.scaleTo(time, scaleValue, scaleValue);\r\n        var ac2 = cc.scaleTo(time, 1, 1);\r\n        var seq = cc.sequence(ac1, ac2);\r\n        var action = cc.repeatForever(seq);\r\n        this.jiantouNodeArr[0].runAction(action);\r\n\r\n    }\r\n\r\n    /**\r\n     * 界面打开回调\r\n     */\r\n    protected onOpen() {\r\n        if (this.uiInit)\r\n            this.OnDataPrepared();\r\n\r\n        Global.Event.on(GlobalEvent.CHANGEVIP, this, this.UpdateUI);\r\n    }\r\n\r\n    openAnimFinish() {\r\n        this.PageTurnCallback()\r\n        this.LockvipView = Global.PlayerData.vip\r\n        this.UpdateUI()\r\n        this.UpdateJiantou();\r\n    }\r\n    /**\r\n     * 界面关闭回调\r\n     */\r\n    protected onClose() {\r\n        Global.Event.off(GlobalEvent.CHANGEVIP, this, this.UpdateUI);\r\n    }\r\n\r\n    /**\r\n     * 关闭按钮点击\r\n     */\r\n    private closeBtnFunc() {\r\n        this.close();\r\n    }\r\n\r\n    /**\r\n     * 更新界面\r\n     */\r\n    UpdateUI() {\r\n        var myVip = Global.PlayerData.vip;\r\n        var rightVip = myVip + 1;\r\n        var percent = 1;\r\n        var vipNeedExp = 0;\r\n        var vipUgradeExp = PlayerInfoModel.instance.GetVipUpgradeExp(rightVip);\r\n        var vipNeedExp = vipUgradeExp - Global.PlayerData.vipExp;\r\n        if (vipNeedExp > 0) {\r\n            this.richTextNextVip.string = `<b><outline color=#315200 width=2>再充值</outline><outline color=#784c00 width=2><color=#fed306>${vipNeedExp}</color></outline><outline color=#315200 width=2>元，即可升级</outline></b>`\r\n            if (myVip < rightVip) {\r\n                percent = Global.PlayerData.vipExp / vipUgradeExp;\r\n            }\r\n        }else{\r\n            this.richTextNextVip.string = \"<b><outline color=#315200 width=2>恭喜您已成为至尊VIP\" + myVip + \"</outline></b>\";\r\n            this.getChild(\"top/vip1\").active = false;\r\n        }\r\n\r\n        this.processBar.progress = percent;\r\n\r\n        var atlasString = \"hall/texture/hall/playerInfo/AutoAtlas_playerinfo\";\r\n        var sfString0 = \"icon_v\" + myVip;\r\n        Global.ResourceManager.loadAutoAtlas(this.spriteVipArr[0], atlasString, sfString0, null, false);\r\n\r\n        var sfString1 = \"icon_v\" + rightVip;\r\n        Global.ResourceManager.loadAutoAtlas(this.spriteVipArr[1], atlasString, sfString1, null, false);\r\n\r\n        if (Global.PlayerData.vip > 0 && Global.PlayerData.vip < 4) {\r\n            this.labelJiasu.node.active = true;\r\n        } else {\r\n            this.labelJiasu.node.active = false;\r\n        }\r\n\r\n        for (var i = 0; i < this.vipViewArr.length; i++) {\r\n            var vipView: VipView = this.vipViewArr[i];\r\n            vipView.UpdateUI();\r\n        }\r\n\r\n        if (this.LockvipView <= 0) {\r\n            this.LockvipView = Global.PlayerData.vip\r\n        }\r\n        if (this.LockvipView >= PlayerInfoModel.instance.vip_cfg.length) {\r\n            this.LockvipView = PlayerInfoModel.instance.vip_cfg.length - 1;\r\n        }\r\n        this.pageView.scrollToPage(this.LockvipView, 0.01);\r\n\r\n    }\r\n\r\n    /**\r\n     * 更新箭头\r\n     */\r\n    UpdateJiantou() {\r\n        var index = this.pageView.getCurrentPageIndex();\r\n        this.LockvipView = this.pageView.getCurrentPageIndex();\r\n        if (index > this.vipCount - 1)\r\n            index = this.vipCount - 1;\r\n        if (index <= 0) {\r\n            this.jiantouNodeArr[0].active = false;\r\n            this.jiantouNodeArr[1].active = true;\r\n        } else if (index >= PlayerInfoModel.instance.vip_cfg.length - 1) {\r\n            this.jiantouNodeArr[0].active = true;\r\n            this.jiantouNodeArr[1].active = false;\r\n        } else {\r\n            this.jiantouNodeArr[0].active = true;\r\n            this.jiantouNodeArr[1].active = true;\r\n        }\r\n        // this.OnDataPrepared()\r\n    }\r\n\r\n    /**\r\n     * 翻页事件回调\r\n     */\r\n    PageTurnCallback() {\r\n        var index = this.pageView.getCurrentPageIndex();\r\n        this.LockvipView = this.pageView.getCurrentPageIndex();\r\n        this.pageView.content.width = PlayerInfoModel.instance.vip_cfg.length * this.itemNode.width\r\n        if (index > this.vipCount - 1) {\r\n            index = this.vipCount - 1;\r\n        }\r\n        for (let i = 0; i < this.vipViewArr.length; i++) {\r\n            if (i < index - 1 || i > index + 1)\r\n                this.vipViewArr[i].node.active = false;\r\n            else\r\n                this.vipViewArr[i].node.active = true;\r\n        }\r\n        this.UpdateJiantou();\r\n    }\r\n\r\n    /**\r\n     * 左箭头 点击\r\n     */\r\n    leftBtnFunc() {\r\n        var index = this.pageView.getCurrentPageIndex();\r\n        this.LockvipView = this.pageView.getCurrentPageIndex();\r\n        if (index > 0) {\r\n            this.pageView.scrollToPage(index - 1, 0.3);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 右箭头 点击\r\n     */\r\n    rightBtnFunc() {\r\n        var index = this.pageView.getCurrentPageIndex();\r\n        this.LockvipView = this.pageView.getCurrentPageIndex();\r\n        if (index < PlayerInfoModel.instance.vip_cfg.length - 1) {\r\n            this.pageView.scrollToPage(index + 1, 0.3);\r\n        }\r\n    }\r\n}"]}