{"version":3,"sources":["assets\\hall\\scripts\\logic\\hall\\ui\\Spread\\SpreadServices.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ViewBase from \"../../../core/ui/ViewBase\";\r\nimport ServicerModel, { CustomerEntranceType, PopItemType } from \"../../../hallcommon/model/ServicerModel\";\r\n\r\nexport default class SpreadServices extends ViewBase{\r\n\r\n    private servicerNode = [];\r\n    private ServicerModel:ServicerModel;\r\n\r\n    protected initView(){\r\n        this.ServicerModel = <ServicerModel>Global.ModelManager.getModel(\"ServicerModel\")\r\n        let leftNode = this.getChild(\"left\");\r\n        Global.UIHelper.addCommonClick(leftNode, \"btn_ljlx\", this.openServicerApp, this);\r\n        leftNode.active = false;\r\n        let rightNode = this.getChild(\"right\");\r\n        Global.UIHelper.addCommonClick(rightNode, \"btn_ljlx\", this.openServicerApp, this);\r\n        rightNode.active = false;\r\n        this.servicerNode.push(leftNode)\r\n        this.servicerNode.push(rightNode)\r\n        \r\n    }\r\n\r\n    private servicerType ={\r\n        1:\"icon_kfwx\",          //微信\r\n        2:\"icon_kfqq\",          //QQ\r\n        3:\"icon_kfwx\",          //默认\r\n        4:\"icon_kfat\",          //艾特\r\n        5:\"icon_zxkf\" ,          //在线客服\r\n        6:\"icon_zxkf\"           //在线客服\r\n    }\r\n    private servicerName ={\r\n        1:\"客服微信\",           //微信\r\n        2:\"客服QQ\",             //QQ\r\n        3:\"公众号\",             //公众号\r\n        4:\"客服艾特\",           //艾特\r\n        5:\"在线客服\" ,           //默认\r\n        6:\"在线客服\"\r\n    }\r\n\r\n    onSubViewShow(){\r\n        let serviceData = this.ServicerModel.getServiceInfo(CustomerEntranceType.SpreadService)\r\n        this.updateUI(serviceData);\r\n    }\r\n\r\n    onSubViewHide(){\r\n        \r\n    }\r\n\r\n    onDispose(){\r\n        this.servicerNode = [];\r\n    }\r\n\r\n    private updateUI(data){\r\n        if(!data || data.length ==0) return\r\n        let severArr = data.arr;\r\n        //暂时显示\r\n        // this.servicerNode[0].active = true;\r\n        // this.servicerNode[1].active = true;\r\n        for (let index = 0; index < severArr.length; index++) {\r\n            let servicerItem = this.servicerNode[index]\r\n            let data = severArr[index]\r\n            if(data.type != 0){\r\n                servicerItem.active = true;\r\n                let labe1 = cc.find(\"label1\", servicerItem).getComponent(cc.Label);\r\n                let labe2 = cc.find(\"label2\", servicerItem).getComponent(cc.Label);\r\n                let icon = cc.find(\"icon_kfqq\", servicerItem).getComponent(cc.Sprite);\r\n                let btnNode = cc.find(\"btn_ljlx\", servicerItem);\r\n                btnNode.data = data;\r\n                labe1.string = this.servicerName[data.type]\r\n                labe2.string =  Global.Toolkit.substrEndWithElli(data.data,10)\r\n                Global.ResourceManager.loadAutoAtlas(icon, \"hall/texture/Proxy/Proxy\", this.servicerType[data.type])\r\n            }\r\n        }\r\n    }\r\n\r\n    private openServicerApp(target) {\r\n        if (target && target.node && target.node.data) {\r\n            Global.NativeEvent.copyTextToClipboard(target.node.data.data, (retStr) => {\r\n                if (retStr.result == 0) {\r\n                    if (target.node.data.type == PopItemType.QQ) {\r\n                        Global.UI.fastTip(\"复制成功\");\r\n                        Global.NativeEvent.awakeQQApp(this.awakeQQCallBack.bind(this));\r\n                    } else if (target.node.data.type == PopItemType.WX || target.node.data.type == PopItemType.WXPUBLIC) {\r\n                        Global.UI.fastTip(\"复制成功\");\r\n                        Global.NativeEvent.awakeWechatApp(this.awakeWeChatCallBack.bind(this));\r\n                    } else if (target.node.data.type == PopItemType.AtWnd) {\r\n                        Global.ChatServer.serverType = CustomerEntranceType.HallService;\r\n                        Global.ChatServer.userSetting(null,target.node.data.data);\r\n                    } else if (target.node.data.type == PopItemType.Link) {\r\n                        cc.sys.openURL(Global.Toolkit.DealWithUrl(target.node.data.data));\r\n                    } \r\n                    else if (target.node.data.type == PopItemType.AtLink) {\r\n                        cc.sys.openURL(Global.Toolkit.DealWithUrl(target.node.data.data));\r\n                    } else {\r\n                        Global.UI.fastTip(\"复制失败\");\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    \r\n    awakeQQCallBack( retStr ){\r\n        if (retStr.result == 0) {\r\n        } \r\n        else {\r\n            let ret = retStr.result\r\n            if (ret == -1) {\r\n                Logger.log(\"请先安装QQ\");\r\n                Global.UI.showSingleBox(\"请先安装QQ\", null);\r\n            } else {\r\n                Logger.log(\"打开QQ失败\");\r\n                Global.UI.showSingleBox(\"打开QQ失败\", null);\r\n            }\r\n        }\r\n    }\r\n\r\n    awakeWeChatCallBack( retStr ){\r\n        if (retStr.result == 0) {\r\n        } else {\r\n            let ret = retStr.result\r\n            if (ret == -1) {\r\n                Logger.log(\"请先安装微信\");\r\n                Global.UI.showSingleBox(\"请先安装微信\", null);\r\n            } else {\r\n                Logger.log(\"打开微信失败\");\r\n                Global.UI.showSingleBox(\"打开微信失败\", null);\r\n            }\r\n        }\r\n    }\r\n}"]}