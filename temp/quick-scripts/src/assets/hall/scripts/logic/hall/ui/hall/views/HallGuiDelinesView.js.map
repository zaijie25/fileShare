{"version":3,"sources":["assets\\hall\\scripts\\logic\\hall\\ui\\hall\\views\\HallGuiDelinesView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ViewBase from \"../../../../core/ui/ViewBase\";\r\nimport HallModel from \"../../../../hallcommon/model/HallModel\";\r\nimport HallBtnHelper from \"./HallBtnHelper\";\r\n\r\n\r\nexport default class HallGuiDelinesView extends ViewBase {\r\n    private quan: cc.Node;\r\n    private shou: cc.Node;\r\n    private sf = true;\r\n    private sfshou = true;\r\n    private tips: cc.Node\r\n    private tipscale: number = 2;\r\n    private newGetNode: cc.Node;\r\n    private animNode:cc.Node;\r\n\r\n    protected initView() {\r\n        this.node.active = false;\r\n        this.quan = cc.find(\"newGet/anim/quan\", this.node)\r\n        this.shou = cc.find(\"newGet/anim/shou\", this.node)\r\n        this.newGetNode = cc.find(\"newGet\", this.node)\r\n        this.animNode = cc.find(\"newGet/anim\", this.node)\r\n        this.addCommonClick(\"bg\", this.onSubViewHide, this, 0);\r\n        this.addCommonClick(\"newGet/anim\", this.onOpenCommision, this, 0);\r\n        this.tips = cc.find(\"tips\", this.node)\r\n\r\n    }   \r\n\r\n    onSubViewHide() {\r\n        this.node.active = false;\r\n        Game.Component.unschedule(this.showGuiDelines.bind(this));\r\n        Game.Component.unschedule(this.ShowShouUi.bind(this));\r\n    }\r\n    onOpenCommision(){\r\n        this.node.active = false;\r\n        Game.Component.unschedule(this.showGuiDelines.bind(this));\r\n        Game.Component.unschedule(this.ShowShouUi.bind(this));\r\n        HallBtnHelper.WndCommision();\r\n    }\r\n    public getNewMsg() {\r\n        Global.HallServer.send(NetAppface.mod, \"GetTaskStatus\", {}, (data) => {\r\n            let msg = data;\r\n            if (msg.num > 0) {\r\n                this.tips.scale = this.tipscale;\r\n                this.node.active = true;\r\n                this.showGuiDelines()\r\n                Global.Audio.playAudioSource(\"hall/sound/guidelines\")\r\n            }\r\n        }, null, false, 0);\r\n    }\r\n\r\n    showGuiDelines() {\r\n        let hallModel = <HallModel>Global.ModelManager.getModel(\"HallModel\");\r\n        let csNode =  hallModel.csNodePos\r\n        let wPos = csNode.parent.convertToWorldSpaceAR(csNode.position)\r\n        let lpos = this.animNode.parent.convertToNodeSpaceAR(wPos)\r\n        this.animNode.position = lpos;\r\n\r\n        if (this.quan) {\r\n            Global.Component.schedule(this.ShowQuanUi.bind(this), 0.1)\r\n            Global.Component.schedule(this.ShowShouUi.bind(this), 0.15)\r\n            Global.Component.schedule(this.showTip.bind(this), 0.05)\r\n        }\r\n    }\r\n\r\n    ShowQuanUi() {\r\n        let num = this.quan.scale\r\n        if (this.sf) {\r\n            num -= 0.15;\r\n            if (num <= 1) {\r\n                this.sf = false;\r\n            }\r\n        }\r\n        else {\r\n            num += 0.15;\r\n            if (num >= 1.3) {\r\n                this.sf = true;\r\n            }\r\n        }\r\n        this.quan.setScale(num)\r\n    }\r\n\r\n    ShowShouUi() {\r\n        let num = this.shou.scale\r\n        if (this.sfshou) {\r\n            num -= 0.1;\r\n            if (num <= 1) {\r\n                this.sfshou = false;\r\n            }\r\n        }\r\n        else {\r\n            num += 0.1;\r\n            if (num >= 1.3) {\r\n                this.sfshou = true;\r\n            }\r\n        }\r\n        this.shou.setScale(num)\r\n    }\r\n\r\n    showTip() {\r\n        let num = this.tips.scale;\r\n        if (this.tips.scale > 1) {\r\n            num -= 0.2\r\n            this.tips.setScale(num)\r\n        }\r\n        else {\r\n            Game.Component.unschedule(this.showTip.bind(this));\r\n            return;\r\n        }\r\n    }\r\n}\r\n"]}