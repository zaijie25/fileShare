{"version":3,"sources":["assets\\hall\\scripts\\logic\\hall\\ui\\personalInfo\\WndEditName.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,oDAA+C;AAG/C;IAAyC,+BAAO;IAAhD;;IAsDA,CAAC;IAlDa,4BAAM,GAAhB;QACI,IAAI,CAAC,IAAI,GAAG,aAAa,CAAC;QAC1B,IAAI,CAAC,KAAK,GAAG,UAAU,CAAC;QACxB,IAAI,CAAC,OAAO,GAAG,yCAAyC,CAAC;QACzD,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,YAAY,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC;IACnE,CAAC;IAES,8BAAQ,GAAlB;QACI,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,aAAa,EAAE,EAAE,CAAC,OAAO,CAAC,CAAC;QAC9D,IAAI,CAAC,SAAS,CAAC,SAAS,GAAG,CAAC,CAAC;QAC7B,IAAI,CAAC,cAAc,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;QACzD,IAAI,CAAC,cAAc,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;QACrD,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;IACtD,CAAC;IAES,4BAAM,GAAhB;QACI,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,EAAE,CAAC;IAC/B,CAAC;IAEO,8BAAQ,GAAhB;QACI,IAAI,CAAC,KAAK,EAAE,CAAC;IACjB,CAAC;IAEO,iCAAW,GAAnB;QACI,IAAI,CAAC,KAAK,EAAE,CAAC;IACjB,CAAC;IAEO,+BAAS,GAAjB;QACI,IAAI,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;QAChC,IAAI,CAAC,GAAG;YAAE,OAAO,MAAM,CAAC,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;QAC7C,IAAI,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YAAG,OAAO,MAAM,CAAC,EAAE,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;QACjE,+CAA+C;QAC/C,2CAA2C;QAC3C,IAAI;QACJ,IAAG,MAAM,CAAC,OAAO,CAAC,kBAAkB,CAAC,GAAG,CAAC,EACzC;YACI,OAAO,MAAM,CAAC,EAAE,CAAC,OAAO,CAAC,YAAY,CAAC,CAAA;SACzC;QACD,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;IAC9B,CAAC;IAEO,qCAAe,GAAvB,UAAwB,QAAgB;QAAxC,iBAQC;QAPG,IAAI,KAAK,GAAO,EAAE,CAAA;QAClB,KAAK,CAAC,QAAQ,GAAE,QAAQ,CAAE;QAC1B,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,KAAK,EAAE;YAC9B,MAAM,CAAC,EAAE,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;YAC7B,MAAM,CAAC,UAAU,CAAC,QAAQ,GAAG,QAAQ,CAAC;YACtC,KAAI,CAAC,KAAK,EAAE,CAAC;QACjB,CAAC,CAAC,CAAC;IACP,CAAC;IACL,kBAAC;AAAD,CAtDA,AAsDC,CAtDwC,iBAAO,GAsD/C","file":"","sourceRoot":"/","sourcesContent":["import WndBase from \"../../../core/ui/WndBase\";\r\nimport PersonalInfoModel from \"../../../hallcommon/model/PersonalInfoModel\";\r\n\r\nexport default class WndEditName extends WndBase{\r\n    private nameInput: cc.EditBox;\r\n    private model: PersonalInfoModel;\r\n\r\n    protected onInit() {\r\n        this.name = \"WndEditName\";\r\n        this.layer = \"PopLayer\";\r\n        this.resPath = \"hall/prefabs/ui/PersonalInfo/EditNameUI\";\r\n        this.model = Global.ModelManager.getModel(\"PersonalInfoModel\");\r\n    }\r\n\r\n    protected initView() {\r\n        this.nameInput = this.getComponent(\"nameEditBox\", cc.EditBox);\r\n        this.nameInput.maxLength = 6;\r\n        this.addCommonClick(\"cancelBtn\", this.cancelClick, this);\r\n        this.addCommonClick(\"sureBtn\", this.sureClick, this);\r\n        this.addCommonClick(\"close\", this.closeWnd, this);\r\n    }\r\n\r\n    protected onOpen(){\r\n        this.nameInput.string = \"\";\r\n    }\r\n\r\n    private closeWnd(){\r\n        this.close();\r\n    }\r\n\r\n    private cancelClick(){\r\n        this.close();\r\n    }\r\n\r\n    private sureClick(){\r\n        let str = this.nameInput.string;\r\n        if (!str) return Global.UI.fastTip(\"请输入昵称~\");\r\n        if (str.indexOf(\" \") > -1)  return Global.UI.fastTip(\"昵称不能含有空格\");\r\n        // if (Global.Toolkit.getTotalBytes(str) > 14){\r\n        //     return Global.UI.fastTip(\"昵称最长七个字\");\r\n        // }\r\n        if(Global.Toolkit.checkContainsEmoji(str))\r\n        {\r\n            return Global.UI.fastTip(\"昵称不能含表情符号!\")\r\n        }\r\n        this.reqEditUserInfo(str);\r\n    }\r\n\r\n    private reqEditUserInfo(nickname: string){\r\n        let param:any = {}\r\n        param.nickname =nickname ;\r\n        this.model.reqEditUserInfo(param, ()=>{\r\n            Global.UI.fastTip(\"修改昵称成功！\");\r\n            Global.PlayerData.nickname = nickname;\r\n            this.close();\r\n        });\r\n    }\r\n}"]}