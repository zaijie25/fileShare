{"version":3,"sources":["assets\\hall\\scripts\\logic\\hall\\ui\\playerInfo\\VipPrivilegeView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import PlayerInfoModel from \"../../../hallcommon/model/PlayerInfoModel\";\r\nimport VipPrivilegeViewItem from \"./VipPrivilegeViewItem\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class VipPrivilegeView extends cc.Component {\r\n\r\n\r\n    iconSprite: cc.Sprite = null\r\n\r\n    level: cc.Label = null\r\n\r\n    itemList: Array<cc.Node> = [];\r\n\r\n    /**\r\n    * 当前页的vip等级下的特权文本\r\n    */\r\n    labelTequanArr: cc.Label[] = [];\r\n\r\n\r\n    initView() {\r\n        this.iconSprite = cc.find(\"info_node/icon_vip\", this.node).getComponent(cc.Sprite)\r\n\r\n        this.level = cc.find(\"info_node/level\", this.node).getComponent(cc.Label)\r\n\r\n        for (let index = 0; index < 4; index++) {\r\n            let node = cc.find(`layout/item_${index}`, this.node)\r\n            if (cc.isValid(node)) {\r\n                this.itemList.push(node)\r\n            }\r\n            if (index < 3) {\r\n                node.active = false\r\n            }\r\n\r\n        }\r\n\r\n        for (var i = 0; i < 4; i++) {\r\n            this.labelTequanArr[i] = cc.find(\"viptips/tip_\" + (i + 1), this.node).getComponent(cc.Label);\r\n            this.labelTequanArr[i].node.active = false;\r\n        }\r\n    }\r\n\r\n\r\n    refreshUI(data, index, vip) {\r\n        \r\n\r\n        var myVip = Global.PlayerData.vip;\r\n        var leftVip = vip - 1;\r\n        var rightVip = vip;\r\n        var toVip = myVip + 1;\r\n        if (myVip < rightVip) {\r\n            leftVip = myVip;\r\n            toVip = rightVip;\r\n        }\r\n\r\n        var atlasString = \"hall/texture/hall/vip_auto_atlas/vip_auto_atlas\";\r\n        var sfString0 = \"img_viptb_\" + rightVip;\r\n        Global.ResourceManager.loadAutoAtlas(this.iconSprite, atlasString, sfString0, null, false);\r\n\r\n        if (rightVip < 10) {\r\n            this.labelTequanArr[0].string = \"活动可领取更多奖励\";\r\n            this.labelTequanArr[0].node.active = true;\r\n            this.labelTequanArr[1].string = \"专属在线客服，24小时服务\";\r\n            this.labelTequanArr[1].node.active = true;\r\n            this.labelTequanArr[2].string = \"专属捕鱼炮台，捕鱼更加激情\";\r\n            this.labelTequanArr[2].node.active = true;\r\n            \r\n        } else {\r\n            this.labelTequanArr[0].string = \"活动可领取更多奖励\";\r\n            this.labelTequanArr[0].node.active = true;\r\n            this.labelTequanArr[1].string = \"专属在线客服，24小时服务\";\r\n            this.labelTequanArr[1].node.active = true;\r\n            this.labelTequanArr[2].string = \"专属捕鱼炮台，捕鱼更激情\";\r\n            this.labelTequanArr[2].node.active = true;\r\n            this.labelTequanArr[3].string = \"VIP专享表情，互动更炫丽\";\r\n            this.labelTequanArr[3].node.active = true;\r\n        }\r\n\r\n\r\n\r\n        if (PlayerInfoModel.instance.vipSubsidy != null && PlayerInfoModel.instance.vipSubsidyStatus == 1) {\r\n            let subsidy = PlayerInfoModel.instance.vipSubsidy[rightVip]\r\n            if(subsidy){\r\n                this.labelTequanArr[0].string = \"每日可领转运金\" + subsidy.times + \"次\";\r\n            }\r\n            \r\n        }\r\n\r\n        this.level.string = `VIP${rightVip}`\r\n\r\n        // if (rightVip > 9) {\r\n        //     this.richTextArr[1].string = \"<b>V\" + rightVip + \"专属表情</b>\";\r\n        //     var sfPaotai = \"biaoqing_\" + rightVip;\r\n        //     Global.ResourceManager.loadAutoAtlas(this.spriteIconArr[1], atlasString, sfPaotai, null, false);\r\n        // }\r\n        // else {\r\n        //     this.richTextArr[1].string = \"<b>V\" + rightVip + \"捕鱼炮台</b>\";\r\n        //     var sfPaotai = \"paotai_\" + rightVip;\r\n        //     Global.ResourceManager.loadAutoAtlas(this.spriteIconArr[1], atlasString, sfPaotai, null, false);\r\n        // }\r\n        if (rightVip <= 8) {\r\n            for (let index = 0; index < this.itemList.length - 2; index++) {\r\n                let item = this.itemList[index];\r\n                if (item) {\r\n                    item.getComponent(VipPrivilegeViewItem).refreshUI(index, rightVip)\r\n                    item.active = true\r\n                }\r\n\r\n            }\r\n        }\r\n        else if (rightVip == 9) {\r\n            for (let index = 0; index < this.itemList.length - 2; index++) {\r\n                let item = this.itemList[index];\r\n                if (item) {\r\n                    item.getComponent(VipPrivilegeViewItem).refreshUI(index, rightVip)\r\n                    item.active = true\r\n                }\r\n\r\n            }\r\n\r\n            let item = this.itemList[2];\r\n            if (item) {\r\n                item.getComponent(VipPrivilegeViewItem).refreshUI(3, rightVip)\r\n                item.active = true\r\n            }\r\n\r\n        }\r\n\r\n        else if (rightVip > 9 && rightVip <= 13) {\r\n            let type = 0\r\n            for (let index = 0; index < this.itemList.length - 2; index++) {\r\n                let item = this.itemList[index];\r\n                if (item) {\r\n                    item.getComponent(VipPrivilegeViewItem).refreshUI(type, rightVip)\r\n                    item.active = true\r\n                }\r\n\r\n                type += 2\r\n            }\r\n            let item = this.itemList[2];\r\n            if (item) {\r\n                item.getComponent(VipPrivilegeViewItem).refreshUI(3, rightVip)\r\n                item.active = true\r\n            }\r\n\r\n        }\r\n        else {\r\n            let type = 0\r\n            for (let index = 0; index < this.itemList.length - 2; index++) {\r\n                let item = this.itemList[index];\r\n                if (item) {\r\n                    item.getComponent(VipPrivilegeViewItem).refreshUI(type, rightVip)\r\n                    item.active = true\r\n                }\r\n                type += 2\r\n\r\n            }\r\n\r\n            let item = this.itemList[2];\r\n            if (item) {\r\n                item.getComponent(VipPrivilegeViewItem).refreshUI(3, rightVip)\r\n                item.active = true\r\n            }\r\n        }\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nexport enum PrivilegeType {\r\n    HeadKuang = 0,\r\n    PaoTai = 1,\r\n    BiaoQing = 2,\r\n    Kefu = 3\r\n}"]}