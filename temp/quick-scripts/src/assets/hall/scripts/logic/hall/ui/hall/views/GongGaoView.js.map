{"version":3,"sources":["assets\\hall\\scripts\\logic\\hall\\ui\\hall\\views\\GongGaoView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nimport ViewBase from \"../../../../core/ui/ViewBase\";\r\nimport GongGaoViewItem from \"./GongGaoViewItem\";\r\n\r\nexport default class GongGaoView extends ViewBase {\r\n\r\n    private tempNode: cc.Node;\r\n\r\n    private itemPrefab: cc.Node = null;\r\n    private itemList: Array<GongGaoViewItem> = new Array();\r\n    private itemPool: Array<GongGaoViewItem> = new Array();\r\n    private pageView: any;\r\n\r\n    private gongGaoCfg: any = []\r\n\r\n    //自动滚动间隔\r\n    private scrollDelayTime = 3;\r\n    //切页用时\r\n    private scrollTime = 1;\r\n\r\n    private gongGaoCount = 5;\r\n\r\n    // private getItem(){\r\n    //     var item = null;\r\n    //     if(this.itemPool.length > 0){\r\n    //         item = this.itemPool.pop();\r\n    //         item.node.active = true;\r\n    //     }else{\r\n    //         var itemObj = cc.instantiate(this.itemPrefab);\r\n    //     }\r\n    //     item.node.active = true;\r\n    //     return item;\r\n    // }\r\n\r\n    private clearRecord() {\r\n        //自动播放开关\r\n        this.pageView.isAutoScroll = false;\r\n\r\n        this.pageView.removeAllPages();\r\n        for (let index = 0; index < this.itemList.length; index++) {\r\n            const item = this.itemList[index];\r\n            item.node.setParent(this.tempNode);\r\n            // item.reset();\r\n            item.node.active = false;\r\n            this.itemPool.push(item);\r\n        }\r\n        this.itemList = [];\r\n    }\r\n\r\n    protected initView() {\r\n        this.pageView = this.node.getComponent(\"LoopPageView\");\r\n        this.tempNode = this.getChild(\"maskNode/view\");\r\n        this.itemPrefab = this.getChild(\"maskNode/view/gonggaoItem\");\r\n\r\n        this.initData();\r\n        this.itemList = [];\r\n        for (let i = 0; i < this.gongGaoCount; i++) {\r\n            let node = this.getChild(\"maskNode/view/content/gonggaoItem\" + i);\r\n            let item = new GongGaoViewItem();\r\n            item.setNode(node);\r\n            item.setData(this.gongGaoCfg[i]);\r\n            if (cc.sys.platform != cc.sys.IPHONE && i == 2) {\r\n                item.node.removeFromParent();\r\n                item.node.destroy();\r\n            }\r\n            else {\r\n                // 0 //关闭财富秘籍\r\n                // 4 //关闭返利5%\r\n                if (i == 0 || i == 4) {\r\n                    item.node.removeFromParent();\r\n                    item.node.destroy();\r\n                }else {\r\n                    this.itemList.push(item);\r\n                }\r\n                \r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private initData() {\r\n        this.gongGaoCfg = [];\r\n        this.gongGaoCfg.push({ type: 1, subtype: 1 })\r\n        this.gongGaoCfg.push({ type: 1, subtype: 2 })\r\n        if (cc.sys.platform == cc.sys.IPHONE)\r\n            this.gongGaoCfg.push({ type: 1, subtype: 3 })\r\n        else\r\n            this.gongGaoCfg.push(null);\r\n        this.gongGaoCfg.push({ type: 2 })\r\n        this.gongGaoCfg.push({ type: 1, subtype: 4 })\r\n    }\r\n\r\n    onSubViewShow() {\r\n        //自动切页滚动间隔\r\n        this.pageView.autoScrollDelayTime = this.scrollDelayTime;\r\n        //切页用时\r\n        this.pageView.autoScrollTime = this.scrollTime;\r\n        this.pageView.scrollToPage(0, 0);\r\n        //\r\n        this.updateView();\r\n        this.updateQrCodeItem();\r\n        //自动播放开关\r\n        this.pageView.isAutoScroll = true;\r\n    }\r\n\r\n    onDispose() {\r\n        // this.clearRecord();\r\n    }\r\n\r\n    //刷新二维码\r\n    updateQrCodeItem() {\r\n        if (this.itemList) {\r\n            for (let i = 0; i < this.itemList.length; i++) {\r\n                let item = this.itemList[i]\r\n                let itemData = item.getData();\r\n                if (itemData && itemData.type == 2) {\r\n                    item.setData(itemData)\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    updateView() {\r\n        return;\r\n        // this.clearRecord();\r\n\r\n        // var datas = [1,2,3];\r\n        // for (let index = 0; index < datas.length; index++) {\r\n        //     const data = datas[index];\r\n        //     var item = this.getItem();\r\n        //     item.setData(data);\r\n        //     this.pageView.addPage(item.node);\r\n        // }\r\n        // if(datas.length > 0){\r\n        //     //自动播放开关\r\n        //     this.pageView.isAutoScroll = true;\r\n        // }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n}\r\n"]}