{"version":3,"sources":["assets\\hall\\scripts\\logic\\hall\\ui\\playerInfo\\PersonalInfoView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ViewBase from \"../../../core/ui/ViewBase\";\r\nimport PlayerInfoModel from \"../../../hallcommon/model/PlayerInfoModel\";\r\n\r\nexport default class PersonalInfoView extends ViewBase {\r\n\r\n\r\n    private model:PlayerInfoModel\r\n\r\n    /**\r\n     * 绑定手机按钮\r\n     */\r\n    bindPhoneBtn: cc.Node = null;\r\n    /**\r\n     * 修改密码按钮\r\n     */\r\n    changePwdBtn: cc.Node = null;\r\n    /**\r\n     * 名字\r\n     */\r\n    nameLbl: cc.Label = null;\r\n    /**\r\n     * id\r\n     */\r\n    idLbl: cc.Label = null;\r\n    /**\r\n     * 账户类型\r\n     */\r\n    userTypeLbl: cc.Label = null;\r\n    /**\r\n     * 手机号码\r\n     */\r\n    phoneLbl: cc.Label = null;\r\n    /**\r\n     * 头像\r\n     */\r\n    spriteHead:cc.Sprite = null;\r\n    /**\r\n     * 头像框\r\n     */\r\n    spriteHeadFrame:cc.Sprite = null;\r\n\r\n    /**\r\n     * vip内容根节点\r\n     */\r\n    vipNode:cc.Node = null;\r\n    /**\r\n     * 激活按钮\r\n     */\r\n    activateBtn:cc.Node = null;\r\n    /**\r\n     * 激活文本\r\n     */\r\n    activateTextNode:cc.Node = null;\r\n    /**\r\n     * 升级文本\r\n     */\r\n    upgradeTextNode:cc.Node = null;\r\n    /**\r\n     * vip显示节点集合(包含玩家 不是vip的情况 和 玩家已经是vip的情况)\r\n     */\r\n    vipNodeArr:cc.Node[] = [];\r\n    /**\r\n     * 升级到下一级的vip提示文本\r\n     */\r\n    labelVip:cc.Label = null;\r\n    labelVip1: cc.Label = null;\r\n    /**\r\n     * 升级到下一级的vip需要的金額\r\n     */\r\n    vipMoney: cc.Label = null;\r\n    /**\r\n     * 下一级的vip等級\r\n     */\r\n     vipLevel: cc.Label = null;\r\n    /**\r\n     * 当前vip等级图标\r\n     */\r\n    spriteVip:cc.Sprite = null;\r\n    /**\r\n     * vip进度\r\n     */\r\n    processVip:cc.ProgressBar = null;\r\n    bindPhone: cc.Node = null;\r\n\r\n    protected initView()\r\n    {\r\n        this.model = Global.ModelManager.getModel(\"PlayerInfoModel\")\r\n\r\n        Global.Event.on(GlobalEvent.PERSONALINFOUPDATE, this, this.refreshPanel)\r\n        this.addCommonClick(\"editNameBtn\", this.openEditNicknameUI, this);\r\n        this.addCommonClick(\"copyIdBtn\", this.copyIdAction, this);\r\n        // this.addCommonClick( \"settingBtn\", this.openSettingUI, this);\r\n        this.addCommonClick(\"exitBtn\", this.exitAccountAction, this);\r\n        this.addCommonClick( \"changLabel\", this.openEditAvaterUI, this);\r\n        this.bindPhoneBtn = this.addCommonClick(\"bindPhoneBtn\", this.openBindPhoneUI, this);\r\n        this.changePwdBtn =  this.addCommonClick( \"changePwdBtn\", this.openEditPwdUI, this);\r\n        // this.bindPhone = this.getChild(\"bindPhoneBtn/hongdian\");\r\n        this.nameLbl = this.getComponent(\"nameLbl\", cc.Label)\r\n        this.idLbl = this.getComponent(\"idLbl\", cc.Label)\r\n        this.userTypeLbl = this.getComponent(\"userTypeLbl\",  cc.Label)\r\n        this.phoneLbl = this.getComponent(\"phoneLbl\", cc.Label);\r\n\r\n        this.spriteHead =this.getComponent(\"headImg/headFrame\", cc.Sprite);\r\n        this.spriteHeadFrame = this.getComponent(\"headImg/headbox\", cc.Sprite);\r\n\r\n        this.vipNode =this.getChild(\"vip\");\r\n        this.activateBtn = Global.UIHelper.addCommonClick(this.vipNode, \"jihuoBtn\", this.activateBtnFunc, this);\r\n        this.activateTextNode = cc.find(\"fnt_activate\", this.activateBtn);\r\n        this.upgradeTextNode = cc.find(\"upgradText\", this.activateBtn)\r\n        \r\n        this.vipNodeArr[0] = cc.find(\"vip0\", this.vipNode);\r\n        this.vipNodeArr[1] = cc.find(\"vip1\", this.vipNode);\r\n        this.labelVip = cc.find(\"iconList/label_vip\", this.vipNode).getComponent(cc.Label);\r\n        this.labelVip1 = cc.find(\"iconList/label_vip_to\", this.vipNode).getComponent(cc.Label);\r\n        this.vipMoney = cc.find(\"iconList/vip_money\", this.vipNode).getComponent(cc.Label);\r\n        this.vipLevel = cc.find(\"iconList/vip_level\", this.vipNode).getComponent(cc.Label);\r\n        this.spriteVip = cc.find(\"vip1/icon_vip\", this.vipNode).getComponent(cc.Sprite);\r\n\r\n        this.processVip = cc.find(\"vip1/process_di/progressBar\", this.vipNode).getComponent(cc.ProgressBar);\r\n\r\n        // this.vipNode.active = !Global.Setting.vipDisable;\r\n\r\n    }\r\n\r\n    /**\r\n     * 修改昵称按钮\r\n     */\r\n    private openEditNicknameUI(){\r\n        Global.UI.show(\"WndEditName\");\r\n    }\r\n\r\n\r\n     /**\r\n     * 复制按钮\r\n     */\r\n    private copyIdAction(){\r\n        Global.NativeEvent.copyTextToClipboard(String(Global.PlayerData.uid), this.copyTextToClipboardCallBack.bind(this) );\r\n    }\r\n\r\n    /**\r\n     * 复制回调\r\n     * @param retStr \r\n     */\r\n    private copyTextToClipboardCallBack(retStr){\r\n        if (retStr.result == 0) {\r\n            Global.UI.fastTip(\"复制成功\");\r\n        }else {\r\n            Global.UI.fastTip(\"复制失败\");\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * 设置按钮\r\n     */\r\n    private openSettingUI(){\r\n        // Global.UI.show(\"WndSetting\");\r\n        //WndPlayerInfo.instance.ChangeYeqian(3);\r\n        // this.internalEvent.event(\"ChangeView\",3)\r\n    }\r\n\r\n    /**\r\n     * 点击修改头像\r\n     */\r\n    private openEditAvaterUI(){\r\n        this.internalEvent.event(\"ChangeView\",1)\r\n        //WndPlayerInfo.instance.ChangeYeqian(1);\r\n    }\r\n    /**\r\n     * 切换账号按钮\r\n     */\r\n    private exitAccountAction(){\r\n        Global.UI.show(\"WndMessageBox\", \"您确定退出当前账号返回登录界面？\", 1, ()=>{\r\n            Global.SceneManager.goToLogin();\r\n        }, ()=>{\r\n            \r\n        });\r\n        // Global.UI.show(\"WndToggleAccount\");\r\n    }\r\n\r\n    /**\r\n     * 绑定手机按钮\r\n     */\r\n    private openBindPhoneUI(){\r\n        Global.UI.show(\"WndBindPhone\");\r\n    }\r\n\r\n    /**\r\n     * 修改密码按钮\r\n     */\r\n    private openEditPwdUI(){\r\n        Global.UI.show(\"WndChangePwd\");\r\n    }\r\n\r\n     /**\r\n     * 激活按钮\r\n     */\r\n    activateBtnFunc(){\r\n         //打开vip特权界面\r\n        Global.Event.event(GlobalEvent.SHOW_NET_WAITING, \"WndVip3\")\r\n        Global.UI.show(\"WndVip3\");\r\n    }\r\n\r\n\r\n\r\n    protected onSubViewHide()\r\n    {\r\n        \r\n    }\r\n\r\n    protected onSubViewShow()\r\n    {\r\n        this.model.reqGetUserInfo(null,null);\r\n        this.refreshPanel()\r\n    }\r\n\r\n    onDispose()\r\n    {\r\n        Global.Event.off(GlobalEvent.PERSONALINFOUPDATE, this, this.refreshPanel)\r\n    }\r\n\r\n    private refreshPanel()\r\n    {\r\n        var data = Global.PlayerData;\r\n        this.nameLbl.string = Global.Toolkit.removeEmoji(data.nickname);\r\n        this.idLbl.string = \"ID:\" + String(data.uid);\r\n        this.userTypeLbl.string = (data.type == 1? \"游客用户\" : \"正式用户\");\r\n        if(Global.Setting.SkinConfig.isRed )\r\n            this.userTypeLbl.node.color = (data.type == 1? this.userTypeLbl.node.color : cc.color(74,157,70,255))\r\n       \r\n        let phoneStr = data.phone.split(\" \")[1];\r\n        phoneStr = phoneStr || data.phone;\r\n        this.phoneLbl.string = (data.phone == \"\" ? \"未绑定\" : Global.Toolkit.formateStrWithAsterisk(phoneStr, 3, 4));\r\n        this.spriteHead.spriteFrame = Global.Toolkit.getLocalHeadSf(data.headimg);\r\n        //头像框设置\r\n        // Global.Toolkit.loadLocalHeadFrame(this.spriteHeadFrame, data.headkuang);\r\n\r\n        // if (this.bindPhone && data.phone != \"\") {\r\n        //     this.bindPhone.active = false;\r\n        // }\r\n        // else {\r\n        //     this.bindPhone.active = true;\r\n        // }\r\n\r\n        if (data.phone) {\r\n            this.changePwdBtn.active = true;\r\n            this.bindPhoneBtn.active = false;\r\n        }\r\n        else {\r\n            this.changePwdBtn.active = false;\r\n            this.bindPhoneBtn.active = true;\r\n        }\r\n\r\n        if(data.vip > 0){\r\n            //已经是vip的情况\r\n            this.vipNodeArr[0].active = false;\r\n            this.vipNodeArr[1].active = true;\r\n            this.activateTextNode.active = false;\r\n            this.upgradeTextNode.active = true;\r\n            Global.Toolkit.loadLocalVip(this.spriteVip, data.vip);\r\n        }else{\r\n            //不是vip的情况\r\n            this.vipNodeArr[0].active = true;\r\n            this.vipNodeArr[1].active = false;\r\n            this.activateTextNode.active = true;\r\n            this.upgradeTextNode.active = false;\r\n        }\r\n        \r\n\r\n        var percent = 1;\r\n        var toVip = data.vip + 1;\r\n        var vipUgradeExp = this.model.GetVipUpgradeExp(toVip);\r\n        var vipNeedExp = vipUgradeExp - data.vipExp;\r\n        // if(vipNeedExp > 0){\r\n        //     this.labelVip.string = \"仅需充值\" + vipNeedExp + \"元，即可成为VIP\" + toVip;\r\n        //     percent = data.vipExp / vipUgradeExp;\r\n        //     this.activateBtn.active = true;\r\n        // }else{\r\n        //     this.labelVip.string = \"恭喜您已成为至尊VIP\" + data.vip;\r\n        //     this.activateBtn.active = false;\r\n        // }\r\n        if (vipNeedExp > 0) {\r\n            // this.labelVip.string = cc.js.formatStr(\"仅需充值%s元，即可成为VIP%s\", vipNeedExp, toVip)\r\n            this.vipMoney.string = vipNeedExp + \"元\";\r\n            this.vipLevel.string = \"VIP\" + String(toVip);\r\n            percent = data.vipExp / vipUgradeExp;\r\n            this.activateBtn.active = true;\r\n            this.vipMoney.node.active = true;\r\n            this.vipLevel.node.active = true;\r\n            this.labelVip1.node.active = true;\r\n        } else {\r\n            this.labelVip.string = \"恭喜您已成为至尊VIP\" + data.vip;\r\n            this.activateBtn.active = false;\r\n            this.vipMoney.node.active = false;\r\n            this.vipLevel.node.active = false;\r\n            this.labelVip1.node.active = false;\r\n        }\r\n\r\n        this.processVip.progress = percent;\r\n    }\r\n\r\n}"]}