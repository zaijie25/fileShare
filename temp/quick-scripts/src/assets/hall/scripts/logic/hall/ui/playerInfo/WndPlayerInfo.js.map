{"version":3,"sources":["assets\\hall\\scripts\\logic\\hall\\ui\\playerInfo\\WndPlayerInfo.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,oDAA+C;AAG/C,uDAAkD;AAClD,mDAA8C;AAC9C,mDAA8C;AAC9C,uDAAkD;AAElD;IAA2C,iCAAO;IAAlD;QAAA,qEA0JC;QA5IG;;WAEG;QACH,gBAAU,GAAU,CAAC,CAAC,CAAC;QACvB;;WAEG;QACH,eAAS,GAAa,EAAE,CAAC;QACzB;;WAEG;QACH,gBAAU,GAAa,EAAE,CAAC;QAElB,iBAAW,GAAQ;YACvB,kBAAkB,EAAC,yCAAyC;SAE/D,CAAA;QAEO,oBAAc,GAAQ;YAC1B,kBAAkB,EAAC,0BAAgB;SACtC,CAAA;;IAwHL,CAAC;IAtHG;;OAEG;IACO,8BAAM,GAAhB;QAEI,IAAI,CAAC,IAAI,GAAG,eAAe,CAAC;QAC5B,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,EAAE,CAAC,QAAQ,CAAC;QAChC,IAAI,CAAC,OAAO,GAAG,yCAAyC,CAAC;QACzD,IAAI,CAAC,KAAK,GAAoB,MAAM,CAAC,YAAY,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAC;IAClF,CAAC;IAED,iCAAS,GAAT;QACI,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,YAAY,EAAC,IAAI,EAAC,IAAI,CAAC,YAAY,CAAC,CAAA;QAC3D,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAA;IACxB,CAAC;IAED;;OAEG;IACO,gCAAQ,GAAlB;QACI,IAAI,CAAC,aAAa,CAAC,EAAE,CAAC,YAAY,EAAC,IAAI,EAAC,IAAI,CAAC,YAAY,CAAC,CAAA;QAC1D,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;QACzD,KAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAC;YACtB,IAAI,UAAU,GAAG,IAAI,CAAC,cAAc,CAAC,gBAAgB,GAAG,CAAC,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;YAErF,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,YAAY,EAAE,UAAU,CAAC,CAAC;YAC1D,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;YAE5D,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,kBAAkB,GAAG,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;SACnE;QACD,IAAI,CAAC,cAAc,GAAmB,IAAI,CAAC,OAAO,CAAC,gBAAgB,EAAE,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,EAAE,wBAAc,CAAC,CAAC;QACzH,IAAI,CAAC,cAAc,GAAmB,IAAI,CAAC,OAAO,CAAC,gBAAgB,EAAE,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,EAAE,wBAAc,CAAC,CAAC;QACzH,IAAI,CAAC,gBAAgB,GAAqB,IAAI,CAAC,OAAO,CAAC,kBAAkB,EAAE,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,EAAE,0BAAgB,CAAC,CAAC;QACjI,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAA;QAC1C,IAAI,CAAC,WAAW,EAAE,CAAA;IACtB,CAAC;IAEK,mCAAW,GAAjB;;;;4BACI,qBAAM,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,EAAC,IAAI,CAAC,cAAc,EAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,EAAA;;wBAArF,SAAqF,CAAA;;;;;KACxF;IAED;;OAEG;IACO,8BAAM,GAAhB;QACI,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;QACrB,IAAI,KAAK,GAAqB,MAAM,CAAC,YAAY,CAAC,QAAQ,CAAC,kBAAkB,CAAC,CAAC;QAC/E,QAAQ;QACR,IAAI,UAAU,GAAG,MAAM,CAAC,UAAU,CAAC;QACnC,IAAI,UAAU,CAAC,KAAK,IAAI,EAAE,IAAI,KAAK,CAAC,YAAY,IAAI,CAAC,EAAE;YACnD,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;SACpC;IACL,CAAC;IACD;;OAEG;IACO,+BAAO,GAAjB;QACI,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAA;IACxB,CAAC;IAED;;OAEG;IACK,oCAAY,GAApB;QACI,IAAI,CAAC,KAAK,EAAE,CAAC;IACjB,CAAC;IAED;;;OAGG;IACH,qCAAa,GAAb,UAAc,MAAM;QAChB,IAAI,GAAG,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACtC,IAAI,KAAK,GAAG,GAAG,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QAChC,IAAI,MAAM,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;QAE7B,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;IAC9B,CAAC;IAED;;;OAGG;IACH,oCAAY,GAAZ,UAAa,MAAc;QACvB,IAAI,IAAI,CAAC,UAAU,IAAI,MAAM,EAAE;YAC3B,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC;YACzB,IAAI,CAAC,eAAe,EAAE,CAAA;YACtB,QAAQ,IAAI,CAAC,UAAU,EAAE;gBACrB,KAAK,CAAC;oBACF,IAAI,CAAC,gBAAgB,CAAC,YAAY,GAAG,IAAI,CAAA;oBACzC,MAAM;gBACV,KAAK,CAAC;oBACF,IAAI,CAAC,cAAc,CAAC,YAAY,GAAG,IAAI,CAAA;oBACvC,MAAM;gBACV,KAAK,CAAC;oBACF,IAAI,CAAC,cAAc,CAAC,YAAY,GAAG,IAAI,CAAA;oBACvC,MAAK;gBACT,KAAK,CAAC;oBACF,IAAI,CAAC,gBAAgB,CAAC,YAAY,GAAG,IAAI,CAAA;oBACzC,MAAK;gBACT;oBACI,MAAM;aACb;YACD,IAAI,CAAC,QAAQ,EAAE,CAAC;SACnB;IACL,CAAC;IAED;;OAEG;IACH,gCAAQ,GAAR;QACI,KAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAC;YACtB,IAAI,KAAK,GAAW,CAAC,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC;YAC3C,IAAI,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;YAC3C,UAAU,CAAC,MAAM,GAAG,KAAK,CAAC;SAC7B;QACD,IAAI,CAAC,cAAc,EAAE,CAAA;IACzB,CAAC;IACL,oBAAC;AAAD,CA1JA,AA0JC,CA1J0C,iBAAO,GA0JjD","file":"","sourceRoot":"/","sourcesContent":["import WndBase from \"../../../core/ui/WndBase\";\r\nimport PlayerInfoModel from \"../../../hallcommon/model/PlayerInfoModel\";\r\nimport BindingGiftModel from \"../../../hallcommon/model/BindingGiftModel\";\r\nimport PersonalInfoView from \"./PersonalInfoView\";\r\nimport ChooseHeadView from \"./ChooseHeadView\";\r\nimport MusicLayerView from \"./MusicLayerView\";\r\nimport SettingLayerView from \"./SettingLayerView\";\r\n\r\nexport default class WndPlayerInfo extends WndBase{\r\n\r\n    /**\r\n     * 数据对象\r\n     */\r\n    private model: PlayerInfoModel;\r\n\r\n    private personalInfoView:PersonalInfoView\r\n\r\n    private chooseHeadView:ChooseHeadView\r\n\r\n    private musicLayerView:MusicLayerView\r\n\r\n    private settingLayerView:SettingLayerView\r\n    /**\r\n     * 当前页签\r\n     */\r\n    currYeqian:number = -1;\r\n    /**\r\n     * 页签节点集合\r\n     */\r\n    yeqianArr:cc.Node[] = [];\r\n    /**\r\n     * 内容节点集合\r\n     */\r\n    contentArr:cc.Node[] = [];\r\n\r\n    private subViewPath :any = {\r\n        \"personalInfoView\":\"hall/prefabs/ui/PlayerInfo/PersonalInfo\",\r\n        \r\n    }\r\n\r\n    private viewKeyTypeMap :any = {\r\n        \"personalInfoView\":PersonalInfoView,\r\n    }\r\n\r\n    /**\r\n     * 初始化脚本\r\n     */\r\n    protected onInit() {\r\n       \r\n        this.name = \"WndPlayerInfo\";\r\n        this.layer = Global.UI.PopLayer;\r\n        this.resPath = \"hall/prefabs/ui/PlayerInfo/PlayerInfoUI\";\r\n        this.model = <PlayerInfoModel>Global.ModelManager.getModel(\"PlayerInfoModel\");\r\n    }\r\n\r\n    onDispose(){\r\n        this.internalEvent.off(\"ChangeView\",this,this.ChangeYeqian)\r\n        this.currYeqian = -1\r\n    }\r\n\r\n    /**\r\n     * 初始化UI\r\n     */\r\n    protected initView() {\r\n        this.internalEvent.on(\"ChangeView\",this,this.ChangeYeqian)\r\n        this.addCommonClick(\"bg/close\", this.closeBtnFunc, this);\r\n        for(var i = 0; i < 4; i++){\r\n            var yeqianNode = this.addCommonClick(\"yeqian/yeqian_\" + i, this.yeqianBtnFunc, this);\r\n\r\n            this.yeqianArr[i * 2] = cc.find(\"noSelected\", yeqianNode);\r\n            this.yeqianArr[i * 2 + 1] = cc.find(\"selected\", yeqianNode);\r\n\r\n            this.contentArr[i] = cc.find(\"content/content_\" + i, this.node);\r\n        }\r\n        this.chooseHeadView = <ChooseHeadView>this.addView(\"ChooseHeadView\", this.getChild(\"content/content_1\"), ChooseHeadView);\r\n        this.musicLayerView = <MusicLayerView>this.addView(\"MusicLayerView\", this.getChild(\"content/content_2\"), MusicLayerView);\r\n        this.settingLayerView = <SettingLayerView>this.addView(\"SettingLayerView\", this.getChild(\"content/content_3\"), SettingLayerView);\r\n        this.initSubViewClass(this.viewKeyTypeMap)\r\n        this.InitScripts()\r\n    }\r\n\r\n    async InitScripts() {\r\n        await this.initSubView(this.subViewPath,this.viewKeyTypeMap,this.getChild(\"content\"))\r\n    }\r\n\r\n    /**\r\n     * 界面打开回调\r\n     */\r\n    protected onOpen(){\r\n        this.ChangeYeqian(0);\r\n        var model = <BindingGiftModel>Global.ModelManager.getModel(\"BindingGiftModel\");\r\n        //头像点击事件\r\n        let playerData = Global.PlayerData;\r\n        if (playerData.phone == \"\" && model.BindAwardNum != 0) {\r\n            Global.UI.show(\"WndBindingGift\"); \r\n        }\r\n    }\r\n    /**\r\n     * 界面关闭回调\r\n     */\r\n    protected onClose(){\r\n        this.currYeqian = -1\r\n    }\r\n\r\n    /**\r\n     * 关闭按钮点击\r\n     */\r\n    private closeBtnFunc(){\r\n        this.close();\r\n    }\r\n\r\n    /**\r\n     * 页签按钮点击\r\n     * @param target \r\n     */\r\n    yeqianBtnFunc(target){\r\n        var arr = target.node.name.split(\"_\");\r\n        var param = arr[arr.length - 1];\r\n        var yeqian = parseInt(param);\r\n\r\n        this.ChangeYeqian(yeqian);\r\n    }\r\n\r\n    /**\r\n     * 切换页签\r\n     * @param yeqian \r\n     */\r\n    ChangeYeqian(yeqian: number) {\r\n        if (this.currYeqian != yeqian) {\r\n            this.currYeqian = yeqian;\r\n            this.closeAllSubView()\r\n            switch (this.currYeqian) {\r\n                case 0:\r\n                    this.personalInfoView.subViewState = true\r\n                    break;\r\n                case 1:\r\n                    this.chooseHeadView.subViewState = true\r\n                    break;\r\n                case 2:\r\n                    this.musicLayerView.subViewState = true\r\n                    break\r\n                case 3:\r\n                    this.settingLayerView.subViewState = true\r\n                    break\r\n                default:\r\n                    break;\r\n            }\r\n            this.UpdatBtn();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 更新界面\r\n     */\r\n    UpdatBtn(){\r\n        for(var i = 0; i < 4; i++){\r\n            var bShow:boolean = (i == this.currYeqian);\r\n            var yeqianNode = this.yeqianArr[i * 2 + 1];\r\n            yeqianNode.active = bShow;\r\n        }\r\n        this.OnDataPrepared()\r\n    }\r\n}"]}