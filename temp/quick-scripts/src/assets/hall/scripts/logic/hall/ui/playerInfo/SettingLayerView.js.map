{"version":3,"sources":["assets\\hall\\scripts\\logic\\hall\\ui\\playerInfo\\SettingLayerView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ViewBase from \"../../../core/ui/ViewBase\";\r\nimport HallBtnHelper from \"../hall/views/HallBtnHelper\";\r\n\r\n/**\r\n * 选择头像界面\r\n */\r\nexport default class SettingLayerView extends ViewBase \r\n{\r\n\r\n    /**\r\n     * 版本号文本\r\n     */\r\n    versionLbl:cc.Label = null;\r\n    /**\r\n     * 音乐设置节点集合\r\n     */\r\n    musicNodeArr:cc.Node[] = [];\r\n    /**\r\n     * 音效设置节点集合\r\n     */\r\n    soundNodeArr:cc.Node[] = [];\r\n\r\n    private officalUrlText:cc.Label\r\n\r\n    protected initView()\r\n    {\r\n        var musicNode:cc.Node = this.addCommonClick(\"musicSwitch\", this.onMusicSwitch, this);\r\n        var soundNode:cc.Node = this.addCommonClick(\"audioSwitch\", this.onAudioSwitch, this);\r\n        this.officalUrlText = this.getComponent(\"officalNode/url\",cc.Label)\r\n        this.addCommonClick(\"officalNode/btn\",this.onBackUpGameBtn,this)\r\n\r\n        this.musicNodeArr[0] = cc.find(\"control_shut\", musicNode);\r\n        this.musicNodeArr[1] = cc.find(\"control_open\", musicNode);\r\n        \r\n        this.soundNodeArr[0] = cc.find(\"control_shut\", soundNode);\r\n        this.soundNodeArr[1] = cc.find(\"control_open\", soundNode);\r\n\r\n        this.versionLbl = this.getComponent(\"versionLbl\",cc.Label)\r\n\r\n        let verStr = Global.HotUpdateManager.nativeVersions[\"hall\"]; //Global.Setting.SystemInfo.Version\r\n        this.setVersionLblText(verStr);\r\n        this.initOfficalUrl()\r\n        \r\n    }\r\n\r\n    onSubViewShow()\r\n    {\r\n        this.UpdateUI();\r\n        this.setVersionLblText();\r\n    }\r\n\r\n    /**\r\n     * 更新界面\r\n     */\r\n    UpdateUI(){\r\n        let musicEnable = Global.Setting.settingData.musicEnable;\r\n        let soundEnable = Global.Setting.settingData.soundEnable;\r\n\r\n        this.musicNodeArr[0].active = !musicEnable;\r\n        this.musicNodeArr[1].active = musicEnable;\r\n        \r\n        this.soundNodeArr[0].active = !soundEnable;\r\n        this.soundNodeArr[1].active = soundEnable;\r\n    }\r\n\r\n    private onBackUpGameBtn(){\r\n        HallBtnHelper.WndBackUpOpen();\r\n    }\r\n\r\n    /**\r\n     * 设置版本号文本\r\n     * @param str \r\n     */\r\n    private setVersionLblText(str?: string){\r\n        \r\n        this.versionLbl.string = \"版本号:\" + Global.Toolkit.genAppInfo() + \"•\"+Global.PlayerData.merge_type;\r\n    }\r\n\r\n    private initOfficalUrl()\r\n    {\r\n        let url= Global.Setting.Urls.downLoadUrl;\r\n        let arr = url.split(\"//\");\r\n        let arr1 = arr[arr.length - 1].split(\"/\");\r\n        let name = arr1[0];\r\n        let baseWide = 123\r\n        this.officalUrlText.string =  name;\r\n        // setTimeout(() => {\r\n        //     if (cc.isValid(this.save_bg.node)) {\r\n        //         this.save_bg.node.width = baseWide +this.officalUrlText.node.width\r\n        //     }\r\n        // }, 20);\r\n    }\r\n\r\n    /**\r\n     * 音乐点击\r\n     */\r\n    private onMusicSwitch(){\r\n        let musicEnable = Global.Setting.settingData.musicEnable;\r\n        Global.Audio.setMusicEnable(!musicEnable);\r\n        this.UpdateUI();\r\n    }\r\n\r\n    /**\r\n     * 音效点击\r\n     */\r\n    private onAudioSwitch(){\r\n        let soundEnable = Global.Setting.settingData.soundEnable;\r\n        Global.Audio.setSoundEnable(!soundEnable);\r\n        this.UpdateUI();\r\n    }\r\n\r\n}"]}