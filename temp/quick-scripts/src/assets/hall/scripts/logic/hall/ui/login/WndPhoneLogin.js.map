{"version":3,"sources":["assets\\hall\\scripts\\logic\\hall\\ui\\login\\WndPhoneLogin.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import WndBase from \"../../../core/ui/WndBase\";\r\nimport LoginModel from \"../../../hallcommon/model/LoginModel\";\r\nimport PhoneInputView from \"./view/PhoneInputView\";\r\nimport PwdInputView from \"./view/PwdInputView\";\r\n\r\nexport default class WndPhoneLogin extends WndBase\r\n{\r\n    private model:LoginModel;\r\n    private phoneInputView:PhoneInputView;\r\n    private pwdInputView:PwdInputView;\r\n    private clickTagMap = {}\r\n\r\n    protected onInit()\r\n    {\r\n        this.name = \"WndPhoneLogin\";\r\n        this.layer = \"PopLayer\";\r\n        this.resPath = \"hall/prefabs/ui/PhoneLoginUI\";\r\n        this.model = <LoginModel>Global.ModelManager.getModel(\"LoginModel\");\r\n    }\r\n\r\n    protected initView()\r\n    {\r\n        this.addCommonClick(\"bg/close\", this.onCloseClick, this);\r\n        this.addCommonClick(\"loginBtn\", this.onLoginBtnClick, this);\r\n        this.addCommonClick(\"forgetPwd\", this.onForgetClick, this, null);\r\n\r\n        this.phoneInputView = <PhoneInputView>this.addView(\"PhoneInputView\", this.getChild(\"phoneContainer\"), PhoneInputView);\r\n        this.pwdInputView = <PwdInputView>this.addView(\"PwdInputView\", this.getChild(\"pwdContainer\"), PwdInputView);\r\n\r\n        if(this.model.localPhone)\r\n            this.phoneInputView.phone = this.model.localPhone;\r\n        if(this.model.localAreaCode)\r\n            this.phoneInputView.area = this.model.localAreaCode;\r\n        this.clickTagMap[\"click\"] = true\r\n    }\r\n\r\n\r\n    private onForgetClick()\r\n    {\r\n        Global.UI.show(\"WndForgetPwd\");\r\n    }\r\n\r\n    private onCloseClick()\r\n    {\r\n        this.close();\r\n    }\r\n\r\n    onOpen()\r\n    {\r\n        this.phoneInputView.subViewState = true\r\n        this.pwdInputView.subViewState = true\r\n    }\r\n   \r\n\r\n    private onLoginBtnClick()\r\n    {\r\n        if (!this.clickTagMap[\"click\"]) {\r\n            return\r\n        }\r\n        this.clickTagMap[\"click\"] = false\r\n        this.clickTagMap[\"clickTimer\"] = setTimeout(() => {\r\n            this.clickTagMap[\"click\"] = true\r\n        }, 1000);\r\n        if(this.phoneInputView.phone == \"\")\r\n        {\r\n            Global.UI.fastTip(\"请输入手机号\");\r\n            return;\r\n        }\r\n        if(this.pwdInputView.pwd == \"\")\r\n        {\r\n            Global.UI.fastTip(\"请输入密码\");\r\n            return;\r\n        }\r\n\r\n        if(!this.phoneInputView.isAreaVaild())\r\n        {\r\n            Global.UI.fastTip(\"请选择正确的地区信息\");\r\n            return;\r\n        }\r\n        //检查code\r\n        let pwd = Global.Toolkit.md5(this.pwdInputView.pwd);\r\n        let acode = this.phoneInputView.area;\r\n        let phone = this.phoneInputView.phone\r\n        this.model.reqPhoneLogin(phone, pwd, acode);\r\n    }\r\n\r\n    onDispose()\r\n    {\r\n        super.onDispose()\r\n        this.resetTag()\r\n        \r\n    }\r\n\r\n    onClose()\r\n    {\r\n        this.resetTag()\r\n    }\r\n\r\n    resetTag()\r\n    {\r\n        if(this.clickTagMap[\"clickTimer\"])\r\n        {\r\n            clearTimeout(this.clickTagMap[\"clickTimer\"])\r\n        }\r\n      \r\n        this.clickTagMap[\"click\"] = true\r\n    }\r\n}"]}