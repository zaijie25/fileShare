{"version":3,"sources":["assets\\hall\\scripts\\logic\\hall\\ui\\recharge\\ChatCenterNode.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import YXButton from \"../../../core/component/YXButton\";\r\nimport ChatServer from \"../../../core/net/chat/ChatServer\";\r\nimport List from \"../../../core/net/chat/List\";\r\nimport { italk } from \"../../../core/net/tcp/italkmsg_pb\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class ChatCenterNode extends cc.Component {\r\n    //列表\r\n    @property(List)\r\n    chatList: List = null;\r\n    public severHeadFrame:cc.SpriteFrame = null;\r\n    public data = new Array();\r\n    // public selectMsgID = null;\r\n    // holdTimeEclipse = 0;    //用来检测长按\r\n    public copyBtnActive = false;       //是否显示隐藏copy按钮\r\n    onLoad() {\r\n        this.data = [];\r\n        let msgListScroll =  cc.find(\"scrollView\",this.node)\r\n        if(msgListScroll){\r\n            msgListScroll.on(\"scrolling\", this.onScrollViewScroll, this);\r\n        }\r\n    }\r\n    onScrollViewScroll(){\r\n        if(this.copyBtnActive){\r\n            this.copyBtnActive = false;\r\n            Global.ChatServer.chatCls.copyBtn.active = false;\r\n        }\r\n    }\r\n    public updateUI(isClear){\r\n        if(isClear){\r\n            Global.ChatServer.sendClearMsg();//打开聊天界面上报已读\r\n        }\r\n        this.chatList.getComponent(cc.Widget).updateAlignment();\r\n        this.chatList.content.getComponent(cc.Widget).updateAlignment();\r\n        if(Global.ChatServer.severCheckTime != 0){\r\n            this.chatList.numItems = this.data.length;\r\n            this.chatList.scrollTo(this.data.length - 1);\r\n        }else{\r\n            Logger.error(\"还未获取到消息状态，不刷新\");\r\n        }\r\n    }\r\n\r\n    onListRender(item: any, idx: number) {\r\n        let chat:italk.pb.ItalkChatMsg =this.data[idx];\r\n        let msg = chat.content.text;\r\n        let myMessageItem: any = item.getChildByName('myMessageItem');\r\n        let serviceMessageItem: any = item.getChildByName('serviceMessageItem');\r\n        let msgItem:cc.Node = null;\r\n        if(chat.userid != Global.ChatServer.userid){\r\n            myMessageItem.active = false;\r\n            msgItem = serviceMessageItem\r\n            msgItem.active = true;\r\n            let headFrame = cc.find(\"chat/headFrame\",msgItem).getComponent(cc.Sprite);\r\n            if(Global.ChatServer.QuickData)\r\n            {\r\n                let sfName = Global.ChatServer.QuickData.head_url || '1';\r\n                Global.ResourceManager.loadAutoAtlas(headFrame, \"hall/texture/hall/rechargeCash/rechargeCash\", sfName)\r\n            }else{\r\n                if(this.severHeadFrame){ //设置客服头像\r\n                    headFrame.spriteFrame = this.severHeadFrame;\r\n                }\r\n            }\r\n            let depositSprite = cc.find(\"chat/rechargePanel\",msgItem).getComponent(cc.Sprite);\r\n            depositSprite.node.active = false;\r\n            let msgBg = cc.find(\"chat/msBg\",msgItem);\r\n            msgBg.active = false;\r\n            if(chat.msgint1 == 1 && chat.content.text == \"1000\"){\r\n                Global.ResourceManager.loadAutoAtlas(depositSprite,\"hall/texture/hall/chat/chat\", \"03\", null, false);\r\n                let depositNode = Global.UIHelper.addCommonClick(msgItem, \"chat/rechargePanel\", this.showRechange, this, cc.Button.Transition.NONE);\r\n                depositNode.data = {msg_id:chat.msgid,pay_type:chat.content.text};\r\n                depositSprite.node.active = true;\r\n                msgBg.active = false;\r\n                msgItem.height = 140;\r\n                item.height = msgItem.height;\r\n                return;\r\n            }else if(chat.msgint1 == 1 && chat.content.text == \"1001\"){\r\n                Global.ResourceManager.loadAutoAtlas(depositSprite,\"hall/texture/hall/chat/chat\", \"02\", null, false);\r\n                let depositNode = Global.UIHelper.addCommonClick(msgItem, \"chat/rechargePanel\", this.showRechange, this, cc.Button.Transition.NONE);\r\n                depositNode.data = {msg_id:chat.msgid,pay_type:chat.content.text};\r\n                depositSprite.node.active = true;\r\n                msgBg.active = false;\r\n                msgItem.height = 140;\r\n                item.height = msgItem.height;\r\n                return;\r\n            }else if(chat.msgint1 == 1 && chat.content.text == \"1002\"){\r\n                Global.ResourceManager.loadAutoAtlas(depositSprite,\"hall/texture/hall/chat/chat\", \"01\", null, false);\r\n                let depositNode = Global.UIHelper.addCommonClick(msgItem, \"chat/rechargePanel\", this.showRechange, this, cc.Button.Transition.NONE);\r\n                depositNode.data = {msg_id:chat.msgid,pay_type:chat.content.text};\r\n                depositSprite.node.active = true;\r\n                msgBg.active = false;\r\n                msgItem.height = 140;\r\n                item.height = msgItem.height;\r\n                return;\r\n            }\r\n        }else{\r\n            serviceMessageItem.active = false;\r\n            msgItem = myMessageItem;\r\n            msgItem.active = true;\r\n            let headFrame = cc.find(\"chat/headFrame\",msgItem).getComponent(cc.Sprite);\r\n            let playerData = Global.PlayerData;\r\n            if (headFrame.node && Global.Toolkit.getLocalHeadSf(playerData.headimg) != null) {\r\n                headFrame.spriteFrame = Global.Toolkit.getLocalHeadSf(playerData.headimg);\r\n            }\r\n            // let statusLabel = cc.find(\"chat/msBg/statusLabel\",msgItem).getComponent(cc.Label);\r\n            // if(Global.ChatServer.severCheckTime > chat.msgid)\r\n            // {\r\n            //     statusLabel.string =\"已读\";\r\n            // }else{\r\n            //     statusLabel.string =\"未读\";\r\n            // }\r\n        }\r\n        if(msgItem){\r\n            msgItem.active = true;\r\n            let msgLabel:cc.RichText = cc.find(\"chat/msBg/RichText\",msgItem).getComponent(cc.RichText);\r\n            msgLabel.maxWidth = 0;\r\n            if (cc.sys.os == cc.sys.OS_IOS) {\r\n                let msgStr = Global.ChatServer.chatCls.replaceLocalImg(msg)\r\n                msgLabel.string =msgStr.replace(/(\\r\\n)/g,\"\\n\");\r\n            }else{\r\n                msgLabel.string = Global.ChatServer.chatCls.replaceLocalImg(msg);\r\n            }\r\n            let pic = cc.find(\"chat/msBg/photo\",msgItem).getComponent(cc.Sprite);        \r\n            let msgBg = cc.find(\"chat/msBg\",msgItem);\r\n            msgBg.active = true;\r\n            let dateArr =  chat.content.url.split(\".\");\r\n            let fileName =  dateArr[dateArr.length-1];\r\n            let copyNode = cc.find(\"chat/msBg/copy\",msgItem);\r\n            // let copyNode =  Global.UIHelper.addCommonClick(msgItem, \"chat/msBg/copy\", this.copyMsgText, this, cc.Button.Transition.NONE);\r\n            // copyNode.data = msg;\r\n            // if(chat.msgid == this.selectMsgID){\r\n            //     copyNode.active = true\r\n            // }else{\r\n                copyNode.active = false\r\n            // }\r\n            if(chat.content.url && chat.content.width && chat.content.height && fileName != \"mp4\")\r\n            {\r\n                msgLabel.string = \"\";//清空消息，防止复用\r\n                pic.node.active = true;\r\n                let thumburl =  Global.ChatServer.getImageHttp(chat.content.thumburl);\r\n                let url =  Global.ChatServer.getImageHttp(chat.content.url);\r\n                let imageWidth = chat.content.width*2;\r\n                let imageHeight = chat.content.height*2;\r\n                let data = {url:url,imageWidth:imageWidth,imageHeight:imageHeight,};\r\n                if (imageHeight > 400){\r\n                    imageHeight = 400;\r\n                    imageWidth = chat.content.width/(chat.content.height/400);\r\n                }else if(imageHeight < 50)\r\n                {\r\n                    imageHeight = 50;\r\n                    imageWidth = chat.content.width/(chat.content.height/50);\r\n                }\r\n                if(imageWidth > 300){\r\n                    imageWidth = 300;\r\n                    imageHeight = chat.content.height/(chat.content.width/300);\r\n                }else if(imageWidth < 50)\r\n                {\r\n                    imageWidth = 300;\r\n                    imageHeight = chat.content.height/(chat.content.width/50);\r\n                }\r\n                let photo =  Global.UIHelper.addCommonClick(msgItem, \"chat/msBg/photo\", this.checkBigImage, this, cc.Button.Transition.NONE);\r\n                photo.data = data;\r\n                // pic.spriteFrame = null;\r\n                this.loadSeverHeader(thumburl,chat.content.thumburl,(frame)=>{\r\n                    pic.spriteFrame = frame;\r\n                });\r\n                pic.node.height = imageHeight;\r\n                pic.node.width = imageWidth;\r\n                msgBg.width = imageWidth+30; \r\n                msgBg.height = imageHeight+ 20;\r\n                msgItem.height = msgBg.height+30;\r\n                item.height = msgItem.height;\r\n            }else{\r\n                if(fileName == \"mp4\"){\r\n                    msgLabel.string = \"【视频发送成功】\";\r\n                }\r\n                pic.node.active = false;\r\n                if(msgLabel.node.getContentSize().width < 430){\r\n                    msgBg.width = msgLabel.node.getContentSize().width+30;   //设定当前对话框 背景宽度\r\n                }else{\r\n                    msgLabel.maxWidth = 430; //设定当前label 宽度\r\n                    msgBg.width = 460;\r\n                }\r\n                msgBg.height = msgLabel.node.height+20;\r\n                msgBg.data = msg;\r\n                Global.UIHelper.addCommonClick(msgItem, \"chat/msBg\", this.selectMsgg, this, cc.Button.Transition.NONE);\r\n                msgItem.height = msgBg.height+30;\r\n                item.height = msgItem.height;\r\n            }\r\n        }\r\n\r\n    }\r\n    public loadSeverHeader(url,picID,callback:Function){\r\n        if (CC_JSB) {\r\n            Global.Toolkit.LoadPicToNative(Global.Toolkit.DealWithUrl(url), picID, (texture:cc.Texture2D) => {\r\n                var frame = new cc.SpriteFrame(texture);\r\n                callback(frame)\r\n            })\r\n        }\r\n        else {\r\n            cc.loader.load(Global.Toolkit.DealWithUrl(url), function (err, texture :cc.Texture2D) {\r\n                if(err!= null)\r\n                {\r\n                    return\r\n                }\r\n                var frame = new cc.SpriteFrame(texture);\r\n                callback(frame)\r\n            })\r\n        }\r\n    }\r\n    //查看大图\r\n    private checkBigImage(target){\r\n        if(target && target.node && target.node.data){\r\n            Global.UI.show(\"WndChatImage\",target.node.data);\r\n        }\r\n    }\r\n    //充值方式\r\n    private showRechange(target){\r\n        if(target && target.node && target.node.data){\r\n            Global.HallServer.send(NetAppface.mod,\"GetAitePayInfo\",target.node.data,(param)=>{\r\n                if(param.status == 1){\r\n                    param.pay_type = target.node.data.pay_type;\r\n                    Global.UI.show(\"WndBankRechange\",param);\r\n                    // if(target.node.data.pay_type == \"1000\"){\r\n                    //     Global.UI.show(\"WndAliPayRechange\",param);\r\n                    // }else if(target.node.data.pay_type == \"1001\"){\r\n                    //     Global.UI.show(\"WndWeChatRechange\",param);\r\n                    // }else{\r\n                    //     Global.UI.show(\"WndBankRechange\",param);\r\n                    // }\r\n                }else{\r\n                    Global.UI.fastTip(\"充值帐户信息拉取失败\");\r\n                }\r\n            })\r\n        }\r\n    }\r\n    //点击选择对应消息\r\n    private selectMsgg(target){\r\n        if(target && target.node && target.node.data){\r\n            this.copyBtnActive = true\r\n            let copyNode = cc.find(\"copy\",target.node);\r\n            copyNode.setPosition(cc.v2(-(target.node.width/2), copyNode.y));\r\n            let starWorldPos = copyNode.parent.convertToWorldSpaceAR(copyNode.position);\r\n            Global.Event.event(GlobalEvent.setCopypostion,starWorldPos,target.node.data)\r\n        }\r\n    }\r\n    // private setPressAction(btnNode){\r\n    //     let btn = btnNode.getComponent(YXButton);\r\n    //     if (btn == null) {\r\n    //         btn = btnNode.addComponent(YXButton);\r\n    //         btn.transition = cc.Button.Transition.NONE;\r\n    //     }\r\n    //     //触摸开始\r\n    //     btnNode.on(cc.Node.EventType.TOUCH_START,function(event){\r\n    //         this.holdClick = true;\r\n    //         this.holdTimeEclipse = 0;\r\n    //     },this);\r\n\r\n    //     btnNode.on(cc.Node.EventType.TOUCH_END,function(event){\r\n    //         this.holdClick=false;\r\n    //         if(this.holdTimeEclipse>=30)\r\n    //         {                \r\n    //             if(btnNode && btnNode.data){\r\n    //                 this.selectMsgID = btnNode.data\r\n    //                 let copyNode = cc.find(\"copy\",btnNode);\r\n    //                 copyNode.active = true\r\n    //                 this.chatList.updateAll()\r\n    //             }            \r\n    //         }\r\n    //         this.holdTimeEclipse=0; \r\n    //     },this)\r\n    // }\r\n    //点击复制\r\n    // private copyMsgText(target){\r\n    //     if(target && target.node && target.node.data){\r\n    //         // this.selectMsgID = null;\r\n    //         this.chatList.updateAll()\r\n    //         Global.NativeEvent.copyTextToClipboard(target.node.data, (retStr)=>{\r\n    //             if (retStr.result == 0) {\r\n    //                 Global.UI.fastTip(\"复制成功\");\r\n    //             }else {\r\n    //                 Global.UI.fastTip(\"复制失败\");\r\n    //             }\r\n    //         } );\r\n    //     }\r\n    // }\r\n    // update (dt) {\r\n    //     if(this.holdClick)\r\n    //     {\r\n    //         this.holdTimeEclipse++;\r\n    //         if(this.holdTimeEclipse>120)//如果长按时间大于2s，则认为长按了2s\r\n    //         {\r\n    //             this.holdTimeEclipse=120;\r\n    //         }\r\n    //     }\r\n    // }\r\n}\r\n"]}