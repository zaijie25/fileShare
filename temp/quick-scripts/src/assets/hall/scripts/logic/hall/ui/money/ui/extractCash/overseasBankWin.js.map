{"version":3,"sources":["assets\\hall\\scripts\\logic\\hall\\ui\\money\\ui\\extractCash\\overseasBankWin.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,4DAAuD;AAGvD;IAA6C,mCAAQ;IAArD;QAAA,qEAkGC;QA/FW,iBAAW,GAAe,IAAI,CAAC;QAC/B,oBAAc,GAAe,IAAI,CAAC;QAElC,mBAAa,GAAc,IAAI,CAAC;QAChC,qBAAe,GAAa,IAAI,CAAC;;IA2F7C,CAAC;IApFa,kCAAQ,GAAlB;QAAA,iBAqBC;QAnBG,IAAI,CAAC,KAAK,GAAiB,MAAM,CAAC,YAAY,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;QAExE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,aAAa,EAAC,EAAE,CAAC,OAAO,CAAC,CAAC;QAC/D,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,YAAY,CAAC,gBAAgB,EAAC,EAAE,CAAC,OAAO,CAAC,CAAC;QAGrE,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,YAAY,CAAC,2BAA2B,EAAC,EAAE,CAAC,KAAK,CAAC,CAAC;QAC7E,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,QAAQ,CAAC,kCAAkC,CAAC,CAAA;QAExE,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,6BAA6B,CAAC,CAAC;QACzD,IAAI,CAAC,sBAAsB,GAAG,IAAI,sBAAsB,EAAE,CAAC;QAC3D,IAAI,CAAC,sBAAsB,CAAC,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACtE,IAAI,CAAC,sBAAsB,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC;QACjE,IAAI,CAAC,sBAAsB,CAAC,MAAM,GAAG,KAAK,CAAC;QAE3C,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAC5B,IAAI,CAAC,cAAc,CAAC,gBAAgB,EAAC,cAAM,KAAI,CAAC,sBAAsB,CAAC,MAAM,GAAG,IAAI,CAAA,CAAA,CAAC,EAAC,IAAI,EAAC,IAAI,CAAC,CAAC;QAEjG,IAAI,CAAC,cAAc,CAAC,SAAS,EAAC,IAAI,CAAC,WAAW,EAAC,IAAI,CAAC,CAAC;IACzD,CAAC;IAED,8CAAoB,GAApB;QACI,IAAI,CAAC,sBAAsB,CAAC,MAAM,GAAG,KAAK,CAAC;QAC5C,8CAA8C;IACjD,CAAC;IAED,0CAAgB,GAAhB,UAAiB,IAAW;QACxB,MAAM,CAAC,GAAG,CAAC,SAAS,EAAC,IAAI,CAAC,CAAC;QAC3B,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,IAAI,CAAA;QAChC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAA;QACrC,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,KAAK,CAAA;QACnC,IAAI,CAAC,sBAAsB,CAAC,MAAM,GAAG,KAAK,CAAC;IAE/C,CAAC;IAED,wCAAc,GAAd,UAAe,IAAI;QACf,MAAM,CAAC,KAAK,CAAC,YAAY,EAAE,CAAC;QAC5B,MAAM,CAAC,GAAG,CAAC,MAAM,EAAC,IAAI,CAAC,CAAA;QACvB,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAA;QAC3B,IAAI,CAAC,oBAAoB,EAAE,CAAC;IAChC,CAAC;IAED,QAAQ;IACR,qCAAW,GAAX;QACI,IAAG,CAAC,IAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,SAAS,CAAC;YACrE,OAAO;QACX,IAAG,CAAC,IAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,QAAQ,CAAC;YACjE,OAAO;QACX,IAAG,CAAC,IAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,SAAS,CAAC;YACpE,OAAO;QACX,IAAG,CAAC,IAAI,CAAC,2BAA2B,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,GAAG,EAAE,gBAAgB,CAAC;YACnF,OAAO;QACX,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,wBAAwB,EAAC,IAAI,CAAC,WAAW,CAAC,MAAM,EAAC,IAAI,CAAC,cAAc,CAAC,MAAM,EAAC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;IAC1H,CAAC;IAEO,mDAAyB,GAAjC,UAAkC,IAAW,EAAE,SAAgB;QAE3D,IAAG,IAAI,CAAC,MAAM,IAAI,CAAC,EACnB;YACI,MAAM,CAAC,EAAE,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;YAC7B,OAAO,KAAK,CAAC;SAChB;QACD,OAAO,IAAI,CAAC;IAChB,CAAC;IAED;;;;;OAKG;IACK,qDAA2B,GAAnC,UAAoC,IAAW,EAAE,aAAoB,EAAE,SAAgB;QAEnF,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAClC,IAAI,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YACvB,IAAI,aAAa,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE;gBAC/B,MAAM,CAAC,EAAE,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;gBAC7B,OAAO,KAAK,CAAC;aAChB;SACJ;QACD,OAAO,IAAI,CAAC;IAChB,CAAC;IACL,sBAAC;AAAD,CAlGA,AAkGC,CAlG4C,kBAAQ,GAkGpD;;AAED;IAAqC,0CAAQ;IAA7C;QAAA,qEAsEC;QAjEa,cAAQ,GAAG,EAAE,CAAC;QACd,gBAAU,GAAW,IAAI,CAAA;QAGzB,eAAS,GAAU,CAAC,CAAA;;IA6DlC,CAAC;IAzDa,yCAAQ,GAAlB;QAAA,iBAYC;QAVG,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,8BAA8B,CAAC,CAAC;QAC1D,IAAI,CAAC,IAAI,CAAC,MAAM,GAAE,KAAK,CAAA;QACvB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,yBAAyB,CAAC,CAAC;QAC5D,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,YAAY,EAAE,EAAE,CAAC,UAAU,CAAC,CAAC;QAC7D,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAA;QAC7C,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,OAAO,EAAC,IAAI,CAAC,cAAc,EAAC,IAAI,CAAC,CAAA;QACpD,IAAI,CAAC,KAAK,GAAiB,MAAM,CAAC,YAAY,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;QACxE,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,cAAM,KAAI,CAAC,MAAM,GAAE,KAAK,CAAA,CAAC,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;QAEpE,IAAI,CAAC,SAAS,EAAE,CAAA;IACpB,CAAC;IAES,8CAAa,GAAvB;QAEI,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;IAC/B,CAAC;IACS,+CAAc,GAAxB;QAEI,IAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,EAC7B;YACI,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YACtC,IAAG,IAAI,CAAC,QAAQ;gBACZ,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;SAC3B;IACL,CAAC;IAES,0CAAS,GAAnB;QAAA,iBAsBC;QApBG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,oBAAoB,EAAE,CAAC;gCAEvC,CAAC;YAEL,IAAI,IAAI,GAAG,OAAK,KAAK,CAAC,CAAC,CAAC,CAAC;YACzB,MAAM,CAAC,GAAG,CAAC,IAAI,EAAC,IAAI,CAAC,CAAC;YACtB,IAAI,IAAI,GAAG,EAAE,CAAC,WAAW,CAAC,OAAK,IAAI,CAAC,CAAC;YACrC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;YACnB,EAAE,CAAC,IAAI,CAAC,iCAAiC,EAAC,IAAI,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;YACrF,EAAE,CAAC,IAAI,CAAC,gCAAgC,EAAC,IAAI,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;YACpF,OAAK,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;YAChC,IAAI,QAAQ,GAAG,CAAC,CAAA;YAChB,IAAI,MAAM,GAAG,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAA;YACvE,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAC;gBAEhC,MAAM,CAAC,SAAS,GAAG,IAAI,CAAA;gBACvB,KAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;YAC/B,CAAC,SAAO,CAAA;YACR,OAAK,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;;QAhB7B,KAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE;oBAAjC,CAAC;SAiBR;IACL,CAAC;IAES,4CAAW,GAArB,UAAsB,KAAK;QAEvB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAA;IAC1B,CAAC;IAEL,6BAAC;AAAD,CAtEA,AAsEC,CAtEoC,kBAAQ,GAsE5C","file":"","sourceRoot":"/","sourcesContent":["import ViewBase from \"../../../../../core/ui/ViewBase\";\r\nimport ExtractModel from \"../../../../../hallcommon/model/ExtractModel\";\r\n\r\nexport default class overseasBankWin extends ViewBase{\r\n    private model : ExtractModel;\r\n\r\n    private nameEditBox: cc.EditBox = null;\r\n    private accountEditBox: cc.EditBox = null;\r\n\r\n    private openBankLabel : cc.Label = null;\r\n    private openBankTipNode : cc.Node = null;\r\n\r\n    private chooseOverseasBankView : ChooseOverseasBankView;\r\n\r\n    private icon : cc.Node;\r\n\r\n\r\n    protected initView()\r\n    {\r\n        this.model = <ExtractModel>Global.ModelManager.getModel(\"ExtractModel\");\r\n        \r\n        this.nameEditBox = this.getComponent(\"NameEditBox\",cc.EditBox);\r\n        this.accountEditBox = this.getComponent(\"AccountEditBox\",cc.EditBox);\r\n       \r\n\r\n        this.openBankLabel = this.getComponent(\"OpeningbankBox/TEXT_LABEL\",cc.Label);\r\n        this.openBankTipNode = this.getChild(\"OpeningbankBox/PLACEHOLDER_LABEL\")\r\n\r\n        this.icon = this.getChild(\"OpeningbankBox/SelectBranch\");\r\n        this.chooseOverseasBankView = new ChooseOverseasBankView();\r\n        this.chooseOverseasBankView.onSelect = this.selectBankFunc.bind(this);\r\n        this.chooseOverseasBankView.setNode(this.getChild(\"chooseBank\"));\r\n        this.chooseOverseasBankView.active = false;\r\n\r\n        this.updateChooseAreaView();\r\n        this.addCommonClick(\"OpeningbankBox\",()=>{ this.chooseOverseasBankView.active = true},this,null);\r\n\r\n        this.addCommonClick(\"bandBtn\",this.bandBtnFunc,this);\r\n    }\r\n\r\n    updateChooseAreaView(){\r\n        this.chooseOverseasBankView.active = false;\r\n       // this.icon.scaleY = this.switchKey ? 1 : -1;\r\n    }\r\n\r\n    SwitchLabelState(info:string) {\r\n        Logger.log(\"选择了哪个银行\",info);\r\n        this.openBankLabel.string = info\r\n        this.openBankLabel.node.active = true\r\n        this.openBankTipNode.active = false\r\n        this.chooseOverseasBankView.active = false;\r\n\r\n    }\r\n\r\n    selectBankFunc(info ){\r\n        Global.Audio.playBtnSound();\r\n        Logger.log(\"选择了啥\",info)\r\n        this.SwitchLabelState(info)\r\n        this.updateChooseAreaView();\r\n    }\r\n\r\n    //发送绑定消息\r\n    bandBtnFunc(){\r\n        if(!this.checkTextEmptyAndShowTips(this.accountEditBox.string, \"银行卡不能为空\"))\r\n            return;\r\n        if(!this.checkTextEmptyAndShowTips(this.nameEditBox.string, \"姓名不能为空\"))\r\n            return;\r\n        if(!this.checkTextEmptyAndShowTips(this.openBankLabel.string, \"请选择开户银行\"))\r\n            return;\r\n        if(!this.checkSpecialCharAndShowTips(this.accountEditBox.string, \" \", \"账号中有非法字符，请重新输入\"))\r\n            return;\r\n        Global.UI.show(\"WndOverseasBandConfirm\",this.nameEditBox.string,this.accountEditBox.string,this.openBankLabel.string);\r\n    }\r\n\r\n    private checkTextEmptyAndShowTips(text:string, tipsLabel:string)\r\n    {\r\n        if(text.length <= 0)\r\n        {\r\n            Global.UI.fastTip(tipsLabel);\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * 检测字符串中是否包含某些特殊字符\r\n     * @param text 要检测的字符串\r\n     * @param specialString 特殊字符串\r\n     * @param tipsLabel 检测如果包含则tip提示的字符串\r\n     */\r\n    private checkSpecialCharAndShowTips(text:string, specialString:string, tipsLabel:string)\r\n    {\r\n        for (let i = 0; i < text.length; i++) {\r\n            let c = text.charAt(i);\r\n            if (specialString.indexOf(c) >= 0) {\r\n                Global.UI.fastTip(tipsLabel);\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n}\r\n\r\nclass ChooseOverseasBankView extends ViewBase{\r\n    protected model : ExtractModel;\r\n    protected item:cc.Node;\r\n    protected contentRoot:cc.Node;\r\n    protected scroll:cc.ScrollView;\r\n    protected itemList = [];\r\n    protected comfirmBtn:cc.Node = null\r\n\r\n    protected datas : any[];\r\n    protected dataIndex:number = 0\r\n\r\n    public onSelect:Function\r\n\r\n    protected initView()\r\n    {\r\n        this.item = this.getChild(\"scrollview/view/content/item\");\r\n        this.item.active =false\r\n        this.contentRoot = this.getChild(\"scrollview/view/content\");\r\n        this.scroll = this.getComponent(\"scrollview\", cc.ScrollView);\r\n        this.comfirmBtn = this.getChild(\"btnComfirm\")\r\n        this.comfirmBtn.on(\"click\",this.onComfirmClick,this)\r\n        this.model = <ExtractModel>Global.ModelManager.getModel(\"ExtractModel\");\r\n        this.addCommonClick(\"mask\", ()=>{ this.active =false }, this, null);\r\n\r\n        this.initItems()\r\n    }\r\n\r\n    protected onSubViewShow()\r\n    {\r\n        this.scroll.scrollToTop(0);\r\n    }\r\n    protected onComfirmClick()\r\n    {\r\n        if(this.datas[this.dataIndex])\r\n        {\r\n            let info = this.datas[this.dataIndex];\r\n            if(this.onSelect)\r\n                this.onSelect(info);\r\n        }\r\n    }\r\n\r\n    protected initItems()\r\n    {\r\n        this.datas = this.model.getOverseasBankArray();\r\n\r\n        for(let i = 0; i < this.datas.length; i++)\r\n        {\r\n            let info = this.datas[i];\r\n            Logger.log(\"银行\",info);\r\n            let item = cc.instantiate(this.item);\r\n            item.active = true;\r\n            cc.find(\"checkToggle/Background/bankName\",item).getComponent(cc.Label).string = info;\r\n            cc.find(\"checkToggle/checkmark/bankName\",item).getComponent(cc.Label).string = info;\r\n            this.contentRoot.addChild(item);\r\n            let tmpIndex = i\r\n            let toggle = item.getChildByName(\"checkToggle\").getComponent(cc.Toggle)\r\n            item.on(cc.Node.EventType.TOUCH_END,()=>\r\n            {\r\n                toggle.isChecked = true\r\n                this.onItemClick(tmpIndex);\r\n            }, this)\r\n            this.itemList.push(item);\r\n        }\r\n    }\r\n\r\n    protected onItemClick(index)\r\n    {\r\n        this.dataIndex = index\r\n    }\r\n\r\n}"]}