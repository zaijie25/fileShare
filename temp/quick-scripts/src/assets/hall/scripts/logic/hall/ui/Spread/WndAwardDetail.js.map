{"version":3,"sources":["assets\\hall\\scripts\\logic\\hall\\ui\\Spread\\WndAwardDetail.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ViewBase from \"../../../core/ui/ViewBase\";\r\nimport PoolBase from \"../../../core/tool/PoolBase\";\r\nimport SpreadModel from \"../../../hallcommon/model/SpreadModel\";\r\nimport { NetAppface } from \"../../../core/net/hall/NetEvent\";\r\nimport WaitingView from \"../waiting/WaitingView\";\r\n\r\nexport default class WndAwardDetail extends ViewBase {\r\n    copyItem: any;\r\n    contentNode: any;\r\n    SpreadModel: SpreadModel\r\n    itemPool: AwardDetailItemPool;\r\n    nodeList: any[] = [];\r\n    WeekTotal: cc.Label\r\n    WeekMyselfDir: cc.Label\r\n    WeekDir: cc.Label\r\n    WeekOther: cc.Label\r\n    TotalInfo: cc.Label\r\n    pageInfo: cc.Label\r\n    LastPageBtn: cc.Node\r\n    NextPageBtn: cc.Node\r\n    noTips: cc.Node\r\n    titleNode: cc.Node\r\n    botNode: cc.Node\r\n    cmmi_type: number\r\n    topNode: cc.Node\r\n    private top_self:cc.Node\r\n    private top_normal:cc.Node\r\n\r\n    private title_self:cc.Node\r\n    private title_normal:cc.Node\r\n\r\n    page = 1\r\n    limit = 7\r\n    totalPage = 0\r\n\r\n    private waitingNode :cc.Node;\r\n    protected initView() {\r\n        if(this.waitingNode == null|| this.waitingNode == undefined){\r\n            //view 内的loading\r\n            this.waitingNode = WaitingView.initWaitingView(this.node,cc.v2(0,0));\r\n        }\r\n        this.SpreadModel = <SpreadModel>Global.ModelManager.getModel(\"SpreadModel\");\r\n        this.top_normal = this.getChild(\"Top_Normal\")\r\n        this.top_self = this.getChild(\"Top_Self\")\r\n        this.title_self = this.getChild(\"View/Title_Self\")\r\n        this.title_normal = this.getChild(\"View/Title_Normal\")\r\n        this.cmmi_type = this.SpreadModel.commiType\r\n        this.copyItem = this.getChild(\"View/scrollview/item\");\r\n        if (this.SpreadModel.self_rate > 0 && this.cmmi_type === 1) {\r\n            // this.WeekMyselfDir = this.getChild(\"Top_Self/WeekMyselfDir/Count\").getComponent(cc.Label)\r\n            // this.top_self.active = true\r\n            // this.title_self.active = true\r\n            // this.top_normal.active = false\r\n            // this.title_normal.active = false\r\n            // this.titleNode = this.title_self\r\n            // this.topNode = this.top_self\r\n            // this.WeekTotal = this.getChild(\"Top_Self/WeekTotal/Count\").getComponent(cc.Label)\r\n            // this.WeekDir = this.getChild(\"Top_Self/WeekDir/Count\").getComponent(cc.Label)\r\n            // this.WeekOther = this.getChild(\"Top_Self/WeekOther/Count\").getComponent(cc.Label)\r\n            // this.copyItem = this.getChild(\"View/scrollview/item_self\");\r\n        }\r\n        else if(this.SpreadModel.self_rate <= 0 && this.cmmi_type === 1)\r\n        {\r\n            // this.top_self.active = false\r\n            // this.title_self.active = false\r\n            // this.top_normal.active = true\r\n            // this.titleNode = this.title_normal\r\n            // this.topNode = this.top_normal\r\n            // this.title_normal.active = true\r\n            // this.WeekTotal = this.getChild(\"Top_Normal/WeekTotal/Count\").getComponent(cc.Label)\r\n            // this.WeekDir = this.getChild(\"Top_Normal/WeekDir/Count\").getComponent(cc.Label)\r\n            // this.WeekOther = this.getChild(\"Top_Normal/WeekOther/Count\").getComponent(cc.Label)\r\n            // this.top_self.active = false\r\n            // this.title_self.active = false \r\n        }\r\n        if(this.cmmi_type == 2)\r\n        {\r\n            this.titleNode = this.getChild(\"View/Title\")\r\n        }\r\n        this.LastPageBtn = this.getChild(\"View/BotBtn/LastPage\")\r\n        this.NextPageBtn = this.getChild(\"View/BotBtn/NextPage\")\r\n        this.LastPageBtn.on(\"click\", this.OnLastPageBtnClick, this);\r\n        this.NextPageBtn.on(\"click\", this.OnNextPagePageBtnClick, this);\r\n        this.contentNode = this.getChild(\"View/scrollview/view/content\");\r\n        this.copyItem.active = false;\r\n        \r\n        this.TotalInfo = this.getChild(\"View/BotBtn/TotalInfoLabel\").getComponent(cc.Label)\r\n        this.pageInfo = this.getChild(\"View/BotBtn/TotalInfoLabel/PageLabel\").getComponent(cc.Label)\r\n        this.noTips = this.getChild(\"View/noListTipsSk\")\r\n        this.noTips.active = false\r\n        this.botNode = this.getChild(\"View/BotBtn\")\r\n        this.botNode.active = false\r\n        this.initItemPool();\r\n    }\r\n\r\n    OnNextPagePageBtnClick() {\r\n        Global.Audio.playBtnSound();\r\n        this.page++\r\n        if (this.page > this.totalPage) {\r\n            this.page = this.totalPage\r\n            Global.UI.fastTip(\"没有更多数据\")\r\n            return\r\n        }\r\n        if(this.waitingNode)\r\n        {\r\n            this.waitingNode.active = true;\r\n        }\r\n        if (this.cmmi_type === 1) {\r\n           // this.SpreadModel.GetAwardRecordInfo(this.page, this.limit)\r\n        }\r\n        if (this.cmmi_type === 2) {\r\n            this.SpreadModel.GetDayFlowInfoList(this.page, this.limit)\r\n        }\r\n    }\r\n    OnLastPageBtnClick() {\r\n        Global.Audio.playBtnSound();\r\n        this.page--\r\n        if (this.page <= 0) {\r\n            this.page = 1\r\n            Global.UI.fastTip(\"已经是第一页了\")\r\n            return\r\n        }\r\n        if(this.waitingNode)\r\n        {\r\n            this.waitingNode.active = true;\r\n        }\r\n        if (this.cmmi_type === 1) {\r\n          //  this.SpreadModel.GetAwardRecordInfo(this.page, this.limit)\r\n        }\r\n        if (this.cmmi_type === 2) {\r\n            this.SpreadModel.GetDayFlowInfoList(this.page, this.limit)\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n    private initItemPool() {\r\n\r\n        this.itemPool = new AwardDetailItemPool(this.copyItem);\r\n    }\r\n\r\n    // public open(args?:any[])\r\n    // {\r\n    //     this.onOpen(args);\r\n    //     //this.callAllView(\"open\", args);\r\n    // }\r\n    onSubViewShow() {\r\n        Global.HallServer.on(NetAppface.GetSendRecord, this, this.InitTeamListView)\r\n        Global.HallServer.on(NetAppface.GetDayFlowInfoList, this, this.InitTeamListView)\r\n        if (this.cmmi_type === 1) {\r\n          //  this.SpreadModel.GetAwardRecordInfo(this.page, this.limit)\r\n        }\r\n        if (this.cmmi_type === 2) {\r\n            this.SpreadModel.GetDayFlowInfoList(this.page, this.limit)\r\n        }\r\n    }\r\n    InitTeamListView(data) {\r\n        if(this.waitingNode)\r\n        {\r\n            this.waitingNode.active = false;\r\n        }\r\n        if (data == null || Global.Toolkit.isEmptyObject(data)) {\r\n            return\r\n        }\r\n        if (data.total == 0) {\r\n            if (this.topNode)\r\n                this.topNode.active = false\r\n            this.noTips.active = true\r\n            this.titleNode.active = false\r\n            this.botNode.active = false\r\n        }\r\n        else {\r\n            if (this.topNode)\r\n                this.topNode.active = true\r\n            this.noTips.active = false\r\n            this.titleNode.active = true\r\n            this.botNode.active = true\r\n        }\r\n\r\n        this.InitTopView(data)\r\n        let arr: Array<any>;\r\n        if (this.cmmi_type === 1) {\r\n           // arr = data.data || []\r\n        }\r\n        if (this.cmmi_type === 2) {\r\n            arr = data.list || []\r\n        }\r\n        let count = arr.length;\r\n        this.totalPage = Math.ceil(data.total / data.limit)\r\n        this.recycle()\r\n        let msgFormat = \"共%s条\"\r\n        this.TotalInfo.string = cc.js.formatStr(msgFormat, data.total);\r\n        let str = \"第%s页\"\r\n        this.pageInfo.string = cc.js.formatStr(str, data.page);\r\n        for (let j = 0; j < count; j++) {\r\n            let node = this.itemPool.getItem();\r\n            this.nodeList.push(node);\r\n            node.active = true\r\n            node.setParent(this.contentNode);\r\n            node.getComponent(\"AwardDetailItem\").Init(arr[j])\r\n        }\r\n    }\r\n    InitTopView(data) {\r\n        if (data == null) {\r\n            if (this.WeekTotal)\r\n                this.WeekTotal.string = \"\"\r\n            if (this.WeekMyselfDir)\r\n                this.WeekMyselfDir.string = \"\"\r\n            if (this.WeekDir)\r\n                this.WeekDir.string = \"\"\r\n            if (this.WeekOther)\r\n                this.WeekOther.string = \"\"\r\n        }\r\n        else {\r\n            //TODO\r\n            if (this.WeekTotal)\r\n                this.WeekTotal.string = Global.Toolkit.formatPointStr(data.week_total_send_point)\r\n            if (this.WeekMyselfDir)\r\n                this.WeekMyselfDir.string = Global.Toolkit.formatPointStr(data.week_self_send_point)\r\n            if (this.WeekDir)\r\n                this.WeekDir.string = Global.Toolkit.formatPointStr(data.week_unter_send_point)\r\n            if (this.WeekOther)\r\n                this.WeekOther.string = Global.Toolkit.formatPointStr(data.week_other_send_point)\r\n        }\r\n\r\n    }\r\n\r\n    public recycle() {\r\n        this.itemPool.recycleAll(this.nodeList);\r\n        this.nodeList = [];\r\n    }\r\n    onSubViewHide() {\r\n        this.ResetData()\r\n\r\n        Global.HallServer.offAllByCaller(this)\r\n        Global.HallServer.off(NetAppface.GetSendRecord, this, this.InitTeamListView)\r\n        Global.HallServer.off(NetAppface.GetCommiInfoList, this, this.InitTeamListView)\r\n    }\r\n    ResetData() {\r\n        this.totalPage = 0\r\n        this.page = 1\r\n    }\r\n\r\n    protected onDispose() {\r\n        this.itemPool.resetPool()\r\n    }\r\n\r\n}\r\nclass AwardDetailItemPool extends PoolBase {\r\n    constructor(private copyNode: cc.Node) {\r\n        super();\r\n    }\r\n\r\n    protected createItem() {\r\n        return cc.instantiate(this.copyNode);\r\n    }\r\n\r\n    protected resetItem(node: cc.Node) {\r\n        node.active = false;\r\n        node.setParent(null);\r\n    }\r\n}\r\n"]}