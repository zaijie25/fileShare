{"version":3,"sources":["assets\\hall\\scripts\\logic\\hall\\ui\\Feedback\\FeedbackShowAndWriteView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ViewBase from \"../../../core/ui/ViewBase\";\r\nimport RightPanelView from \"./RightPanelView\";\r\nimport FeedbackModel from \"../../../hallcommon/model/FeedbackModel\";\r\nimport { FeedbackConstants, RightViewType } from \"./FeedbackConstants\";\r\n\r\n\r\n\r\n\r\nexport default class FeedbackShowAndWriteView extends ViewBase {\r\n\r\n    private isShowOrEdit: number = 0; //0为立即反馈可编辑问题，1为展示详情\r\n    quickQuestionItem: cc.Node;\r\n    quickQuestionArea: cc.Node; \r\n    questionEdit: cc.EditBox;\r\n    questionShow: cc.Label;\r\n    answerText: cc.Label;\r\n    quickQuestionBtn: cc.Node;\r\n    commitBtn: cc.Node;\r\n    //取消图标\r\n    cancelBtn:cc.Node;\r\n    model: FeedbackModel;\r\n    isOpen: boolean = false;\r\n    tips: string[] = [\"代理出错了\",\"充值不到账\",\"进不去游戏\",\"提现不成功\",\"绑不了手机\",\"玩游戏很卡\",\"看不见游戏\"];\r\n\r\n    protected initView(){\r\n        this.questionEdit = this.getChild(\"box/questionEditBox\").getComponent(cc.EditBox);\r\n        this.questionShow = this.getChild(\"box/questionShowBox\").getComponent(cc.Label);\r\n        this.quickQuestionArea = this.getChild(\"bottom/quickQuestion\"); \r\n        this.quickQuestionItem = this.getChild(\"bottom/quickQuestion/item\");\r\n        this.answerText = this.getChild(\"box/answerText\").getComponent(cc.Label);\r\n        this.quickQuestionBtn = this.getChild(\"bottom/btnNode\");\r\n        this.commitBtn = this.getChild(\"bottom/commitBtn\");\r\n        this.cancelBtn = this.getChild(\"bottom/cancelNode\");\r\n        this.addCommonClick(\"bottom/btnNode\", this.quickQuestion, this);\r\n        this.addCommonClick(\"bottom/commitBtn\", this.commitOrBack, this);\r\n        this.addCommonClick(\"bottom/cancelNode\", this.backAction, this);\r\n        this.tips.forEach(e => {\r\n            let item: cc.Node = cc.instantiate(this.quickQuestionItem);\r\n            item.active = true;\r\n            item.getChildByName(\"label\").getComponent(cc.Label).string = e;\r\n            this.quickQuestionArea.addChild(item);\r\n            item.on(cc.Node.EventType.TOUCH_END, this.itemClick, this);\r\n            });\r\n        this.model = <FeedbackModel>Global.ModelManager.getModel(\"FeedbackModel\");\r\n    \r\n    }\r\n\r\n    public setShowOrEdit(isShowOrEdit: number){\r\n        this.isShowOrEdit = isShowOrEdit;\r\n    }\r\n\r\n    public setData(...para){\r\n        this.questionShow.string = para[0];\r\n        this.answerText.string = para[1];\r\n    }\r\n\r\n    protected onSubViewShow(){\r\n        if(this.isShowOrEdit == 1){\r\n            this.questionEdit.node.active = false;\r\n            this.questionShow.node.active = true;\r\n            this.quickQuestionArea.active = false;\r\n            this.answerText.node.active = true;\r\n            this.quickQuestionBtn.active = false;\r\n            this.cancelBtn.active = true;\r\n            this.commitBtn.active = false;\r\n        }else if(this.isShowOrEdit == 0){\r\n            this.questionEdit.node.active = true;\r\n            this.questionShow.node.active = false;\r\n            this.quickQuestionArea.active = false;\r\n            \r\n            this.answerText.node.active = false;\r\n            this.quickQuestionBtn.active = true;\r\n            this.cancelBtn.active = false;\r\n            this.commitBtn.active = true;\r\n            this.model.on(FeedbackConstants.DealFeedbackCommit, this, this.dealCommitCallback);\r\n        }\r\n        // this.addCommonClick(\"bottom/commitBtn\", this.commitOrBack, this);\r\n    }\r\n\r\n    itemClick(event){\r\n        this.questionEdit.string = event.target.getChildByName(\"label\").getComponent(cc.Label).string;\r\n        this.quickQuestion();\r\n    }\r\n\r\n    quickQuestion(){\r\n        if(this.isOpen){\r\n            this.quickQuestionArea.active = false;\r\n        }else{\r\n            this.quickQuestionArea.active = true;\r\n        }\r\n        this.isOpen = !this.isOpen;\r\n    }\r\n\r\n    backAction(){\r\n        if(this.isShowOrEdit == 1){\r\n            //返回\r\n            this.questionShow.string =\"\";\r\n            this.answerText.string = \"\";\r\n            let rightPanelView = <RightPanelView>Global.UI.getWindow(\"WndFeedback\").getView(\"RightPanelView\");\r\n            rightPanelView.changeView(RightViewType.feedback);\r\n        }\r\n    }\r\n    commitOrBack(){\r\n        if(this.isShowOrEdit == 0){\r\n            let question = this.questionEdit.string;\r\n            if(question.trim()==\"\"||!question){\r\n                Global.UI.fastTip(\"提交内容为空！\");\r\n                return;\r\n            }\r\n            var para={\r\n                type: 0 ,//0 提交 1删除\r\n                problem: question,//问题 0的时候\r\n                id: 0  //1的时候\r\n            };\r\n            this.model.dealFeedback(para,this.model.responePage);\r\n        }\r\n       \r\n    }\r\n    dealCommitCallback(){\r\n        this.questionEdit.string = \"\";\r\n        let rightPanelView = <RightPanelView>Global.UI.getWindow(\"WndFeedback\").getView(\"RightPanelView\");\r\n        rightPanelView.changeView(RightViewType.feedback);\r\n    }\r\n\r\n    onSubViewHide(){\r\n        if(this.isShowOrEdit == 0){\r\n            this.model.off(FeedbackConstants.DealFeedbackCommit, this, this.dealCommitCallback);\r\n        }\r\n    }\r\n\r\n\r\n\r\n}\r\n"]}