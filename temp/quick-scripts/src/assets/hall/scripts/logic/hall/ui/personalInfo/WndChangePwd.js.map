{"version":3,"sources":["assets\\hall\\scripts\\logic\\hall\\ui\\personalInfo\\WndChangePwd.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import WndBase from \"../../../core/ui/WndBase\";\r\nimport AutoCodeView from \"../login/view/AutoCodeView\";\r\nimport PhoneInputView from \"../login/view/PhoneInputView\";\r\nimport PwdInputView from \"../login/view/PwdInputView\";\r\nimport PersonalInfoModel from \"../../../hallcommon/model/PersonalInfoModel\";\r\n\r\nexport default class WndChangePwd extends WndBase{\r\n    private phoneInputView: PhoneInputView;\r\n    private authCodeView: AutoCodeView;\r\n    private pwdInputView: PwdInputView;\r\n    private model: PersonalInfoModel;\r\n\r\n    protected onInit() {\r\n        this.name = \"WndChangePwd\";\r\n        this.layer = Global.UI.PopLayer;\r\n        this.resPath = \"hall/prefabs/ui/PersonalInfo/ChangePwdUI\";\r\n        this.model = <PersonalInfoModel>Global.ModelManager.getModel(\"PersonalInfoModel\");\r\n    }\r\n\r\n    protected initView(){\r\n        this.addCommonClick(\"bg/close\", this.closeWnd, this);\r\n        this.addCommonClick(\"cancelBtn\", this.closeWnd, this);\r\n        this.addCommonClick(\"sureBtn\", this.onSureBtnClick, this);\r\n\r\n        this.phoneInputView = <PhoneInputView>this.addView(\"PhoneInputView\", this.getChild(\"phoneContainer\"), PhoneInputView);\r\n        this.authCodeView = <AutoCodeView>this.addView(\"AutoCodeView\", this.getChild(\"authCodeView\"), AutoCodeView);\r\n        this.authCodeView.setPhoneInputAndType(this.phoneInputView, 2);\r\n        this.pwdInputView = <PwdInputView>this.addView(\"PwdInputView\", this.getChild(\"pwdContainer\"), PwdInputView);\r\n    }\r\n\r\n    protected onOpen(){\r\n        this.phoneInputView.subViewState = true\r\n        this.authCodeView.subViewState = true\r\n        this.pwdInputView.subViewState = true\r\n        \r\n        this.authCodeView.code = \"\";\r\n        this.pwdInputView.pwd = \"\";\r\n    }\r\n\r\n    private closeWnd(){\r\n        this.close();\r\n    }\r\n\r\n    private onSureBtnClick(){\r\n        if(this.phoneInputView.phone == \"\")\r\n        {\r\n            return Global.UI.fastTip(\"请输入手机号码\");\r\n        }\r\n        if(this.authCodeView.code == \"\")\r\n        {\r\n            return Global.UI.fastTip(\"请输入验证码\");\r\n        }\r\n        if (this.pwdInputView.pwd == \"\"){\r\n            return Global.UI.fastTip(\"请输入密码\");\r\n        }\r\n        if(!Global.Toolkit.checkPWFormat(this.pwdInputView.pwd))\r\n        {\r\n            return Global.UI.fastTip(Global.Language.getWord(1303));\r\n        }\r\n\r\n        if(!this.phoneInputView.isAreaVaild())\r\n        {\r\n            Global.UI.fastTip(\"请选择正确的地区信息\");\r\n            return;\r\n        }\r\n        let phone = this.phoneInputView.phone;\r\n        let code = this.authCodeView.code;\r\n        let area = this.phoneInputView.area;\r\n        let pwd = this.pwdInputView.pwd;\r\n        pwd = Global.Toolkit.md5(pwd);\r\n        this.model.reqEditPwd(phone, code, area, pwd, ()=>{\r\n            Global.UI.fastTip(\"密码修改成功\");\r\n            this.closeWnd();\r\n        });\r\n    }\r\n}"]}