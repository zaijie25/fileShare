{"version":3,"sources":["assets\\hall\\scripts\\logic\\hallcommon\\data\\GameData.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import GlobalEvent from \"../../core/GlobalEvent\";\r\nimport ServerRoutes from \"../../core/setting/ServerRoutes\";\r\nexport enum GameType {\r\n    PVE = 0,\r\n    PVP = 1,\r\n    /** 路珠类型 */\r\n    TRENDGAME = 2,\r\n    /** 老虎机类型 */\r\n    LUCKGAME = 3,\r\n    /** 捕鱼类型 */\r\n    FISH = 4,\r\n    /**直接进游戏（暂定美术未提供大厅选场的游戏 如 红包接龙） */\r\n    NOCHANGE = 5,\r\n    /**红包 */\r\n    REDPACKGAME = 6,\r\n    /** 二人麻将 */\r\n    ERMJ = 7,\r\n    /*外接游戏*/\r\n    WEBGAME = 8,\r\n    /*AGBG外接游戏*/\r\n    AGBG= 9\r\n}\r\nexport class GameInfo {\r\n    public game_id: number = 0;//游戏id\r\n    public name: string = \"\";//游戏名称\r\n    public rules = {};//\r\n    public levels = [];//\r\n    public status = 0;//是否显示 1显示 0不 2待开放  3维护中\r\n    public power = 0;////排序\r\n    public top = 0;////1 火热 2 推荐 3 最新 0不需要\r\n    public top2 = -1;////1 开启 0 关闭 \r\n    public gtype = 0;//游戏类型 1 PVE 2PVP 3捕鱼 4红包 5单机游戏 8 外接游戏\r\n    public href = \"\";//外接游戏地址\r\n    public version = \"\";//当前版本号\r\n    public update_url = \"\";//热更地址\r\n    public update_url_list = [] // 热更地址列表\r\n    public update_url_list_new = [] // 热更地址列表\r\n    public update_url_param = \"\";//热更地址后缀参数\r\n    public hit_update = {\"url\":[],\"version\":\"\",\"param\":\"\",\"is_back\":0,\"new_url\":[]};//新版本热更\r\n    public isBackVersionFlag = 0;//是否回滚版本\r\n    public native_version = \"\";//本地版本\r\n    public remote_version = \"\";//远程版本\r\n    public levelType: number = 1;   //选场类型 1 无选场 2 有选场\r\n    public checkMoney = false;  //进游戏前是否需要检查货币\r\n    public supportVersion = 0;  //所需版本号支持\r\n    public supportIosVersion = 0;  //所需ios版本号\r\n    public portraitModel = false; //是否是竖屏模式\r\n    public marqueeStrType = -1 //跑马灯文本类型（不同游戏对应不同文本）\r\n\r\n    public prefabName = \"\";  //特效预设名称\r\n    public platformIconPath = \"\"; //特殊平台图标名称\r\n    public gameType = -1\r\n    public hasChooseLevel = false\r\n    public isbig = false\r\n    public isJackPotGame = false\r\n    public isCustomLoading = false;  // 是否使用游戏内定制loading\r\n\r\n    public pos = 0;//显示在大厅或者更多游戏列表中 (0大厅1更多游戏)\r\n    public update_url_index = 0 //热更地址索引\r\n    public ids = [];//属于哪个页签\r\n    public isNew = false;\r\n    getUpdateUrl()\r\n    {\r\n\r\n        let routes = this.update_url_list_new\r\n        \r\n        if(!routes || routes.length == 0)\r\n        {\r\n            routes = Global.UrlUtil.transferUrlArrayToRoutes(this.update_url_list)  \r\n        }\r\n\r\n        Global.DunHotUpdateUrlSetting.hotUpdateRouteCfg = routes\r\n        if(this.update_url_index>0)\r\n        {\r\n            Global.DunHotUpdateUrlSetting.switchRoute()\r\n        }\r\n        this.update_url_index += 1\r\n        let url = Global.DunHotUpdateUrlSetting.hotUpdateUrl\r\n        Logger.error(\"getUpdateUrl:url==================\" + url)\r\n        if(this.update_url_param && url)\r\n        {\r\n            this.update_url = url + \"/\" + this.update_url_param\r\n            let tmpName = this.game_id +\"_temp\"\r\n            let fileName = \"project.manifest.temp\"\r\n            let fullLocalUrl = Global.HotUpdateManager.updateHelper.genStoragePath(tmpName) + \"/\" +fileName\r\n            if(jsb.fileUtils.isFileExist(fullLocalUrl))\r\n            {\r\n                jsb.fileUtils.removeFile(fullLocalUrl)\r\n            }\r\n            //Global.HotUpdateManager.changeLocalUrl(url,this.update_url_param,tmpName,fileName)\r\n            return this.update_url\r\n        }\r\n        return null\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default class GameData {\r\n    //游戏资源配置，从json 读取\r\n    private _gameResList = {}\r\n\r\n    private _gameList = [];\r\n    private _hallGameList = [];//大厅游戏列表\r\n    private _moreGameList = [];//更多游戏列表\r\n    private _autoDownList = [] // 自动下载子游戏列表\r\n    private _gamedataInitFinish = false\r\n    private _gameTypes = {\r\n        hall: 'hall',\r\n    };\r\n\r\n    constructor() {\r\n        this.clear();\r\n    }\r\n    \r\n    public get autoDownList()\r\n    {\r\n        return this._autoDownList\r\n    }\r\n\r\n    public clear() {\r\n        this._gameList = [];\r\n        this._autoDownList = [];\r\n        this._gamedataInitFinish = false\r\n    }\r\n\r\n    public init(gamelist?: any) {\r\n        if (!gamelist) {\r\n            cc.error(\"----gameList------ null\")\r\n            return;\r\n        }\r\n        for (let i = 0; i < gamelist.length; i++) {\r\n            let svrGameData = gamelist[i]\r\n            if(svrGameData.game_id == Game.Control.GAME_DDZ_HJ_ARR[0]){\r\n                //斗地主合集\r\n                Game.Control.GAME_DDZ_HJ_ARR.push(2005, 2013);\r\n            }\r\n        }\r\n        let tempGameList = []\r\n        let hallGameList = [];\r\n        let moreGameList = [];\r\n        for (let i = 0; i < gamelist.length; i++) {\r\n\r\n            let svrGameData = gamelist[i]\r\n           \r\n            let gameModel = new GameInfo();\r\n            for (let key in gameModel) {\r\n                if (svrGameData[key] != null && svrGameData[key] != undefined) {\r\n                    gameModel[key] = svrGameData[key];\r\n                }\r\n            }\r\n            let gameRes = this._gameResList[svrGameData.game_id]\r\n            if(gameRes == null || gameRes == undefined)\r\n            {\r\n                Logger.error(\"找不到游戏\", svrGameData.game_id)\r\n                continue;\r\n            }\r\n         \r\n            if (gameModel.hit_update && gameModel.hit_update.version != null && gameModel.hit_update.version != \"\"){\r\n                gameModel.version = gameModel.hit_update.version\r\n                gameModel.update_url = gameModel.hit_update.url[0] + \"/\" + gameModel.hit_update.param\r\n                gameModel.update_url_list = gameModel.hit_update.url\r\n                gameModel.update_url_list_new = gameModel.hit_update.new_url\r\n                gameModel.update_url_param = gameModel.hit_update.param\r\n                gameModel.isBackVersionFlag = gameModel.hit_update.is_back\r\n            }\r\n            gameModel.levelType = gameRes.levelType;\r\n            gameModel.checkMoney = gameRes.checkMoney;\r\n            gameModel.supportVersion = gameRes.supportVersion;\r\n            gameModel.supportIosVersion = gameRes.supportIosVersion;\r\n            gameModel.native_version = Global.HotUpdateManager.getNativeHotUpdateVersion(gameModel.game_id);\r\n            gameModel.portraitModel = gameRes.portraitModel;\r\n            gameModel.marqueeStrType = gameRes.marqueeStrType\r\n\r\n            gameModel.prefabName = gameRes.prefabName;\r\n            gameModel.hasChooseLevel = gameRes.hasChooseLevel;\r\n            gameModel.gameType = gameRes.gameType\r\n            gameModel.isJackPotGame = gameRes.isJackPotGame\r\n            if(svrGameData.auto_down == 1)\r\n            {\r\n                this._autoDownList.push(svrGameData.game_id)\r\n            }\r\n\r\n            this._gameTypes[svrGameData.game_id] = svrGameData.game_id;\r\n            if (gameModel.status != 0) {\r\n                tempGameList.push(gameModel)\r\n                if(Game.Control.GAME_DDZ_HJ_ARR.indexOf(svrGameData.game_id) <= 0 && gameModel.pos == 0){\r\n                    hallGameList.push(gameModel)\r\n                }\r\n                if(gameModel.pos != 0){\r\n                    moreGameList.push(gameModel);\r\n                }\r\n            }\r\n           \r\n        }\r\n        this._gameTypes[\"hall\"] = \"hall\";\r\n\r\n        function sortFunc(a, b) {\r\n            return a.power - b.power\r\n        }\r\n\r\n        tempGameList.sort(sortFunc)\r\n        hallGameList.sort(sortFunc)\r\n        moreGameList.sort(sortFunc)\r\n        this._moreGameList = moreGameList;\r\n        this._gameList = tempGameList;\r\n        this._hallGameList = hallGameList;\r\n        this.dataInitFinish = true\r\n    }\r\n    \r\n\r\n    public set dataInitFinish(flag)\r\n    {\r\n        this._gamedataInitFinish = flag\r\n        if(flag)\r\n        {\r\n            Global.Event.event(GlobalEvent.UPDATE_GAME_LIST)\r\n        }\r\n    }\r\n\r\n    public get dataInitFinish()\r\n    {\r\n       return  this._gamedataInitFinish \r\n    }\r\n    public get gameList() {\r\n        return this._gameList;\r\n    }\r\n    public get moreGameList(){\r\n        return this._moreGameList;\r\n    }\r\n    public get hallGameList(){\r\n        return this._hallGameList;\r\n    }\r\n    public get gameTypes() {\r\n        return this._gameTypes;\r\n    }\r\n    public getGameInfo(gid): any {\r\n        let gameInfo = {}\r\n        for (let i = 0; i < this._gameList.length; i++) {\r\n            let tempInfo = this._gameList[i]\r\n            if (tempInfo.game_id == gid) {\r\n                gameInfo = tempInfo;\r\n                break;\r\n            }\r\n        }\r\n        return gameInfo;\r\n    }\r\n\r\n    public get hasMoreGameList(){\r\n        return this._moreGameList.length > 0;\r\n    }\r\n\r\n    public getGameResInfo(gid)\r\n    {\r\n        return this._gameResList[gid] || {}\r\n    }\r\n\r\n    //游戏Icon 资源配置\r\n    public setGameIconResCfg(cfg){\r\n        this._gameResList = cfg\r\n    }\r\n\r\n\r\n    public hasGame(gid)\r\n    {\r\n        return this.getGameInfo(gid) != null;\r\n    }\r\n    \r\n    public getReturnGameStr(gid: number, lv: string, canReturn: boolean){\r\n        let gameData = Global.GameData.getGameInfo(gid);\r\n        let lvName = this.getLevelStr(gameData.levels || [], lv);\r\n        // let str = canReturn ? `您当前正在【${gameData.name}】${lvName}中，是否回到该游戏中？` : `您当前正在【${gameData.name}】${lvName}中，无法加入其他游戏！`;\r\n        let str = `您当前正在【${gameData.name}】${lvName}中，是否回到该游戏中？`;\r\n        return str\r\n    }\r\n\r\n    private getLevelStr(levels: any[] = [], searchLv: string){\r\n        let str = \"\";\r\n        let count = levels.length;\r\n        if (count > 1){\r\n            for(let i= 0; i < levels.length; i++){\r\n                let info = levels[i];\r\n                if (info.level == searchLv){\r\n                    str = `-【${info.SceneName}】`;     // -【场次名】\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return str;\r\n    }\r\n    public checkHasCustomLoading(gid: number){\r\n        let info = this.getGameResInfo(gid);\r\n        return !!info.isCustomLoading;\r\n    }\r\n}"]}