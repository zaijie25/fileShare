{"version":3,"sources":["assets\\hall\\scripts\\logic\\hallcommon\\model\\SpreadModel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ModelBase from \"../../../framework/model/ModelBase\";\r\nimport { NetAppface } from \"../../core/net/hall/NetEvent\";\r\nimport { SpreadEvent } from \"../../hall/ui/Spread/SpreadEvent\";\r\nimport { HallRedSpotType } from \"./HallModel\";\r\n\r\n\r\n\r\n\r\nexport default class SpreadModel extends ModelBase {\r\n    limit: any = 10;\r\n    private _data: any\r\n    private _AwardRecordData: any = null\r\n    private _CommidData: any = null\r\n    RecordTotal: number;\r\n    RecordList: any;\r\n    RecordPage: number = 0;\r\n    AwardListDetail: any;\r\n    DetailTotal: number;\r\n    DetailPage: number;\r\n    SelfTeamList: any;\r\n    SelfTeamTotal: any;\r\n    SelfTeamPage: any;\r\n    private _url: string\r\n\r\n    redFlag = false\r\n\r\n    commi_type = -1\r\n\r\n    percent_rate = -1\r\n\r\n    self_rate = -1\r\n\r\n    _rank_type = 1\r\n\r\n    public set Rate(rate) //返利比例\r\n    {\r\n        this.percent_rate = rate\r\n    }\r\n    public get Rate() {\r\n        return this.percent_rate\r\n    }\r\n\r\n    public set SelfRate(rate) //自营比例\r\n    {\r\n        this.self_rate = rate\r\n    }\r\n    public get SelfRate() {\r\n        return this.self_rate\r\n    }\r\n\r\n    public set RankType(type)\r\n    {\r\n        this._rank_type = type\r\n    }\r\n\r\n    public get RankType()\r\n    {\r\n        return this._rank_type \r\n    }\r\n\r\n    protected onInit() {\r\n\r\n    }\r\n\r\n    public get Name() {\r\n        return \"SpreadModel\";\r\n    }\r\n    public get Data() {\r\n        return this._data\r\n    }\r\n    public get AwardRecordData() {\r\n\r\n        return this._AwardRecordData\r\n    }\r\n\r\n    public get CommidData()\r\n    {\r\n        return this._CommidData\r\n    }\r\n\r\n\r\n    //是否是短链接  0 不是 1 是\r\n    public urlType = 0\r\n    //是否正在请求shorturl\r\n    private isReqestingShortUrl;\r\n    //请求次数\r\n    private shortUrlRequestTime = 0;\r\n    //请求间隔\r\n    private shortUrlRequestInterval = 3;\r\n    //短链接请求timer\r\n    private requestTimer: any;\r\n\r\n\r\n    public set Url(url) {\r\n\r\n        this._url = url\r\n    }\r\n\r\n    public get Url() {\r\n        return this._url\r\n    }\r\n    public get RedFLag() {\r\n        return this.redFlag\r\n    }\r\n    public set RedFLag(flag) {\r\n        this.redFlag = flag\r\n        if (this.redFlag) {\r\n            Global.Event.event(GlobalEvent.ShowRedSpot, [false, HallRedSpotType.Spread]);\r\n        }\r\n    }\r\n    /**\r\n     * 0返水 1老推广 2 无限代理\r\n     */\r\n    public get commiType() {\r\n        return this.commi_type\r\n    }\r\n    public set commiType(commi_type) {\r\n        this.commi_type = commi_type\r\n    }\r\n\r\n\r\n    /**\r\n     * 请求我的推广\r\n     * @param url \r\n     */\r\n    public GetAgentShare(url: string) {\r\n        Global.HallServer.send(NetAppface.mod, NetAppface.GetSelfShare, { share_url: url }, (msg) => {\r\n            this._data = msg;\r\n            this.event(SpreadEvent.GetAgentShare, msg)\r\n           \r\n\r\n        }, this.SpreadErronFunc.bind(this), false, 0)\r\n    }\r\n    /**\r\n        * 请求我的推广（无限代）\r\n         * @param url \r\n         */\r\n    public GetDayAgentShare(url: string) {\r\n        Global.HallServer.send(NetAppface.mod, NetAppface.GetDayAgentShare, { share_url: url }, (msg) => {\r\n            this._data = msg;\r\n            this.event(SpreadEvent.GetDayAgentShare, msg)\r\n\r\n        }, this.SpreadErronFunc.bind(this), false, 0)\r\n    }\r\n\r\n    public startRequestShortUrl(url: string) {\r\n        if (this.isReqestingShortUrl)\r\n            return;\r\n        this.isReqestingShortUrl = true;\r\n        this.shortUrlRequestTime = 0;\r\n        if (this.urlType == 1) {\r\n            this.isReqestingShortUrl = false;\r\n            clearInterval(this.requestTimer)\r\n            return;\r\n        }\r\n        this.requestTimer = setInterval(() => {\r\n            this.shortUrlRequestTime++;\r\n            if (this.shortUrlRequestTime >= 3 || this.urlType == 1 ) {\r\n                clearInterval(this.requestTimer)\r\n                this.isReqestingShortUrl = false;\r\n                return;\r\n            }\r\n            Global.HallServer.send(NetAppface.mod, NetAppface.GetUserShareUrl, { url: url }, (msg) => {\r\n                this.Url = msg.url;\r\n                this.urlType = msg.type;\r\n                this.urlType = 1;\r\n                this.event(SpreadEvent.RefreshShortUrl);\r\n            }, null, false)\r\n        }, this.shortUrlRequestInterval * 1000)\r\n\r\n\r\n    }\r\n    \r\n    public loadShortUrl(url: string) {\r\n        Global.HallServer.send(NetAppface.mod, NetAppface.GetUserShareUrl, { url: url }, (msg) => {\r\n            this.Url = msg.url;\r\n            this.urlType = msg.type;\r\n            this.event(SpreadEvent.RefreshShortUrl);\r\n        },  this.loadShortUrlErronFunc.bind(this), false)\r\n    }\r\n    private loadShortUrlErronFunc(data: any) {\r\n        this.event(SpreadEvent.RefreshShortUrl);\r\n        if (data._errstr != null) {\r\n            Global.UI.fastTip(data._errstr);\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    public BindInviteCode(pid: number) {\r\n        Global.HallServer.send(NetAppface.mod, NetAppface.BindPid, { pid: pid }, (msg) => {\r\n            this.event(SpreadEvent.BindSucceed, msg)\r\n        }, this.SpreadErronFunc.bind(this), false, 0)\r\n    }\r\n\r\n    private SpreadErronFunc(data: any) {\r\n        if (data._errstr != null) {\r\n            Global.UI.fastTip(data._errstr);\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * 请求奖励明细\r\n     */\r\n    public GetAwardRecordInfo(page: number, limit: number) {\r\n        let param = {\r\n            \"page\": page,\r\n            \"limit\": limit\r\n        }\r\n        Global.HallServer.send(NetAppface.mod, NetAppface.GetSendRecord, param, null, this.SpreadErronFunc.bind(this), false, 180)\r\n    }\r\n\r\n    /**\r\n     * 业绩查询无限代\r\n     */\r\n    public GetDayFlowInfoList(page: number, limit: number) {\r\n        let param = {\r\n            \"page\": page,\r\n            \"limit\": limit\r\n        }\r\n        Global.HallServer.send(NetAppface.mod, NetAppface.GetDayFlowInfoList, param, null, this.SpreadErronFunc.bind(this), false, 180)\r\n    }\r\n    /**\r\n     * 返佣金额表\r\n     */\r\n    public GetDayAgentCommi() {\r\n        \r\n        Global.HallServer.send(NetAppface.mod, NetAppface.GetDayAgentCommi, {}, (msg) => {\r\n            this._CommidData = msg\r\n            this.event(SpreadEvent.GetDayAgentCommi, msg)\r\n        }, this.SpreadErronFunc.bind(this), true, 0)\r\n    }\r\n\r\n    /**\r\n     * 请求领奖记录\r\n     * @param page \r\n     * @param limit \r\n     */\r\n    public GetAwardRecord(page: number, limit: number) {\r\n        let param = {\r\n            \"page\": page,\r\n            \"limit\": limit\r\n        }\r\n        Global.HallServer.send(NetAppface.mod, NetAppface.GetSelfReadRecord, param, (msg) => {\r\n\r\n            this._AwardRecordData = msg\r\n            this.event(SpreadEvent.GetSelfReadRecord, msg)\r\n        }, this.SpreadErronFunc.bind(this), true, 0)\r\n    }\r\n\r\n    /**\r\n    * 请求领奖记录无限代\r\n    * @param page \r\n    * @param limit \r\n    */\r\n    public GetDayAgentRecord(page: number, limit: number) {\r\n        let param = {\r\n            \"page\": page,\r\n            \"limit\": limit\r\n        }\r\n        Global.HallServer.send(NetAppface.mod, NetAppface.GetDayAgentRecord, param, (msg) => {\r\n\r\n            this._AwardRecordData = msg\r\n            this.event(SpreadEvent.GetDayAgentRecord, msg)\r\n        }, this.SpreadErronFunc.bind(this), true, 0)\r\n    }\r\n\r\n\r\n    /**\r\n     * 请求领奖\r\n     */\r\n    public ReqGetReward() {\r\n\r\n        let param = {\r\n            \"read_type\": -1\r\n        }\r\n        Global.HallServer.send(NetAppface.mod, NetAppface.GetSelfRead, param, (msg) => {\r\n            this._data.read_point = 0\r\n            this._data.read_self_point = 0\r\n            this.RedFLag = false\r\n            this.event(SpreadEvent.GetSelfRead, msg)\r\n        }, this.SpreadErronFunc.bind(this), true, 0)\r\n    }\r\n\r\n    /**\r\n     * 请求领奖（无限代）\r\n     */\r\n    public GetDayAgent() {\r\n\r\n        let param = {\r\n            \r\n        }\r\n        Global.HallServer.send(NetAppface.mod, NetAppface.GetDayAgent, param, (msg) => {\r\n            this.event(SpreadEvent.GetDayAgent, msg)\r\n        }, this.SpreadErronFunc.bind(this), true, 0)\r\n    }\r\n\r\n    /**\r\n     * 查询团队信息\r\n     * @param page \r\n     * @param limit \r\n     */\r\n    public ReqGetSelfTeam(page: number, limit: number) {\r\n\r\n        let param = {\r\n            \"page\": page,\r\n            \"limit\": limit\r\n        }\r\n        Global.HallServer.send(NetAppface.mod, NetAppface.GetSelfTeam, param, null, this.SpreadErronFunc.bind(this), false, 60);\r\n    }\r\n\r\n    /**\r\n     * 查询团队信息无限代\r\n     * @param page \r\n     * @param limit \r\n     */\r\n    public GetDayAgentTeamInfo(uid: number, page: number, limit: number) {\r\n\r\n        let param = {\r\n            \"user_id\": uid,\r\n            \"page\": page,\r\n            \"limit\": limit\r\n        }\r\n        Global.HallServer.send(NetAppface.mod, NetAppface.GetDayAgentTeamInfo, param, null, this.SpreadErronFunc.bind(this), false, 60);\r\n    }\r\n\r\n    /**\r\n     * 查询下级\r\n     * @param _id \r\n     */\r\n\r\n    public ReqSearchSelfTeam(_id: number) {\r\n        Global.HallServer.send(NetAppface.mod, NetAppface.SeachSelfTeam, { user_id: _id }, null, this.SpreadErronFunc.bind(this), true, 0)\r\n    }\r\n\r\n    CheckRedFlag() {\r\n        if (this.redFlag) {\r\n            Global.Event.event(GlobalEvent.ShowRedSpot, [false, HallRedSpotType.Spread]);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 查询下级（无限代）\r\n     * @param _id \r\n     */\r\n\r\n    public SeachSelfTeamUser(_id: number) {\r\n        Global.HallServer.send(NetAppface.mod, NetAppface.SeachSelfTeamUser, { user_id: _id }, null, this.SpreadErronFunc.bind(this), true, 0)\r\n    }\r\n\r\n    public clear()\r\n    {\r\n        this.urlType = -1\r\n        this.Url = null\r\n        this._AwardRecordData = null\r\n        this._CommidData = null\r\n        this._data = null\r\n\r\n    }\r\n}"]}