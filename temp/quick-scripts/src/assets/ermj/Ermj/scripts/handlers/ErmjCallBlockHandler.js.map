{"version":3,"sources":["assets\\ermj\\Ermj\\scripts\\handlers\\ErmjCallBlockHandler.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ErmjBaseHandler from \"./ErmjBaseHandler\";\r\n\r\nexport class ErmjCallSelfBlockHandler extends ErmjBaseHandler{\r\n    protected execute(msg){\r\n        this.mainUI.callAllPlayers(\"showStateSp\", false);\r\n        let localSeat = this.SitHelper.serverSToLocalN(msg._src);\r\n        if (localSeat == 0){\r\n            let cfg = {\r\n                isChow: msg._para.can_chow == 1,\r\n                isPong: msg._para.can_pong == 1,\r\n                isKong: msg._para.can_kong == 1,\r\n                isWin: msg._para.can_win == 1,\r\n            }\r\n            this.mainUI.askActionView.active = true;\r\n            this.mainUI.askActionView.showBtnByConfig(cfg, msg._para);\r\n        }\r\n        // 倒计时走cal_play debug听牌后没有cal_play\r\n        let time = 0;\r\n        let serverTime = msg._times;\r\n        if (serverTime && Game.Component.correctTime){\r\n            let dev = Game.Component.correctTime(serverTime);\r\n            time = msg._timeo * 1000 - dev;\r\n        }\r\n        else{\r\n            time = msg._timeo * 1000 - (Date.now() - msg._receiveTime);\r\n        }\r\n        if (!time || time <= 0)\r\n            time = 1000;\r\n        this.mainUI.askNoticeView.setTimeRunConfig(Math.round(time / 1000), null, null);\r\n    }\r\n}\r\n\r\nexport class ErmjCallOtherBlockHandler extends ErmjBaseHandler{\r\n    protected execute(msg){\r\n        this.mainUI.callAllPlayers(\"showStateSp\", false);\r\n        let localSeat = this.SitHelper.serverSToLocalN(msg._src);\r\n        if (localSeat == 0){\r\n            let cfg = {\r\n                isChow: msg._para.can_chow == 1,\r\n                isPong: msg._para.can_pong == 1,\r\n                isKong: msg._para.can_kong == 1,\r\n                isWin: msg._para.can_win == 1,\r\n            }\r\n            this.mainUI.askActionView.active = true;\r\n            this.mainUI.askActionView.showBtnByConfig(cfg, msg._para);\r\n        }\r\n\r\n        let time = 0;\r\n        let serverTime = msg._times;\r\n        if (serverTime && Game.Component.correctTime){\r\n            let dev = Game.Component.correctTime(serverTime);\r\n            time = msg._timeo * 1000 - dev;\r\n        }\r\n        else{\r\n            time = msg._timeo * 1000 - (Date.now() - msg._receiveTime);\r\n        }\r\n        if (!time || time <= 0)\r\n            time = 1000;\r\n        this.mainUI.askNoticeView.setTimeRunConfig(Math.round(time / 1000), null, null);\r\n    }\r\n}"]}