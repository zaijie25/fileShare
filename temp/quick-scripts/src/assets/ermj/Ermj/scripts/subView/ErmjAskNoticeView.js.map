{"version":3,"sources":["assets\\ermj\\Ermj\\scripts\\subView\\ErmjAskNoticeView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ErmjBaseView from \"./ErmjBaseView\";\r\nimport ErmjGameConst from \"../data/ErmjGameConst\";\r\nimport ErmjTimeAutoRun from \"../component/ErmjTimeAutoRun\";\r\nimport ErmjPathHelper from \"../data/ErmjPathHelper\";\r\n\r\nexport default class ErmjAskNoticeView extends ErmjBaseView{\r\n    private bgSp: cc.Sprite;\r\n    private timeRun: ErmjTimeAutoRun;\r\n    private oppNoticeSp: cc.Sprite;\r\n    private selfNoticeSp: cc.Sprite;\r\n\r\n    constructor(node: cc.Node){\r\n        super();\r\n        this.setNode(node);\r\n    }\r\n\r\n    protected initView(){\r\n        this.bgSp = this.getComponent(\"content/bgSp\", cc.Sprite);\r\n        this.oppNoticeSp = this.getComponent(\"content/oppNoticeSp\", cc.Sprite);\r\n        this.oppNoticeSp.node.active = false;\r\n        this.selfNoticeSp = this.getComponent(\"content/selfNoticeSp\", cc.Sprite);\r\n        this.selfNoticeSp.node.active = false;\r\n        this.timeRun = Global.UIHelper.safeGetComponent(this.getChild('content/timeLbl'), \"\", ErmjTimeAutoRun);\r\n        this.timeRun.node.active = false;\r\n    }\r\n\r\n    /**\r\n     * 自己enter时设置方位朝向\r\n     * @param serChair 服务器座位 与ErmjLocation枚举对应\r\n     */\r\n    public setChairLook(serChair: number){\r\n        let [bgStr, selfStr, oppStr] = ErmjGameConst.askNoticeStrCfg[serChair];\r\n        Global.ResourceManager.loadBundleAutoAtlas(ErmjGameConst.Gid, this.bgSp, ErmjPathHelper.gameTexturePath + \"dynamic/atlas_dynamic\", bgStr, null, true);\r\n        Global.ResourceManager.loadBundleAutoAtlas(ErmjGameConst.Gid, this.selfNoticeSp, ErmjPathHelper.gameTexturePath + \"dynamic/atlas_dynamic\", selfStr, null, true);\r\n        Global.ResourceManager.loadBundleAutoAtlas(ErmjGameConst.Gid, this.oppNoticeSp, ErmjPathHelper.gameTexturePath + \"dynamic/atlas_dynamic\", oppStr, null, true);\r\n        this.oppNoticeSp.node.active = false;\r\n        this.selfNoticeSp.node.active = false;\r\n    }\r\n\r\n    /** 轮到谁了 */\r\n    public whichLocationTurn(localseat: number){\r\n        if (localseat == 0){\r\n            this.selfNoticeSp.node.active = true;\r\n            this.oppNoticeSp.node.active = false;\r\n            this.selfNoticeSp.node.stopAllActions();\r\n            this.selfNoticeSp.node.opacity = 255;\r\n            this.selfNoticeSp.node.runAction(cc.repeatForever(\r\n                cc.sequence([\r\n                    cc.fadeTo(1, 100),\r\n                    cc.fadeTo(1, 255),\r\n                ])\r\n            ))\r\n        }\r\n        else if (localseat == 1){\r\n            this.oppNoticeSp.node.active = true;\r\n            this.selfNoticeSp.node.active = false;\r\n            this.oppNoticeSp.node.stopAllActions();\r\n            this.oppNoticeSp.node.opacity = 255;\r\n            this.oppNoticeSp.node.runAction(cc.repeatForever(\r\n                cc.sequence([\r\n                    cc.fadeTo(1, 100),\r\n                    cc.fadeTo(1, 255),\r\n                ])\r\n            ))\r\n        }\r\n    }\r\n\r\n    /** 设置倒计时 */\r\n    public setTimeRunConfig(leftTime: number, callback: Function, target: any){\r\n        this.timeRun.node.active = true;\r\n        this.timeRun.setTimer(leftTime, callback, target);\r\n    }\r\n\r\n    public setTimerShow(flag: boolean){\r\n        this.timeRun.node.active = flag;\r\n    }\r\n\r\n    public clearByRound(){\r\n        this.timeRun.node.active = false;\r\n        this.selfNoticeSp.node.stopAllActions();\r\n        this.oppNoticeSp.node.stopAllActions();\r\n        this.selfNoticeSp.node.opacity = 255;\r\n        this.oppNoticeSp.node.opacity = 255;\r\n        this.active = false;\r\n    }\r\n}"]}