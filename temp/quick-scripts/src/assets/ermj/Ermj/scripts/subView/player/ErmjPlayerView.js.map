{"version":3,"sources":["assets\\ermj\\Ermj\\scripts\\subView\\player\\ErmjPlayerView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ErmjBaseView from \"../ErmjBaseView\";\r\nimport ErmjDriver from \"../../ErmjDriver\";\r\nimport ErmjPathHelper, { ErmjAudioConst } from \"../../data/ErmjPathHelper\";\r\nimport ErmjRuleConst from \"../../data/ErmjRuleConst\";\r\nimport ErmjGameConst from \"../../data/ErmjGameConst\";\r\nimport ErmjGameEvent from \"../../data/ErmjGameEvent\";\r\n\r\nexport default class ErmjPlayerView extends ErmjBaseView {\r\n    private matchPos: cc.Vec3;\r\n    private infoNode: cc.Node;\r\n    private infoRawPos: cc.Vec3;\r\n    private headImg: cc.Sprite;\r\n    private headBox: cc.Sprite;\r\n    private nameLbl: cc.Label;\r\n    private coinLbl: cc.Label;\r\n    private bankerIcon: cc.Node;\r\n    private stateSp: cc.Sprite;\r\n    private stateEffect: sp.Skeleton;\r\n    private fanTypeNode: cc.Node;\r\n    private typeSp: cc.Sprite;\r\n    private typeBgSp: cc.Sprite;\r\n    private typeSk: sp.Skeleton;\r\n    private typeStartPos: cc.Vec3;\r\n    private tingSignNode: cc.Node;\r\n    public _someone = false;\r\n    private emjoyNode: cc.Node;\r\n    protected autoSign: cc.Node;\r\n\r\n    //客户端player索引\r\n    public clientSit = 0;\r\n\r\n    protected headTipsRoot: cc.Node;\r\n    protected headTipsRootRawPos: cc.Vec3;\r\n\r\n    constructor(node: cc.Node, public viewSeat: number) {\r\n        super();\r\n        this.setNode(node);\r\n    }\r\n\r\n    protected initView() {\r\n        this.matchPos = this.getChild(\"matchPoint\").position;\r\n        this.infoNode = this.getChild(\"info\");\r\n        this.infoRawPos = this.infoNode.position;\r\n        this.headImg = this.getComponent(\"info/mask/headImg\", cc.Sprite);\r\n        this.emjoyNode = this.getChild(\"info/emjoyNode\");\r\n        ErmjGameConst.addCommonClick(this.emjoyNode, \"\", this.onHeadClick, this, cc.Button.Transition.NONE);\r\n        this.headBox = this.getComponent(\"info/headBox\", cc.Sprite);\r\n        this.nameLbl = this.getComponent(\"info/nameLbl\", cc.Label);\r\n        this.coinLbl = this.getComponent(\"info/coinLbl\", cc.Label);\r\n        this.bankerIcon = this.getChild(\"info/banker\");\r\n        this.bankerIcon.active = false;\r\n        this.stateSp = this.getComponent(\"info/state\", cc.Sprite);\r\n        this.stateSp.node.active = false;\r\n        this.stateEffect = this.getComponent(\"info/state/effect\", sp.Skeleton);\r\n        this.fanTypeNode = this.getChild(\"info/fanType\");\r\n        this.fanTypeNode.active = false;\r\n        this.typeBgSp = this.getComponent(\"info/fanType/bgSp\", cc.Sprite);\r\n        this.typeSp = this.getComponent(\"info/fanType/bgSp/typeSp\", cc.Sprite);\r\n        this.typeSk = this.getComponent(\"info/fanType/effect\", sp.Skeleton);\r\n        this.typeStartPos = this.typeBgSp.node.position;\r\n        this.tingSignNode = this.getChild(\"info/tingNode\");\r\n        this.tingSignNode.active = false;\r\n        this.autoSign = this.getChild('info/auto');\r\n        this.autoSign.active = false;\r\n        this.headTipsRoot = this.getChild(\"headTipsRoot\");\r\n        this.headTipsRootRawPos = this.headTipsRoot.position;\r\n    }\r\n\r\n    public getHeadTipWorldPos() {\r\n        return this.headTipsRoot.parent.convertToWorldSpaceAR(this.headTipsRootRawPos);\r\n    }\r\n\r\n    private onHeadClick() {\r\n        if (this.viewSeat != 0) {\r\n            ErmjGameConst.playSound(ErmjAudioConst.commonAudio.ButtonClick, true);\r\n            Game.Event.event(ErmjGameEvent.onUserInfoTouch, this.clientSit, this.getHeadTipWorldPos());\r\n        }\r\n    }\r\n\r\n    public get someone() {\r\n        return this._someone;\r\n    }\r\n\r\n    public show(data: any) {\r\n        this.node.active = true;\r\n        // this.setPlayerInfo(\"防作弊\");\r\n        this.setPlayerInfo(data.nickname);\r\n        this.loadHeadImg(data.headimg);\r\n        this.loadHeadBox(data.headkuang);\r\n        this.setPlayerPoint(data.point);\r\n\r\n        if (this.Context.isWaitMatch) {\r\n            this.setMatching();\r\n        }\r\n        if (data == null) {\r\n            this._someone = false;\r\n            return;\r\n        }\r\n        this._someone = true;\r\n    }\r\n\r\n    public setPlayerInfo(name: string) {\r\n        this.nameLbl.string = name;\r\n    }\r\n\r\n    private loadHeadImg(str: string) {\r\n        let w = this.headImg.node.width;\r\n        let h = this.headImg.node.height;\r\n        this.headImg.spriteFrame = Global.Toolkit.getLocalHeadSf(str);\r\n        this.headImg.node.width = w;\r\n        this.headImg.node.height = h;\r\n    }\r\n\r\n    private loadHeadBox(str: string) {\r\n        let w = this.headBox.node.width;\r\n        let h = this.headBox.node.height;\r\n        ErmjDriver.instance.LoadVipHeadKuang(this.headBox, str);\r\n        this.headBox.node.width = w;\r\n        this.headBox.node.height = h;\r\n    }\r\n\r\n    public setPlayerPoint(point: number) {\r\n        this.coinLbl.string = Global.Toolkit.formatPointStr(point, true);\r\n    }\r\n\r\n    public hide() {\r\n        this.node.active = false;\r\n        this.nameLbl.string = '';\r\n        this.coinLbl.string = '';\r\n    }\r\n\r\n    public showBanker(flag: boolean) {\r\n        this.bankerIcon.active = flag;\r\n    }\r\n\r\n    public setMatching() {\r\n        this.infoNode.setPosition(this.matchPos);\r\n    }\r\n\r\n    public setMatched(isAnim: boolean, time: number = 0.5) {\r\n        if (isAnim) {\r\n            this.infoNode.setPosition(this.matchPos);\r\n            let tween = Game.Tween.get(this.infoNode);\r\n            tween.to(time, { position: this.infoRawPos }, cc.easeCubicActionOut())\r\n                .start();\r\n        }\r\n        else {\r\n            this.infoNode.setPosition(this.infoRawPos);\r\n        }\r\n    }\r\n\r\n    public showStateSp(flag: boolean, spStr?: string) {\r\n        this.stateSp.node.active = flag;\r\n        this.stateEffect.clearTracks();\r\n        if (flag) {\r\n            this.stateEffect.setAnimation(0, \"idle\", false);\r\n            Global.ResourceManager.loadBundleAutoAtlas(ErmjGameConst.Gid, this.stateSp, ErmjPathHelper.gameTexturePath + \"dynamic/atlas_dynamic\", spStr, null, true);\r\n        }\r\n    }\r\n\r\n    public showTingSign(flag: boolean) {\r\n        this.tingSignNode.active = flag;\r\n    }\r\n\r\n    public showFanType(flag: boolean, nType?: number) {\r\n        this.fanTypeNode.active = flag;\r\n        if (flag) {\r\n            this.typeSk.clearTracks();\r\n            this.typeBgSp.node.stopAllActions();\r\n            let config = ErmjRuleConst.cardTypeConfig[nType] || {};\r\n            Global.ResourceManager.loadBundleAutoAtlas(ErmjGameConst.Gid, this.typeBgSp, ErmjPathHelper.gameTexturePath + \"dynamic/atlas_dynamic\", config.bg, null, true);\r\n            Global.ResourceManager.loadBundleAutoAtlas(ErmjGameConst.Gid, this.typeSp, ErmjPathHelper.gameTexturePath + \"type/atlas_type\", config.sp, null, true);\r\n\r\n            this.typeSk.setAnimation(0, \"idle\", false);\r\n            let endPos = this.typeStartPos.add(cc.v3(-150, 0));\r\n            this.typeBgSp.node.setPosition(this.typeStartPos);\r\n            this.typeBgSp.node.opacity = 1;\r\n            let showAction = cc.spawn([\r\n                cc.moveTo(0.4, cc.v2(endPos.x, endPos.y)).easing(cc.easeCubicActionOut()),\r\n                cc.fadeTo(0.2, 255)\r\n            ])\r\n            this.typeBgSp.node.runAction(cc.sequence([\r\n                showAction,\r\n                cc.delayTime(1.1),\r\n                cc.callFunc(() => {\r\n                    this.fanTypeNode.active = false;\r\n                }, this)\r\n            ]))\r\n        }\r\n    }\r\n    public showAutoSign(isShow: boolean) {\r\n        this.autoSign.active = isShow;\r\n    }\r\n\r\n    public getPlayerHeadCenterPos() {\r\n        let pos = this.headImg.node.parent.convertToWorldSpaceAR(this.headImg.node.position);\r\n        return pos;\r\n    }\r\n\r\n    public clearByRound() {\r\n        this.autoSign.active = false;\r\n        this.bankerIcon.active = false;\r\n        this.tingSignNode.active = false;\r\n        this.showStateSp(false);\r\n        this.showFanType(false);\r\n        this.infoNode.setPosition(this.infoRawPos);\r\n    }\r\n}"]}