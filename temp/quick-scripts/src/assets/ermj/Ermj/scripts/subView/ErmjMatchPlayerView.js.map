{"version":3,"sources":["assets\\ermj\\Ermj\\scripts\\subView\\ErmjMatchPlayerView.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,+CAA0C;AAC1C,gEAA2D;AAE3D;IAAiD,uCAAY;IAMzD,6BAAY,IAAa;QAAzB,YACI,iBAAO,SAEV;QAPO,aAAO,GAAc,EAAE,CAAC;QAExB,iBAAW,GAAG,CAAC,CAAC;QAIpB,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;;IACvB,CAAC;IAES,sCAAQ,GAAlB;QACI,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,QAAQ,CAAC,gBAAgB,CAAC,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,EAAE,EAAE,EAAE,yBAAe,CAAC,CAAC;QACvG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACjC,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QAClB,KAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAC;YACtB,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,oBAAoB,GAAG,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC;YAC9D,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACxB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;SACvB;IACL,CAAC;IAES,oCAAM,GAAhB;QAAA,iBAMC;QALG,IAAI,CAAC,QAAQ,GAAG,WAAW,CAAC;YACxB,KAAI,CAAC,SAAS,EAAE,CAAC;QACrB,CAAC,EAAE,GAAG,CAAC,CAAC;QACR,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,SAAS,EAAE,CAAC;IACrB,CAAC;IAEO,uCAAS,GAAjB;QACI,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,EAAC;YACxC,IAAI,CAAC,SAAS,EAAE,CAAC;SACpB;aACG;YACA,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;YAC7C,IAAI,CAAC,WAAW,EAAE,CAAC;SACtB;IACL,CAAC;IAEO,uCAAS,GAAjB;QACI,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;QACrB,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAA,IAAI;YACrB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACxB,CAAC,CAAC,CAAA;IACN,CAAC;IAEM,8CAAgB,GAAvB,UAAwB,QAAgB,EAAE,QAAkB,EAAE,MAAW;QACrE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QAChC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,EAAE,QAAQ,EAAE,MAAM,CAAC,CAAC;IACtD,CAAC;IAEM,0CAAY,GAAnB;QACI,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;IACxB,CAAC;IAES,qCAAO,GAAjB;QACI,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC7B,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;IACrC,CAAC;IACL,0BAAC;AAAD,CA7DA,AA6DC,CA7DgD,sBAAY,GA6D5D","file":"","sourceRoot":"/","sourcesContent":["import ErmjBaseView from \"./ErmjBaseView\";\r\nimport ErmjTimeAutoRun from \"../component/ErmjTimeAutoRun\";\r\n\r\nexport default class ErmjMatchPlayerView extends ErmjBaseView{\r\n    private timeRun: ErmjTimeAutoRun;\r\n    private dotList: cc.Node[] = [];\r\n    private interval: NodeJS.Timeout;\r\n    private curDotIndex = 0;\r\n\r\n    constructor(node: cc.Node){\r\n        super();\r\n        this.setNode(node);\r\n    }\r\n\r\n    protected initView(){\r\n        this.timeRun = Global.UIHelper.safeGetComponent(this.getChild('content/timeLbl'), \"\", ErmjTimeAutoRun);\r\n        this.timeRun.node.active = false;\r\n        this.dotList = [];\r\n        for(let i = 0; i < 3; i++){\r\n            let node = this.getChild(\"content/action/dot\" + i.toString());\r\n            this.dotList.push(node);\r\n            node.active = false;\r\n        }\r\n    }\r\n\r\n    protected onOpen(){\r\n        this.interval = setInterval(()=>{\r\n            this.startAnim();\r\n        }, 400);\r\n        this.resetAnim();\r\n        this.startAnim();\r\n    }\r\n\r\n    private startAnim(){\r\n        if (this.curDotIndex >= this.dotList.length){\r\n            this.resetAnim();\r\n        }\r\n        else{\r\n            this.dotList[this.curDotIndex].active = true;  \r\n            this.curDotIndex++;  \r\n        }\r\n    }\r\n\r\n    private resetAnim(){\r\n        this.curDotIndex = 0;\r\n        this.dotList.forEach(node=>{\r\n            node.active = false;\r\n        })\r\n    }\r\n\r\n    public setTimeRunConfig(leftTime: number, callback: Function, target: any){\r\n        this.timeRun.node.active = true;\r\n        this.timeRun.setTimer(leftTime, callback, target);\r\n    }\r\n\r\n    public clearByRound(){\r\n        this.active = false;\r\n    }\r\n\r\n    protected onClose(){\r\n        clearInterval(this.interval);\r\n        this.resetAnim();\r\n        this.timeRun.node.active = false;\r\n    }\r\n}"]}