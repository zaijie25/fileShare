{"version":3,"sources":["assets\\ermj\\Ermj\\scripts\\subView\\ErmjAskActionView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ErmjBaseView from \"./ErmjBaseView\";\r\nimport { ErmjAudioConst } from \"../data/ErmjPathHelper\";\r\nimport ErmjMahjongHandView from \"./mahjong/ErmjMahjongHandView\";\r\nimport ErmjGameEvent from \"../data/ErmjGameEvent\";\r\nimport ErmjGameConst from \"../data/ErmjGameConst\";\r\n\r\nexport default class ErmjAskActionView extends ErmjBaseView {\r\n    private btnLayoutNode: cc.Node;\r\n    private passBtn: cc.Node;\r\n    private tingBtn: cc.Node;\r\n    private pongBtn: cc.Node;\r\n    private kongBtn: cc.Node;\r\n    private chowBtn: cc.Node;\r\n    private winBtn: cc.Node;\r\n    private actData: any = {};\r\n    private tingData: any = {};\r\n\r\n    private tingCancelBtn: cc.Node;\r\n\r\n    // 吃杠选择弹窗\r\n    private operViewNode: cc.Node;\r\n    private operViewBgNode: cc.Node;\r\n    private operViewContentLayout: cc.Layout;\r\n    private copyNode: cc.Node;\r\n    private operSelectItemList: OperSelectItem[] = [];\r\n\r\n\r\n    constructor(node: cc.Node) {\r\n        super();\r\n        this.setNode(node);\r\n    }\r\n\r\n    protected initView() {\r\n        this.btnLayoutNode = this.getChild(\"btnLayout\");\r\n        this.passBtn = this.getChild(\"btnLayout/btn_pass\");\r\n        ErmjGameConst.addCommonClick(this.passBtn, \"\", this.onPassClick, this);\r\n        this.tingBtn = this.getChild(\"btnLayout/btn_ting\");\r\n        ErmjGameConst.addCommonClick(this.tingBtn, \"\", this.onTingClick, this);\r\n        this.pongBtn = this.getChild(\"btnLayout/btn_pong\");\r\n        ErmjGameConst.addCommonClick(this.pongBtn, \"\", this.onPongClick, this);\r\n        this.kongBtn = this.getChild(\"btnLayout/btn_kong\");\r\n        ErmjGameConst.addCommonClick(this.kongBtn, \"\", this.onKongClick, this);\r\n        this.chowBtn = this.getChild(\"btnLayout/btn_chow\");\r\n        ErmjGameConst.addCommonClick(this.chowBtn, \"\", this.onChowClick, this);\r\n        this.winBtn = this.getChild(\"btnLayout/btn_win\");\r\n        ErmjGameConst.addCommonClick(this.winBtn, \"\", this.onWinClick, this);\r\n\r\n        this.tingCancelBtn = this.getChild(\"tingCancelBtn\");\r\n        ErmjGameConst.addCommonClick(this.tingCancelBtn, \"\", this.onTingCancel, this);\r\n        this.tingCancelBtn.active = false;\r\n\r\n        this.operViewNode = this.getChild(\"operSelectView\");\r\n        this.operViewNode.active = false;\r\n        this.operViewBgNode = this.getChild(\"operSelectView/bgNode\");\r\n        this.operViewContentLayout = this.getComponent(\"operSelectView/content\", cc.Layout);\r\n        this.copyNode = this.getChild(\"operSelectView/content/operItem\");\r\n        this.copyNode.active = false;\r\n    }\r\n\r\n    /**\r\n     * 根据json显示操作按钮列表\r\n     * @param cfg 显示啥json里传啥字段, 不传即全部不显示\r\n     * @param cfg_json 传{isPass: 1, isPong: 1, isWin: 1, isKong: 0, isChow: 1} 显示啥就传字段:true(1), 不显示的false(0)或者直接不传\r\n     */\r\n    public showBtnByConfig(cfg: any = {}, actData: any = {}) {\r\n        if (!cfg)\r\n            return;\r\n        this.actData = actData;\r\n        this.btnLayoutNode.active = true;\r\n        this.tingCancelBtn.active = false;\r\n        let { isPong, isKong, isChow, isWin } = cfg;\r\n        this.pongBtn.active = !!isPong;\r\n        this.kongBtn.active = !!isKong;\r\n        this.chowBtn.active = !!isChow;\r\n        this.winBtn.active = !!isWin;\r\n        this.passBtn.active = true;     // 都有过的选项\r\n    }\r\n\r\n    /** 是否显示听按钮 协议独立出来了 */\r\n    public showTingBtn(isTing: boolean, tingData: any = {}) {\r\n        this.tingData = tingData;\r\n        this.tingBtn.active = isTing;\r\n        this.btnLayoutNode.active = true;\r\n        this.tingCancelBtn.active = false;\r\n        this.passBtn.active = true;     // 都有过的选项\r\n    }\r\n\r\n    /**是否挂机 */\r\n    private isAuto() {\r\n        if (this.Context.isCmdAuto) {\r\n            Game.Server.send(this.Define.CmdAuto, { auto_play: 0 });\r\n        }\r\n    }\r\n\r\n    private onPassClick() {\r\n        this.isAuto();\r\n        ErmjGameConst.playSound(ErmjAudioConst.commonAudio.ButtonClick, true);\r\n        Game.Server.send(this.Define.CmdPass, {});\r\n        this.active = false;\r\n    }\r\n\r\n    private onPongClick() {\r\n        this.isAuto();\r\n        ErmjGameConst.playSound(ErmjAudioConst.commonAudio.ButtonClick, true);\r\n        let dataArr: any[] = this.actData.pong_items;\r\n        if (dataArr && dataArr.length > 0) {         // 碰只有一种选项\r\n            Game.Server.send(this.Define.CmdPong, { cards: dataArr[0].all_cards });\r\n            this.active = false;\r\n        }\r\n    }\r\n\r\n    private onKongClick() {\r\n        this.isAuto();\r\n        ErmjGameConst.playSound(ErmjAudioConst.commonAudio.ButtonClick, true);\r\n        let dataArr: any[] = this.actData.kong_items || [];\r\n        if (dataArr && dataArr.length > 0) {         // 杠可能有多种选项\r\n            if (dataArr.length == 1) {\r\n                Game.Server.send(this.Define.CmdKong, { cards: dataArr[0].all_cards });\r\n                this.active = false;\r\n                this.Context.set(this.Define.FieldInPlayTurn, false);       // 杠后关闭出牌开关, 避免快速操作异常, 会摸一张牌时callplay会再打开\r\n            }\r\n            else {   // 弹选择窗\r\n                this.showOperList(dataArr);\r\n                let kongWorldPos = this.kongBtn.parent.convertToWorldSpaceAR(this.kongBtn.position);\r\n                let pos = this.operViewNode.parent.convertToNodeSpaceAR(kongWorldPos);\r\n                this.operViewNode.setPosition(pos.add(cc.v3(0, 108)));\r\n            }\r\n        }\r\n    }\r\n\r\n    private onChowClick() {\r\n        this.isAuto();\r\n        ErmjGameConst.playSound(ErmjAudioConst.commonAudio.ButtonClick, true);\r\n        let dataArr: any[] = this.actData.chow_items || [];\r\n        if (dataArr && dataArr.length > 0) {         // 吃可能有多种选项\r\n            if (dataArr.length == 1) {\r\n                Game.Server.send(this.Define.CmdChow, { cards: dataArr[0].all_cards, chow_card: dataArr[0].card });\r\n                this.active = false;\r\n            }\r\n            else {   // 弹选择窗\r\n                this.showOperList(dataArr);\r\n                let chowWorldPos = this.chowBtn.parent.convertToWorldSpaceAR(this.chowBtn.position);\r\n                let pos = this.operViewNode.parent.convertToNodeSpaceAR(chowWorldPos);\r\n                this.operViewNode.setPosition(pos.add(cc.v3(0, 108)));\r\n            }\r\n        }\r\n    }\r\n\r\n    private onWinClick() {\r\n        this.isAuto();\r\n        ErmjGameConst.playSound(ErmjAudioConst.commonAudio.ButtonClick, true);\r\n        let data = this.actData.win_items;\r\n        Game.Server.send(this.Define.CmdWin, { card: data.card });\r\n        this.active = false;\r\n    }\r\n\r\n    private onTingClick() {\r\n        this.isAuto();\r\n        ErmjGameConst.playSound(ErmjAudioConst.commonAudio.ButtonClick, true);\r\n        if (this.tingData.ting_type == 2) {       // 天听 不用出牌\r\n            Game.Server.send(this.Define.CmdTing, { card: 0 });\r\n            this.active = false;\r\n        }\r\n        else {\r\n            Game.Event.event(ErmjGameEvent.doTingCallPlay, true, this.tingData);\r\n            this.tingCancelBtn.active = true;\r\n            this.btnLayoutNode.active = false;\r\n        }\r\n    }\r\n\r\n    private onTingCancel() {\r\n        ErmjGameConst.playSound(ErmjAudioConst.commonAudio.ButtonClick, true);\r\n        Game.Event.event(ErmjGameEvent.doTingCallPlay, false, {});\r\n        this.tingCancelBtn.active = false;\r\n        this.btnLayoutNode.active = true;\r\n    }\r\n\r\n    /**\r\n     * 显示吃杠多选框\r\n     * @param dataArr \r\n     */\r\n    public showOperList(dataArr: any[]) {\r\n        this.operViewNode.active = true;\r\n        this.resetOperList();\r\n\r\n        let count = dataArr.length;\r\n        for (let i = 0; i < count; i++) {\r\n            let view = this.operSelectItemList[i];\r\n            if (!view)\r\n                view = this.copyOneItem();\r\n            view.active = true;\r\n            view.setStyle(dataArr[i]);\r\n        }\r\n\r\n        const min = 10;\r\n        const spaceX = 168;\r\n        this.operViewBgNode.width = count * spaceX + min;\r\n    }\r\n\r\n    public resetOperList() {\r\n        this.operSelectItemList.forEach(item => {\r\n            item.active = false;\r\n        })\r\n    }\r\n\r\n    private copyOneItem() {\r\n        let node = <cc.Node>cc.instantiate(this.copyNode);\r\n        node.setParent(this.operViewContentLayout.node);\r\n        let view = new OperSelectItem(node, this.onOperItemClick, this);\r\n        this.operSelectItemList.push(view);\r\n        return view;\r\n    }\r\n\r\n    private onOperItemClick(data: any) {\r\n        this.active = false;\r\n        if (data.type == 2) {        // 只有吃和杠才会出现多种选择\r\n            Game.Server.send(this.Define.CmdChow, { cards: data.all_cards, chow_card: data.card });\r\n        }\r\n        if (data.type == 6 || data.type == 5) {      // 碰杠和暗杠才会出现\r\n            Game.Server.send(this.Define.CmdKong, { cards: data.all_cards });\r\n            this.Context.set(this.Define.FieldInPlayTurn, false);       // 杠后关闭出牌开关, 避免快速操作异常, 会摸一张牌时callplay会再打开\r\n        }\r\n    }\r\n\r\n    protected onClose() {\r\n        this.actData = {};\r\n        this.pongBtn.active = false;\r\n        this.kongBtn.active = false;\r\n        this.chowBtn.active = false;\r\n        this.winBtn.active = false;\r\n        this.winBtn.stopAllActions();\r\n        this.passBtn.active = false;\r\n        this.tingBtn.active = false;\r\n        this.tingCancelBtn.active = false;\r\n        this.operViewNode.active = false;\r\n    }\r\n\r\n    public clearByRound() {\r\n        this.active = false;\r\n    }\r\n}\r\n\r\nclass OperSelectItem extends ErmjBaseView {\r\n    private mjItemList: ErmjMahjongHandView[] = [];\r\n    private curData: any;\r\n\r\n    constructor(node: cc.Node, private callback: Function, private target: any) {\r\n        super();\r\n        this.setNode(node);\r\n    }\r\n\r\n    protected initView() {\r\n        for (let i = 0; i < 4; i++) {\r\n            let node = this.getChild(\"mahjongHandView\" + i.toString());\r\n            let view = new ErmjMahjongHandView(node);\r\n            view.active = true;\r\n            this.mjItemList.push(view);\r\n        }\r\n\r\n        ErmjGameConst.addCommonClick(this.node, \"\", this.onSelectClick, this, cc.Button.Transition.NONE);\r\n    }\r\n\r\n    public setStyle(data: any) {\r\n        this.curData = data;\r\n        let isChow = data.type == 2;\r\n        let isDarkKong = data.type == 6;\r\n        this.mjItemList.forEach((mjItem, index) => {\r\n            if (isChow && index == 3) {          // 吃 第四张隐藏\r\n                mjItem.active = false;\r\n            }\r\n            else {\r\n                mjItem.active = true;\r\n            }\r\n\r\n            if (isDarkKong && index != 3) {\r\n                mjItem.isFront = false;\r\n            }\r\n            else {\r\n                mjItem.isFront = true;\r\n                mjItem.mahjongValue = data.all_cards[index];\r\n                if (isChow && data.all_cards[index] == data.card) {      // 吃的那张设颜色\r\n                    mjItem.setSpecialColor(true);\r\n                }\r\n                else {\r\n                    mjItem.setSpecialColor(false);\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    private onSelectClick() {\r\n        this.callback.call(this.target, this.curData);\r\n    }\r\n}"]}