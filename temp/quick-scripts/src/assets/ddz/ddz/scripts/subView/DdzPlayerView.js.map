{"version":3,"sources":["assets\\ddz\\ddz\\scripts\\subView\\DdzPlayerView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import DdzBaseView from \"./DdzBaseView\";\r\nimport DdzPathHelper from \"../data/DdzPathHelper\";\r\nimport DdzPokerGroup from \"./DdzPokerGroup\";\r\nimport DdzGameConst, { DdzGameActState } from \"../data/DdzGameConst\";\r\nimport DdzRoleView, { DdzRoleDefine } from \"./DdzRoleView\";\r\nimport DdzDriver from \"../DdzDriver\";\r\n\r\n/**\r\n * 玩家信息包括飘字等\r\n */\r\nexport default class DdzPlayerView extends DdzBaseView{\r\n    protected infoNode: cc.Node;\r\n    protected coinLbl: cc.Label;\r\n    protected nameLbl: cc.Label;\r\n    protected headImg:cc.Sprite;\r\n    protected vipKuang:cc.Sprite;\r\n    protected rewardRoot: cc.Node;\r\n    protected rewardLbl: cc.Label;\r\n    protected endPos: cc.Vec3;\r\n    protected winFont: cc.Font;\r\n    protected loseFont: cc.Font;\r\n    protected warnSign: cc.Node;\r\n    protected dzSign: sp.Skeleton;\r\n    protected stateIconSp: cc.Sprite;\r\n    public pokerGroup: DdzPokerGroup;\r\n    protected dzIconPos: cc.Vec2;\r\n    protected clockRoot: cc.Node;\r\n    protected autoSign: cc.Node;\r\n    protected multNode: cc.Node;\r\n    protected roleView: DdzRoleView;\r\n\r\n    constructor(node: cc.Node, public nSeat: number){\r\n        super();\r\n        this.setNode(node);\r\n    }\r\n\r\n    protected initView(){\r\n        this.infoNode = this.getChild('info');\r\n        this.infoNode.active = false;\r\n        this.coinLbl = <cc.Label>this.getComponent('info/coinLbl', cc.Label);\r\n        this.nameLbl = <cc.Label>this.getComponent('info/nameLbl', cc.Label);\r\n        this.headImg = <cc.Sprite>this.getComponent(\"info/mask/headImg\",cc.Sprite);\r\n        this.vipKuang = <cc.Sprite>this.getComponent(\"info/headbox\",cc.Sprite);\r\n        this.rewardRoot = this.getChild('rewardRoot');\r\n        this.rewardLbl = <cc.Label>this.getComponent('rewardRoot/rewardLbl', cc.Label);\r\n        this.endPos = this.rewardRoot.position;\r\n        this.winFont = Global.ResourceManager.getGameBundleRes(DdzPathHelper.gameTexturePath + 'atlas/frame/font/num_jia', cc.Font);\r\n        this.loseFont = Global.ResourceManager.getGameBundleRes(DdzPathHelper.gameTexturePath + 'atlas/frame/font/num_fu', cc.Font);\r\n        this.warnSign = this.getChild('warn');\r\n        this.warnSign.active = false;\r\n        this.dzSign = <sp.Skeleton>this.getComponent('dzSign', sp.Skeleton);\r\n        this.dzSign.node.active = false;\r\n        this.stateIconSp = <cc.Sprite>this.getComponent('state', cc.Sprite);\r\n        this.clockRoot = this.getChild('clockRoot');\r\n        this.autoSign = this.getChild('auto');\r\n        this.autoSign.active = false;\r\n        this.multNode = this.getChild('mult');\r\n        this.multNode.active = false;\r\n    }\r\n\r\n    public initPokerGroup(node: cc.Node){\r\n        this.pokerGroup = new DdzPokerGroup(node, this.nSeat);\r\n        this.pokerGroup.resetGroupPoker();\r\n    }\r\n\r\n    public setPlayerInfo(name: string = this.Define.DefaultNameStr){\r\n        this.nameLbl.string = name;\r\n    }\r\n\r\n    public setPlayerPoint(point: number){\r\n        this.coinLbl.string = Global.Toolkit.formatPointStr(point, true);\r\n    }\r\n\r\n    public setPlayerHeadImg(str: string){\r\n        if(this.headImg){\r\n            // this.headImg.node.active = !DdzDriver.instance.skinDefine.useRole;\r\n            this.headImg.spriteFrame = Global.Toolkit.getLocalHeadSf(str);\r\n        }\r\n    }\r\n\r\n    public show(data){\r\n        this.node.active = true;\r\n        this.setPlayerInfo(data.area);\r\n        this.setPlayerPoint(data.point);\r\n        this.setPlayerHeadImg(data.headimg);\r\n        if(this.vipKuang){\r\n            DdzDriver.instance.LoadVipHeadKuang(this.vipKuang,data.headkuang)\r\n        }\r\n        if (this.nSeat !== 0)\r\n            this.infoNode.active = true;\r\n\r\n        if (!this.Context.get(this.Define.FieldGameStart)){     // 游戏未开始才显示角色为农民 开始不处理\r\n            this.showRole(true, DdzRoleDefine.FFramer, false);\r\n        }\r\n    }\r\n\r\n    public hide(){\r\n        this.node.active = false;\r\n        this.nameLbl.string = '';\r\n        this.coinLbl.string = '';\r\n        this.showRole(false);\r\n        this.clearByRound();\r\n    }\r\n\r\n    public setDz(isDz: boolean, isAnim = false){\r\n        this.dzSign.node.active = isDz;\r\n        if (isDz){\r\n            if (isAnim){\r\n                this.dzSign.setAnimation(0, 'idle', false);\r\n                this.dzSign.addAnimation(0, \"idle2\", true, 1);\r\n                this.showRole(true, DdzRoleDefine.FLandord, true);\r\n            }\r\n            else{\r\n                this.dzSign.setAnimation(0, 'idle2', true);\r\n                this.showRole(true, DdzRoleDefine.FLandord, false);\r\n            }\r\n        }\r\n    }\r\n\r\n    public setPlayerRole(node: cc.Node){\r\n        if (node && cc.isValid(node)){\r\n            this.roleView = new DdzRoleView(node);\r\n            this.roleView.active = false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 显示人物角色\r\n     * @param isShow \r\n     * @param nRole 1：地主 2：农民\r\n     * @param isAnim 是否切换动画\r\n     */\r\n    public showRole(isShow: boolean, nRole = 1, isAnim = false){\r\n        this.roleView.active = isShow;\r\n        if(isShow){\r\n            if (nRole == DdzRoleDefine.FLandord){\r\n                if (isAnim){\r\n                    this.roleView.switchRole();\r\n                }\r\n                else{\r\n                    this.roleView.showRole(true, DdzRoleDefine.FLandord);\r\n                }\r\n            }\r\n            else{\r\n                this.roleView.showRole(true, DdzRoleDefine.FFramer);\r\n            }\r\n        }\r\n    }\r\n\r\n    public showRewardLbl(num: number, isWin: boolean){\r\n        this.rewardRoot.active = true;\r\n        this.rewardLbl.string = Global.Toolkit.formatPointStr(num, true, true);\r\n        this.rewardLbl.font = isWin && this.winFont || this.loseFont;\r\n        \r\n        this.rewardRoot.setPosition(cc.v2(this.endPos.x, this.endPos.y - 30));\r\n        let tween = Game.Tween.get(this.rewardRoot);\r\n        tween.to(this.Define.FloatScoreTime - 0.4, {position: this.endPos}, cc.easeCubicActionOut())\r\n        .call(()=>{\r\n            \r\n        })\r\n        .start();\r\n        \r\n        this.roleView.playRoleSettleEffect(isWin);\r\n    }\r\n\r\n    public showPlayerThinkEffect(){\r\n        this.roleView.playRoleThinkEffect();\r\n    }\r\n\r\n    public showPlayerNormalEffect(){\r\n        this.roleView.playRoleNormalEffect();\r\n    }\r\n\r\n    public showPlayerPlayEffect(isBomb: boolean){\r\n        this.roleView.playRoleOutPokersEffect(isBomb);\r\n    }\r\n\r\n    public setState(isShow: boolean, stage?: number, num?: number){\r\n        if (isShow){\r\n            this.stateIconSp.node.children[0].getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame();\r\n            switch (stage){\r\n                case DdzGameActState.Rob:\r\n                    this.stateIconSp.node.active = true;\r\n                    Global.ResourceManager.loadGameBundleAutoAtlas(this.stateIconSp.node.children[0].getComponent(cc.Sprite), DdzPathHelper.gameTexturePath + 'atlas/frame/atlas_frame', DdzGameConst.GameRobStrCfg[num]);\r\n                    break;\r\n                case DdzGameActState.Mult:\r\n                    this.stateIconSp.node.active = true;\r\n                    Global.ResourceManager.loadGameBundleAutoAtlas(this.stateIconSp.node.children[0].getComponent(cc.Sprite), DdzPathHelper.gameTexturePath + 'atlas/frame/atlas_frame', DdzGameConst.GameMultStrCfg[num]);\r\n                    break;\r\n                case DdzGameActState.Play:\r\n                    this.stateIconSp.node.active = true;\r\n                    Global.ResourceManager.loadGameBundleAutoAtlas(this.stateIconSp.node.children[0].getComponent(cc.Sprite), DdzPathHelper.gameTexturePath + 'atlas/frame/atlas_frame', DdzGameConst.GamePlayStrCfg[num]);\r\n                    break;\r\n                default:\r\n                    this.stateIconSp.node.active = false;\r\n            }\r\n        }\r\n        this.stateIconSp.node.active = isShow;\r\n    }\r\n\r\n    public setPlayerLeftPokers(isShow: boolean, num?: number){\r\n        this.pokerGroup.setRestCountShow(isShow, num);\r\n    }\r\n\r\n    public showPlayPokers(isShow: boolean, pokerArr: number[] = [], isAnim: boolean){\r\n        this.pokerGroup.showPlayPokers(isShow, pokerArr);\r\n        if (isShow && pokerArr.length > 0){\r\n            Game.Component.scheduleOnce(()=>{\r\n                this.pokerGroup.playOutPokersAnim(isAnim, pokerArr);\r\n            }, this.Define.PokerPlayDelayTime);\r\n        }\r\n    }\r\n\r\n    public showWarnSign(isShow: boolean){\r\n        if (this.warnSign.active == isShow)\r\n            return;\r\n        this.warnSign.active = isShow;\r\n    }\r\n\r\n    public showAutoSign(isShow: boolean){\r\n        this.autoSign.active = isShow;\r\n    }\r\n\r\n    public showMultSign(isShow: boolean){\r\n        this.multNode.active = isShow;\r\n    }\r\n\r\n    public getPlayerClockWorldPos(){\r\n        return this.node.convertToWorldSpaceAR(this.clockRoot.position);\r\n    }\r\n \r\n    public clearByRound(){\r\n        this.rewardRoot.active = false;\r\n        this.warnSign.active = false;\r\n        this.autoSign.active = false;\r\n        this.setDz(false);\r\n        this.setState(false);\r\n        this.showMultSign(false);\r\n        this.pokerGroup.resetGroupPoker();\r\n    }\r\n\r\n    public clearByGame(){\r\n        this.clearByRound();\r\n    }\r\n}"]}