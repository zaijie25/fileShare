{"version":3,"sources":["assets\\ddz\\ddz\\scripts\\DdzDriver.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import DdzContext from \"./data/DdzContext\";\r\nimport DdzDefine from \"./data/DdzDefine\";\r\nimport DdzPathHelper, { DdzAudioConst } from \"./data/DdzPathHelper\";\r\nimport { DdzEndHandler, DdzRefreshHandler, DdzStartHandler, DdzWaitHandler, DdzOfflineHandler, DdzLeaveMatchHandler } from \"./handlers/DdzEasyHandlers\";\r\nimport DdzEnterHandler from \"./handlers/DdzEnterHandler\";\r\nimport DdzLeaveHandler from \"./handlers/DdzLeaveHandler\";\r\nimport { DdzSyncBeginHandler, DdzSyncEndHandler, DdzSyncRefreshHandler } from \"./handlers/DdzSyncHandler\";\r\nimport DdzGameCfgHandler from \"./handlers/DdzGameCfgHandler\";\r\nimport DdzDealHandler from \"./handlers/DdzDealHandler\";\r\nimport DdzReadyHandler from \"./handlers/DdzReadyHandler\";\r\nimport DdzRewardHandler from \"./handlers/DdzRewardHandler\";\r\nimport DdzAutoHandler from \"./handlers/DdzAutoHandler\";\r\nimport { DdzCalLandlordHandler, DdzOnLandlordHandler, DdzLandlordResultHandler, DdzReCalLandlordHandler } from \"./handlers/DdzLandlordHandler\";\r\nimport { DdzCalMultHandler, DdzOnMultHandler } from \"./handlers/DdzMultHandler\";\r\nimport { DdzPlayStartHandler, DdzCalPlayHandler, DdzOnPlayHandler, DdzOnPassHandler } from \"./handlers/DdzPlayHandler\";\r\nimport DdzAllOpenHandler from \"./handlers/DdzAllOpenHandler\";\r\nimport DdzChangeScoreHandler from \"./handlers/DdzChangeScoreHandler\";\r\nimport DdzGameConst from \"./data/DdzGameConst\";\r\nimport DdzRefreshHandPokerHandler from \"./handlers/DdzRefreshHandPokerHandler\";\r\nimport DdzLoadingUI from \"./component/DdzLoadingUI\";\r\nimport DdzSkinDefine from \"./data/DdzSkinDefine\";\r\nimport DdzMainUI from \"./panel/DdzMainUI\";\r\nimport DdzPokerHelper from \"./data/DdzPokerHelper\";\r\nimport DdzPokerPool from \"./tool/DdzPokerPool\";\r\nimport DdzPlayRule from \"./tool/DdzPlayRule\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class DdzDriver extends cc.Component{\r\n    /** 默认头像框资源 */\r\n    @property(cc.SpriteFrame)\r\n    defaultHeadKuang:cc.SpriteFrame = null;\r\n    static instance:DdzDriver = null;\r\n    public maskNode: cc.Node;\r\n    private loadingUI: DdzLoadingUI;\r\n\r\n    public Context: DdzContext;\r\n    public Define: DdzDefine;\r\n    public Path: DdzPathHelper;\r\n    public SitHelper: PVPSitHelper;\r\n    public skinDefine: DdzSkinDefine;\r\n\r\n    public mainUI: DdzMainUI;\r\n    public PokerHelper: DdzPokerHelper;\r\n    public PokerPool: DdzPokerPool;\r\n    public PlayRuleHelper: DdzPlayRule;\r\n\r\n    public settingPop: cc.Node;\r\n    public rulePop: cc.Node;\r\n    public inGame = false;     // 处理某些极端场景的报错, 资源预加载时强退到大厅, 场景未来得及销毁时立马又进来\r\n\r\n    onLoad(){\r\n        DdzDriver.instance = this\r\n        this.inGame = true;\r\n        this.maskNode = cc.find(\"mask\", this.node);\r\n        this.maskNode.zIndex = 9;\r\n        this.loadingUI = Global.UIHelper.safeGetComponent(this.node, \"loading\", DdzLoadingUI);\r\n        this.loadingUI.node.zIndex = 8;\r\n\r\n        this.setupGlobal();\r\n        this.setup();\r\n        Global.Audio.playGameBundleMusic(DdzAudioConst.Bgm1, true);\r\n    }\r\n\r\n    //初始化大厅相关逻辑\r\n    private setupGlobal(){\r\n        //初始化update驱动  初始化timer\r\n        Global.Component.initDriver();\r\n        //初始化Game驱动\r\n        Game.Component.initDriver();\r\n        Global.UI.initUIRoot();\r\n    }\r\n\r\n    private setup(){\r\n        Game.Context = new DdzContext();\r\n        this.Context = Game.Context;\r\n        this.Define = new DdzDefine();\r\n        this.Path = new DdzPathHelper();\r\n        this.SitHelper = new PVPSitHelper();\r\n        this.PlayRuleHelper = new DdzPlayRule();\r\n        this.PokerHelper = new DdzPokerHelper();\r\n\r\n        this.registHandler(this.Define);\r\n    }\r\n\r\n    start(){\r\n        Game.Event.on(Game.EVENT_FORCE_LEAVE_GAME, this, this.onForceLeave);\r\n        Game.Event.on(Game.EVENT_NOT_IN_TABLE, this, this.onForceLeave);\r\n        Game.Event.on(Game.EVENT_SOCKET_RECONNECT, this, this.onSocketReconnect);\r\n        Game.Event.on(Game.EVENT_SOCKET_RESUME, this, this.onResume);\r\n        Game.Event.on(Game.EVENT_MATCH_PLAYER, this, this.onMatchPlayer);\r\n    }\r\n\r\n    onDestroy(){\r\n        Game.Event.off(Game.EVENT_FORCE_LEAVE_GAME, this, this.onForceLeave);\r\n        Game.Event.off(Game.EVENT_NOT_IN_TABLE, this, this.onForceLeave);\r\n        Game.Event.off(Game.EVENT_SOCKET_RECONNECT, this, this.onSocketReconnect);\r\n        Game.Event.off(Game.EVENT_SOCKET_RESUME, this, this.onResume);\r\n        Game.Event.off(Game.EVENT_MATCH_PLAYER, this, this.onMatchPlayer);\r\n       \r\n        this.unscheduleAllCallbacks();\r\n        DdzDriver.instance = null;\r\n    }\r\n\r\n    /**\r\n     * 加载vip头像框，如果使用的不是vip头像框，则使用子游戏默认头像框\r\n     * @param spriteHeadKuang 头像框Sprite\r\n     * @param headkuang vip头像框字符串\r\n     */\r\n    LoadVipHeadKuang(spriteHeadKuang:cc.Sprite, headkuang:string){\r\n        // if(headkuang > \"0\"){\r\n            // Global.Toolkit.loadLocalHeadFrame(spriteHeadKuang, headkuang);\r\n        var atlasString = \"texture/headFrame/headFrame\";\r\n        var sfString = \"txkuang_vip\" + headkuang;\r\n        // return Global.ResourceManager.loadAutoAtlas(this.headBox, atlasString, sfString, () => {\r\n        //     this.headBox.sizeMode = cc.Sprite.SizeMode.CUSTOM;\r\n        //     this.headBox.trim = false\r\n        // }, false);\r\n        Global.ResourceManager.loadBundleAutoAtlas(\"2005\", spriteHeadKuang, atlasString, sfString, null, true);\r\n        // }\r\n        // else{\r\n        //     spriteHeadKuang.spriteFrame = this.defaultHeadKuang;\r\n        // }\r\n    }\r\n\r\n    private registHandler(Define:DdzDefine){\r\n        Game.Control.registDefaultHandler();\r\n\r\n        Game.Control.registHandler(Define.CmdGameCfg, new DdzGameCfgHandler);\r\n        Game.Control.registHandler(Define.CmdEnter, new DdzEnterHandler);\r\n        Game.Control.registHandler(Define.CmdLeave, new DdzLeaveHandler);\r\n        Game.Control.registHandler(Define.CmdLeaveMatch, new DdzLeaveMatchHandler);\r\n        Game.Control.registHandler(Define.CmdRefresh, new DdzRefreshHandler);\r\n        Game.Control.registHandler(Define.CmdOffline, new DdzOfflineHandler);\r\n        Game.Control.registHandler(Define.CmdSyncBegin, new DdzSyncBeginHandler);\r\n        Game.Control.registHandler(Define.CmdSyncEnd, new DdzSyncEndHandler);\r\n        Game.Control.registHandler(Define.CmdSyncTable, new DdzSyncRefreshHandler);\r\n        Game.Control.registHandler(Define.CmdRefreshHandPokers, new DdzRefreshHandPokerHandler);\r\n\r\n        Game.Control.registHandler(Define.CmdCallReady, new DdzReadyHandler);\r\n        Game.Control.registHandler(Define.CmdGameStart, new DdzStartHandler);\r\n        Game.Control.registHandler(Define.CmdDeal, new DdzDealHandler)\r\n        Game.Control.registHandler(Define.CmdAuto, new DdzAutoHandler);\r\n\r\n        Game.Control.registHandler(Define.CmdCalLandlord, new DdzCalLandlordHandler);\r\n        Game.Control.registHandler(Define.CmdLandlord, new DdzOnLandlordHandler);\r\n        Game.Control.registHandler(Define.CmdOnLandlord, new DdzLandlordResultHandler);\r\n        Game.Control.registHandler(Define.CmdReCalLandlord, new DdzReCalLandlordHandler);\r\n\r\n        Game.Control.registHandler(Define.CmdCalMult, new DdzCalMultHandler);\r\n        Game.Control.registHandler(Define.CmdMult, new DdzOnMultHandler);\r\n\r\n        Game.Control.registHandler(Define.CmdPlayStart, new DdzPlayStartHandler);\r\n        Game.Control.registHandler(Define.CmdCalPlay, new DdzCalPlayHandler);\r\n        Game.Control.registHandler(Define.CmdPlay, new DdzOnPlayHandler);\r\n        Game.Control.registHandler(Define.CmdPass, new DdzOnPassHandler);\r\n\r\n        Game.Control.registHandler(Define.CmdOpen, new DdzAllOpenHandler);\r\n        Game.Control.registHandler(Define.CmdChangeScore, new DdzChangeScoreHandler);\r\n        Game.Control.registHandler(Define.CmdReward, new DdzRewardHandler);\r\n        Game.Control.registHandler(Define.CmdGameEnd, new DdzEndHandler);\r\n        Game.Control.registHandler(Define.CmdWait, new DdzWaitHandler);\r\n    }\r\n\r\n    //重连时需要先清理玩家列表，后续重新进入\r\n    private onSocketReconnect(){\r\n        if(this.mainUI){\r\n            Global.Audio.stopAllEffect();\r\n            Game.Tween.clear();\r\n            Game.Component.unscheduleAllCallbacks();\r\n            this.mainUI.clearPlayers();\r\n            this.mainUI.clearByGame();\r\n            this.Context.clearByGame();\r\n        }\r\n    }\r\n\r\n    private onForceLeave(forceGoToHall){\r\n        if(forceGoToHall)\r\n            this.exitScene();\r\n        else\r\n            this.leaveGame();\r\n    }\r\n\r\n    private onResume(time){\r\n        if (time >= 2 * 60)\r\n            this.leaveGame();\r\n    }\r\n\r\n    private onMatchPlayer(msg){\r\n        if(!this.inGame)\r\n            return;\r\n        this.enterGame();\r\n        this.mainUI.matchPlayerView.active = true;\r\n        let data = Global.GameData.getGameInfo(DdzGameConst.Gid);\r\n        let lv = msg._para._glv;\r\n        let arr = data.levels;\r\n        for(let i = 0; i < arr.length; i++){\r\n            if (arr[i].level == lv){\r\n                this.mainUI.updateLevelBase(arr[i].PointRate);\r\n                //this.mainUI.updateMode(arr[i].clieng_cfg.mode);\r\n                this.mainUI.updateLevel(lv);\r\n                break;\r\n            }\r\n        }\r\n        this.Context.isWaitMatch = true;\r\n        let timeo = Math.ceil((msg._timeo * 1000 - Date.now() + msg._receiveTime) / 1000);\r\n        if (timeo && timeo > 0){\r\n            this.mainUI.matchPlayerView.setTimeRunConfig(timeo, ()=>{\r\n                this.Context.isWaitMatch = false;\r\n                this.mainUI.matchPlayerView.active = false;\r\n                Global.UI.showYesNoBox('匹配超时，是否重新匹配？', ()=>{\r\n                    Game.Control.trySendEnter({\"_from\":\"jump\"});    // 断socket则不能用这个\r\n                }, ()=>{\r\n                    Game.Server.send(this.Define.CmdLeave, { \"IsClose\": 1 });\r\n                    this.leaveGame();\r\n                });\r\n            }, this);\r\n        }\r\n    }\r\n\r\n    //进入游戏场景\r\n    public startScene() {\r\n        this.mainUI.node.active = false;\r\n        this.reqEnterGame(DdzGameConst.Gid, Game.Control.curLv);\r\n    }\r\n\r\n    //请求进入房间\r\n    public reqEnterGame(gid: number, glv:string, gsc:string = \"default\"){\r\n        Game.Control.connnectAndEnterGameInLevelScene(gid, glv, gsc, null);\r\n    }\r\n\r\n    public exitScene() {\r\n        if (!this.inGame)       // 1.加延时退出保证服务器收到leave消息避免shutDown掉  2.加return判断已经退出的无须重复执行\r\n            return;\r\n        this.inGame = false;\r\n\r\n        Game.Tween.clear();\r\n        Game.Component.unscheduleAllCallbacks();\r\n        if (this.mainUI) {\r\n            this.mainUI.clearWnd();\r\n            //this.mainUI.node.active = false;\r\n            if (this.rulePop)\r\n                this.rulePop.active = false;\r\n            if (this.settingPop)\r\n                this.settingPop.active = false;\r\n        }\r\n        this.Context.clearByGame();\r\n        \r\n        Game.Control.shutDown();\r\n        Global.Toolkit.transmitHallWindow(\"WndGameLobbyShell\", DdzGameConst.Gid);\r\n        Game.GamePreloadTool.releaseKeepAsset(DdzGameConst.Gid, true);\r\n        Global.SceneManager.goToHall();\r\n    }\r\n\r\n    public enterGame() {\r\n        this.mainUI.callAllPlayers('hide');\r\n        this.mainUI.clearByRound();\r\n        this.mainUI.clearByGame();\r\n        this.Context.clearByRound();\r\n        //已经在游戏中  不重复播\r\n        if (this.mainUI.node.active)\r\n            return;\r\n        Global.Audio.playGameBundleMusic(DdzAudioConst.Bgm1, true);\r\n        let comp = Global.UIHelper.addIntoGameAnimComp(this.mainUI.node, this.loadingUI.node, [], [], [], []);\r\n        comp.maskNode = this.maskNode;\r\n        this.maskNode.opacity = 1;\r\n        this.maskNode.active = true;\r\n        this.mainUI.node.active = true;\r\n        this.maskNode.zIndex = 11;\r\n        let delay = 1;\r\n        comp.startAnimtionByMask(delay, 0, null, null);\r\n        Game.Event.event(Game.EVENT_ADDTIMELOCK, \"IntoGameAnimation\", delay - 0.3);     // 完整时间锁会有停顿感\r\n    }\r\n\r\n    public leaveGame(){\r\n        Game.Tween.clear();\r\n        Game.Component.unscheduleAllCallbacks();\r\n        // this.Context.clearByGame();      // debug 提前清理可能会导致报错\r\n        // if (this.mainUI){\r\n        //     this.mainUI.clearWnd();\r\n        // }\r\n        \r\n        this.scheduleOnce(()=>{\r\n            this.exitScene();\r\n        }, 0.5);\r\n    }\r\n\r\n    public beginSync(){\r\n        Game.Tween.clear();\r\n        Game.Component.unscheduleAllCallbacks();\r\n        this.mainUI.clearByGame();\r\n    }\r\n\r\n    public reMatchPlayer() {\r\n        if (this.Context.session && this.Context.session._glv) {\r\n            this.stopGameConnect();\r\n            let lv = this.Context.session._glv;\r\n            this.reqEnterGame(DdzGameConst.Gid, lv);\r\n        }\r\n        else {\r\n            Game.Server.send(this.Define.CmdLeave, { \"IsClose\": 1 });\r\n            this.leaveGame();\r\n        }\r\n    }\r\n\r\n    public stopGameConnect() {\r\n        Game.Server.stop();\r\n        Game.Server.clearDst();\r\n        Game.Server.clearData();\r\n    }\r\n\r\n    public async openSettingPop(){\r\n        if (this.settingPop && cc.isValid(this.settingPop)){\r\n            this.settingPop.active = true;\r\n        }\r\n        else{\r\n            let prefab = await Game.GamePreloadTool.preloadPrefab(Game.GamePreloadTool.settingPop, true);\r\n            if (this.mainUI.node && cc.isValid(this.mainUI.node) && prefab && cc.isValid(prefab)){\r\n                let node = <cc.Node>cc.instantiate(prefab);\r\n                node.setParent(Global.UI.getLayer(\"PopLayer\"));\r\n                node.active = true;\r\n                this.settingPop = node;\r\n            }\r\n        }\r\n    }\r\n\r\n    public async openRulePop(){\r\n        if (this.rulePop && cc.isValid(this.rulePop)){\r\n            this.rulePop.active = true;\r\n        }\r\n        else{\r\n            let prefab = await Game.GamePreloadTool.preloadPrefab(Game.GamePreloadTool.rulePop, true);\r\n            if (this.mainUI.node && cc.isValid(this.mainUI.node) && prefab && cc.isValid(prefab)){\r\n                let node = <cc.Node>cc.instantiate(prefab);\r\n                node.setParent(Global.UI.getLayer(\"PopLayer\"));\r\n                node.active = true;\r\n                this.rulePop = node;\r\n            }\r\n        }\r\n    }\r\n}"]}