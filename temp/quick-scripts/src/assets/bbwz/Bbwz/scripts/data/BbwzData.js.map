{"version":3,"sources":["assets\\bbwz\\Bbwz\\scripts\\data\\BbwzData.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import BbwzConstDefine, { BbwzRole, BbwzGameState } from \"./BbwzConstDefine\";\r\nimport BbwzDriver from \"../BbwzDriver\";\r\nimport BbwzBetManager from \"../manager/BbwzBetManager\";\r\n\r\n\r\n/**\r\n * 全局数据类\r\n */\r\nexport default class BbwzData {\r\n    /**\r\n     * 全局数据对象，所有需要的数据都从此处往下找\r\n     */\r\n    static instance: BbwzData = null;\r\n\r\n    /**\r\n     * 正常进入游戏前初始化\r\n     */\r\n    static init() {\r\n        BbwzData.instance = new BbwzData();\r\n        Game.Control.setContext(BbwzData.instance);\r\n\r\n        BbwzData.instance.resetTableBetData();\r\n    }\r\n\r\n    /**\r\n     * 得到我自己得金币数量\r\n     */\r\n    static getMyGold() {\r\n        return Global.PlayerData.point;\r\n    }\r\n\r\n    /**\r\n     * 选场信息\r\n     */\r\n    static xuanchangInfoData: any = null;\r\n    /**\r\n     * 获取选场信息\r\n     */\r\n    static getGameInfoData() {\r\n        let infoData = Global.GameData.getGameInfo(BbwzConstDefine.GAME_ID);\r\n        this.xuanchangInfoData = infoData;\r\n        // 测试只有1个场子的情况\r\n        // BbwzData.xuanchangInfoData.levels = [BbwzData.xuanchangInfoData.levels[0]];\r\n    }\r\n\r\n    /****************************************************** 游戏配置 ********************************************************/\r\n    /**\r\n     * 房间配置对象\r\n     */\r\n    serverGameCfg: any = null;\r\n\r\n    /**\r\n     * 用来下注的筹码\r\n     */\r\n    public chipList = [10000, 100000, 500000, 1000000, 5000000];\r\n    /**\r\n     * 用来记录当前选中的筹码索引\r\n     */\r\n    public currentSelectIndex = 0;\r\n    /**\r\n     * 底部筹码世界坐标记录 筹码值-世界坐标\r\n     */\r\n    public selectChipWolrdPos = {\r\n\r\n    };\r\n    /**\r\n     * 获取当前场次小筹码样式数组\r\n     */\r\n    public getBetChipsIconStr(){\r\n        let arr = BbwzConstDefine.sfSmallChipStrCfg[this.chipList[0]];\r\n        if (!arr){\r\n            console.error(\"未配置当前场的筹码样式\", this.chipList);\r\n            return BbwzConstDefine.sfSmallChipStrCfg[10000];\r\n        }\r\n        return arr;\r\n    }\r\n    /**\r\n     * 获取当前场次大筹码样式数组\r\n     */\r\n    public getSelectChipsIconStr(){\r\n        let arr = BbwzConstDefine.sfBigChipStrCfg[this.chipList[0]];\r\n        if (!arr){\r\n            console.error(\"未配置当前场的筹码样式\", this.chipList);\r\n            return BbwzConstDefine.sfBigChipStrCfg[10000];\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    /**\r\n     * 下注总上限\r\n     */\r\n    bet_max = 1000;\r\n    /**\r\n     * 下注最小携带限额\r\n     */\r\n    bet_min = 0;\r\n\r\n    /**\r\n     * 最大赔付倍数\r\n     */\r\n    max_lose = 1;\r\n    /**\r\n     * 龙虎限红\r\n     */\r\n    // bet_bp_low = -1;\r\n    // bet_bp_high = -1;\r\n\r\n    /**\r\n     * 场子标签 1-低倍场 2-中倍场 3-高倍场\r\n     */\r\n    rateTag = 0;\r\n\r\n    /**\r\n     * 判断是否高倍场\r\n     */\r\n    // isGaobeichang() {\r\n        // if (this.rateTag != null) {\r\n        //     return (this.rateTag == 3);\r\n        // }\r\n        // return this.bet_bp_low >= 100;\r\n    // }\r\n\r\n    /**\r\n     * 下注阶段总时间\r\n     */\r\n    betTotalTime = 1;\r\n\r\n    /**\r\n     * 读取服务器配置\r\n     */\r\n    parseServerCfg(cfg) {\r\n        this.bNewData = true;\r\n\r\n        this.bet_min = cfg.common.bet_limit;\r\n        this.bet_max = cfg.common.bet_max;\r\n\r\n        this.max_lose = cfg.common.max_lose;\r\n\r\n        // this.bet_bp_low = cfg.other.bet_min;\r\n        // this.bet_bp_high = cfg.other.bet_max;\r\n\r\n        this.rateTag = cfg.rate_tag;\r\n\r\n        this.betTotalTime = cfg.stage_time.TimeBet / 1000;\r\n\r\n        //设置筹码配置,筹码配置单位转换\r\n        let chipList = [];\r\n        for (let index = 0; index < cfg.chips.length; index++) {\r\n            const chipNum = cfg.chips[index];\r\n            chipList.push(chipNum);\r\n        }\r\n        this.chipList = chipList;\r\n        //记录游戏阶段时间\r\n        // this.time_bet = cfg.stage_time.time_bet;\r\n        // this.time_award = cfg.stage_time.time_award;\r\n        // this.time_prize = cfg.stage_time.time_prize;\r\n\r\n\r\n        //断线重连 或者第一次进游戏\r\n        this.playerDataArr = [];\r\n        this.historyDataArr = [];\r\n    }\r\n\r\n    /**\r\n     * 尝试获取传入金额最合适筹码的Index\r\n     * @param money \r\n     */\r\n    tryRight(money: number) {\r\n        let chipList = this.chipList;\r\n        let chipIndex = this.tryBigest(money);\r\n        if (chipList[chipIndex] > money) {\r\n            chipIndex = Math.max(0, --chipIndex);\r\n        }\r\n        return chipIndex;\r\n    }\r\n\r\n    /**\r\n     * 尝试获取传入金额最大筹码的Index,哪怕大于输入金额\r\n     * @param money \r\n     */\r\n    tryBigest(money: number) {\r\n        let chipList = this.chipList;\r\n        for (let index = 0; index < chipList.length; index++) {\r\n            if (money <= chipList[index]) {\r\n                return index;\r\n            }\r\n        }\r\n        return chipList.length - 1;\r\n    }\r\n\r\n    /**\r\n     * 是否全新数据\r\n     */\r\n    bNewData: boolean = true;\r\n    \r\n    /**\r\n     * 自己的座位号\r\n     */\r\n    selfSrc = -1;\r\n\r\n    /**\r\n     * 游戏状态 0-发牌 1-开始下注动画 2-下注倒计时 3-停止下注 4-开奖 5-等待下一局\r\n     */\r\n    public gameState = BbwzGameState.Deal;\r\n    /**\r\n     * 倒计时：秒（带小数点）\r\n     */\r\n    remainTime = 0;\r\n\r\n    /**\r\n     * 玩家数据集合\r\n     */\r\n    playerDataArr: any[] = [];\r\n    /**\r\n     * 玩家实际数据集合\r\n     */\r\n    /**\r\n     * 历史结果数据集合\r\n     */\r\n    historyDataArr: any[] = [];\r\n    /**\r\n     * 解析后端单个历史结果数据\r\n     * @param obj \r\n     */\r\n    public addHistory(obj) {\r\n        this.historyDataArr.push(obj);\r\n    }\r\n\r\n    /**\r\n     * 清理所有结果\r\n     */\r\n    public clearHistory() {\r\n        this.historyDataArr = [];\r\n    }\r\n\r\n    /**\r\n     * 在线玩家数量\r\n     */\r\n    onlinePlayer = 0;\r\n    /**\r\n     * 在线玩家列表数据\r\n     */\r\n    onLinePlayerList = [];\r\n\r\n    /**\r\n     * 游戏各区域下注总数据\r\n     */\r\n    gameTableBetInfo: any;\r\n    /**\r\n     * 重置各区域的下注数据\r\n     */\r\n    resetTableBetData() {\r\n        this.gameTableBetInfo = {};\r\n        for (let i = 0; i < BbwzConstDefine.BET_AREA_NAME.length; i++) {\r\n            let key = BbwzConstDefine.BET_AREA_NAME[i];\r\n            this.gameTableBetInfo[key] =\r\n            {\r\n                selfBetNum: 0,\r\n                smartBetNum: 0,\r\n                totalBetNum: 0,\r\n            };\r\n        }\r\n    }\r\n    /**\r\n     * 更新牌桌各区域的下注数据和显示\r\n     */\r\n    setTableBetData(betData) {\r\n        this.resetTableBetData();\r\n        this.updateSelfTableData(betData.my_bet);\r\n        //刷新牌桌智多星下注\r\n        let wiserBetAreaArr = [];\r\n        for (const keyName in betData.smat_bet) {\r\n            let tableData = this.gameTableBetInfo[keyName];\r\n            tableData.smartBetNum = betData.smat_bet[keyName];\r\n            if (wiserBetAreaArr.indexOf(keyName) <= -1){\r\n                wiserBetAreaArr.push(keyName);\r\n            }\r\n        }\r\n        //刷新牌桌总下注\r\n        for (const keyName in betData.table_bet) {\r\n            let tableData = this.gameTableBetInfo[keyName];\r\n            tableData.totalBetNum = betData.table_bet[keyName];\r\n        }\r\n\r\n        if (this.bNewData) {\r\n            this.bNewData = false;\r\n\r\n            //断线重连或第一次进入游戏\r\n            //更新筹码显示\r\n            if (BbwzDriver.instance.chipManager)\r\n                BbwzDriver.instance.chipManager.updateUI();\r\n\r\n            //更新智多星下注在牌桌的显示\r\n            if (wiserBetAreaArr.length > 0) {\r\n                BbwzDriver.instance.gameUI.showWiserStar(false, wiserBetAreaArr);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 更新各个区域内自己的下注数据\r\n     */\r\n    updateSelfTableData(my_bet) {\r\n        for (const keyName in my_bet) {\r\n            let tableData = this.gameTableBetInfo[keyName];\r\n            tableData.selfBetNum = my_bet[keyName];\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 我的当前下注数据\r\n     */\r\n    curBetData: any = {};\r\n    /**\r\n     * 我的当前续压下注数据\r\n     */\r\n    continueBetData: any = {};\r\n\r\n    /**\r\n     * 更新自己当前下注数据\r\n     */\r\n    updateCurData(my_bet: any) {\r\n        this.curBetData = {};\r\n        for (const betAreaName in my_bet) {\r\n            let betCount = my_bet[betAreaName];\r\n            if (betCount <= 0) continue;\r\n            this.curBetData[betAreaName] = betCount;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 得到我的当前下注总额\r\n     */\r\n    getMyTotalBet() {\r\n        let result = 0;\r\n        for (const keyName in this.gameTableBetInfo) {\r\n            let tableData = this.gameTableBetInfo[keyName];\r\n            result += tableData.selfBetNum;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     *  更新上一次续压数据\r\n     */\r\n    updatePreContinueData(my_curr_bet: any) {\r\n        if (!Global.Toolkit.isEmptyObject(my_curr_bet)) {\r\n            //如果本局有下注的情况下就清空续压数据\r\n            this.continueBetData = {};\r\n            return;\r\n        }\r\n        //将上一局的本局下注数据记录成续压数据\r\n        this.continueBetData = this.curBetData;\r\n    }\r\n\r\n    /** \r\n     * 能否续压 \r\n     */\r\n    canContinueBet() {\r\n        if (!this.isBetEnable())\r\n            return false;\r\n        \r\n        let betCount = 0;\r\n        for (const key in this.continueBetData) {\r\n            const bet = this.continueBetData[key];\r\n            betCount += bet;\r\n        }\r\n        if (betCount > 0) {\r\n            let myGold = BbwzData.getMyGold();\r\n            let maxTotalBet = Math.min(BbwzData.instance.bet_max, myGold / BbwzData.instance.max_lose);    //我的最大可下注额\r\n            return betCount <= maxTotalBet;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public isBetEnable(){\r\n        return this.gameState == BbwzGameState.Bet;\r\n    }\r\n\r\n    /**\r\n     * 请求下注\r\n     */\r\n    reqBet(chip: number, betArea: string) {\r\n        if (!this.isBetEnable()) \r\n            return false;\r\n            \r\n        let myGold: number = BbwzData.getMyGold();\r\n        if (myGold < this.bet_min) {\r\n            //自身携带金额不足下注最小携带限额\r\n            Global.UI.fastTip(this.bet_min / Global.Setting.glodRatio + \"元余额以上才可下注，请您充值哦！\");\r\n            return false;\r\n        }\r\n        if (chip > myGold) {\r\n            Global.UI.fastTip(\"余额不足，请您充值哦！\");\r\n            return false;\r\n        }\r\n        let myTotalBet = BbwzData.instance.getMyTotalBet();\r\n        if (chip + myTotalBet > BbwzData.instance.bet_max) {\r\n            Global.UI.fastTip(\"您的下注已达到上限！\");\r\n            return false;\r\n        }\r\n\r\n        let maxTotalBet = (myGold + myTotalBet) / BbwzData.instance.max_lose;    //我的最大可下注额\r\n        if (chip + myTotalBet > maxTotalBet) {\r\n            Global.UI.fastTip(\"身上余额不够下注最大赔付！\");\r\n            return false;\r\n        }\r\n\r\n        let bets = [];\r\n        let myBetInfo = {};\r\n        myBetInfo[\"k\"] = \"\" + betArea;\r\n        myBetInfo[\"v\"] = chip;\r\n        bets.push(myBetInfo);\r\n        //向服务器请求下注\r\n        let _param = { \"gameid\": BbwzConstDefine.GAME_ID, \"bets\": bets };\r\n        Game.Server.send(BbwzConstDefine.SEND_BET, _param);\r\n\r\n        //清空续压数据，每一局有任意下注后无法续压\r\n        this.continueBetData = {};\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * 请求续压\r\n     */\r\n    reqContinueBet() {\r\n        if (!this.canContinueBet()) {\r\n            return;\r\n        }\r\n        let bets = [];\r\n        for (let betAreaName in this.continueBetData) {\r\n            let money = this.continueBetData[betAreaName];\r\n            if (money > 0) {\r\n                let myBetInfo = {};\r\n                myBetInfo[\"k\"] = \"\" + betAreaName;\r\n                myBetInfo[\"v\"] = money;\r\n                bets.push(myBetInfo);\r\n\r\n                while (money > 0) {\r\n                    let betIndex = this.tryRight(money);\r\n                    let betValue = this.chipList[betIndex];\r\n                    money -= betValue;\r\n                    //添加飞筹码数据\r\n                    BbwzBetManager.addBetQueue(BbwzRole.Self, betAreaName, betValue);\r\n                }\r\n            }\r\n        }\r\n        //向服务器请求下注\r\n        let _param = { \"gameid\": BbwzConstDefine.GAME_ID, \"bets\": bets };\r\n        Game.Server.send(BbwzConstDefine.SEND_BET, _param);\r\n\r\n        //清空续压数据，每一局只能续压一次\r\n        this.continueBetData = {};\r\n    }\r\n\r\n    /**\r\n     * 赢的区域集合\r\n     */\r\n    betAreaWinIndexs: number[] = [];\r\n\r\n    /**\r\n     * 设置 【赢】 的区域\r\n     */\r\n    setWinAreaWinIndexs(hit) {\r\n        this.betAreaWinIndexs = [];\r\n\r\n        for (const keyName in hit) {\r\n            let areaIndex = BbwzConstDefine.BET_AREA_NAME.indexOf(keyName);\r\n            let result = hit[keyName];\r\n            if(result.hit == 1 && areaIndex > -1){      // 过滤掉庄家hit\r\n                this.betAreaWinIndexs.push(areaIndex);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 结算数据\r\n     */\r\n    playerWinData: any = {};\r\n\r\n    /**\r\n     * 设置所有玩家的结算数据\r\n     * @param data \r\n     */\r\n    public setWinPlayerData(data) {\r\n        this.playerWinData = {};\r\n        this.playerWinData[0] = data.my_win;\r\n        this.playerWinData.point = data.point;\r\n        for (let index = 0; index < data.top_win.length; index++) {\r\n            const severdata = data.top_win[index];\r\n            let playerIndex = severdata.chair;\r\n            this.playerWinData[playerIndex] = severdata;\r\n\r\n            //更新其他玩家金币（用于点击玩家头像弹出tips详情）\r\n            let player = this.playerDataArr[playerIndex];\r\n            if (player) {\r\n                for (let key in severdata.bet_win) {\r\n                    let betWin = severdata.bet_win[key];\r\n                    player.point += betWin;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    public playerChipsFlyPos = {\r\n        [BbwzRole.Self]: new cc.Vec2(0, 0),       //我自己 下注时不使用这个值使用选中筹码位置, 筹码飞回时用\r\n        [BbwzRole.Dealer]: new cc.Vec2(0, 0),           //荷官坐标\r\n        [BbwzRole.Wiser]: new cc.Vec2(0, 0),            //智多星\r\n        [BbwzRole.Online]: new cc.Vec2(0, 0),           //在线玩家\r\n        [BbwzRole.Richer1]: new cc.Vec2(0, 0),          //大富豪\r\n        [BbwzRole.Richer2]: new cc.Vec2(0, 0),\r\n        [BbwzRole.Richer3]: new cc.Vec2(0, 0),\r\n        [BbwzRole.Richer4]: new cc.Vec2(0, 0),\r\n        [BbwzRole.Richer5]: new cc.Vec2(0, 0)\r\n    }\r\n}\r\n"]}