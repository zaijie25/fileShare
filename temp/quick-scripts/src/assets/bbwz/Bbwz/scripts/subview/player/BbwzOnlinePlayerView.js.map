{"version":3,"sources":["assets\\bbwz\\Bbwz\\scripts\\subview\\player\\BbwzOnlinePlayerView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import BbwzBaseView from \"../BbwzBaseView\";\r\nimport BbwzBetPlayerInterface from \"./BbwzBetPlayerInterface\";\r\nimport BbwzConstDefine from \"../../data/BbwzConstDefine\";\r\nimport BbwzDriver from \"../../BbwzDriver\";\r\nimport BbwzData from \"../../data/BbwzData\";\r\n\r\nexport default class BbwzOnlinePlayerView extends BbwzBaseView implements BbwzBetPlayerInterface {\r\n    private label: cc.Label;\r\n    public isAniming: boolean = false;\r\n    constructor(node: cc.Node, public chair: number) {\r\n        super();\r\n        this.setNode(node);\r\n    }\r\n\r\n    protected initView() {\r\n        this.label = <cc.Label>this.getComponent(\"countLbl\", cc.Label);\r\n        BbwzConstDefine.addCommonClick(this.node, \"\", this.onButtonCLick, this);\r\n        BbwzData.instance.playerChipsFlyPos[this.chair] = this.getCenterWorldPos();\r\n    }\r\n\r\n    private onButtonCLick() {\r\n        BbwzConstDefine.playBtnSound();\r\n        Game.Server.send(BbwzConstDefine.SEND_ONLINE_PLAYER_LIST, {});\r\n        Global.Event.event(GlobalEvent.SHOW_NET_WAITING, BbwzDriver.instance.onlinePop.loadingKey, 3);\r\n        BbwzDriver.instance.onlinePop.node.active = true;\r\n    }\r\n\r\n    public setCountLbl(isShow: boolean, count: number) {\r\n        this.label.node.active = isShow;\r\n        if (isShow)\r\n            this.label.string = count.toString();\r\n    }\r\n\r\n    /**\r\n     * 播放在线玩家按钮的下注动画\r\n     * @param timeScale \r\n     */\r\n    public playBetAnim(timeScale: number) {\r\n        if (this.isAniming) {\r\n            return;\r\n        }\r\n        let tween = Game.Tween.get(this.node);\r\n        this.isAniming = true;\r\n        this.node.scale = 1;\r\n        tween.delay(0.1)\r\n            .to(0.6 * timeScale, { scale: 1.05 }, cc.easeQuarticActionInOut())\r\n            .to(0.4 * timeScale, { scale: 1 }, cc.easeCubicActionInOut())\r\n            .call(() => {\r\n                this.isAniming = false;\r\n            })\r\n            .start();\r\n    }\r\n\r\n    public getCenterWorldPos() {\r\n        return this.node.parent.convertToWorldSpaceAR(this.node.position);\r\n    }\r\n\r\n    public clearByRound() {\r\n        super.clearByRound();\r\n        this.node.stopAllActions();\r\n        this.node.scale = 1;\r\n        this.isAniming = false;\r\n    }\r\n    //返回头像之间点的世界坐标\r\n    public getChipStartPos() {\r\n        return this.node.parent.convertToWorldSpaceAR(this.node.position);\r\n    }\r\n}\r\n"]}