{"version":3,"sources":["assets\\bbwz\\Bbwz\\scripts\\subview\\BbwzRewardAreaRootView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import BbwzBaseView from \"./BbwzBaseView\";\r\nimport BbwzConstDefine from \"../data/BbwzConstDefine\";\r\nimport BbwzPathHelper from \"../tool/BbwzPathHelper\";\r\n\r\n// betArea_mix betArea_dragon betArea_tiger 区域命名与下注区域标识字符串对应\r\n// 由于与筹码的层级问题, 从BbwzBetAreaRootView剥离出来\r\nexport default class BbwzRewardAreaRootView extends BbwzBaseView{\r\n    private areaMap: Map<string, RewardAreaView> = new Map;\r\n\r\n    constructor(node: cc.Node){\r\n        super();\r\n        this.setNode(node);\r\n    }\r\n\r\n    protected initView(){\r\n        for(let i= 0; i < BbwzConstDefine.BET_AREA_NAME.length; i++){\r\n            let key = BbwzConstDefine.BET_AREA_NAME[i];\r\n            let node = this.getChild(`reward_${key}`);\r\n            let view = new RewardAreaView(node);\r\n            view.active = true;\r\n            this.areaMap.set(key, view);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 显示区域结算状态\r\n     * @param areaName 区域名\r\n     * @param point {\"dealer\": {win_multi: 4, ...}, fu: {win_multi: -4,...}, ...}\r\n     * @param my_bet {\"fu\": 100, ...}\r\n     */\r\n    public showAreaResult(areaName: string, point: any, my_bet: any){\r\n        if (!point || !point[areaName] || !this.areaMap.has(areaName))\r\n            return;\r\n        let area = this.areaMap.get(areaName);\r\n        let data = point[areaName] || {};\r\n        let isMyBet = !!my_bet[areaName];\r\n        area.showReward(isMyBet, data.win_multi);\r\n    }\r\n\r\n    public clearByRound(){\r\n        this.areaMap.forEach(area=>{\r\n            area.reset();\r\n        })\r\n    }\r\n}\r\n\r\nclass RewardAreaView extends BbwzBaseView{\r\n    private rewardRoot: cc.Node;\r\n    private rewardSp: cc.Sprite;\r\n    private multLbl: cc.Label;\r\n    private beishuSp: cc.Sprite;\r\n    private peaceRoot: cc.Node;\r\n\r\n    constructor(node: cc.Node){\r\n        super();\r\n        this.setNode(node);\r\n    }\r\n\r\n    protected initView(){\r\n        this.rewardRoot = this.getChild(\"reward\");\r\n        this.rewardRoot.active = false;\r\n        this.rewardSp = this.getComponent(\"reward/rewardSp\", cc.Sprite);\r\n        this.beishuSp = this.getComponent(\"reward/beishuSp\", cc.Sprite);\r\n        this.multLbl = this.getComponent(\"reward/multLbl\", cc.Label);\r\n        this.peaceRoot = this.getChild(\"peace\");\r\n        this.peaceRoot.active = false;\r\n    }\r\n\r\n    public showReward(isSelfBet: boolean, multi: number){\r\n        if(!isSelfBet){     // 自己没下注就显示没有下注\r\n            this.rewardRoot.active = false;\r\n            this.peaceRoot.active = true;\r\n        }\r\n        else{\r\n            this.rewardRoot.active = true;\r\n            this.peaceRoot.active = false;\r\n            let rewardSpStr = multi >= 0 ? \"brjhn_ying\" : \"brjhn_shu\";\r\n            let beishuStr = multi >= 0 ? \"num2_bei\" : \"num_bei\";\r\n            let multFontStr = multi >= 0 ? BbwzConstDefine.areaRewardFontStr.Win : BbwzConstDefine.areaRewardFontStr.Lose;\r\n            Global.ResourceManager.loadBundleAutoAtlas(BbwzConstDefine.GAME_ID,this.rewardSp, BbwzPathHelper.gameTexturePath + \"atlas/dynamic/atlas_dynamic\", rewardSpStr, null, true);\r\n            Global.ResourceManager.loadBundleAutoAtlas(BbwzConstDefine.GAME_ID,this.beishuSp, BbwzPathHelper.gameTexturePath + \"atlas/dynamic/atlas_dynamic\", beishuStr, null, true);\r\n            this.multLbl.font = Global.ResourceManager.getBundleRes(BbwzConstDefine.GAME_ID,BbwzPathHelper.gameTexturePath + \"atlas/dynamic/font/\" + multFontStr, cc.Font);\r\n            this.multLbl.string = String(multi);\r\n        }\r\n    }\r\n\r\n    public reset(){\r\n        this.rewardRoot.active = false;\r\n        this.peaceRoot.active = false;\r\n    }\r\n}"]}