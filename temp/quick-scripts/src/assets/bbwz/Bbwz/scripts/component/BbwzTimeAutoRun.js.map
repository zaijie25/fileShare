{"version":3,"sources":["assets\\bbwz\\Bbwz\\scripts\\component\\BbwzTimeAutoRun.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAM,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAqC,mCAAY;IADjD,cAAc;IACd;QAAA,qEA8CC;QA3CW,cAAQ,GAAG,CAAC,CAAC;;IA2CzB,CAAC;IAxCa,gCAAM,GAAhB;QACI,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;IAC/C,CAAC;IAES,kCAAQ,GAAlB;IAEA,CAAC;IAEM,kCAAQ,GAAf,UAAgB,IAAY;QACxB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QACjC,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;IACrC,CAAC;IAEM,uCAAa,GAApB,UAAqB,QAAkB,EAAE,MAAW;QAChD,IAAI,CAAC,UAAU,GAAG,QAAQ,CAAC;QAC3B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;IACzB,CAAC;IAEO,mCAAS,GAAjB;QACI,IAAI,CAAC,QAAQ,EAAG,CAAC;QACjB,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,MAAM,EAAC;YAC/B,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;SACpD;QACD,IAAI,CAAC,UAAU,EAAE,CAAC;IACtB,CAAC;IAES,mCAAS,GAAnB;QACI,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QACvB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACnB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;IACpC,CAAC;IAES,mCAAS,GAAnB;QACI,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;IACpC,CAAC;IAEO,oCAAU,GAAlB;QACI,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,KAAG,IAAI,CAAC,QAAU,CAAC;IAC7C,CAAC;IA7CQ,eAAe;QAF3B,OAAO;QACR,cAAc;OACD,eAAe,CA8C3B;IAAD,sBAAC;CA9CD,AA8CC,CA9CoC,EAAE,CAAC,SAAS,GA8ChD;AA9CY,0CAAe","file":"","sourceRoot":"/","sourcesContent":["const {ccclass, property} = cc._decorator;\r\n@ccclass\r\n//倒计时组件  提供倒计时\r\nexport class BbwzTimeAutoRun extends cc.Component\r\n{\r\n    private timeLbl: cc.Label;\r\n    private leftTime = 5;\r\n    private secondCall: Function;\r\n    private target: any;\r\n    protected onLoad(){\r\n        this.timeLbl = this.getComponent(cc.Label);\r\n    }\r\n\r\n    protected onEnable(){\r\n        \r\n    }\r\n\r\n    public setTimer(time: number){\r\n        this.leftTime = Math.floor(time);\r\n        this.setTimeLbl();\r\n        this.schedule(this.onTimeRun, 1);\r\n    }\r\n\r\n    public setSecondCall(callback: Function, target: any){\r\n        this.secondCall = callback;\r\n        this.target = target;\r\n    }\r\n\r\n    private onTimeRun(){\r\n        this.leftTime --;\r\n        if (this.secondCall && this.target){\r\n            this.secondCall.call(this.target, this.leftTime);\r\n        }\r\n        this.setTimeLbl();\r\n    }\r\n\r\n    protected onDisable(){\r\n        this.secondCall = null;\r\n        this.target = null;\r\n        this.unschedule(this.onTimeRun);\r\n    }\r\n\r\n    protected onDestroy(){\r\n        this.unschedule(this.onTimeRun);\r\n    }\r\n\r\n    private setTimeLbl(){\r\n        this.timeLbl.string = `${this.leftTime}`;\r\n    }\r\n}"]}