{"version":3,"sources":["assets\\bbwz\\Bbwz\\scripts\\component\\BbwzScrollLabel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property, requireComponent} = cc._decorator;\r\n\r\n/**\r\n * 文本跑分组件\r\n */\r\n@ccclass\r\n@requireComponent(cc.Label)\r\nexport default class BbwzScrollLabel extends cc.Component {\r\n    @property\r\n    protected defaultPrefix : string = \"\";\r\n    @property\r\n    protected defaultSuffix : string = \"\";\r\n\r\n\r\n\r\n    protected prefix : string = null;\r\n    protected suffix : string = null;\r\n    protected _numLabel: cc.Label = null;\r\n    protected _curScrollNum : number = 0;\r\n    protected curNum : number = 0;\r\n    protected scrollTween : cc.Tween;\r\n\r\n    /**\r\n     * 几位小数\r\n     */\r\n    pointCount:number = 0;\r\n\r\n    onDestroy(){\r\n        this.stop();\r\n    }\r\n\r\n    protected get numLabel(){\r\n        if(this._numLabel == null){\r\n            this._numLabel = this.node.getComponent(cc.Label);\r\n        } \r\n        return this._numLabel;\r\n    }\r\n\r\n    public set scrollNum( value : number ){\r\n        this._curScrollNum = value;\r\n        if(this.curNum != value){\r\n            this.curNum = value;\r\n            this.numLabel.string = this.prefix + value.toFixed(this.pointCount) + this.suffix;\r\n        }\r\n    }\r\n    public get scrollNum(){\r\n        return this._curScrollNum;\r\n    }\r\n    \r\n    protected stop(){\r\n        if(this.scrollTween){\r\n            this.scrollTween.stop();\r\n            this.scrollTween = null;\r\n        }\r\n    }\r\n   \r\n    /**\r\n     * 设置滚动数字参数\r\n     * @param num 目标结果数字\r\n     * @param time 滚动时间\r\n     * @param prefix 滚动文字前缀\r\n     * @param suffix 滚动文字后缀\r\n     */\r\n    public goToNum(  num : number , time : number = 0.5 , prefix? : string , suffix? : string){\r\n        this.prefix = prefix || this.defaultPrefix;\r\n        this.suffix = suffix || this.defaultSuffix;\r\n        this.stop();\r\n        if(Math.abs(num - this._curScrollNum) <= 1){\r\n            time = 0;\r\n        }\r\n        if(time == 0){\r\n            this._curScrollNum = this.curNum = num;\r\n            this.numLabel.string = this.prefix + this.curNum + this.suffix;\r\n            return;\r\n        }\r\n        this.scrollTween = new cc.Tween();\r\n        this.scrollTween.target(this);\r\n        this.scrollTween.to(time,{scrollNum: num},{ progress: null, easing: \"quadOut\" });\r\n        this.scrollTween.start();\r\n    }\r\n\r\n    public clear(){\r\n        this.prefix = this.prefix || this.defaultPrefix;\r\n        this.suffix = this.suffix || this.defaultSuffix;\r\n        this._curScrollNum = this.curNum = 0;\r\n        this.numLabel.string = this.prefix + this.curNum + this.suffix;\r\n    }\r\n}"]}