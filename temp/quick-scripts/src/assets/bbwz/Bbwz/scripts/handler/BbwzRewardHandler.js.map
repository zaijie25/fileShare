{"version":3,"sources":["assets\\bbwz\\Bbwz\\scripts\\handler\\BbwzRewardHandler.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,iEAA4D;AAC5D,2DAAyE;AACzE,6CAAwC;AACxC,4CAAuC;AACvC,uDAAkD;AAElD,qBAAqB;AACrB,IAAM,cAAc,GAAG,GAAG,CAAC,CAAK,SAAS;AACzC,IAAM,aAAa,GAAG,CAAC,CAAC,CAAQ,UAAU;AAC1C,IAAM,aAAa,GAAG,CAAC,CAAC,CAAM,UAAU;AACxC,IAAM,YAAY,GAAG,GAAG,CAAC,CAAO,SAAS;AACzC,IAAM,aAAa,GAAG,CAAC,CAAC,CAAM,YAAY;AAC1C,IAAM,gBAAgB,GAAG,GAAG,CAAC,CAAG,0BAA0B;AAC1D,IAAM,aAAa,GAAG,CAAC,CAAC,CAAQ,SAAS;AACzC,IAAM,iBAAiB,GAAG,GAAG,CAAC,CAAM,OAAO;AAC3C,IAAM,aAAa,GAAG,GAAG,CAAC,CAAM,MAAM;AACtC,IAAM,cAAc,GAAG,GAAG,CAAC,CAAK,OAAO;AAEvC;;GAEG;AACH;IAAuC,qCAAqB;IAA5D;;IAuIA,CAAC;IArIG,sCAAU,GAAV,UAAW,IAAI;QACX,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC;QACtB,MAAM;QACN,MAAM;QACN,IAAI,QAAQ,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;QAC1B,IAAI,UAAU,GAAG,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC;QAC9C,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,UAAU,CAAC;QAC9B,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC;QACxB,IAAI,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;QAC/B,IAAI,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QACnC,IAAI,MAAM,GAAG,EAAE,CAAC;QAEhB,IAAI;QACJ,QAAQ,IAAI,cAAc,CAAC;QAC3B,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QAC9B,GAAG,CAAC,IAAI,GAAG,yBAAe,CAAC,iBAAiB,CAAC;QAC7C,GAAG,CAAC,SAAS,GAAG,QAAQ,IAAI,CAAC,CAAC;QAC9B,GAAG,CAAC,IAAI,GAAG,cAAc,CAAC;QAC1B,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QAEpB,OAAO;QACP,QAAQ,IAAI,aAAa,CAAC;QAC1B,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QAC9B,GAAG,CAAC,IAAI,GAAG,yBAAe,CAAC,qBAAqB,CAAC;QACjD,GAAG,CAAC,SAAS,GAAG,QAAQ,IAAI,CAAC,CAAC;QAC9B,GAAG,CAAC,IAAI,GAAG,aAAa,CAAC;QACzB,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QAEpB,IAAI;QACJ,QAAQ,IAAI,aAAa,CAAC;QAC1B,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QAC9B,GAAG,CAAC,IAAI,GAAG,yBAAe,CAAC,gBAAgB,CAAC;QAC5C,GAAG,CAAC,SAAS,GAAG,QAAQ,IAAI,CAAC,CAAC;QAC9B,GAAG,CAAC,IAAI,GAAG,aAAa,CAAC;QACzB,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QAEpB,KAAK;QACL,QAAQ,IAAI,YAAY,CAAC;QACzB,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QAC9B,GAAG,CAAC,IAAI,GAAG,yBAAe,CAAC,kBAAkB,CAAC;QAC9C,GAAG,CAAC,SAAS,GAAG,QAAQ,IAAI,CAAC,CAAC;QAC9B,GAAG,CAAC,IAAI,GAAG,YAAY,CAAC;QACxB,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QAEpB,QAAQ;QACR,QAAQ,IAAI,aAAa,CAAC;QAC1B,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QAC9B,GAAG,CAAC,IAAI,GAAG,yBAAe,CAAC,iBAAiB,CAAC;QAC7C,GAAG,CAAC,SAAS,GAAG,QAAQ,IAAI,CAAC,CAAC;QAC9B,GAAG,CAAC,IAAI,GAAG,aAAa,CAAC;QACzB,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QAEpB,SAAS;QACT,KAAK,IAAI,CAAC,GAAG,yBAAe,CAAC,YAAY,CAAC,MAAM,GAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;YAChE,SAAS;YACT,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAC;gBACjB,QAAQ,IAAI,gBAAgB,CAAC;gBAC7B,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;gBAC/B,IAAI,CAAC,IAAI,GAAG,yBAAe,CAAC,mBAAmB,CAAC;gBAChD,IAAI,CAAC,SAAS,GAAG,QAAQ,IAAI,CAAC,CAAC;gBAC/B,IAAI,CAAC,IAAI,GAAG,gBAAgB,CAAC;gBAC7B,IAAI,CAAC,KAAK,GAAG,yBAAe,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;gBAC1D,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;aACxB;YAED,QAAQ,IAAI,aAAa,CAAC;YAC1B,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;YAC9B,GAAG,CAAC,IAAI,GAAG,yBAAe,CAAC,gBAAgB,CAAC;YAC5C,GAAG,CAAC,SAAS,GAAG,QAAQ,IAAI,CAAC,CAAC;YAC9B,GAAG,CAAC,IAAI,GAAG,aAAa,CAAC;YACzB,GAAG,CAAC,KAAK,GAAG,yBAAe,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;YACzD,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;SACvB;QAED,YAAY;QACZ,QAAQ,IAAI,iBAAiB,CAAC;QAC9B,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QAC9B,GAAG,CAAC,IAAI,GAAG,yBAAe,CAAC,iBAAiB,CAAC;QAC7C,GAAG,CAAC,SAAS,GAAG,QAAQ,IAAI,CAAC,CAAC;QAC9B,GAAG,CAAC,IAAI,GAAG,iBAAiB,CAAC;QAC7B,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QAGpB,SAAS;QACT,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,IAAI,KAAK,GAAG,yBAAe,CAAC,YAAY,CAAC,MAAM,GAAE,CAAC,GAAE,CAAC,CAAC;QACtD,IAAI,KAAK,GAAG,KAAK,CAAC,CAAK,mBAAmB;QAC1C,QAAQ,IAAI,aAAa,CAAC;QAC1B,KAAK,IAAI,CAAC,GAAG,yBAAe,CAAC,YAAY,CAAC,MAAM,GAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;YAChE,KAAK,EAAG,CAAC;YACT,IAAI,KAAK,IAAI,CAAC,EAAC;gBACX,KAAK,GAAG,CAAC,CAAC;gBAEV,IAAI,KAAG,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;gBAC9B,KAAG,CAAC,IAAI,GAAG,yBAAe,CAAC,iBAAiB,CAAC;gBAC7C,QAAQ,IAAI,cAAc,CAAC;gBAC3B,KAAG,CAAC,SAAS,GAAG,QAAQ,IAAI,CAAC,CAAC;gBAC9B,KAAG,CAAC,IAAI,GAAG,KAAK,IAAI,KAAK,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,cAAc,CAAC,CAAc,sBAAsB;gBAC/F,KAAG,CAAC,KAAK,GAAG,yBAAe,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAO,uBAAuB;gBACvF,MAAM,CAAC,OAAO,CAAC,KAAG,CAAC,CAAC;gBACpB,KAAK,EAAG,CAAC;aACZ;SACJ;QAED,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,qBAAqB,EAAE,MAAM,CAAC,CAAC;QAErD,+DAA+D;QAC/D,QAAQ;QACR,kBAAQ,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC9C,UAAU;QACV,kBAAQ,CAAC,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;QAEnD,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;QAC7B,SAAS;QACT,kBAAQ,CAAC,QAAQ,CAAC,mBAAmB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACjD,QAAQ;QACR,kBAAQ,CAAC,QAAQ,CAAC,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC/C,IAAI,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;QACnC,KAAK,IAAM,OAAO,IAAI,OAAO,EAAE;YAC3B,kBAAQ,CAAC,QAAQ,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC,WAAW,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;SAC9E;QAED,UAAU;QACV,kBAAQ,CAAC,QAAQ,CAAC,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC;QACpD,oBAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QAClE,eAAe;QACf,wEAAwE;QACxE,QAAQ;QACR,oBAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,eAAe,CAAC,kBAAkB,CAAC,kBAAQ,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC;QAClG,oBAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,eAAe,CAAC,mBAAmB,CAAC,kBAAQ,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC;QACnG,YAAY;QACZ,oBAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,qBAAqB,EAAE,CAAC;IACvD,CAAC;IACL,wBAAC;AAAD,CAvIA,AAuIC,CAvIsC,+BAAqB,GAuI3D;AAvIY,8CAAiB;AAyI9B;;GAEG;AACH;IAA4C,0CAAqB;IAAjE;;IAeA,CAAC;IAdG,2CAAU,GAAV,UAAW,IAAI;QACX,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,iBAAiB,EAAE,gBAAgB,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;YACtE,oBAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,iBAAiB,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;SAClE;aACG;YACA,oBAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,iBAAiB,CAAC,IAAI,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;SACnE;QAED,QAAQ;QACR,kBAAQ,CAAC,QAAQ,CAAC,SAAS,GAAG,+BAAa,CAAC,MAAM,CAAC;QAEnD,oBAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,kBAAQ,CAAC,QAAQ,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;IACtF,CAAC;IACL,6BAAC;AAAD,CAfA,AAeC,CAf2C,+BAAqB,GAehE;AAfY,wDAAsB;AAiBnC;;GAEG;AACH;IAA+C,6CAAqB;IAApE;;IAeA,CAAC;IAdG,8CAAU,GAAV,UAAW,IAAI;QACX,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,iBAAiB,EAAE,gBAAgB,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;YACtE,oBAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,qBAAqB,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;SAClF;aACG;YACA,oBAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,qBAAqB,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;SACnF;QAED,QAAQ;QACR,kBAAQ,CAAC,QAAQ,CAAC,SAAS,GAAG,+BAAa,CAAC,MAAM,CAAC;QAEnD,oBAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,kBAAQ,CAAC,QAAQ,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;IACtF,CAAC;IACL,gCAAC;AAAD,CAfA,AAeC,CAf8C,+BAAqB,GAenE;AAfY,8DAAyB;AAkBtC;;GAEG;AACH;IAA8C,4CAAqB;IAAnE;;IAUA,CAAC;IATG,6CAAU,GAAV,UAAW,IAAI;QACX,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,iBAAiB,EAAE,cAAc,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;YACpE,oBAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,iBAAiB,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;SAC1F;aACG;YACA,oBAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,iBAAiB,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;SAC3F;IACL,CAAC;IACL,+BAAC;AAAD,CAVA,AAUC,CAV6C,+BAAqB,GAUlE;AAVY,4DAAwB;AAYrC;;GAEG;AACH;IAAiD,+CAAqB;IAAtE;;IAWA,CAAC;IAVG,gDAAU,GAAV,UAAW,IAAI;QACX,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,iBAAiB,EAAE,kBAAkB,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;SAC3E;QACD,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,IAAI,EAAE,CAAC;QAC3B,GAAG,CAAC,OAAO,CAAC,UAAA,QAAQ;YAChB,oBAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,cAAc,CAAC,cAAc,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;YAC9G,oBAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,eAAe,CAAC,aAAa,CAAC,QAAQ,iBAAM,kBAAQ,CAAC,QAAQ,CAAC,cAAc,GAAE,IAAI,CAAC,KAAK,CAAC,KAAK,IAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAE,kBAAkB;QACpK,CAAC,CAAC,CAAC;IACP,CAAC;IACL,kCAAC;AAAD,CAXA,AAWC,CAXgD,+BAAqB,GAWrE;AAXY,kEAA2B;AAaxC;;GAEG;AACH;IAA+C,6CAAqB;IAApE;;IAYA,CAAC;IAXG,8CAAU,GAAV,UAAW,IAAI;QACX,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,iBAAiB,EAAE,gBAAgB,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;YACtE,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK;gBAC9B,oBAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,eAAe,CAAC,iBAAiB,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;SAC1F;QACD,QAAQ;QACR,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;QAC3B,kBAAQ,CAAC,QAAQ,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;QAClC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,uBAAa,CAAC,gBAAgB,CAAC,CAAC,CAAY,cAAc;IAC/E,CAAC;IACL,gCAAC;AAAD,CAZA,AAYC,CAZ8C,+BAAqB,GAYnE;AAZY,8DAAyB;AActC;;GAEG;AACH;IAAgD,8CAAqB;IAArE;;IAUA,CAAC;IARG,+CAAU,GAAV,UAAW,IAAI;QACX,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,iBAAiB,EAAE,iBAAiB,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;YACvE,oBAAU,CAAC,QAAQ,CAAC,WAAW,CAAC,cAAc,EAAE,CAAC;SACpD;aAAM;YACH,oBAAU,CAAC,QAAQ,CAAC,WAAW,CAAC,KAAK,EAAE,CAAC;SAC3C;IACL,CAAC;IACL,iCAAC;AAAD,CAVA,AAUC,CAV+C,+BAAqB,GAUpE;AAVY,gEAA0B;AAYvC;;GAEG;AACH;IAA8C,4CAAqB;IAAnE;;IAYA,CAAC;IAVG,6CAAU,GAAV,UAAW,IAAI;QACX,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,iBAAiB,EAAE,eAAe,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;YACrE,oBAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,mBAAmB,CAAC,kBAAQ,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;YAChF,IAAI,IAAI,CAAC,KAAK,CAAC,UAAU,EAAC;gBACtB,oBAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,aAAa,CAAC,MAAM,GAAG,IAAI,CAAC;gBACvD,oBAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,aAAa,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;aAC5E;SACJ;IACL,CAAC;IACL,+BAAC;AAAD,CAZA,AAYC,CAZ6C,+BAAqB,GAYlE;AAZY,4DAAwB;AAcrC;;GAEG;AACH;IAAmD,iDAAqB;IAAxE;;IAQA,CAAC;IAPG,kDAAU,GAAV,UAAW,IAAI;QACX,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,iBAAiB,EAAE,oBAAoB,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;SAC7E;QACD,MAAM,CAAC,UAAU,CAAC,KAAK,GAAG,kBAAQ,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;QAChE,oBAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,kBAAkB,CAAC,MAAM,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;IAC3E,CAAC;IACL,oCAAC;AAAD,CARA,AAQC,CARkD,+BAAqB,GAQvE;AARY,sEAA6B;AAU1C;;GAEG;AACH;IAA+C,6CAAqB;IAApE;;IAWA,CAAC;IAVG,8CAAU,GAAV,UAAW,IAAI;QACX,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,MAAM;YACN,IAAI,QAAQ,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;YAC1B,IAAI,UAAU,GAAG,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC;YAC9C,kBAAQ,CAAC,QAAQ,CAAC,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,UAAU,GAAG,IAAI,CAAC,CAAC;SACrF;QAED,oBAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,WAAW,CAAC,mBAAmB,EAAE,CAAC;IACjE,CAAC;IACL,gCAAC;AAAD,CAXA,AAWC,CAX8C,+BAAqB,GAWnE;AAXY,8DAAyB","file":"","sourceRoot":"/","sourcesContent":["import BbwzSocketBaseHandler from \"./BbwzSocketBaseHandler\";\r\nimport BbwzConstDefine, { BbwzGameState } from \"../data/BbwzConstDefine\";\r\nimport BbwzData from \"../data/BbwzData\";\r\nimport BbwzDriver from \"../BbwzDriver\";\r\nimport BbwzGameEvent from \"../data/BbwzGameEvent\";\r\n\r\n//定义各个阶段播放时间,根据各个游戏调整\r\nconst time_wait_next = 0.5;     //等待下一局时间\r\nconst time_self_win = 0;        //播放个人结算时间\r\nconst time_fly_word = 1;      //播放飘字动画时间\r\nconst time_fly_bet = 1.5;       //播放飞筹码时间\r\nconst time_win_area = 1;      //赌桌赢的区域闪烁动画\r\nconst time_area_reward = 0.1;   // 显示区域总输赢倍数   预留时间给牌型播放声音\r\nconst time_one_flip = 1;        // 翻一家0.5\r\nconst time_dispath_hand = 0.5;      // 分发手牌\r\nconst time_one_deal = 0.5;      //发2组牌\r\nconst delay_one_deal = 0.2;     // 发牌间隔\r\n\r\n/**\r\n * e3  开奖消息 d1 中奖 d2\r\n */\r\nexport class BbwzRewardHandler extends BbwzSocketBaseHandler {\r\n\r\n    handleData(data) {\r\n        let para = data._para;\r\n        //分解协议\r\n        //修正时间\r\n        var currTime = Date.now();\r\n        var jiangeTime = currTime - data._receiveTime;\r\n        data._para.time -= jiangeTime;\r\n        data._para.time /= 1000;\r\n        var totalSec = data._para.time;\r\n        var dataStr = JSON.stringify(data);\r\n        var msgArr = [];\r\n\r\n        //等待\r\n        totalSec -= time_wait_next;\r\n        var msg = JSON.parse(dataStr);\r\n        msg._cmd = BbwzConstDefine.GameWait_WaitNext;\r\n        msg._needPlay = totalSec >= 0;\r\n        msg.time = time_wait_next;\r\n        msgArr.unshift(msg);\r\n\r\n        //个人结算 \r\n        totalSec -= time_self_win;\r\n        var msg = JSON.parse(dataStr);\r\n        msg._cmd = BbwzConstDefine.GameWait_GeRenJieSuan;\r\n        msg._needPlay = totalSec >= 0;\r\n        msg.time = time_self_win;\r\n        msgArr.unshift(msg);\r\n\r\n        //飘字\r\n        totalSec -= time_fly_word;\r\n        var msg = JSON.parse(dataStr);\r\n        msg._cmd = BbwzConstDefine.GameWait_FlyWord;\r\n        msg._needPlay = totalSec >= 0;\r\n        msg.time = time_fly_word;\r\n        msgArr.unshift(msg);\r\n\r\n        //飞筹码\r\n        totalSec -= time_fly_bet;\r\n        var msg = JSON.parse(dataStr);\r\n        msg._cmd = BbwzConstDefine.GameWait_FeiChouMa;\r\n        msg._needPlay = totalSec >= 0;\r\n        msg.time = time_fly_bet;\r\n        msgArr.unshift(msg);\r\n\r\n        //赢得区域闪烁\r\n        totalSec -= time_win_area;\r\n        var msg = JSON.parse(dataStr);\r\n        msg._cmd = BbwzConstDefine.GameWait_WinShine;\r\n        msg._needPlay = totalSec >= 0;\r\n        msg.time = time_win_area;\r\n        msgArr.unshift(msg);\r\n\r\n        // 一个个翻手牌\r\n        for (let i = BbwzConstDefine.GROUP_DEFINE.length  - 1; i >= 0; i--) {\r\n            // 显示区域结算\r\n            if (i != 0 && i != 1){\r\n                totalSec -= time_area_reward;\r\n                let msg2 = JSON.parse(dataStr);\r\n                msg2._cmd = BbwzConstDefine.GameWait_AreaResult;\r\n                msg2._needPlay = totalSec >= 0;\r\n                msg2.time = time_area_reward;\r\n                msg2.group = BbwzConstDefine.GROUP_DEFINE.slice(i, i + 1);\r\n                msgArr.unshift(msg2);\r\n            }\r\n\r\n            totalSec -= time_one_flip;\r\n            var msg = JSON.parse(dataStr);\r\n            msg._cmd = BbwzConstDefine.GameWait_FanCard;\r\n            msg._needPlay = totalSec >= 0;\r\n            msg.time = time_one_flip;\r\n            msg.group = BbwzConstDefine.GROUP_DEFINE.slice(i, i + 1);\r\n            msgArr.unshift(msg);\r\n        }\r\n\r\n        // 翻牌前置 分发手牌\r\n        totalSec -= time_dispath_hand;\r\n        var msg = JSON.parse(dataStr);\r\n        msg._cmd = BbwzConstDefine.GameWait_Dispatch;\r\n        msg._needPlay = totalSec >= 0;\r\n        msg.time = time_dispath_hand;\r\n        msgArr.unshift(msg);\r\n\r\n        \r\n        // 两个两个发牌\r\n        let count = 0;\r\n        let total = BbwzConstDefine.GROUP_DEFINE.length /2 -1;\r\n        let index = total;     // 顺序计数 庄0 福1 禄2 寿3\r\n        totalSec -= time_one_deal;\r\n        for (let i = BbwzConstDefine.GROUP_DEFINE.length  - 1; i >= 0; i--) {\r\n            count ++;\r\n            if (count == 2){\r\n                count = 0;\r\n\r\n                let msg = JSON.parse(dataStr);\r\n                msg._cmd = BbwzConstDefine.GameWait_DealCard;\r\n                totalSec -= delay_one_deal;\r\n                msg._needPlay = totalSec >= 0;\r\n                msg.time = index == total ? time_one_deal : delay_one_deal;              // 最后一组翻牌(寿) 加锁时长为发牌时长\r\n                msg.group = BbwzConstDefine.GROUP_DEFINE.slice(i, i + 2);       // 每次发两个 依次为庄2-福2-禄2-寿2\r\n                msgArr.unshift(msg);\r\n                index --;\r\n            }\r\n        }\r\n\r\n        Game.Event.event(Game.EVENT_UNSHFIT_MSGLIST, msgArr);\r\n\r\n        //=============================================================\r\n        //设置牌桌数据\r\n        BbwzData.instance.setTableBetData(data._para);\r\n        //更新本次续压数据\r\n        BbwzData.instance.updateCurData(data._para.my_bet);\r\n\r\n        var award = data._para.award;\r\n        //保存获胜的区域\r\n        BbwzData.instance.setWinAreaWinIndexs(award.hit);\r\n        //保存盈利数据\r\n        BbwzData.instance.setWinPlayerData(data._para);\r\n        let allBets = data._para.table_bet;\r\n        for (const keyName in allBets) {\r\n            BbwzData.instance.gameTableBetInfo[keyName].totalBetNum = allBets[keyName];\r\n        }\r\n\r\n        //更新在线玩家数量\r\n        BbwzData.instance.onlinePlayer = data._para.p_count;\r\n        BbwzDriver.instance.gameUI.updateOnlinePlayer(data._para.p_count);\r\n        //如果是中途进入需要显示好牌\r\n        // BbwzDriver.instance.gameUI.compareRootView.dealAllGroupPokers(false);\r\n        //更新下注显示\r\n        BbwzDriver.instance.gameUI.betAreaRootView.updateSelfBetLabel(BbwzData.instance.gameTableBetInfo);\r\n        BbwzDriver.instance.gameUI.betAreaRootView.updateTotalBetLabel(BbwzData.instance.gameTableBetInfo);\r\n        // 更新下注底部筹码栏\r\n        BbwzDriver.instance.gameUI.updateBetSelectButton();\r\n    }\r\n}\r\n\r\n/**\r\n * e3-1 开奖-发牌\r\n */\r\nexport class BbwzRewardFapaiHandler extends BbwzSocketBaseHandler {\r\n    handleData(data) {\r\n        if (data._needPlay) {\r\n            Game.Event.event(Game.EVENT_ADDTIMELOCK, \"BetRewardFapai\", data.time);\r\n            BbwzDriver.instance.gameUI.dealCompareReward(data.group, true);\r\n        }\r\n        else{\r\n            BbwzDriver.instance.gameUI.dealCompareReward(data.group, false);\r\n        }\r\n\r\n        //设置游戏状态\r\n        BbwzData.instance.gameState = BbwzGameState.Reward;\r\n        \r\n        BbwzDriver.instance.gameUI.stateView.runState(BbwzData.instance.gameState, false);\r\n    }\r\n}\r\n\r\n/**\r\n * e3-1-0 开奖-分发牌种\r\n */\r\nexport class BbwzRewardDispatchHandler extends BbwzSocketBaseHandler {\r\n    handleData(data) {\r\n        if (data._needPlay) {\r\n            Game.Event.event(Game.EVENT_ADDTIMELOCK, \"RewardDispatch\", data.time);\r\n            BbwzDriver.instance.gameUI.dispatchCompareReward(true, data._para.award.point);\r\n        }\r\n        else{\r\n            BbwzDriver.instance.gameUI.dispatchCompareReward(false, data._para.award.point);\r\n        }\r\n        \r\n        //设置游戏状态\r\n        BbwzData.instance.gameState = BbwzGameState.Reward;\r\n        \r\n        BbwzDriver.instance.gameUI.stateView.runState(BbwzData.instance.gameState, false);\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * e3-1-1 开奖-翻第X手牌\r\n */\r\nexport class BbwzRewardFanCardHandler extends BbwzSocketBaseHandler {\r\n    handleData(data) {\r\n        if (data._needPlay) {\r\n            Game.Event.event(Game.EVENT_ADDTIMELOCK, \"RewardFanpai\", data.time);\r\n            BbwzDriver.instance.gameUI.showCompareReward(data.group, data._para.award.point, true);\r\n        }\r\n        else{\r\n            BbwzDriver.instance.gameUI.showCompareReward(data.group, data._para.award.point, false);\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * e3-1-3 开奖-显示区域输赢倍数\r\n */\r\nexport class BbwzRewardAreaResultHandler extends BbwzSocketBaseHandler {\r\n    handleData(data) {\r\n        if (data._needPlay) {\r\n            Game.Event.event(Game.EVENT_ADDTIMELOCK, \"RewardAreaResult\", data.time);\r\n        }\r\n        let arr = data.group || [];\r\n        arr.forEach(areaName => {\r\n            BbwzDriver.instance.gameUI.rewardAreaView.showAreaResult(areaName, data._para.award.point, data._para.my_bet);\r\n            BbwzDriver.instance.gameUI.betAreaRootView.showAreaTrend(areaName, [...BbwzData.instance.historyDataArr, data._para.award], data._needPlay);  // 生成临时总数据, 避免重复添加\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * e3-2 开奖-赢的区域闪烁动画\r\n */\r\nexport class BbwzRewardWinShineHandler extends BbwzSocketBaseHandler {\r\n    handleData(data) {\r\n        if (data._needPlay) {\r\n            Game.Event.event(Game.EVENT_ADDTIMELOCK, \"RewardWinShine\", data.time);\r\n            if (data._para && data._para.award)\r\n                BbwzDriver.instance.gameUI.betAreaRootView.showAreaWinEffect(data._para.award.hit);\r\n        }\r\n        //新增历史记录\r\n        let obj = data._para.award;\r\n        BbwzData.instance.addHistory(obj);\r\n        Game.Event.event(BbwzGameEvent.onHistoryDataRes);            // 添加走势数据并通知更新\r\n    }\r\n}\r\n\r\n/**\r\n * e3-3 开奖-飞筹码\r\n */\r\nexport class BbwzRewardFeiChouMaHandler extends BbwzSocketBaseHandler {\r\n\r\n    handleData(data) {\r\n        if (data._needPlay) {\r\n            Game.Event.event(Game.EVENT_ADDTIMELOCK, \"RewardFeichouma\", data.time);\r\n            BbwzDriver.instance.chipManager.rewardFlyChips();\r\n        } else {\r\n            BbwzDriver.instance.chipManager.clear();\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * e3-4 开奖-飘字\r\n */\r\nexport class BbwzRewardFlyWordHandler extends BbwzSocketBaseHandler {\r\n\r\n    handleData(data) {\r\n        if (data._needPlay) {\r\n            Game.Event.event(Game.EVENT_ADDTIMELOCK, \"RewardFlyWord\", data.time);\r\n            BbwzDriver.instance.gameUI.showPlayerRewardLbl(BbwzData.instance.playerWinData);\r\n            if (data._para.big_winner){\r\n                BbwzDriver.instance.gameUI.bigWinnerView.active = true;\r\n                BbwzDriver.instance.gameUI.bigWinnerView.updateUI(data._para.big_winner);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * e3-5 开奖-个人结算\r\n */\r\nexport class BbwzRewardGeRenJieSuanHandler extends BbwzSocketBaseHandler {\r\n    handleData(data) {\r\n        if (data._needPlay) {\r\n            Game.Event.event(Game.EVENT_ADDTIMELOCK, \"RewardGeRenJieSuan\", data.time);\r\n        }\r\n        Global.PlayerData.point = BbwzData.instance.playerWinData.point;\r\n        BbwzDriver.instance.gameUI.onSelfPointRefresh(Global.PlayerData.point);\r\n    }\r\n}\r\n\r\n/**\r\n * e3-6 开奖-等待下一局\r\n */\r\nexport class BbwzRewardWaitNextHandler extends BbwzSocketBaseHandler {\r\n    handleData(data) {\r\n        if (data._needPlay) {\r\n            //设置状态\r\n            var currTime = Date.now();\r\n            var jiangeTime = currTime - data._receiveTime;\r\n            BbwzData.instance.remainTime = Math.max(0.5, data._para.time - jiangeTime / 1000);\r\n        }\r\n        \r\n        BbwzDriver.instance.gameUI.taskManager.reqGetCommisionInfo();\r\n    }\r\n}"]}