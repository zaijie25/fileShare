window.__require=function e(t,o,n){function i(a,s){if(!o[a]){if(!t[a]){var l=a.split("/");if(l=l[l.length-1],!t[l]){var c="function"==typeof __require&&__require;if(!s&&c)return c(l,!0);if(r)return r(l,!0);throw new Error("Cannot find module '"+a+"'")}a=l}var d=o[a]={exports:{}};t[a][0].call(d.exports,function(e){return i(t[a][1][e]||e)},d,d.exports,e,t,o,n)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({DDZTimeAutoRun:[function(e,t,o){"use strict";cc._RF.push(t,"8686bVDMN5Fy459RhLbMr/Z","DDZTimeAutoRun");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,l=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.totalTime=5,t}return i(t,e),t.prototype.onLoad=function(){this.timeLbl=this.getComponent(cc.Label)},t.prototype.onEnable=function(){},t.prototype.setTimer=function(e,t,o){this.totalTime=e,this.finishCal=t,this.target=o,this.setTimeLbl(),this.schedule(this.onTimeRun,1)},t.prototype.onTimerFinish=function(){this.finishCal&&this.target&&this.finishCal.call(this.target)},t.prototype.onTimeRun=function(){cc.isValid(this.node)&&(this.totalTime--,0==this.totalTime&&this.onTimerFinish(),this.setTimeLbl())},t.prototype.onDisable=function(){this.unschedule(this.onTimeRun)},t.prototype.onDestroy=function(){this.unschedule(this.onTimeRun)},t.prototype.setTimeLbl=function(){this.timeLbl.string=""+this.totalTime},r([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{}],DdzAllOpenHandler:[function(e,t,o){"use strict";cc._RF.push(t,"8cac8WD9v1GW7DcJ/D0C+qY","DdzAllOpenHandler");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("./DdzBaseHandler"),a=e("../DdzDriver"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(e){var t=this;this.mainUI.callAllPlayers("setPlayerLeftPokers",!1),this.mainUI.callAllPlayers("setState",!1),this.mainUI.callAllPlayers("showWarnSign",!1),this.mainUI.setChooseEnbale(!1),this.mainUI.showMarker(!1),this.mainUI.askActionView.clearByGame(),(e._para.UserCards||[]).forEach(function(e){if(e.all_cards&&!Global.Toolkit.isEmptyObject(e.all_cards)){var o=a.default.instance.PokerHelper.sortPokerArr(e.all_cards),n=t.SitHelper.serverSToLocalN(e.chair);t.mainUI.callPlayer(n,"showPlayPokers",!0,o,!1)}});var o=e._para.flag,n=1;1==o?(Game.Component.scheduleOnce(function(){t.mainUI.playSpringAnim(1)},n),n+=this.Define.SpringAnimTime):2==o&&(Game.Component.scheduleOnce(function(){t.mainUI.playSpringAnim(2)},n),n+=this.Define.SpringAnimTime),this.mainUI.selfPlayView.hideAllPokers(),Game.Event.event(Game.EVENT_ADDTIMELOCK,"DdzAllOpenHandler",n)},t.prototype.executeSync=function(e){var t=this;this.mainUI.callAllPlayers("setPlayerLeftPokers",!1),this.mainUI.callAllPlayers("setState",!1),this.mainUI.callAllPlayers("showWarnSign",!1),this.mainUI.setChooseEnbale(!1),this.mainUI.showMarker(!1),this.mainUI.askActionView.clearByGame(),(e._para.UserCards||[]).forEach(function(e){if(e.all_cards&&!Global.Toolkit.isEmptyObject(e.all_cards)){var o=a.default.instance.PokerHelper.sortPokerArr(e.all_cards),n=t.SitHelper.serverSToLocalN(e.chair);t.mainUI.callPlayer(n,"showPlayPokers",!0,o,!1)}}),this.mainUI.selfPlayView.hideAllPokers()},t}(r.default);o.default=s,cc._RF.pop()},{"../DdzDriver":"DdzDriver","./DdzBaseHandler":"DdzBaseHandler"}],DdzAskActionView:[function(e,t,o){"use strict";cc._RF.push(t,"11cdeucg5hJTJBa2M78rxGJ","DdzAskActionView");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("./DdzBaseView"),a=e("../data/DdzGameEvent"),s=e("../data/DdzPathHelper"),l=e("../DdzDriver"),c=e("../data/DdzGameConst"),d=function(e){function t(t){var o=e.call(this)||this;return o.setNode(t),o}return i(t,e),t.prototype.initView=function(){this.autoBtn=this.getChild("autoBtn"),this.autoBtn.active=!1,c.default.addCommonClick(this.autoBtn,"",this.onAutoPlayClick,this),this.cancelAuto=this.getChild("cancelAuto"),this.cancelAuto.active=!1,c.default.addCommonClick(this.node,"cancelAuto/btnCancel",this.onCancelAutoClick,this),this.robActionView=new h(this.getChild("rob")),this.robActionView.active=!1,this.multActionView=new p(this.getChild("mult")),this.multActionView.active=!1,this.playActionView=new f(this.getChild("play")),this.playActionView.active=!1,this.cannotPlayActionView=new m(this.getChild("notPlay")),this.cannotPlayActionView.active=!1,this.rewardActionView=new y(this.getChild("reward")),this.rewardActionView.active=!1},t.prototype.onAutoPlayClick=function(){Global.Audio.playGameBundleSound(s.DdzAudioConst.audioCommonPath+s.DdzAudioConst.commonAudio.ButtonClick,!0),this.setAutoPlayBtnShow(!1),Game.Server.send(this.Define.CmdAuto,{auto_play:1})},t.prototype.onCancelAutoClick=function(){Global.Audio.playGameBundleSound(s.DdzAudioConst.audioCommonPath+s.DdzAudioConst.commonAudio.ButtonClick,!0),this.setAutoPlayBtnShow(!0),Game.Server.send(this.Define.CmdAuto,{auto_play:0})},t.prototype.setAutoPlayBtnShow=function(e){this.autoBtn.active=e,this.cancelAuto.active=!e},t.prototype.setRobViewShow=function(e,t,o){void 0===t&&(t=[]),void 0===o&&(o=[]),this.robActionView.active=e,e?(this.robActionView.disableMissItem(o),this.curView=this.robActionView):this.curView=null},t.prototype.setMultViewShow=function(e){this.multActionView.active=e,this.curView=e?this.multActionView:null},t.prototype.setPlayViewShow=function(e,t,o){void 0===t&&(t=!0),void 0===o&&(o=!0),this.playActionView.active=e,e?(this.playActionView.enablePromptBtn(t),this.playActionView.enablePassBtn(o),this.curView=this.playActionView):this.curView=null},t.prototype.setCannotPlayViewShow=function(e){this.cannotPlayActionView.active=e,this.curView=e?this.cannotPlayActionView:null},t.prototype.getActionClockWorldPos=function(){return this.curView?this.curView.getClockWorldPos():this.node.convertToWorldSpaceAR(cc.v2(0,50))},t.prototype.showRewardActionView=function(e){this.rewardActionView.active=e},t.prototype.onClose=function(){this.curView=null},t.prototype.clearByRound=function(){this.autoBtn.active=!1,this.cancelAuto.active=!1},t.prototype.clearByGame=function(){this.autoBtn.active=!1,this.cancelAuto.active=!1,this.robActionView.active=!1,this.multActionView.active=!1,this.playActionView.active=!1,this.cannotPlayActionView.active=!1,this.rewardActionView.active=!1,this.curView=null},t}(r.default);o.default=d;var h=function(e){function t(t){var o=e.call(this)||this;return o.itemList=[],o.setNode(t),o}return i(t,e),t.prototype.initView=function(){this.clockRoot=this.getChild("clockRoot");for(var e=0;e<=3;e++){var t=this.getChild("btn"+e);this.itemList.push(new u(t,e,this.onRobAction,this))}},t.prototype.disableMissItem=function(e){void 0===e&&(e=[]),this.itemList.forEach(function(t){var o=t.robData;e.indexOf(o)>-1?t.setDisable(!0):t.setDisable(!1)})},t.prototype.onRobAction=function(e){this.active=!1,Game.Server.send(this.Define.CmdLandlord,{selected:e})},t.prototype.getClockWorldPos=function(){return this.clockRoot.parent.convertToWorldSpaceAR(this.clockRoot.position)},t}(r.default),u=function(e){function t(t,o,n,i){var r=e.call(this)||this;return r.data=o,r.callback=n,r.target=i,r.setNode(t),r}return i(t,e),t.prototype.initView=function(){c.default.addCommonClick(this.node,"",this.onRobBtnClick,this),this.btn=this.getComponent("",cc.Button)},t.prototype.onRobBtnClick=function(){Global.Audio.playGameBundleSound(s.DdzAudioConst.audioCommonPath+s.DdzAudioConst.commonAudio.ButtonClick,!0),this.callback&&this.target&&this.callback.call(this.target,this.data)},t.prototype.setDisable=function(e){Global.UIHelper.setNodeGray(this.node,e),this.btn.interactable=!e},Object.defineProperty(t.prototype,"robData",{get:function(){return this.data},enumerable:!1,configurable:!0}),t}(r.default),p=function(e){function t(t){var o=e.call(this)||this;return o.setNode(t),o}return i(t,e),t.prototype.initView=function(){c.default.addCommonClick(this.node,"btn0",this.onNoneMultClick,this),c.default.addCommonClick(this.node,"btn1",this.onMultClick,this),this.clockRoot=this.getChild("clockRoot")},t.prototype.onNoneMultClick=function(){Global.Audio.playGameBundleSound(s.DdzAudioConst.audioCommonPath+s.DdzAudioConst.commonAudio.ButtonClick,!0),this.active=!1,Game.Server.send(this.Define.CmdMult,{selected:1})},t.prototype.onMultClick=function(){Global.Audio.playGameBundleSound(s.DdzAudioConst.audioCommonPath+s.DdzAudioConst.commonAudio.ButtonClick,!0),this.active=!1,Game.Server.send(this.Define.CmdMult,{selected:2})},t.prototype.getClockWorldPos=function(){return this.clockRoot.parent.convertToWorldSpaceAR(this.clockRoot.position)},t}(r.default),f=function(e){function t(t){var o=e.call(this)||this;return o.setNode(t),o}return i(t,e),t.prototype.initView=function(){c.default.addCommonClick(this.node,"btn0",this.onNoPlayClick,this),this.passBtn=this.getComponent("btn0",cc.Button),c.default.addCommonClick(this.node,"btn1",this.onPromptClick,this),this.promptBtn=this.getComponent("btn1",cc.Button),c.default.addCommonClick(this.node,"btn2",this.onPlayClick,this),this.playBtn=this.getComponent("btn2",cc.Button),this.clockRoot=this.getChild("clockRoot")},t.prototype.onNoPlayClick=function(){Global.Audio.playGameBundleSound(s.DdzAudioConst.audioCommonPath+s.DdzAudioConst.commonAudio.ButtonClick,!0),this.active=!1,Game.Server.send(this.Define.CmdPass,{})},t.prototype.onPromptClick=function(){Global.Audio.playGameBundleSound(s.DdzAudioConst.audioCommonPath+s.DdzAudioConst.commonAudio.ButtonClick,!0);var e=this.PlayRuleHelper.getOneRecommend();if(e)Game.Event.event(a.default.OnSelfPromptPokers,e);else{this.PlayRuleHelper.resetRecommendGen();var t=this.PlayRuleHelper.getOneRecommend();t&&Game.Event.event(a.default.OnSelfPromptPokers,t)}},t.prototype.enablePromptBtn=function(e){Global.UIHelper.setNodeGray(this.promptBtn.node,!e),this.promptBtn.interactable=e},t.prototype.enablePassBtn=function(e){Global.UIHelper.setNodeGray(this.passBtn.node,!e),this.passBtn.interactable=e},t.prototype.onPlayClick=function(){Global.Audio.playGameBundleSound(s.DdzAudioConst.audioCommonPath+s.DdzAudioConst.commonAudio.ButtonClick,!0);var e=this.Context.getSelectPokers(),t=this.PlayRuleHelper.getPokersType(e).type;Game.Server.send(this.Define.CmdPlay,{type:t,cards:e}),this.Context.set(this.Define.FieldOnPlayAction,!0),this.active=!1},t.prototype.onOpen=function(){this.enablePlayBtn(),Game.Event.on(a.default.EnableSelect,this,this.enablePlayBtn)},Object.defineProperty(t.prototype,"CanPlay",{set:function(e){this._canPlay!==e&&(this._canPlay=e,Global.UIHelper.setNodeGray(this.playBtn.node,!e),this.playBtn.interactable=e)},enumerable:!1,configurable:!0}),t.prototype.enablePlayBtn=function(){var e=!1,t=this.Context.getSelectPokers();if(t.length>0){var o=this.Context.get(this.Define.FieldOnOutPokers),n=this.PlayRuleHelper.getPokersType(t);e=this.PlayRuleHelper.checkPlayOnRule(o,n)}this.CanPlay=e},t.prototype.getClockWorldPos=function(){return this.clockRoot.parent.convertToWorldSpaceAR(this.clockRoot.position)},t.prototype.onClose=function(){Game.Event.off(a.default.EnableSelect,this,this.enablePlayBtn)},t}(r.default),m=function(e){function t(t){var o=e.call(this)||this;return o.setNode(t),o}return i(t,e),t.prototype.initView=function(){c.default.addCommonClick(this.node,"btn0",this.onPassClick,this),this.clockRoot=this.getChild("clockRoot")},t.prototype.onPassClick=function(){Global.Audio.playGameBundleSound(s.DdzAudioConst.audioCommonPath+s.DdzAudioConst.commonAudio.ButtonClick,!0),this.active=!1,Game.Server.send(this.Define.CmdPass,{})},t.prototype.getClockWorldPos=function(){return this.clockRoot.parent.convertToWorldSpaceAR(this.clockRoot.position)},t}(r.default),y=function(e){function t(t){var o=e.call(this)||this;return o.clickLimit=!1,o.setNode(t),o}return i(t,e),t.prototype.initView=function(){c.default.addCommonClick(this.node,"gameBtn",this.onGameClick,this),c.default.addCommonClick(this.node,"exitBtn",this.onExitClick,this)},t.prototype.onGameClick=function(){var e=this;Global.Audio.playGameBundleSound(s.DdzAudioConst.audioCommonPath+s.DdzAudioConst.commonAudio.ButtonClick,!0),this.clickLimit||(l.default.instance.reMatchPlayer(),this.clickLimit=!0,Game.Component.scheduleOnce(function(){e.clickLimit=!1},3))},t.prototype.onExitClick=function(){Global.Audio.playGameBundleSound(s.DdzAudioConst.audioCommonPath+s.DdzAudioConst.commonAudio.ButtonClick,!0),Game.Server.send(this.Define.CmdLeave,{IsClose:1}),l.default.instance.leaveGame()},t.prototype.onOpen=function(){this.clickLimit=!1},t}(r.default);cc._RF.pop()},{"../DdzDriver":"DdzDriver","../data/DdzGameConst":"DdzGameConst","../data/DdzGameEvent":"DdzGameEvent","../data/DdzPathHelper":"DdzPathHelper","./DdzBaseView":"DdzBaseView"}],DdzAskClockView:[function(e,t,o){"use strict";cc._RF.push(t,"e6ea73OoQxCE7m5R05IeZmN","DdzAskClockView");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.running=!1,t.isClockAudio=!1,t.checkIntervalFrame=0,t.FrameInterval=2,t}return i(t,e),t.prototype.initView=function(){this.clockPro=this.getNodeComponent("clock",cc.ProgressBar),this.clockLbl=this.getNodeComponent("timeLbl",cc.Label)},t.prototype.init=function(){this.initView()},Object.defineProperty(t.prototype,"active",{set:function(e){this.node.active=e},enumerable:!1,configurable:!0}),t.prototype.setSecondCall=function(e,t){this.secondCall=e,this.target=t},t.prototype.startTimer=function(e,t){void 0===t&&(t=0),this.stopTimer(),this.timeTotal=t||e,this.updateTimeLbl(Math.round(e/1e3)),this.timeEnd=e+Date.now(),this.checkIntervalFrame=0,this.running=!0},t.prototype.stopTimer=function(){this.timeEnd=0,this.timeLeft=-1,this.timeTotal=0,this.running=!1,this.checkIntervalFrame=0},t.prototype.updateTimeLbl=function(e){this.clockLbl.string=String(e)},t.prototype.onUpdateTimer=function(){var e=Math.round((this.timeEnd-Date.now())/1e3);this.clockPro.progress=(this.timeEnd-Date.now())/this.timeTotal,e!=this.timeLeft&&(this.timeLeft=e,this.secondCall&&this.target&&this.isClockAudio&&this.secondCall.call(this.target,this.timeLeft),e>=0?this.updateTimeLbl(e):(this.stopTimer(),this.node.active=!1))},t.prototype.setViewActive=function(e){this.node.active=e},t.prototype.setClockAudioEnable=function(e){this.isClockAudio=e},t.prototype.setClockPosition=function(e){var t=this.node.parent.convertToNodeSpaceAR(e);this.node.setPosition(t)},t.prototype.onDisable=function(){this.clockPro.progress=1,this.stopTimer(),this.setClockAudioEnable(!1)},t.prototype.onDestroy=function(){this.stopTimer()},t.prototype.update=function(){this.running&&(this.checkIntervalFrame++,this.checkIntervalFrame>=this.FrameInterval&&(this.checkIntervalFrame=0,this.onUpdateTimer()))},t}(e("./DdzBaseComponent").default);o.default=r,cc._RF.pop()},{"./DdzBaseComponent":"DdzBaseComponent"}],DdzAutoHandler:[function(e,t,o){"use strict";cc._RF.push(t,"14424G4pFFA+68ipG/M2iLw","DdzAutoHandler");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(e){var t=this.SitHelper.serverSToLocalN(e._src),o=1==e._para.auto_play;this.mainUI.callPlayer(t,"showAutoSign",o),0==t&&(this.mainUI.askActionView.setAutoPlayBtnShow(!o),this.mainUI.doResetPokers())},t.prototype.executeSync=function(e){this.execute(e)},t}(e("./DdzBaseHandler").default);o.default=r,cc._RF.pop()},{"./DdzBaseHandler":"DdzBaseHandler"}],DdzBaseComponent:[function(e,t,o){"use strict";cc._RF.push(t,"4047c4jorxBFIA21hvfyu+R","DdzBaseComponent");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,l=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getNodeComponent=function(e,t){return Global.UIHelper.getComponent(this.node,e,t)},t.prototype.getChild=function(e){return Global.UIHelper.getChild(this.node,e)},r([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{}],DdzBaseHandler:[function(e,t,o){"use strict";cc._RF.push(t,"c780bQQZs9Af5IjaoC767hL","DdzBaseHandler"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../DdzDriver"),i=function(){function e(){}return e.prototype.checkInQueue=function(){return!0},e.prototype.Handle=function(e){this.mainUI=n.default.instance.mainUI,this.context=n.default.instance.Context,this.Define=n.default.instance.Define,this.SitHelper=n.default.instance.SitHelper,this.Path=n.default.instance.Path,this.refreshData(e),this.context.syncMode?this.executeSync(e):this.execute(e)},e.prototype.refreshData=function(){},e.prototype.execute=function(){},e.prototype.executeSync=function(e){this.execute(e)},e}();o.default=i,cc._RF.pop()},{"../DdzDriver":"DdzDriver"}],DdzBaseView:[function(e,t,o){"use strict";cc._RF.push(t,"e97a4bc5cJJvaRQBATVqJ87","DdzBaseView"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../DdzDriver"),i=function(){function e(){this._active=!1,this.Path=n.default.instance.Path,this.Define=n.default.instance.Define,this.Context=n.default.instance.Context,this.PokerHelper=n.default.instance.PokerHelper,this.PlayRuleHelper=n.default.instance.PlayRuleHelper}return Object.defineProperty(e.prototype,"active",{get:function(){return this._active},set:function(e){e!=this._active&&(this._active=e,this.node.active=e,this._active?this.onOpen():this.onClose())},enumerable:!1,configurable:!0}),e.prototype.setActive=function(e){this._active=!e,this.active=e},e.prototype.setNode=function(e){this.node=e,null!=e&&cc.isValid(e)?(this._active=e,this.initView()):Logger.error("node == null || !cc.isValid(node)")},e.prototype.initView=function(){},e.prototype.onOpen=function(){},e.prototype.onClose=function(){},e.prototype.clearByGame=function(){this.clearByRound()},e.prototype.clearByRound=function(){},e.prototype.getComponent=function(e,t){return Global.UIHelper.getComponent(this.node,e,t)},e.prototype.getChild=function(e){return Global.UIHelper.getChild(this.node,e)},e}();o.default=i,cc._RF.pop()},{"../DdzDriver":"DdzDriver"}],DdzChangeScoreHandler:[function(e,t,o){"use strict";cc._RF.push(t,"27e9cBQkeFPUY7ClV4UsQXv","DdzChangeScoreHandler");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(e){var t=e._para.selected;this.mainUI.updateRoundMult(t)},t}(e("./DdzBaseHandler").default);o.default=r,cc._RF.pop()},{"./DdzBaseHandler":"DdzBaseHandler"}],DdzContext:[function(e,t,o){"use strict";cc._RF.push(t,"b360fH7OfdGcKWD88WmgU78","DdzContext"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./DdzGameEvent"),i=e("./DdzRuleConst"),r=function(){function e(){this.syncMode=!1,this.playerList=[],this.dataMap={},this.selectPokerList=[],this.selectPokerMap={},this.pokerMarkerData=[],this.pokerSelfHand=[],this._isWaitMatch=!1,this._mode=i.DdzMode.Normal}return Object.defineProperty(e.prototype,"mode",{get:function(){return this._mode},set:function(e){this._mode=1==e?i.DdzMode.Quick:i.DdzMode.Normal},enumerable:!1,configurable:!0}),e.prototype.set=function(e,t){this.dataMap[e]=t},e.prototype.get=function(e){return this.dataMap[e]},e.prototype.remove=function(e){this.dataMap[e]=null},e.prototype.getValue=function(e){var t=this.dataMap[e];return null==t?null:t},e.prototype.addSelectPoker=function(e,t){this.selectPokerList.push(e),this.selectPokerMap[t]=e,Game.Event.event(n.default.EnableSelect,this.selectPokerList.length)},e.prototype.removeSelectPoker=function(e,t){var o=this.selectPokerList.indexOf(e);o>-1&&(this.selectPokerList.splice(o,1),this.selectPokerMap[t]=null),Game.Event.event(n.default.EnableSelect,this.selectPokerList.length)},e.prototype.getSelectPokers=function(){return this.selectPokerList},e.prototype.getSelectPokersMap=function(){return this.selectPokerMap},e.prototype.clearSelectPokerCache=function(){this.selectPokerList=[],this.selectPokerMap={},Game.Event.event(n.default.EnableSelect,this.selectPokerList.length)},e.prototype.updateMarkerData=function(e){this.pokerMarkerData=this.pokerMarkerData.concat(e),Game.Event.event(n.default.UpdateMarker,this.pokerMarkerData.length)},e.prototype.getMarkerData=function(){return this.pokerMarkerData},e.prototype.addSelfHandPokers=function(e,t){void 0===t&&(t=!1),t&&(this.pokerSelfHand=[]),this.pokerSelfHand=this.pokerSelfHand.concat(e)},e.prototype.removeSelfHandPokers=function(e){var t=this;e.forEach(function(e){var o=t.pokerSelfHand.indexOf(e);o>-1&&t.pokerSelfHand.splice(o,1)})},e.prototype.refreshHandPokers=function(e){this.pokerSelfHand=e},e.prototype.getSelfHandPokers=function(){return this.pokerSelfHand},Object.defineProperty(e.prototype,"isWaitMatch",{get:function(){return this._isWaitMatch},set:function(e){this._isWaitMatch=e},enumerable:!1,configurable:!0}),e.prototype.clearByRound=function(){this.dataMap={},this.pokerMarkerData=[],this.pokerSelfHand=[],this.syncMode=!1,this.clearSelectPokerCache()},e.prototype.clearByGame=function(){this.playerList=[],this.dataMap={},this.pokerMarkerData=[],this.pokerSelfHand=[],this.session=null,this.serverGameCfg=null,this.syncMode=!1,this.clearSelectPokerCache(),this._isWaitMatch=!1},e}();o.default=r,cc._RF.pop()},{"./DdzGameEvent":"DdzGameEvent","./DdzRuleConst":"DdzRuleConst"}],DdzDealHandler:[function(e,t,o){"use strict";cc._RF.push(t,"19ec6exyS9PkZcBafdE50hc","DdzDealHandler");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(e){var t=e._para.UserCards||[];this.setSelfPokers(t),this.mainUI.showActionTimer(!1),this.mainUI.dealPokersAnim()},t.prototype.executeSync=function(e){var t=e._para.UserCards||[];this.setSelfPokers(t),this.mainUI.dealPokerDirect(t)},t.prototype.setSelfPokers=function(e){var t=this;e.forEach(function(e){0==t.SitHelper.serverSToLocalN(e.chair)&&e.all_cards&&!Global.Toolkit.isEmptyObject(e.all_cards)&&(t.mainUI.selfPlayView.setGroupPokersValue(e.all_cards),t.context.addSelfHandPokers(e.all_cards,!0))})},t}(e("./DdzBaseHandler").default);o.default=r,cc._RF.pop()},{"./DdzBaseHandler":"DdzBaseHandler"}],DdzDefine:[function(e,t,o){"use strict";cc._RF.push(t,"52cef3KDTREcaHM3qt9GBmO","DdzDefine"),Object.defineProperty(o,"__esModule",{value:!0});o.default=function(){this.CmdGameCfg="a",this.CmdEnter="*en1*",this.CmdLeave="*lee*",this.CmdSession="*sss*",this.CmdSyncBegin="sync1",this.CmdSyncEnd="sync2",this.CmdRefresh="refresh",this.CmdOffline="*fo1*",this.CmdGameStart="*gs1*",this.CmdGameEnd="*gs2*",this.CmdCallReady="*cal_rel*",this.CmdWaitMatch="wait_match",this.CmdLeaveMatch="leave_match",this.CmdWait="wait",this.CmdDeal="deal",this.CmdAuto="*au1*",this.CmdCalLandlord="cal_landlord",this.CmdLandlord="landlord",this.CmdOnLandlord="land_result",this.CmdReCalLandlord="recal_landlord",this.CmdCalMult="cal_mult",this.CmdMult="mult",this.CmdPlayStart="play_start",this.CmdCalPlay="cal_play",this.CmdPlay="play",this.CmdPass="pass",this.CmdOpen="open",this.CmdChangeScore="change_score",this.CmdSyncTable="other_table_data",this.CmdReward="reward",this.CmdRefreshHandPokers="redeal",this.MaxPlayerCount=3,this.LocalToViewMap={},this.HeadMoveTime=.2,this.ChooseOffsetY=20,this.FlyDzIcon=1,this.PerPlayerDealInterval=.5,this.PerPokerDealInterval=.02,this.DealPokerMoveTime=.2,this.DzLeftThreeShowTime=.2,this.BigPokerScale=1,this.SmallPokerScale=.48,this.PokerPlayDelayTime=.1,this.PokerPlayMoveTime=.1,this.WarnLeftPokerCount=2,this.PlayRoleWinTime=1,this.FloatScoreTime=1,this.ShowSettleTime=2,this.PlaySettleEffectTime=1,this.SettleShowActTime=2,this.SpringAnimTime=2,this.PlaneAnimTime=1.5,this.BombAnimTime=1,this.RocketAnimTime=2,this.LinkPairAnimTime=1,this.StraightAnimTime=1,this.PokerSlideValidOffsetX=50,this.ShowSelfSettleTime=1.2,this.DefaultNameStr="\u9632\u4f5c\u5f0a",this.FieldBasePoint="FieldBasePoint",this.FieldEnterLimit="FieldEnterLimit",this.FieldGameStart="FieldGameStart",this.FieldDzLocSeat="FieldDzLocSeat",this.FieldOnOutPokers="FieldOnOutPokers",this.FieldOnPlayAction="FieldOnPlayAction",this.FieldBombBgm="FieldBombBgm",this.FieldInSettle="FieldInSettle",this.ViewMatchPlayer="ViewMatchPlayer",this.ViewAskAction="ViewAskAction",this.ViewSettle="ViewSettle",this.ViewMenuContainer="ViewMenuContainer",this.ViewDZLeftPokers="ViewDZLeftPokers",this.ViewMarker="ViewMarker",this.ViewSelfPlay="ViewSelfPlay"},cc._RF.pop()},{}],DdzDriver:[function(e,t,o){"use strict";cc._RF.push(t,"35ee1Ep0IRDC6nq9LIeCexc","DdzDriver");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function a(e){try{l(n.next(e))}catch(t){r(t)}}function s(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return l([e,t])}}function l(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("./data/DdzContext"),c=e("./data/DdzDefine"),d=e("./data/DdzPathHelper"),h=e("./handlers/DdzEasyHandlers"),u=e("./handlers/DdzEnterHandler"),p=e("./handlers/DdzLeaveHandler"),f=e("./handlers/DdzSyncHandler"),m=e("./handlers/DdzGameCfgHandler"),y=e("./handlers/DdzDealHandler"),D=e("./handlers/DdzReadyHandler"),P=e("./handlers/DdzRewardHandler"),k=e("./handlers/DdzAutoHandler"),v=e("./handlers/DdzLandlordHandler"),g=e("./handlers/DdzMultHandler"),C=e("./handlers/DdzPlayHandler"),_=e("./handlers/DdzAllOpenHandler"),b=e("./handlers/DdzChangeScoreHandler"),w=e("./data/DdzGameConst"),A=e("./handlers/DdzRefreshHandPokerHandler"),z=e("./component/DdzLoadingUI"),S=e("./data/DdzPokerHelper"),G=e("./tool/DdzPlayRule"),R=cc._decorator,O=R.ccclass,T=R.property,V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultHeadKuang=null,t.inGame=!1,t}var o;return i(t,e),o=t,t.prototype.onLoad=function(){o.instance=this,this.inGame=!0,this.maskNode=cc.find("mask",this.node),this.maskNode.zIndex=9,this.loadingUI=Global.UIHelper.safeGetComponent(this.node,"loading",z.default),this.loadingUI.node.zIndex=8,this.setupGlobal(),this.setup(),Global.Audio.playGameBundleMusic(d.DdzAudioConst.Bgm1,!0)},t.prototype.setupGlobal=function(){Global.Component.initDriver(),Game.Component.initDriver(),Global.UI.initUIRoot()},t.prototype.setup=function(){Game.Context=new l.default,this.Context=Game.Context,this.Define=new c.default,this.Path=new d.default,this.SitHelper=new PVPSitHelper,this.PlayRuleHelper=new G.default,this.PokerHelper=new S.default,this.registHandler(this.Define)},t.prototype.start=function(){Game.Event.on(Game.EVENT_FORCE_LEAVE_GAME,this,this.onForceLeave),Game.Event.on(Game.EVENT_NOT_IN_TABLE,this,this.onForceLeave),Game.Event.on(Game.EVENT_SOCKET_RECONNECT,this,this.onSocketReconnect),Game.Event.on(Game.EVENT_SOCKET_RESUME,this,this.onResume),Game.Event.on(Game.EVENT_MATCH_PLAYER,this,this.onMatchPlayer)},t.prototype.onDestroy=function(){Game.Event.off(Game.EVENT_FORCE_LEAVE_GAME,this,this.onForceLeave),Game.Event.off(Game.EVENT_NOT_IN_TABLE,this,this.onForceLeave),Game.Event.off(Game.EVENT_SOCKET_RECONNECT,this,this.onSocketReconnect),Game.Event.off(Game.EVENT_SOCKET_RESUME,this,this.onResume),Game.Event.off(Game.EVENT_MATCH_PLAYER,this,this.onMatchPlayer),this.unscheduleAllCallbacks(),o.instance=null},t.prototype.LoadVipHeadKuang=function(e,t){var o="txkuang_vip"+t;Global.ResourceManager.loadBundleAutoAtlas("2005",e,"texture/headFrame/headFrame",o,null,!0)},t.prototype.registHandler=function(e){Game.Control.registDefaultHandler(),Game.Control.registHandler(e.CmdGameCfg,new m.default),Game.Control.registHandler(e.CmdEnter,new u.default),Game.Control.registHandler(e.CmdLeave,new p.default),Game.Control.registHandler(e.CmdLeaveMatch,new h.DdzLeaveMatchHandler),Game.Control.registHandler(e.CmdRefresh,new h.DdzRefreshHandler),Game.Control.registHandler(e.CmdOffline,new h.DdzOfflineHandler),Game.Control.registHandler(e.CmdSyncBegin,new f.DdzSyncBeginHandler),Game.Control.registHandler(e.CmdSyncEnd,new f.DdzSyncEndHandler),Game.Control.registHandler(e.CmdSyncTable,new f.DdzSyncRefreshHandler),Game.Control.registHandler(e.CmdRefreshHandPokers,new A.default),Game.Control.registHandler(e.CmdCallReady,new D.default),Game.Control.registHandler(e.CmdGameStart,new h.DdzStartHandler),Game.Control.registHandler(e.CmdDeal,new y.default),Game.Control.registHandler(e.CmdAuto,new k.default),Game.Control.registHandler(e.CmdCalLandlord,new v.DdzCalLandlordHandler),Game.Control.registHandler(e.CmdLandlord,new v.DdzOnLandlordHandler),Game.Control.registHandler(e.CmdOnLandlord,new v.DdzLandlordResultHandler),Game.Control.registHandler(e.CmdReCalLandlord,new v.DdzReCalLandlordHandler),Game.Control.registHandler(e.CmdCalMult,new g.DdzCalMultHandler),Game.Control.registHandler(e.CmdMult,new g.DdzOnMultHandler),Game.Control.registHandler(e.CmdPlayStart,new C.DdzPlayStartHandler),Game.Control.registHandler(e.CmdCalPlay,new C.DdzCalPlayHandler),Game.Control.registHandler(e.CmdPlay,new C.DdzOnPlayHandler),Game.Control.registHandler(e.CmdPass,new C.DdzOnPassHandler),Game.Control.registHandler(e.CmdOpen,new _.default),Game.Control.registHandler(e.CmdChangeScore,new b.default),Game.Control.registHandler(e.CmdReward,new P.default),Game.Control.registHandler(e.CmdGameEnd,new h.DdzEndHandler),Game.Control.registHandler(e.CmdWait,new h.DdzWaitHandler)},t.prototype.onSocketReconnect=function(){this.mainUI&&(Global.Audio.stopAllEffect(),Game.Tween.clear(),Game.Component.unscheduleAllCallbacks(),this.mainUI.clearPlayers(),this.mainUI.clearByGame(),this.Context.clearByGame())},t.prototype.onForceLeave=function(e){e?this.exitScene():this.leaveGame()},t.prototype.onResume=function(e){e>=120&&this.leaveGame()},t.prototype.onMatchPlayer=function(e){var t=this;if(this.inGame){this.enterGame(),this.mainUI.matchPlayerView.active=!0;for(var o=Global.GameData.getGameInfo(w.default.Gid),n=e._para._glv,i=o.levels,r=0;r<i.length;r++)if(i[r].level==n){this.mainUI.updateLevelBase(i[r].PointRate),this.mainUI.updateLevel(n);break}this.Context.isWaitMatch=!0;var a=Math.ceil((1e3*e._timeo-Date.now()+e._receiveTime)/1e3);a&&a>0&&this.mainUI.matchPlayerView.setTimeRunConfig(a,function(){t.Context.isWaitMatch=!1,t.mainUI.matchPlayerView.active=!1,Global.UI.showYesNoBox("\u5339\u914d\u8d85\u65f6\uff0c\u662f\u5426\u91cd\u65b0\u5339\u914d\uff1f",function(){Game.Control.trySendEnter({_from:"jump"})},function(){Game.Server.send(t.Define.CmdLeave,{IsClose:1}),t.leaveGame()})},this)}},t.prototype.startScene=function(){this.mainUI.node.active=!1,this.reqEnterGame(w.default.Gid,Game.Control.curLv)},t.prototype.reqEnterGame=function(e,t,o){void 0===o&&(o="default"),Game.Control.connnectAndEnterGameInLevelScene(e,t,o,null)},t.prototype.exitScene=function(){this.inGame&&(this.inGame=!1,Game.Tween.clear(),Game.Component.unscheduleAllCallbacks(),this.mainUI&&(this.mainUI.clearWnd(),this.rulePop&&(this.rulePop.active=!1),this.settingPop&&(this.settingPop.active=!1)),this.Context.clearByGame(),Game.Control.shutDown(),Global.Toolkit.transmitHallWindow("WndGameLobbyShell",w.default.Gid),Game.GamePreloadTool.releaseKeepAsset(w.default.Gid,!0),Global.SceneManager.goToHall())},t.prototype.enterGame=function(){if(this.mainUI.callAllPlayers("hide"),this.mainUI.clearByRound(),this.mainUI.clearByGame(),this.Context.clearByRound(),!this.mainUI.node.active){Global.Audio.playGameBundleMusic(d.DdzAudioConst.Bgm1,!0);var e=Global.UIHelper.addIntoGameAnimComp(this.mainUI.node,this.loadingUI.node,[],[],[],[]);e.maskNode=this.maskNode,this.maskNode.opacity=1,this.maskNode.active=!0,this.mainUI.node.active=!0,this.maskNode.zIndex=11,e.startAnimtionByMask(1,0,null,null),Game.Event.event(Game.EVENT_ADDTIMELOCK,"IntoGameAnimation",.7)}},t.prototype.leaveGame=function(){var e=this;Game.Tween.clear(),Game.Component.unscheduleAllCallbacks(),this.scheduleOnce(function(){e.exitScene()},.5)},t.prototype.beginSync=function(){Game.Tween.clear(),Game.Component.unscheduleAllCallbacks(),this.mainUI.clearByGame()},t.prototype.reMatchPlayer=function(){if(this.Context.session&&this.Context.session._glv){this.stopGameConnect();var e=this.Context.session._glv;this.reqEnterGame(w.default.Gid,e)}else Game.Server.send(this.Define.CmdLeave,{IsClose:1}),this.leaveGame()},t.prototype.stopGameConnect=function(){Game.Server.stop(),Game.Server.clearDst(),Game.Server.clearData()},t.prototype.openSettingPop=function(){return a(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return this.settingPop&&cc.isValid(this.settingPop)?(this.settingPop.active=!0,[3,3]):[3,1];case 1:return[4,Game.GamePreloadTool.preloadPrefab(Game.GamePreloadTool.settingPop,!0)];case 2:e=o.sent(),this.mainUI.node&&cc.isValid(this.mainUI.node)&&e&&cc.isValid(e)&&((t=cc.instantiate(e)).setParent(Global.UI.getLayer("PopLayer")),t.active=!0,this.settingPop=t),o.label=3;case 3:return[2]}})})},t.prototype.openRulePop=function(){return a(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return this.rulePop&&cc.isValid(this.rulePop)?(this.rulePop.active=!0,[3,3]):[3,1];case 1:return[4,Game.GamePreloadTool.preloadPrefab(Game.GamePreloadTool.rulePop,!0)];case 2:e=o.sent(),this.mainUI.node&&cc.isValid(this.mainUI.node)&&e&&cc.isValid(e)&&((t=cc.instantiate(e)).setParent(Global.UI.getLayer("PopLayer")),t.active=!0,this.rulePop=t),o.label=3;case 3:return[2]}})})},t.instance=null,r([T(cc.SpriteFrame)],t.prototype,"defaultHeadKuang",void 0),o=r([O],t)}(cc.Component);o.default=V,cc._RF.pop()},{"./component/DdzLoadingUI":"DdzLoadingUI","./data/DdzContext":"DdzContext","./data/DdzDefine":"DdzDefine","./data/DdzGameConst":"DdzGameConst","./data/DdzPathHelper":"DdzPathHelper","./data/DdzPokerHelper":"DdzPokerHelper","./handlers/DdzAllOpenHandler":"DdzAllOpenHandler","./handlers/DdzAutoHandler":"DdzAutoHandler","./handlers/DdzChangeScoreHandler":"DdzChangeScoreHandler","./handlers/DdzDealHandler":"DdzDealHandler","./handlers/DdzEasyHandlers":"DdzEasyHandlers","./handlers/DdzEnterHandler":"DdzEnterHandler","./handlers/DdzGameCfgHandler":"DdzGameCfgHandler","./handlers/DdzLandlordHandler":"DdzLandlordHandler","./handlers/DdzLeaveHandler":"DdzLeaveHandler","./handlers/DdzMultHandler":"DdzMultHandler","./handlers/DdzPlayHandler":"DdzPlayHandler","./handlers/DdzReadyHandler":"DdzReadyHandler","./handlers/DdzRefreshHandPokerHandler":"DdzRefreshHandPokerHandler","./handlers/DdzRewardHandler":"DdzRewardHandler","./handlers/DdzSyncHandler":"DdzSyncHandler","./tool/DdzPlayRule":"DdzPlayRule"}],DdzEasyHandlers:[function(e,t,o){"use strict";cc._RF.push(t,"9c02aNQzwRHMLTXgnM6aqbl","DdzEasyHandlers");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.DdzLeaveMatchHandler=o.DdzOfflineHandler=o.DdzRefreshHandler=o.DdzWaitHandler=o.DdzEndHandler=o.DdzStartHandler=void 0;var r=e("./DdzBaseHandler"),a=e("../DdzDriver"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.refreshData=function(){this.context.set(this.Define.FieldGameStart,!0)},t.prototype.execute=function(){this.mainUI.showActionTimer(!1)},t.prototype.executeSync=function(){this.mainUI.showActionTimer(!1)},t}(r.default);o.DdzStartHandler=s;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.refreshData=function(){this.context.clearByRound()},t.prototype.execute=function(){this.mainUI.callAllPlayers("showPlayerNormalEffect"),Game.Tween.clear(),Game.Component.unscheduleAllCallbacks()},t}(r.default);o.DdzEndHandler=l;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(e){1==e._para.status?Logger.log("\u7ed3\u7b97\u4e2d"):(this.mainUI.showActionTimer(!1),this.mainUI.matchPlayerView.active=!0)},t}(r.default);o.DdzWaitHandler=c;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.refreshData=function(e){var t=e._src,o=this.SitHelper.serverSToLocalN(t);null!=this.context.playerList[o]&&this.context.playerList[o].refresh(e._para)},t.prototype.execute=function(e){var t=e._src,o=this.SitHelper.serverSToLocalN(t);null!=this.context.playerList[o]&&(this.mainUI.callPlayer(o,"setPlayerPoint",this.context.playerList[o].point),0==o&&this.mainUI.selfInfoView.updateSelfPoint(this.context.playerList[o].point))},t}(r.default);o.DdzRefreshHandler=d;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(e){var t=e._src,o=this.SitHelper.serverSToLocalN(t);Logger.log(o,"-------\x3eoffline")},t}(r.default);o.DdzOfflineHandler=h;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(){var e=this;this.mainUI.matchPlayerView.active=!1,this.context.isWaitMatch&&(this.context.isWaitMatch=!1,Global.UI.showYesNoBox("\u5339\u914d\u8d85\u65f6\uff0c\u662f\u5426\u91cd\u65b0\u5339\u914d\uff1f",function(){Game.Control.trySendEnter({_from:"jump"})},function(){Game.Server.send(e.Define.CmdLeave,{IsClose:1}),a.default.instance.leaveGame()}))},t}(r.default);o.DdzLeaveMatchHandler=u,cc._RF.pop()},{"../DdzDriver":"DdzDriver","./DdzBaseHandler":"DdzBaseHandler"}],DdzEnterHandler:[function(e,t,o){"use strict";cc._RF.push(t,"e3ca4rV3p1FQ5D/UkTuMBuA","DdzEnterHandler");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.refreshData=function(e){var t=e._src;if(this.context.selfSrc==t){var o=this.SitHelper.serverSeatStrToNum(t);this.SitHelper.init(o,this.Define.MaxPlayerCount,this.Define.LocalToViewMap),this.context.set(this.Define.FieldInSettle,!1)}var n=this.SitHelper.serverSToLocalN(t);null!=this.context.playerList[n]?this.context.playerList[n].setInfo(e._para):Logger.error("\u670d\u52a1\u5668\u5f02\u5e38",n)},t.prototype.execute=function(e){var t=e._src,o=this.SitHelper.serverSToLocalN(t);this.mainUI.callPlayer(o,"show",this.context.playerList[o]),0==o&&this.mainUI.selfInfoView.updateSelfPoint(this.context.playerList[o].point),Game.Event.event(Game.EVENT_ADDTIMELOCK,"DdzEnterHandler",.1)},t}(e("./DdzBaseHandler").default);o.default=r,cc._RF.pop()},{"./DdzBaseHandler":"DdzBaseHandler"}],DdzGameCfgHandler:[function(e,t,o){"use strict";cc._RF.push(t,"c5f55YHe3tFTLyeLjUdHWB1","DdzGameCfgHandler");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("./DdzBaseHandler"),a=e("../DdzDriver"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.refreshData=function(e){if(this.context.serverGameCfg=e._para,this.context.set(this.Define.FieldBasePoint,e._para.base_point),this.context.set(this.Define.FieldEnterLimit,e._para.point_low),this.context.mode=e._para.mode,this.context.playerList=[],this.Define.MaxPlayerCount<e._para.seat_count)Logger.error("\u5ba2\u6237\u7aef\u4e0d\u652f\u6301\u670d\u52a1\u5668\u914d\u7f6e\u7684\u6700\u5927\u4eba\u6570",this.Define.MaxPlayerCount,String(e._para.seat_count));else for(var t=0;t<this.Define.MaxPlayerCount;t++)this.context.playerList.push(new PVPPlayerData(t))},t.prototype.execute=function(e){var t="l0";this.context.session&&this.context.session._glv&&(t=this.context.session._glv),this.mainUI.updateLevelBase(e._para.base_point),this.mainUI.updateMode(e._para.mode),this.mainUI.updateLevel(t),a.default.instance.enterGame(),a.default.instance.mainUI.taskManager.reqGetCommisionInfo()},t.prototype.executeSync=function(e){this.execute(e)},t}(r.default);o.default=s,cc._RF.pop()},{"../DdzDriver":"DdzDriver","./DdzBaseHandler":"DdzBaseHandler"}],DdzGameConst:[function(e,t,o){"use strict";var n;cc._RF.push(t,"79795gS7vBIPJDbZILxsUTK","DdzGameConst"),Object.defineProperty(o,"__esModule",{value:!0}),o.DdzGameActState=void 0;var i=e("./DdzRuleConst");(function(e){e[e.None=0]="None",e[e.Ready=1]="Ready",e[e.Rob=2]="Rob",e[e.Mult=3]="Mult",e[e.Play=4]="Play",e[e.Reward=5]="Reward",e[e.Wait=6]="Wait"})(o.DdzGameActState||(o.DdzGameActState={}));var r=function(){function e(){}return e.addCommonClick=function(e,t,o,n,i,r){return void 0===i&&(i=cc.Button.Transition.SCALE),void 0===r&&(r=!1),Global.UIHelper.addCommonClick(e,t,o,n,i,null,r)},e.Gid=2005,e.DeskLevelStrCfg={l0:"\u5c0f\u8d44\u573a",l1:"\u8001\u677f\u573a",l2:"\u571f\u8c6a\u573a",l3:"\u7687\u5bb6\u573a"},e.DeskLevelSfCfg={l0:"ddz_zhuozi_01",l1:"ddz_zhuozi_02",l2:"ddz_zhuozi_03",l3:"ddz_zhuozi_04"},e.GameRobStrCfg={0:"fonts_bujiao",1:"fonts_1fen",2:"fonts_2fen",3:"fonts_3fen"},e.GameMultStrCfg={1:"fonts_bujiabei",2:"fonts_jiabei"},e.GamePlayStrCfg={0:"fonts_buchu",1:""},e.ModeStrCfg=((n={})[i.DdzMode.Normal]="ddz_zhuozi_05",n[i.DdzMode.Quick]="ddz_zhuozi_06",n),e}();o.default=r,cc._RF.pop()},{"./DdzRuleConst":"DdzRuleConst"}],DdzGameEvent:[function(e,t,o){"use strict";cc._RF.push(t,"cb0f1tsaJBFg6dXXEVOKPb4","DdzGameEvent"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.EnableSelect="EnableSelect",e.UpdateMarker="UpdateMarker",e.OnSelfPromptPokers="OnSelfPromptPokers",e}();o.default=n,cc._RF.pop()},{}],DdzLandlordHandler:[function(e,t,o){"use strict";cc._RF.push(t,"c9916HNJtVACr/5JXPGfVNj","DdzLandlordHandler");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.DdzReCalLandlordHandler=o.DdzLandlordResultHandler=o.DdzOnLandlordHandler=o.DdzCalLandlordHandler=void 0;var r=e("./DdzBaseHandler"),a=e("../data/DdzGameConst"),s=e("../data/DdzPathHelper"),l=e("../data/DdzRuleConst"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(e){var t=this.SitHelper.serverSToLocalN(e._src),o=0,n=e._times;if(n&&Game.Component.correctTime){var i=Game.Component.correctTime(n);o=1e3*e._timeo-i}else o=1e3*e._timeo-(Date.now()-e._receiveTime);o<=0&&(o=1e3),0==t&&this.mainUI.askActionView.setRobViewShow(!0,e._para.land_items,e._para.miss_items),this.mainUI.showActionTimer(!0,t,o,null)},t.prototype.executeSync=function(e){this.execute(e)},t}(r.default);o.DdzCalLandlordHandler=c;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(e){var t=this.SitHelper.serverSToLocalN(e._src),o=e._para.selected;0==t&&this.mainUI.askActionView.setRobViewShow(!1);var n="";n=o<=0?s.DdzAudioConst.NotCallLandordArr[0]:s.DdzAudioConst.CallLandordArr[o-1],Global.Audio.playGameBundleSound(s.DdzAudioConst.genderSoundPath(n,0),!0),this.mainUI.showActionTimer(!1),this.mainUI.callPlayer(t,"setState",!0,a.DdzGameActState.Rob,o)},t.prototype.executeSync=function(e){var t=this.SitHelper.serverSToLocalN(e._src),o=e._para.selected;0==t&&this.mainUI.askActionView.setRobViewShow(!1),this.mainUI.showActionTimer(!1),this.mainUI.callPlayer(t,"setState",!0,a.DdzGameActState.Rob,o)},t}(r.default);o.DdzOnLandlordHandler=d;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(e){this.mainUI.askActionView.setRobViewShow(!1);var t=this.SitHelper.serverSToLocalN(e._para.land_chair);if(this.context.set(this.Define.FieldDzLocSeat,t),this.mainUI.dzLeftPokersView.showScoreLbl(!0,e._para.selected),this.mainUI.dzLeftPokersView.setThreePokerValue(e._para.cards),this.mainUI.dzLeftPokersView.showThreePoker(!0),0==t)this.context.addSelfHandPokers(e._para.cards,!1),this.mainUI.selfPlayView.showLandlordPoker(e._para.cards),this.mainUI.updateRoundMult(2*e._para.selected);else{var o=l.default.ModeConfig[this.context.mode];this.mainUI.callPlayer(t,"setPlayerLeftPokers",!0,o.baseCount+o.leftCount),this.mainUI.updateRoundMult(e._para.selected)}this.mainUI.callPlayer(t,"setDz",!0,!0),Game.Event.event(Game.EVENT_ADDTIMELOCK,"DdzLandlordResultHandler",this.Define.FlyDzIcon+.1)},t.prototype.executeSync=function(e){this.mainUI.askActionView.setRobViewShow(!1);var t=this.SitHelper.serverSToLocalN(e._para.land_chair);this.context.set(this.Define.FieldDzLocSeat,t),0==t?this.mainUI.updateRoundMult(2*e._para.selected):this.mainUI.updateRoundMult(e._para.selected),this.mainUI.dzLeftPokersView.showScoreLbl(!0,e._para.selected),this.mainUI.dzLeftPokersView.setThreePokerValue(e._para.cards),this.mainUI.dzLeftPokersView.showThreePoker(!0),this.mainUI.selfPlayView.showDzOwnerSign(),this.mainUI.callPlayer(t,"setDz",!0,!1)},t}(r.default);o.DdzLandlordResultHandler=h;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(e){var t=e._para&&1==e._para.clear;Game.Tween.clear(),Game.Component.unscheduleAllCallbacks(),this.mainUI.clearByRound(),Game.Event.event(Game.EVENT_ADDTIMELOCK,"DdzReCalLandlordHandler",.2),t&&(this.mainUI.clearOtherPlayers(),this.context.clearByRound())},t}(r.default);o.DdzReCalLandlordHandler=u,cc._RF.pop()},{"../data/DdzGameConst":"DdzGameConst","../data/DdzPathHelper":"DdzPathHelper","../data/DdzRuleConst":"DdzRuleConst","./DdzBaseHandler":"DdzBaseHandler"}],DdzLeaveHandler:[function(e,t,o){"use strict";cc._RF.push(t,"278de0jTKRFv5idSSu/F+Ib","DdzLeaveHandler");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("./DdzBaseHandler"),a=e("../DdzDriver"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.refreshData=function(e){var t=this.SitHelper.serverSToLocalN(e._src);this.context.playerList[t]?(Logger.error("leave",t,e._src),this.context.playerList[t].clear()):Logger.error("leave error")},t.prototype.execute=function(e){var t=this.SitHelper.serverSToLocalN(e._src);if(Game.Event.event(Game.EVENT_ADDTIMELOCK,"DdzLeaveHandler",this.Define.HeadMoveTime+.1),e._src==this.context.selfSrc)e._para&&e._para.Reason&&103==e._para.Reason._reason?(Game.Server.clearData(),Game.Tween.clear(),Global.HallServer.setSession(null),(e._para&&e._para.GameTimes||0)>0?(Game.Server.stopGame(),this.mainUI.askActionView.showRewardActionView(!0),this.mainUI.gameSettleView.showActionBtn(!0)):(this.mainUI.askActionView.showRewardActionView(!1),this.mainUI.matchPlayerView.active=!1,this.mainUI.gameSettleView.showActionBtn(!1),Game.Server.dst={},Game.Control.trySendEnter({_from:"jump"}))):(this.mainUI.callPlayer(t,"hide"),e._para&&e._para.Reason&&102==e._para.Reason._reason?Global.Toolkit.transmitHallMsg("\u91d1\u5e01\u4e0d\u591f\u5566\uff0c\u662f\u5426\u524d\u5f80\u5145\u503c\uff1f",function(){Global.UI.show("WndRecharge")}):e._para&&e._para.Reason&&e._para.Reason._explain&&Global.Toolkit.transmitHallMsg(e._para.Reason._explain,null,null,1),a.default.instance.leaveGame());else{if(this.context.get(this.Define.FieldInSettle))return;e._para&&e._para.Reason&&(103==e._para.Reason._reason||105==e._para.Reason._reason)||this.mainUI.callPlayer(t,"hide")}},t.prototype.checkInQueue=function(e){return e._src!=Game.Context.selfSrc||!(!e._para||!e._para.Reason||102!=e._para.Reason._reason&&103!=e._para.Reason._reason&&20!=e._para.Reason._reason)&&(103==e._para.Reason._reason&&Game.Server.stopHeartBeat&&Game.Server.stopHeartBeat(),!0)},t}(r.default);o.default=s,cc._RF.pop()},{"../DdzDriver":"DdzDriver","./DdzBaseHandler":"DdzBaseHandler"}],DdzLeftThreePokerView:[function(e,t,o){"use strict";cc._RF.push(t,"ff155EVWuFEuZ1ehEBthFUp","DdzLeftThreePokerView");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("./DdzBaseView"),a=e("../DdzDriver"),s=function(e){function t(t){var o=e.call(this)||this;return o.pokerList=[],o.spaceX=25,o.setNode(t),o}return i(t,e),t.prototype.initView=function(){this.dzPokersRoot=this.getChild("dzPokersRoot"),this.dzScoreNode=this.getChild("socre"),this.dzScoreNode.active=!1,this.dzScoreLbl=this.getComponent("socre/dzScoreLbl",cc.Label)},t.prototype.addDZPokers=function(e){var t=this;void 0===e&&(e=[]),this.pokerList=e,this.pokerList.forEach(function(e){e.active=!0,e.setPokerStyle(0),e.isFront=!1,e.node.setParent(t.dzPokersRoot),e.setPokerPosition(cc.Vec3.ZERO),e.setPokerScale(t.Define.SmallPokerScale)})},t.prototype.playShowAnimation=function(e,t){var o=this;void 0===e&&(e=!0),void 0===t&&(t=.2),this.pokerList.forEach(function(n,i){n.active=!0,e?n.doPokerMove(cc.Vec3.ZERO,cc.v3(-o.spaceX+i*o.spaceX,0),t):n.setPokerPosition(cc.v3(-o.spaceX+i*o.spaceX,0))})},t.prototype.showThreePoker=function(e){void 0===e&&(e=!1),this.pokerList.forEach(function(t){t.isFront=e})},t.prototype.setThreePokerValue=function(e){for(var t=0;t<3;t++)e[t]&&(this.pokerList[t].pokerValue=e[t])},t.prototype.showScoreLbl=function(e,t){void 0===t&&(t=0),this.dzScoreNode.active=e,e&&(this.dzScoreLbl.string=t+"F")},t.prototype.resetPokers=function(){this.pokerList.forEach(function(e){e.setPokerPosition(cc.Vec3.ZERO)})},t.prototype.clearByRound=function(){this.active=!1,this.showScoreLbl(!1),this.showThreePoker(!1),this.resetPokers(),a.default.instance.PokerPool.recycleAll(this.pokerList),this.pokerList=[]},t}(r.default);o.default=s,cc._RF.pop()},{"../DdzDriver":"DdzDriver","./DdzBaseView":"DdzBaseView"}],DdzLoadingUI:[function(e,t,o){"use strict";cc._RF.push(t,"09d4e6RS99Gpr9WYJ0Y3+Rd","DdzLoadingUI");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function a(e){try{l(n.next(e))}catch(t){r(t)}}function s(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}l((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return l([e,t])}}function l(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../panel/DdzMainUI"),c=e("../data/DdzPathHelper"),d=e("../data/DdzGameConst"),h=e("../DdzDriver"),u=e("../data/DdzSkinDefine"),p=cc._decorator,f=p.ccclass,m=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dependAtlas=[c.default.gameTexturePath+"atlas/pokers/pokers",c.default.gameTexturePath+"atlas/frame/atlas_frame"],t.dependceArr=[c.default.gameTexturePath+"atlas/frame/font/num_jia",c.default.gameTexturePath+"atlas/frame/font/num_fu",c.default.gamePrefabsPath+"panel/ddzGameUI"],t.dependceArr2=[c.default.gamePrefabsPath+"panel/subView/actRootView",c.default.gamePrefabsPath+"panel/subView/pokerPreNode",c.default.gamePrefabsPath+"panel/subView/pokerView",c.default.gamePrefabsPath+"panel/subView/matchPlayerView",c.default.gamePrefabsPath+"panel/subView/playerView",c.default.gamePrefabsPath+"panel/subView/settleView"],t.dependAudio=[c.default.gameAudioPath+"common/chuntian",c.default.gameAudioPath+"common/losegame",c.default.gameAudioPath+"common/wingame",c.default.gameAudioPath+"common/play_farmer_win",c.default.gameAudioPath+"common/play_lord_win",c.default.gameAudioPath+"common/dispatch",c.default.gameAudioPath+"common/sendcard",c.default.gameAudioPath+"common/common_alert",c.default.gameAudioPath+"cardType/huojian",c.default.gameAudioPath+"cardType/common_bomb",c.default.gameAudioPath+"cardType/common_plane",c.default.gameAudioPath+"cardType/liandui",c.default.gameAudioPath+"cardType/shunzi",c.default.gameAudioPath+"background",c.default.gameAudioPath+"afterboom"],t}return i(t,e),t.prototype.onLoad=function(){this.loadingContent=cc.find("content",this.node),this.loadingContent.active=!1},t.prototype.start=function(){this.initLoading(),this.preloadRes()},t.prototype.initLoading=function(){return a(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return Global.GameData.checkHasCustomLoading(d.default.Gid)?[3,2]:[4,Global.UIHelper.getGameLoadingComp()];case 1:return e=t.sent(),this.loadingContent.active=!1,e.node.setParent(this.node),e.node.active=!0,[3,3];case 2:this.loadingContent.active=!0,t.label=3;case 3:return[2]}})})},t.prototype.preloadRes=function(){return a(this,void 0,void 0,function(){var e,t,o,n,i,r=this;return s(this,function(a){switch(a.label){case 0:return e=function(){return new Promise(function(e,t){Global.ResourceManager.loadGameBundleRes(u.default.jsonPath,function(o,n){o?t(o):(h.default.instance.skinDefine=new u.default(n.json),e(n))},cc.JsonAsset)})},t=function(){return new Promise(function(e,t){Global.ResourceManager.loadGameBundleRes(r.dependAtlas,function(o,n){o?t(o):e(n)},cc.SpriteAtlas)})},o=function(){return new Promise(function(e,t){Global.ResourceManager.loadGameBundleRes(r.dependceArr,function(o,n){o?t(o):e(n)})})},n=function(){return new Promise(function(e,t){Global.ResourceManager.loadGameBundleRes(r.dependceArr2,function(o,n){o?t(o):e(n)})})},i=function(){return new Promise(function(e,t){Global.ResourceManager.loadGameBundleRes(r.dependAudio,function(o,n){o?t(o):(n.forEach(function(e){cc.loader.loadRes(e.nativeUrl,cc.AudioClip)}),e(n))},cc.AudioClip)})},[4,HeadTipsManager.preloadRes()];case 1:return a.sent(),[4,TaskManager.preloadRes()];case 2:return a.sent(),[4,e()];case 3:return a.sent(),[4,t()];case 4:return a.sent(),[4,o()];case 5:return a.sent(),[4,n()];case 6:return a.sent(),[4,i()];case 7:return a.sent(),cc.isValid(this.node)?(this.initUI(),Game.Component.scheduleOnce(function(){h.default.instance.startScene()},.5),[2]):[2]}})})},t.prototype.initUI=function(){var e=cc.Canvas.instance.node,t=(Global.UI.getLayer("MainLayer"),Global.UI.getLayer("FullScreenLayer")||e),o=(Global.UI.getLayer("PopLayer"),this.getUINode(c.default.gamePrefabsPath+"panel/ddzGameUI"));h.default.instance.mainUI=o.getComponent(l.default),t.addChild(o),o.active=!1},t.prototype.getUINode=function(e){var t=Global.ResourceManager.getGameBundleRes(e,cc.Prefab);return null==t?(Logger.error("\u83b7\u53d6\u9884\u8bbe\u5931\u8d25",e),null):cc.instantiate(t)},r([f],t)}(cc.Component));o.default=m,cc._RF.pop()},{"../DdzDriver":"DdzDriver","../data/DdzGameConst":"DdzGameConst","../data/DdzPathHelper":"DdzPathHelper","../data/DdzSkinDefine":"DdzSkinDefine","../panel/DdzMainUI":"DdzMainUI"}],DdzMainUI:[function(e,t,o){"use strict";cc._RF.push(t,"26814vUPPJOILWPTiU78ZVe","DdzMainUI");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../subView/DdzPlayerView"),s=e("../component/DdzBaseComponent"),l=e("../subView/DdzMenuView"),c=e("../data/DdzPathHelper"),d=e("../subView/DdzMatchPlayerView"),h=e("../subView/DdzAskActionView"),u=e("../subView/DdzSettleView"),p=e("../tool/DdzPokerPool"),f=e("../subView/DdzLeftThreePokerView"),m=e("../subView/DdzMarkerView"),y=e("../subView/DdzSelfInfoView"),D=e("../component/DdzAskClockView"),P=e("../subView/DdzSelfPlayView"),k=e("../data/DdzGameEvent"),v=e("../data/DdzRuleConst"),g=e("../data/DdzGameConst"),C=e("../DdzDriver"),_=cc._decorator,b=_.ccclass,w=(_.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerViewList=[],t.showPokerList=[],t._isShowMarker=!1,t}return i(t,e),t.prototype.onLoad=function(){this.viewSet=new ViewSet,this.initView()},t.prototype.onEnable=function(){this.selfInfoView.updateSelfInfo(),Game.Event.on(k.default.OnSelfPromptPokers,this,this.doPromptPokers),Global.Event.on(GlobalEvent.TYPE_VIP_ENTER_GAME,this,this.vipEnterGame)},t.prototype.onDisable=function(){Game.Event.off(k.default.OnSelfPromptPokers,this,this.doPromptPokers),Global.Event.off(GlobalEvent.TYPE_VIP_ENTER_GAME,this,this.vipEnterGame)},t.prototype.onDestroy=function(){Game.Event.off(k.default.OnSelfPromptPokers,this,this.doPromptPokers),Global.Event.off(GlobalEvent.TYPE_VIP_ENTER_GAME,this,this.vipEnterGame),this.taskManager.onDispose()},t.prototype.vipEnterGame=function(e){e.data._gid==g.default.Gid&&e.data._glv===Game.Control.curLv&&Global.Event.event(GlobalEvent.VIPADMISSION,e.data)},t.prototype.initView=function(){this.node.width=cc.Canvas.instance.node.width,this.node.height=cc.Canvas.instance.node.height,this.animLayerNode=this.getChild("animLayer"),this.dealRootNode=this.getChild("topNode/dealRoot"),this.dzRootNode=this.getChild("centerNode/dzRoot"),this.playNode=this.getChild("centerNode/player"),this.pokerNode=this.getChild("centerNode/poker"),this.actNode=this.getChild("centerNode/actRoot"),this.baseLbl=this.getNodeComponent("topNode/showTable/baseNode/coinLbl",cc.Label),this.multLbl=this.getNodeComponent("topNode/showTable/multNode/multLbl",cc.Label),this.modeSp=this.getNodeComponent("bottomNode/modeSp",cc.Sprite),this.levelSp=this.getNodeComponent("bottomNode/levelSp",cc.Sprite),this.initPokerPool(),this.selfInfoView=new y.default(this.getChild("bottomNode/selfInfo")),this.selfInfoView.updateSelfInfo(),this.initPlayerList(),this.initMatchPlayerView(),this.initAskActionView(),this.initSettleView(),this.initDzLeftPokersView(),this.initMarkerView(),this.initClockComp(),this.initSelfPlayView(),this.initAnim(),this.initTaskManager();var e=cc.find("topNode/paoMaDengBox",this.node),t=cc.find("topNode/paoMaDengBox/MsgBox",this.node);Global.UIHelper.addPaoMaDengComp(t,!1,e),Global.UIHelper.addWifiComp(this.getChild("topNode/wifiNode"),2),this.markerBtn=this.getChild("floatNode/markerBtn"),g.default.addCommonClick(this.markerBtn,"",this.showMarkerViewClick,this),this.markerBtn.active=!1,Global.UIHelper.addAdmissionComp(cc.find("topNode/admissionBox",this.node));var o=this.getChild("menuNode");Global.Toolkit.adjustIphoneX([o]);var n=new l.default(o);n.active=!0,this.registView(C.default.instance.Define.ViewMenuContainer,n),Global.UIHelper.addWifiComp(cc.find("wifiNode",this.node),2),g.default.addCommonClick(this.node,"testBtn",function(){Game.Event.event(Game.EVENT_CALL_RECONNECT)},this)},t.prototype.initPlayerList=function(){var e=Global.ResourceManager.getGameBundleRes(c.default.gamePrefabsPath+"panel/subView/playerView",cc.Prefab),t=cc.instantiate(e);t.setParent(this.playNode),t.active=!0;var o=Global.ResourceManager.getGameBundleRes(c.default.gamePrefabsPath+"panel/subView/pokerView",cc.Prefab),n=cc.instantiate(o);n.setParent(this.playNode),n.active=!0;for(var i=0;i<C.default.instance.Define.MaxPlayerCount;i++){var r=t.getChildByName("player"+i),s=n.getChildByName("group"+i),l=this.getChild("bgNode/role"+i),d=new a.default(r,i);d.setPlayerRole(l),d.initPokerGroup(s),d.hide(),this.playerViewList.push(d)}},t.prototype.initMatchPlayerView=function(){var e=Global.ResourceManager.getGameBundleRes(c.default.gamePrefabsPath+"panel/subView/matchPlayerView",cc.Prefab),t=cc.instantiate(e);t.setParent(this.animLayerNode),t.setPosition(cc.Vec2.ZERO),this.matchPlayerView=new d.default(t),this.matchPlayerView.active=!1,this.registView(C.default.instance.Define.ViewMatchPlayer,this.matchPlayerView)},t.prototype.initAskActionView=function(){var e=Global.ResourceManager.getGameBundleRes(c.default.gamePrefabsPath+"panel/subView/actRootView",cc.Prefab),t=cc.instantiate(e);t.setParent(this.actNode),t.setPosition(cc.Vec2.ZERO),this.askActionView=new h.default(t),this.askActionView.active=!0,this.registView(C.default.instance.Define.ViewAskAction,this.askActionView)},t.prototype.initSettleView=function(){var e=Global.ResourceManager.getGameBundleRes(c.default.gamePrefabsPath+"panel/subView/settleView",cc.Prefab),t=cc.instantiate(e);t.setParent(this.animLayerNode),t.setPosition(cc.Vec2.ZERO),this.gameSettleView=new u.default(t),this.gameSettleView.active=!1,this.registView(C.default.instance.Define.ViewSettle,this.gameSettleView)},t.prototype.initDzLeftPokersView=function(){this.dzLeftPokersView=new f.default(this.getChild("topNode/showTable/dzPokersNode")),this.dzLeftPokersView.active=!1,this.registView(C.default.instance.Define.ViewDZLeftPokers,this.dzLeftPokersView)},t.prototype.initMarkerView=function(){this.markerView=new m.default(this.getChild("floatNode/markerNode")),this.markerView.active=!1,this.registView(C.default.instance.Define.ViewMarker,this.markerView)},t.prototype.initClockComp=function(){this.clockComp=Global.UIHelper.safeGetComponent(this.node,"centerNode/clockView",D.default),this.clockComp.init(),this.clockComp.setViewActive(!1),this.clockComp.setSecondCall(function(e){e<=5&&e>0&&Global.Audio.playGameBundleSound(c.DdzAudioConst.audioCommonPath+c.DdzAudioConst.HurryUp,!0)},this)},t.prototype.initPokerPool=function(){this.showPokerPool=new p.default(this.dealRootNode),C.default.instance.PokerPool=this.showPokerPool},t.prototype.initSelfPlayView=function(){this.selfPlayView=new P.DdzSelfPlayView(this.getChild("centerNode/selfPlayView")),this.selfPlayView.active=!0,this.registView(C.default.instance.Define.ViewSelfPlay,this.selfPlayView)},t.prototype.initAnim=function(){this.animMaskNode=this.getChild("animLayer/mask"),this.animMaskNode.active=!1,this.springEffect=this.getNodeComponent("animLayer/springEffect",sp.Skeleton),this.springEffect.node.active=!1,this.planeEffect=this.getNodeComponent("animLayer/planeEffect",sp.Skeleton),this.planeEffect.node.active=!1,this.bombEffect=this.getNodeComponent("animLayer/bombEffect",sp.Skeleton),this.bombEffect.node.active=!1,this.rocketEffect=this.getNodeComponent("animLayer/rocketEffect",sp.Skeleton),this.rocketEffect.node.active=!1,this.linkPairEffect=this.getNodeComponent("animLayer/linkPairEffect",sp.Skeleton),this.linkPairEffect.node.active=!1,this.straightEffect=this.getNodeComponent("animLayer/straightEffect",sp.Skeleton),this.straightEffect.node.active=!1},t.prototype.initTaskManager=function(){this.taskManager=new TaskManager,this.taskManager.init(cc.find("taskRoot",this.node),g.default.Gid,-1),this.taskManager.reqGetGameTaskList()},t.prototype.showAnimMask=function(e){this.animMaskNode.stopAllActions(),this.animMaskNode.active=e,e&&(this.animMaskNode.opacity=1,this.animMaskNode.runAction(cc.fadeTo(.25,100)))},t.prototype.updateLevelBase=function(e){this.baseLbl.string=Global.Toolkit.formatPointStr(e)},t.prototype.updateRoundMult=function(e){this.multLbl.string=String(e)},t.prototype.updateLevel=function(e){Global.ResourceManager.loadGameBundleAutoAtlas(this.levelSp,c.default.gameTexturePath+"atlas/frame/atlas_frame",g.default.DeskLevelSfCfg[e],null,!0)},t.prototype.updateMode=function(e){Global.ResourceManager.loadGameBundleAutoAtlas(this.modeSp,c.default.gameTexturePath+"atlas/frame/atlas_frame",g.default.ModeStrCfg[e])},t.prototype.showActionTimer=function(e,t,o,n){if(void 0===t&&(t=0),this.clockComp.setViewActive(e),e){this.clockComp.startTimer(o,n);var i;i=0==t?this.askActionView.getActionClockWorldPos():this.playerViewList[t].getPlayerClockWorldPos(),this.clockComp.setClockPosition(i)}},t.prototype.dealPokersAnim=function(){var e=this,t=v.default.ModeConfig[C.default.instance.Context.mode];this.showPokerList=this.showPokerPool.getItemArr(t.totalCount);for(var o=0;o<this.showPokerList.length;o++){var n=this.showPokerList[o];n.active=o<=2,n.node.setParent(this.dealRootNode),n.setPokerPosition(cc.Vec3.ZERO),n.setPokerStyle(0),n.isFront=!1}var i=this.showPokerList.length-1,r=this.selfPlayView.getIndexPosArr(t.baseCount,!0);this.playerViewList.forEach(function(o,n){Game.Component.scheduleOnce(function(){for(var a=function(a){var s=e.showPokerList[i];s.active=!0,i--;var l=void 0;0==n?(l=e.dealRootNode.convertToNodeSpaceAR(r[a]),s.setPokerScale(1)):(l=e.dealRootNode.convertToNodeSpaceAR(o.pokerGroup.getPokerDealAnimPos()),s.setPokerScale(.34)),s.doPokerMove(cc.Vec3.ZERO,l,C.default.instance.Define.DealPokerMoveTime,C.default.instance.Define.PerPokerDealInterval*a,function(){s.active=!1,e.showPokerList.pop(),e.showPokerPool.recycleItem(s),0==n?e.selfPlayView.showDealPokerIndex(a,t.baseCount):o.pokerGroup.setRestCountShow(!0,a+1)},a%2==0)},s=0;s<t.baseCount;s++)a(s)},n*C.default.instance.Define.PerPlayerDealInterval)});var a=3*C.default.instance.Define.PerPlayerDealInterval;Game.Component.scheduleOnce(function(){e.dzLeftPokersView.active=!0,e.dzLeftPokersView.addDZPokers(e.showPokerList.splice(0,3)),Global.Audio.playGameBundleSound(c.DdzAudioConst.audioCommonPath+c.DdzAudioConst.LandlordPokers,!0),e.dzLeftPokersView.playShowAnimation(!0,C.default.instance.Define.DzLeftThreeShowTime),e.setChooseEnbale(!0)},a),Game.Event.event(Game.EVENT_ADDTIMELOCK,"dealPokersAnim",a+C.default.instance.Define.DzLeftThreeShowTime)},t.prototype.dealPokerDirect=function(e){var t=this;e.forEach(function(e){var o=C.default.instance.SitHelper.serverSToLocalN(e.chair),n=t.playerViewList[o],i=e.count;if(0!=o)n.setPlayerLeftPokers(!0,i);else for(var r=0;r<i;r++)t.selfPlayView.showDealPokerIndex(r,i);i>0&&i<=C.default.instance.Define.WarnLeftPokerCount&&t.callPlayer(o,"showWarnSign",!0)}),this.selfPlayView.layoutHandPokers(),this.dzLeftPokersView.active=!0,this.dzLeftPokersView.addDZPokers(this.showPokerPool.getItemArr(3)),this.dzLeftPokersView.playShowAnimation(!1),this.setChooseEnbale(!0)},t.prototype.showMarker=function(e){this.markerBtn.active=e,this.isShowMarker=e},Object.defineProperty(t.prototype,"isShowMarker",{set:function(e){this._isShowMarker!=e&&(this._isShowMarker=e,this.markerView.active=e)},enumerable:!1,configurable:!0}),t.prototype.showMarkerViewClick=function(){Global.Audio.playGameBundleSound(c.DdzAudioConst.audioCommonPath+c.DdzAudioConst.commonAudio.ButtonClick,!0),this.isShowMarker=!this._isShowMarker},t.prototype.setChooseEnbale=function(e){this.selfPlayView.readyForChoose(e),e&&this.selfPlayView.initChooseFunction()},t.prototype.doPlayPokers=function(e){var t;void 0===e&&(e=[]),e&&!Global.Toolkit.isEmptyObject(e)?t=this.selfPlayView.getPokerArrMap(e):(t=C.default.instance.Context.getSelectPokersMap(),e=C.default.instance.Context.getSelectPokers()),t&&!Global.Toolkit.isEmptyObject(t)&&(this.selfPlayView.onPlayPokers(t),this.callPlayer(0,"showPlayPokers",!0,e,!0))},t.prototype.showPokerTypeEffect=function(e,t){var o=0;v.default.checkIsPlane(t)?(this.playPlaneAnim(),o+=C.default.instance.Define.PlaneAnimTime):v.default.checkIsRocket(t)?(this.playRocketAnim(),o+=C.default.instance.Define.RocketAnimTime):v.default.checkIsBomb(t)?(this.playBombAnim(),o+=C.default.instance.Define.BombAnimTime):v.default.checkIsLinkPair(t)?(this.playLinkPairAnim(e),o+=C.default.instance.Define.LinkPairAnimTime):v.default.checkIsStraight(t)&&(this.playStraightAnim(e),o+=C.default.instance.Define.StraightAnimTime),Game.Event.event(Game.EVENT_ADDTIMELOCK,"showPokerTypeEffect",o)},t.prototype.doPromptPokers=function(e){void 0===e&&(e={}),e&&!Global.Toolkit.isEmptyObject(e)&&this.selfPlayView.onPromptPokers(e)},t.prototype.doResetPokers=function(){this.selfPlayView.resetPokers()},t.prototype.playPlaneAnim=function(){var e=this,t=v.default.PlaneSoundArr;Global.Audio.playGameBundleSound(c.DdzAudioConst.audioCardTypePath+t[0],!0),Game.Component.scheduleOnce(function(){e.planeEffect.node.active=!0,e.planeEffect.setAnimation(0,"idle",!1)},.2),Game.Component.scheduleOnce(function(){e.planeEffect.node.active=!1},C.default.instance.Define.PlaneAnimTime)},t.prototype.playBombAnim=function(){var e=this,t=v.default.BombSoundArr;Global.Audio.playGameBundleSound(c.DdzAudioConst.audioCardTypePath+t[0],!0),Game.Component.scheduleOnce(function(){e.bombEffect.node.active=!0,e.bombEffect.setAnimation(0,"idle",!1)},.1),Game.Component.scheduleOnce(function(){e.bombEffect.node.active=!1},C.default.instance.Define.BombAnimTime),Game.Component.scheduleOnce(function(){var t=Global.UIHelper.getScreenShakeAction(.5,15,5);e.node.runAction(t)},C.default.instance.Define.BombAnimTime-.5)},t.prototype.playRocketAnim=function(){var e=this,t=v.default.RocketSoundArr;Global.Audio.playGameBundleSound(c.DdzAudioConst.audioCardTypePath+t[0],!0),Game.Component.scheduleOnce(function(){e.rocketEffect.node.active=!0,e.rocketEffect.setAnimation(0,"idle",!1)},.2),Game.Component.scheduleOnce(function(){e.rocketEffect.node.active=!1},C.default.instance.Define.RocketAnimTime),Game.Component.scheduleOnce(function(){var t=Global.UIHelper.getScreenShakeAction(.8,15,5);e.node.runAction(t)},C.default.instance.Define.RocketAnimTime-.8)},t.prototype.playLinkPairAnim=function(e){var t=this,o=v.default.LinkPairSoundArr;Global.Audio.playGameBundleSound(c.DdzAudioConst.audioCardTypePath+o[0],!0);var n=this.getPlayer(e).pokerGroup.getPokerShowDesWorldPos();this.linkPairEffect.node.setPosition(this.linkPairEffect.node.parent.convertToNodeSpaceAR(n)),this.linkPairEffect.node.setScale(0==e?1:.8),this.linkPairEffect.node.active=!0,this.linkPairEffect.setAnimation(0,"idle",!1),Game.Component.scheduleOnce(function(){t.linkPairEffect.node.active=!1},C.default.instance.Define.LinkPairAnimTime)},t.prototype.playStraightAnim=function(e){var t=this,o=v.default.StraightSoundArr;Global.Audio.playGameBundleSound(c.DdzAudioConst.audioCardTypePath+o[0],!0);var n=this.getPlayer(e).pokerGroup.getPokerShowDesWorldPos();this.straightEffect.node.setPosition(this.straightEffect.node.parent.convertToNodeSpaceAR(n)),this.straightEffect.node.setScale(0==e?1:.8),this.straightEffect.node.active=!0,this.straightEffect.setAnimation(0,"idle",!1),Game.Component.scheduleOnce(function(){t.straightEffect.node.active=!1},C.default.instance.Define.StraightAnimTime)},t.prototype.playSpringAnim=function(e){var t=this;1==e?(Global.Audio.playGameBundleSound(c.DdzAudioConst.audioCommonPath+c.DdzAudioConst.SpringAudio,!0),Global.Audio.playGameBundleSound(c.DdzAudioConst.genderSoundPath(c.DdzAudioConst.Spring,0),!0),Game.Component.scheduleOnce(function(){t.springEffect.node.active=!0,t.springEffect.setAnimation(0,"idle",!1)},.2),Game.Component.scheduleOnce(function(){t.springEffect.node.active=!1},C.default.instance.Define.SpringAnimTime)):2==e&&(Global.Audio.playGameBundleSound(c.DdzAudioConst.audioCommonPath+c.DdzAudioConst.SpringAudio,!0),Global.Audio.playGameBundleSound(c.DdzAudioConst.genderSoundPath(c.DdzAudioConst.Spring,0),!0),Game.Component.scheduleOnce(function(){t.springEffect.node.active=!0,t.springEffect.setAnimation(0,"idle",!1)},.2),Game.Component.scheduleOnce(function(){t.springEffect.node.active=!1},C.default.instance.Define.SpringAnimTime))},t.prototype.playAwardAnim=function(e,t){var o=this;void 0===e&&(e=[]);var n=0,i=C.default.instance.Context.get(C.default.instance.Define.FieldDzLocSeat),r=1==t.land_win,a=r&&0==i||!r&&0!=i;a?Global.Audio.playGameBundleSound(c.DdzAudioConst.audioCommonPath+c.DdzAudioConst.WinGame,!0):Global.Audio.playGameBundleSound(c.DdzAudioConst.audioCommonPath+c.DdzAudioConst.LoseGame,!0),Game.Component.scheduleOnce(function(){o.playRoleResultEffect(a,r,i)},0),Game.Component.scheduleOnce(function(){},C.default.instance.Define.PlayRoleWinTime+.1),n+=C.default.instance.Define.PlayRoleWinTime,Game.Component.scheduleOnce(function(){e.forEach(function(e){var t=C.default.instance.SitHelper.serverSToLocalN(e.chair);o.playerViewList[t].showRewardLbl(e.award,e.award>=0)})},n),n+=C.default.instance.Define.FloatScoreTime,Game.Component.scheduleOnce(function(){o.gameSettleView.active=!0,o.gameSettleView.playSettleAnim(a,t)},n),n+=C.default.instance.Define.ShowSettleTime,Game.Event.event(Game.EVENT_ADDTIMELOCK,"ddzplayAwardAnim",n)},t.prototype.playRoleResultEffect=function(e,t){t?Global.Audio.playGameBundleSound(c.DdzAudioConst.audioCommonPath+c.DdzAudioConst.LordWin,!0):Global.Audio.playGameBundleSound(c.DdzAudioConst.audioCommonPath+c.DdzAudioConst.FarmerWin,!0)},t.prototype.clearWnd=function(){this.clearPlayers(),this.clearByGame()},t.prototype.clearPlayers=function(){for(var e=0;e<this.playerViewList.length;e++)this.playerViewList[e].clearByRound(),this.playerViewList[e].hide()},t.prototype.clearOtherPlayers=function(){for(var e=0;e<this.playerViewList.length;e++)0!=e&&(this.playerViewList[e].clearByRound(),this.playerViewList[e].hide())},t.prototype.clearByGame=function(){this.updateRoundMult(0),this.showMarker(!1),this.showPokerPool.recycleAll(this.showPokerList),this.showPokerList=[],this.clockComp.setViewActive(!1),this.viewSet.callAll("clearByGame"),this.callAllPlayers("clearByGame")},t.prototype.clearByRound=function(){this.updateRoundMult(0),this.showActionTimer(!1),this.showMarker(!1),this.springEffect.node.active=!1,this.planeEffect.node.active=!1,this.bombEffect.node.active=!1,this.rocketEffect.node.active=!1,this.linkPairEffect.node.active=!1,this.straightEffect.node.active=!1,this.showActionTimer(!1),this.showAnimMask(!1),this.viewSet.callAll("clearByRound"),this.callAllPlayers("clearByRound")},t.prototype.registView=function(e,t){this.viewSet.registView(e,t)},t.prototype.getView=function(e){return this.viewSet.getViewEx(e)},t.prototype.callPlayer=function(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];var i=this.playerViewList[e];null!=i?i[t]&&i[t].apply&&i[t].apply(i,o):Logger.error("\u627e\u4e0d\u5230player!!!",e)},t.prototype.callAllPlayers=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];for(var n=0;n<C.default.instance.Define.MaxPlayerCount;n++){var i=this.getPlayer(n);if(null==i)return;i[e]&&i[e].apply&&i[e].apply(i,t)}},t.prototype.getPlayer=function(e){return this.playerViewList[e]},r([b],t)}(s.default));o.default=w,cc._RF.pop()},{"../DdzDriver":"DdzDriver","../component/DdzAskClockView":"DdzAskClockView","../component/DdzBaseComponent":"DdzBaseComponent","../data/DdzGameConst":"DdzGameConst","../data/DdzGameEvent":"DdzGameEvent","../data/DdzPathHelper":"DdzPathHelper","../data/DdzRuleConst":"DdzRuleConst","../subView/DdzAskActionView":"DdzAskActionView","../subView/DdzLeftThreePokerView":"DdzLeftThreePokerView","../subView/DdzMarkerView":"DdzMarkerView","../subView/DdzMatchPlayerView":"DdzMatchPlayerView","../subView/DdzMenuView":"DdzMenuView","../subView/DdzPlayerView":"DdzPlayerView","../subView/DdzSelfInfoView":"DdzSelfInfoView","../subView/DdzSelfPlayView":"DdzSelfPlayView","../subView/DdzSettleView":"DdzSettleView","../tool/DdzPokerPool":"DdzPokerPool"}],DdzMarkerView:[function(e,t,o){"use strict";cc._RF.push(t,"20f1dWFWoZBvp9hmXMVasYW","DdzMarkerView");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<o;t++)for(var r=arguments[t],a=0,s=r.length;a<s;a++,i++)n[i]=r[a];return n};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./DdzBaseView"),s=e("../data/DdzGameEvent"),l=e("../data/DdzPokerHelper"),c=e("../data/DdzRuleConst"),d=e("../DdzDriver"),h=function(e){function t(t){var o=e.call(this)||this;return o.pokerMarkerColList=[],o.pokerMarkerDefaultArr=[1,1,4,4,4,4,4,4,4,4,4,4,4,4,4],o.quickPokerMarkerDefaultArr=[1,1,4,4,4,4,4,4,4,4,4,4,0,0,0],o.keyMap={3:14,4:13,5:12,6:11,7:10,8:9,9:8,10:7,11:6,12:5,13:4,14:3},o.setNode(t),o}return i(t,e),t.prototype.initView=function(){for(var e=0;e<15;e++){var t=this.getChild("content/item"+e),o=new u(t);this.pokerMarkerColList.push(o)}},t.prototype.onOpen=function(){Game.Event.on(s.default.UpdateMarker,this,this.onUpdateMarker),this.onUpdateMarker()},t.prototype.onClose=function(){Game.Event.off(s.default.UpdateMarker,this,this.onUpdateMarker)},t.prototype.onUpdateMarker=function(){for(var e=this.Context.getMarkerData(),t=this.Context.getSelfHandPokers(),o=e.concat(t).filter(function(e,t,o){return o.indexOf(e)===t}),n=this.Context.mode==c.DdzMode.Quick&&r(this.quickPokerMarkerDefaultArr)||r(this.pokerMarkerDefaultArr),i=0;i<=o.length-1;i++){var a=o[i];if(this.PokerHelper.checkPokerValid(a)){var s=-1;(s=a==l.default.RedGhost?0:a==l.default.BlackGhost?1:this.PokerHelper.getPokerValue(a)[0])>=0&&s<=14&&(this.keyMap[s]&&(s=this.keyMap[s]),n[s]-=1)}}this.setDataShow(n)},t.prototype.setDataShow=function(e){this.pokerMarkerColList.forEach(function(t,o){var n=e[o];n>=0&&t.setLeftCount(n)})},t}(a.default);o.default=h;var u=function(e){function t(t){var o=e.call(this)||this;return o.setNode(t),o}return i(t,e),t.prototype.initView=function(){this.countLbl=this.getComponent("countLbl",cc.Label)},t.prototype.setLeftCount=function(e){void 0===e&&(e=4),this.countLbl.string=String(e),this.countLbl.node.color=0==e?(new cc.Color).fromHEX(d.default.instance.skinDefine.markerColorArr[0]):(new cc.Color).fromHEX(d.default.instance.skinDefine.markerColorArr[1])},t}(a.default);cc._RF.pop()},{"../DdzDriver":"DdzDriver","../data/DdzGameEvent":"DdzGameEvent","../data/DdzPokerHelper":"DdzPokerHelper","../data/DdzRuleConst":"DdzRuleConst","./DdzBaseView":"DdzBaseView"}],DdzMatchPlayerView:[function(e,t,o){"use strict";cc._RF.push(t,"b6204X9sB9DqqH3I3c2KNiM","DdzMatchPlayerView");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("./DdzBaseView"),a=e("../component/DDZTimeAutoRun"),s=function(e){function t(t){var o=e.call(this)||this;return o.spotList=[],o.delay=.1,o.setNode(t),o}return i(t,e),t.prototype.initView=function(){this.spotList=[];for(var e=1;e<=9;e++){var t=this.getChild("action/"+e.toString());this.spotList.push(t),t.active=!0}this.timeRun=this.getComponent("timeLbl",a.default),this.timeRun.node.active=!1},t.prototype.onOpen=function(){var e=this;this.interval=setInterval(function(){e.startAnim()},1500),this.startAnim()},t.prototype.startAnim=function(){for(var e=0;e<=this.spotList.length-1;e++)Game.Tween.get(this.spotList[e]).delay(e*this.delay).by(.2,{position:cc.v2(0,10)},cc.easeIn(1)).by(.2,{position:cc.v2(0,-10)},cc.easeOut(1)).start()},t.prototype.resetAnim=function(){this.spotList.forEach(function(e){e.y=0})},t.prototype.onClose=function(){clearInterval(this.interval),this.resetAnim(),this.timeRun.node.active=!1},t.prototype.clearByRound=function(){this.active=!1},t.prototype.setTimeRunConfig=function(e,t,o){this.timeRun.node.active=!0,this.timeRun.setTimer(e,t,o)},t}(r.default);o.default=s,cc._RF.pop()},{"../component/DDZTimeAutoRun":"DDZTimeAutoRun","./DdzBaseView":"DdzBaseView"}],DdzMenuView:[function(e,t,o){"use strict";cc._RF.push(t,"a0dbcpZuBNLw7dIcKUoSYcf","DdzMenuView");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("./DdzBaseView"),a=e("../data/DdzPathHelper"),s=e("../DdzDriver"),l=e("../data/DdzGameConst"),c=function(e){function t(t){var o=e.call(this)||this;return o.isPressed=!1,o.setNode(t),o}return i(t,e),t.prototype.initView=function(){this.bgNode=this.getChild("maskBg"),this.bgNode.active=!1,l.default.addCommonClick(this.bgNode,"",this.onBgTouch,this,cc.Button.Transition.NONE),this.pressDownBtn=this.getChild("menuBtn/sprite_down"),this.pressDownBtn.active=!0,this.pressUpBtn=this.getChild("menuBtn/sprite_up"),this.pressUpBtn.active=!1,l.default.addCommonClick(this.node,"menuBtn",this.onMenuBtnClick,this),this.menuContainer=this.getChild("maskNode/menuContainer"),this.menuRawPos=this.menuContainer.position,this.menuContainer.active=!1,this.menuContainer.setPosition(0,this.menuContainer.height),l.default.addCommonClick(this.node,"maskNode/menuContainer/settingBtn",this.onSettingBtnClick,this),l.default.addCommonClick(this.node,"maskNode/menuContainer/ruleBtn",this.onRuleBtnClick,this),l.default.addCommonClick(this.node,"maskNode/menuContainer/exitBtn",this.onExitBtnClick,this)},t.prototype.onBgTouch=function(){this.bgNode.active=!1,this.menuBtnClick()},t.prototype.menuBtnClick=function(e){if(void 0===e&&(e=!0),this.isPressed){this.isPressed=!1,this.pressUpBtn.active=!1,this.pressDownBtn.active=!0,this.bgNode.active=!1,this.menuContainer.stopAllActions();var t=cc.v2(this.menuRawPos.x,this.menuRawPos.y+this.menuContainer.height);e?this.menuContainer.runAction(cc.moveTo(.2,t).easing(cc.easeBackIn())):this.menuContainer.setPosition(t)}else this.isPressed=!0,this.pressUpBtn.active=!0,this.pressDownBtn.active=!1,this.menuContainer.active=!0,this.bgNode.active=!0,this.menuContainer.stopAllActions(),e?this.menuContainer.runAction(cc.moveTo(.2,cc.v2(this.menuRawPos.x,this.menuRawPos.y)).easing(cc.easeBackOut())):this.menuContainer.setPosition(cc.v2(this.menuRawPos.x,this.menuRawPos.y))},t.prototype.onMenuBtnClick=function(){Global.Audio.playGameBundleSound(a.DdzAudioConst.audioCommonPath+a.DdzAudioConst.commonAudio.ButtonClick,!0),this.menuBtnClick()},t.prototype.onSettingBtnClick=function(){this.menuBtnClick(),Global.Audio.playGameBundleSound(a.DdzAudioConst.audioCommonPath+a.DdzAudioConst.commonAudio.ButtonClick,!0),s.default.instance.openSettingPop()},t.prototype.onRuleBtnClick=function(){this.menuBtnClick(),Global.Audio.playGameBundleSound(a.DdzAudioConst.audioCommonPath+a.DdzAudioConst.commonAudio.ButtonClick,!0),s.default.instance.openRulePop()},t.prototype.onExitBtnClick=function(){var e=this;Global.Audio.playGameBundleSound(a.DdzAudioConst.audioCommonPath+a.DdzAudioConst.commonAudio.ButtonClick,!0),this.menuBtnClick(!1),this.Context.get(this.Define.FieldGameStart)?Global.UI.showYesNoBox("\u9000\u51fa\u540e\u5c06\u81ea\u52a8\u53d8\u4e3a\u6258\u7ba1\u51fa\u724c\uff0c\u4e14\u5728\u724c\u5c40\u7ed3\u675f\u524d\u65e0\u6cd5\u8fdb\u5165\u5176\u4ed6\u6e38\u620f\u3002\u786e\u5b9a\u9000\u51fa\u5417\uff1f",function(){Game.Server.send(e.Define.CmdLeave,{IsClose:1}),s.default.instance.leaveGame()}):(Game.Server.send(this.Define.CmdLeave,{IsClose:1}),s.default.instance.leaveGame(),Global.UI.close("WndMessageBox"))},t.prototype.clearByGame=function(){this.isPressed&&this.menuBtnClick(!1)},t}(r.default);o.default=c,cc._RF.pop()},{"../DdzDriver":"DdzDriver","../data/DdzGameConst":"DdzGameConst","../data/DdzPathHelper":"DdzPathHelper","./DdzBaseView":"DdzBaseView"}],DdzMultHandler:[function(e,t,o){"use strict";cc._RF.push(t,"09324CG6KFIAJsSfZ3er+hR","DdzMultHandler");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.DdzOnMultHandler=o.DdzCalMultHandler=void 0;var r=e("./DdzBaseHandler"),a=e("../data/DdzGameConst"),s=e("../data/DdzPathHelper"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(e){var t=this.SitHelper.serverSToLocalN(e._src),o=0,n=e._times;if(n&&Game.Component.correctTime){var i=Game.Component.correctTime(n);o=1e3*e._timeo-i}else o=1e3*e._timeo-(Date.now()-e._receiveTime);o<=0&&(o=1e3),0==t&&(t!=this.context.get(this.Define.FieldDzLocSeat)&&this.mainUI.askActionView.setMultViewShow(!0),this.mainUI.showActionTimer(!0,t,o,null)),this.mainUI.callAllPlayers("setState",!1)},t}(r.default);o.DdzCalMultHandler=l;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(e){var t=this.SitHelper.serverSToLocalN(e._src),o=e._para.selected;0==t&&this.mainUI.askActionView.setMultViewShow(!1);var n="";2==o?(n=s.DdzAudioConst.Mult,this.mainUI.callPlayer(t,"showMultSign",!0)):n=s.DdzAudioConst.NotMult,Global.Audio.playGameBundleSound(s.DdzAudioConst.genderSoundPath(n,0),!0),this.mainUI.callPlayer(t,"setState",!0,a.DdzGameActState.Mult,o),Game.Event.event(Game.EVENT_ADDTIMELOCK,"DdzOnMultHandler",.3)},t.prototype.executeSync=function(e){var t=this.SitHelper.serverSToLocalN(e._src);2==e._para.selected&&this.mainUI.callPlayer(t,"showMultSign",!0)},t}(r.default);o.DdzOnMultHandler=c,cc._RF.pop()},{"../data/DdzGameConst":"DdzGameConst","../data/DdzPathHelper":"DdzPathHelper","./DdzBaseHandler":"DdzBaseHandler"}],DdzPathHelper:[function(e,t,o){"use strict";cc._RF.push(t,"db83ft++ABABbFWuCJBHEfm","DdzPathHelper"),Object.defineProperty(o,"__esModule",{value:!0}),o.DdzAudioConst=void 0;var n=function(){function e(){}return e.prototype.atlasPath=function(t){return e.gameTexturePath+t},e.basePath="",e.configPath=e.basePath+"config/",e.gameAudioPath=e.basePath+"sound/",e.gamePrefabsPath=e.basePath+"prefabs/",e.gameTexturePath=e.basePath+"texture/",e}();o.default=n;var i=function(){function e(){}return e.genderSoundPath=function(e,t){void 0===t&&(t=0);var o="sound/man/";return 1==t&&(o="sound/woman/"),n.basePath+o+e},e.audioCommonPath=n.gameAudioPath+"common/",e.audioCardTypePath=n.gameAudioPath+"cardType/",e.Bgm1=n.gameAudioPath+"background",e.Bgm2=n.gameAudioPath+"afterboom",e.commonAudio={ButtonClick:"ButtonClick"},e.CallLandordArr=["cs1","cs2","cs3"],e.NotCallLandordArr=["cs0"],e.WarningOneArr=["other1"],e.WarningTwoArr=["other2"],e.Mult="jiabei",e.NotMult="bujiabei",e.Spring="chuntian1",e.HurryUp="dida",e.LordWin="play_lord_win",e.FarmerWin="play_farmer_win",e.LandlordPokers="sendcard",e.WinGame="wingame",e.LoseGame="losegame",e.DispatchPoker="dispatch",e.SelectPoker="xuanpai",e.CancelSelect="pop_craked",e.SpringAudio="chuntian",e.WarningAudio="common_alert",e}();o.DdzAudioConst=i,cc._RF.pop()},{}],DdzPlayHandler:[function(e,t,o){"use strict";cc._RF.push(t,"5b0e3Vy8zhHxL8XGWCguWeV","DdzPlayHandler");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.DdzOnPassHandler=o.DdzOnPlayHandler=o.DdzCalPlayHandler=o.DdzPlayStartHandler=void 0;var r=e("./DdzBaseHandler"),a=e("../data/DdzGameConst"),s=e("../data/DdzRuleConst"),l=e("../data/DdzPathHelper"),c=e("../DdzDriver"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(){this.mainUI.callAllPlayers("setState",!1),this.mainUI.showActionTimer(!1),this.mainUI.showMarker(!0),this.mainUI.askActionView.setAutoPlayBtnShow(!0)},t.prototype.executeSync=function(e){this.execute(e)},t}(r.default);o.DdzPlayStartHandler=d;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.refreshData=function(e){0==e._para.play_type&&this.context.set(this.Define.FieldOnOutPokers,{})},t.prototype.execute=function(e){var t=this.SitHelper.serverSToLocalN(e._src);if(this.mainUI.callPlayer(t,"setState",!1),0==t){var o=this.context.getSelfHandPokers();e._para.count!=o.length&&this.SendRedeal(),this.context.get(this.Define.FieldOnPlayAction)&&(this.mainUI.selfPlayView.refreshHandPokersOnErr(),this.context.set(this.Define.FieldOnPlayAction,!1)),0==e._para.play_type?this.mainUI.askActionView.setPlayViewShow(!0,!1,!1):(c.default.instance.PlayRuleHelper.initRecommendHelper(this.context.getSelfHandPokers(),this.context.get(this.Define.FieldOnOutPokers)),c.default.instance.PlayRuleHelper.checkBigger()?this.mainUI.askActionView.setPlayViewShow(!0,!0,!0):this.mainUI.askActionView.setCannotPlayViewShow(!0))}var n=0,i=e._times;if(i&&Game.Component.correctTime){var r=Game.Component.correctTime(i);n=1e3*e._timeo-r}else n=1e3*e._timeo-(Date.now()-e._receiveTime);(!n||n<=0)&&(n=1e3),this.mainUI.showActionTimer(!0,t,n,null),this.mainUI.clockComp.setClockAudioEnable(!0),this.mainUI.callPlayer(t,"showPlayPokers",!1),this.mainUI.callPlayer(t,"showPlayerThinkEffect")},t.prototype.executeSync=function(e){this.execute(e)},t.prototype.SendRedeal=function(){Game.Server.send(this.Define.CmdRefreshHandPokers,{})},t}(r.default);o.DdzCalPlayHandler=h;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(e){var t=this,o=this.SitHelper.serverSToLocalN(e._src),n=e._para.count,i=e._para.cards,r=e._para.type,a=c.default.instance.PlayRuleHelper.getPokersType(e._para.cards);if(this.context.set(this.Define.FieldOnOutPokers,a),0==o){c.default.instance.PlayRuleHelper.clearRecommend(),this.mainUI.askActionView.setPlayViewShow(!1),this.context.removeSelfHandPokers(i);var d=this.context.get(this.Define.FieldOnPlayAction),h=1==e._para.flag;d&&h?(this.mainUI.selfPlayView.refreshHandPokersOnErr(),this.mainUI.doPlayPokers(i)):(this.mainUI.doResetPokers(),this.mainUI.doPlayPokers(i))}else this.mainUI.callPlayer(o,"setPlayerLeftPokers",!0,n),this.mainUI.callPlayer(o,"showPlayPokers",!0,i,!0);this.mainUI.showActionTimer(!1),this.context.set(this.Define.FieldOnPlayAction,!1);var u=s.default.getPlayTypeSoundRes(r,a.weight);u&&Global.Audio.playGameBundleSound(l.DdzAudioConst.genderSoundPath(u,0),!0),this.context.get(this.Define.FieldBombBgm)||(s.default.checkIsBomb(r)||s.default.checkIsRocket(r))&&(Global.Audio.playGameBundleMusic(l.DdzAudioConst.Bgm2,!0),this.context.set(this.Define.FieldBombBgm,!0));var p=.1;if(Game.Component.scheduleOnce(function(){t.mainUI.showPokerTypeEffect(o,r)},p),p+=.1,Game.Component.scheduleOnce(function(){t.mainUI.callPlayer(o,"showPlayerPlayEffect",s.default.checkIsBomb(r)||s.default.checkIsRocket(r))},p),p+=.1,Game.Component.scheduleOnce(function(){t.context.updateMarkerData(i)},p),p+=.1,n>0&&n<=this.Define.WarnLeftPokerCount){this.mainUI.callPlayer(o,"showWarnSign",!0);var f=[];1==n?f=l.DdzAudioConst.WarningOneArr:2==n&&(f=l.DdzAudioConst.WarningTwoArr);var m=f[Global.Toolkit.getRoundInteger(f.length)];m&&Game.Component.scheduleOnce(function(){Global.Audio.playGameBundleSound(l.DdzAudioConst.audioCommonPath+l.DdzAudioConst.WarningAudio,!0),Global.Audio.playGameBundleSound(l.DdzAudioConst.genderSoundPath(m,0),!0)},p)}Game.Event.event(Game.EVENT_ADDTIMELOCK,"DdzOnPlayHandler",p+.1)},t}(r.default);o.DdzOnPlayHandler=u;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(e){var t=this.SitHelper.serverSToLocalN(e._src);0==t&&(this.mainUI.askActionView.setPlayViewShow(!1),this.mainUI.askActionView.setCannotPlayViewShow(!1),this.mainUI.doResetPokers(),c.default.instance.PlayRuleHelper.clearRecommend());var o=this.context.get(this.Define.FieldOnOutPokers),n=s.default.getPassSoundRes(o.type);n&&Global.Audio.playGameBundleSound(l.DdzAudioConst.genderSoundPath(n,0),!0),this.mainUI.callPlayer(t,"setState",!0,a.DdzGameActState.Play,0),this.mainUI.callPlayer(t,"showPlayerNormalEffect")},t}(r.default);o.DdzOnPassHandler=p,cc._RF.pop()},{"../DdzDriver":"DdzDriver","../data/DdzGameConst":"DdzGameConst","../data/DdzPathHelper":"DdzPathHelper","../data/DdzRuleConst":"DdzRuleConst","./DdzBaseHandler":"DdzBaseHandler"}],DdzPlayRule:[function(e,t,o){"use strict";cc._RF.push(t,"d18c0yobDRMxK1FvMFG/2S0","DdzPlayRule");var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<o;t++)for(var r=arguments[t],a=0,s=r.length;a<s;a++,i++)n[i]=r[a];return n};Object.defineProperty(o,"__esModule",{value:!0}),o.DdzPlayTypeDefine=void 0;var i,r=e("./DdzPokerCheck"),a=e("./DdzTypeCheck"),s=e("./DdzPokerTypeData"),l=e("./DdzRecommendPlay"),c=e("../data/DdzRuleConst"),d=e("../DdzDriver");(function(e){e[e.DDZ_NONE=0]="DDZ_NONE",e[e.DDZ_SINGLE=1]="DDZ_SINGLE",e[e.DDZ_PAIR=2]="DDZ_PAIR",e[e.DDZ_THREE_ZERO=3]="DDZ_THREE_ZERO",e[e.DDZ_THREE_ONE=4]="DDZ_THREE_ONE",e[e.DDZ_THREE_TWO=5]="DDZ_THREE_TWO",e[e.DDZ_STRAIGHT=6]="DDZ_STRAIGHT",e[e.DDZ_LINK_PAIR=7]="DDZ_LINK_PAIR",e[e.DDZ_PLANE_ZERO=8]="DDZ_PLANE_ZERO",e[e.DDZ_PLANE_ONE=9]="DDZ_PLANE_ONE",e[e.DDZ_PLANE_TWO=10]="DDZ_PLANE_TWO",e[e.DDZ_FOUR_ONE=11]="DDZ_FOUR_ONE",e[e.DDZ_FOUR_TWO=12]="DDZ_FOUR_TWO",e[e.DDZ_BOMB=13]="DDZ_BOMB",e[e.DDZ_ROCKET=14]="DDZ_ROCKET"})(i=o.DdzPlayTypeDefine||(o.DdzPlayTypeDefine={}));var h=function(){function e(){this.typeCheckHelper=new a.default}return e.prototype.getPokersType=function(e){var t=this.sortPokerArr(e),o=this.createTypeData(i.DDZ_NONE,0,0),n=this.typeCheckHelper.computeValueTimes(e),r=n[0],a=n[1],s=n[2];switch(t.length){case 1:o=this.checkOnePokers(e);break;case 2:o=this.checkTwoPokers(e);break;case 3:3==a?o=this.checkThreeZero(e,a,s):1==a&&(o=this.checkStraight(e,a,s,r));break;case 4:4==a?o=this.checkBomb(e,a):3==a?o=this.checkThreeOne(e,a,s):2==a?o=this.checkLinkPairs(e,a,s,r):1==a&&(o=this.checkStraight(e,a,s,r));break;case 5:3==a?o=this.checkThreeTwo(e,a,s,r):1==a&&(o=this.checkStraight(e,a,s,r));break;default:if(1==a)o=this.checkStraight(e,a,s,r);else if(2==a)o=this.checkLinkPairs(e,a,s,r);else if(3==a){if((o=this.checkPlaneZero(e,a,s,r)).isDataValid())break;if((o=this.checkPlaneOne(e,a,s,r)).isDataValid())break;if((o=this.checkPlaneTwo(e,a,s,r)).isDataValid())break}else if(4==a){if(6==e.length&&(o=this.checkBombWithTwo(e,a,s)).isDataValid())break;if(8==e.length&&(o=this.checkBombWithPairs(e,a,s,r)).isDataValid())break;if((o=this.checkPlaneZero(e,a,s,r)).isDataValid())break;if((o=this.checkPlaneOne(e,a,s,r)).isDataValid())break;if((o=this.checkPlaneTwo(e,a,s,r)).isDataValid())break}}return o},e.prototype.checkOnePokers=function(e){if(this.typeCheckHelper.checkSingle(e)){var t=this.typeCheckHelper.checkSingle(e);return this.createTypeData(i.DDZ_SINGLE,1,t)}return this.createTypeData(i.DDZ_NONE,0,0)},e.prototype.checkTwoPokers=function(e){if(this.typeCheckHelper.checkRocket(e))return this.createTypeData(i.DDZ_ROCKET,2,99);if(this.typeCheckHelper.checkPair(e)){var t=this.typeCheckHelper.checkPair(e);return this.createTypeData(i.DDZ_PAIR,2,t)}return this.createTypeData(i.DDZ_NONE,0,0)},e.prototype.checkOneShowCount=function(e,t,o,n){return 1==t&&this.typeCheckHelper.checkContinuity(n,1)&&o.length>=3?this.checkStraight(e,t,o,n):this.createTypeData(i.DDZ_NONE,0,0)},e.prototype.checkThreeZero=function(e,t,o){var n=this.typeCheckHelper.checkThreeZero(e,t,o);return n?this.createTypeData(i.DDZ_THREE_ZERO,1,n):this.createTypeData(i.DDZ_NONE,0,0)},e.prototype.checkThreeOne=function(e,t,o){var n=this.typeCheckHelper.checkThreeOne(e,t,o);return n?this.createTypeData(i.DDZ_THREE_ONE,1,n):this.createTypeData(i.DDZ_NONE,0,0)},e.prototype.checkThreeTwo=function(e,t,o,n){var r=this.typeCheckHelper.checkThreeTwo(e,t,o,n);return r?this.createTypeData(i.DDZ_THREE_TWO,1,r):this.createTypeData(i.DDZ_NONE,0,0)},e.prototype.checkPlaneZero=function(e,t,o,n){var r=this.typeCheckHelper.checkPlaneZero(e,t,o,n);return r?this.createTypeData(i.DDZ_PLANE_ZERO,e.length/3,r):this.createTypeData(i.DDZ_NONE,0,0)},e.prototype.checkPlaneOne=function(e,t,o,n){var r=this.typeCheckHelper.checkPlaneOne(e,t,o,n);return r?this.createTypeData(i.DDZ_PLANE_ONE,e.length/4,r):this.createTypeData(i.DDZ_NONE,0,0)},e.prototype.checkPlaneTwo=function(e,t,o,n){var r=this.typeCheckHelper.checkPlaneTwo(e,t,o,n);return r?this.createTypeData(i.DDZ_PLANE_TWO,e.length/5,r):this.createTypeData(i.DDZ_NONE,0,0)},e.prototype.checkBomb=function(e,t){var o=this.typeCheckHelper.checkBomb(e,t);return o?this.createTypeData(i.DDZ_BOMB,4,o):this.createTypeData(i.DDZ_NONE,0,0)},e.prototype.checkBombWithTwo=function(e,t,o){var n=this.typeCheckHelper.checkBombWithSingles(e,t,o);return n?this.createTypeData(i.DDZ_FOUR_ONE,6,n):this.createTypeData(i.DDZ_NONE,0,0)},e.prototype.checkBombWithPairs=function(e,t,o,n){var r=this.typeCheckHelper.checkBombWithPairs(e,t,o,n);return r?this.createTypeData(i.DDZ_FOUR_TWO,8,r):this.createTypeData(i.DDZ_NONE,0,0)},e.prototype.checkLinkPairs=function(e,t,o,n){var r;return(r=d.default.instance.Context.mode==c.DdzMode.Quick?this.typeCheckHelper.checkQuickLinkPairs(e,t,o,n):this.typeCheckHelper.checkLinkPairs(e,t,o,n))?this.createTypeData(i.DDZ_LINK_PAIR,o.length,r):this.createTypeData(i.DDZ_NONE,0,0)},e.prototype.checkStraight=function(e,t,o,n){var r;return(r=d.default.instance.Context.mode==c.DdzMode.Quick?this.typeCheckHelper.checkQuickStraight(e,t,o,n):this.typeCheckHelper.checkStraight(e,t,o,n))?this.createTypeData(i.DDZ_STRAIGHT,o.length,r):this.createTypeData(i.DDZ_NONE,0,0)},e.prototype.createTypeData=function(e,t,o){return new s.default(e,t,o)},e.prototype.sortPokerArr=function(e){var t=n(e);return t.sort(function(e,t){var o=r.default.getPokerWeight(e),n=o[0],i=o[1],a=r.default.getPokerWeight(t),s=a[0],l=a[1];return n==s?l-i:s-n}),t},e.prototype.checkPlayOnRule=function(e,t){return e&&!Global.Toolkit.isEmptyObject(e)&&e.isDataValid()?e.type!=i.DDZ_ROCKET&&(e.type==i.DDZ_BOMB?t.type==i.DDZ_ROCKET||t.type==i.DDZ_BOMB&&t.weight>e.weight:t.type==i.DDZ_ROCKET||t.type==i.DDZ_BOMB||t.type==e.type&&t.count==e.count&&t.weight>e.weight):!!t.isDataValid()},e.prototype.initRecommendHelper=function(e,t){void 0===e&&(e=[]),this.reHelper=new l.default(t,this.sortPokerArr(e)),this.gen=this.reHelper.getRecommendPlayGen()},e.prototype.resetRecommendGen=function(){this.reHelper&&(this.gen=this.reHelper.getRecommendPlayGen())},e.prototype.clearRecommend=function(){this.reHelper=null,this.gen=null},e.prototype.getOneRecommend=function(){if(this.gen){var e=this.gen.next();return!e.done&&e.value}},e.prototype.checkBigger=function(){if(this.gen)return-1!=this.gen.next().value&&(this.resetRecommendGen(),!0)},e.prototype.searchStraight=function(e){var t=d.default.instance.Context.mode==c.DdzMode.Quick?3:5;if(!(e.length<t)){var o=this.getPokersType(e);if(!o.isDataValid()||o.type!=i.DDZ_LINK_PAIR&&o.type!=i.DDZ_PLANE_ZERO&&o.type!=i.DDZ_PLANE_ONE&&o.type!=i.DDZ_PLANE_TWO){var n=this.typeCheckHelper.computeValueTimes(e)[0],a=this.typeCheckHelper.getOrderBiggerNumArr(n,1),s=a.length;if(!(s<t))for(var l=s;l>=t;l--)for(var h=a.length-1;h>=0&&!(h<t-1);h--){var u=Number(a[h]),p=Number(a[h-l+1]);if(2!=p&&u-p==l-1){for(var f={},m=0;m<l;m++)for(var y=0;y<e.length;y++){var D=e[y];if(r.default.getPokerValue(D)[0]==p+m){f[y]=D;break}}return f}}}}},e}();o.default=h,cc._RF.pop()},{"../DdzDriver":"DdzDriver","../data/DdzRuleConst":"DdzRuleConst","./DdzPokerCheck":"DdzPokerCheck","./DdzPokerTypeData":"DdzPokerTypeData","./DdzRecommendPlay":"DdzRecommendPlay","./DdzTypeCheck":"DdzTypeCheck"}],DdzPlayerView:[function(e,t,o){"use strict";cc._RF.push(t,"06f60r3y31IZ6+H9aqNjYxZ","DdzPlayerView");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("./DdzBaseView"),a=e("../data/DdzPathHelper"),s=e("./DdzPokerGroup"),l=e("../data/DdzGameConst"),c=e("./DdzRoleView"),d=e("../DdzDriver"),h=function(e){function t(t,o){var n=e.call(this)||this;return n.nSeat=o,n.setNode(t),n}return i(t,e),t.prototype.initView=function(){this.infoNode=this.getChild("info"),this.infoNode.active=!1,this.coinLbl=this.getComponent("info/coinLbl",cc.Label),this.nameLbl=this.getComponent("info/nameLbl",cc.Label),this.headImg=this.getComponent("info/mask/headImg",cc.Sprite),this.vipKuang=this.getComponent("info/headbox",cc.Sprite),this.rewardRoot=this.getChild("rewardRoot"),this.rewardLbl=this.getComponent("rewardRoot/rewardLbl",cc.Label),this.endPos=this.rewardRoot.position,this.winFont=Global.ResourceManager.getGameBundleRes(a.default.gameTexturePath+"atlas/frame/font/num_jia",cc.Font),this.loseFont=Global.ResourceManager.getGameBundleRes(a.default.gameTexturePath+"atlas/frame/font/num_fu",cc.Font),this.warnSign=this.getChild("warn"),this.warnSign.active=!1,this.dzSign=this.getComponent("dzSign",sp.Skeleton),this.dzSign.node.active=!1,this.stateIconSp=this.getComponent("state",cc.Sprite),this.clockRoot=this.getChild("clockRoot"),this.autoSign=this.getChild("auto"),this.autoSign.active=!1,this.multNode=this.getChild("mult"),this.multNode.active=!1},t.prototype.initPokerGroup=function(e){this.pokerGroup=new s.default(e,this.nSeat),this.pokerGroup.resetGroupPoker()},t.prototype.setPlayerInfo=function(e){void 0===e&&(e=this.Define.DefaultNameStr),this.nameLbl.string=e},t.prototype.setPlayerPoint=function(e){this.coinLbl.string=Global.Toolkit.formatPointStr(e,!0)},t.prototype.setPlayerHeadImg=function(e){this.headImg&&(this.headImg.spriteFrame=Global.Toolkit.getLocalHeadSf(e))},t.prototype.show=function(e){this.node.active=!0,this.setPlayerInfo(e.area),this.setPlayerPoint(e.point),this.setPlayerHeadImg(e.headimg),this.vipKuang&&d.default.instance.LoadVipHeadKuang(this.vipKuang,e.headkuang),0!==this.nSeat&&(this.infoNode.active=!0),this.Context.get(this.Define.FieldGameStart)||this.showRole(!0,c.DdzRoleDefine.FFramer,!1)},t.prototype.hide=function(){this.node.active=!1,this.nameLbl.string="",this.coinLbl.string="",this.showRole(!1),this.clearByRound()},t.prototype.setDz=function(e,t){void 0===t&&(t=!1),this.dzSign.node.active=e,e&&(t?(this.dzSign.setAnimation(0,"idle",!1),this.dzSign.addAnimation(0,"idle2",!0,1),this.showRole(!0,c.DdzRoleDefine.FLandord,!0)):(this.dzSign.setAnimation(0,"idle2",!0),this.showRole(!0,c.DdzRoleDefine.FLandord,!1)))},t.prototype.setPlayerRole=function(e){e&&cc.isValid(e)&&(this.roleView=new c.default(e),this.roleView.active=!1)},t.prototype.showRole=function(e,t,o){void 0===t&&(t=1),void 0===o&&(o=!1),this.roleView.active=e,e&&(t==c.DdzRoleDefine.FLandord?o?this.roleView.switchRole():this.roleView.showRole(!0,c.DdzRoleDefine.FLandord):this.roleView.showRole(!0,c.DdzRoleDefine.FFramer))},t.prototype.showRewardLbl=function(e,t){this.rewardRoot.active=!0,this.rewardLbl.string=Global.Toolkit.formatPointStr(e,!0,!0),this.rewardLbl.font=t&&this.winFont||this.loseFont,this.rewardRoot.setPosition(cc.v2(this.endPos.x,this.endPos.y-30)),Game.Tween.get(this.rewardRoot).to(this.Define.FloatScoreTime-.4,{position:this.endPos},cc.easeCubicActionOut()).call(function(){}).start(),this.roleView.playRoleSettleEffect(t)},t.prototype.showPlayerThinkEffect=function(){this.roleView.playRoleThinkEffect()},t.prototype.showPlayerNormalEffect=function(){this.roleView.playRoleNormalEffect()},t.prototype.showPlayerPlayEffect=function(e){this.roleView.playRoleOutPokersEffect(e)},t.prototype.setState=function(e,t,o){if(e)switch(this.stateIconSp.node.children[0].getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame,t){case l.DdzGameActState.Rob:this.stateIconSp.node.active=!0,Global.ResourceManager.loadGameBundleAutoAtlas(this.stateIconSp.node.children[0].getComponent(cc.Sprite),a.default.gameTexturePath+"atlas/frame/atlas_frame",l.default.GameRobStrCfg[o]);break;case l.DdzGameActState.Mult:this.stateIconSp.node.active=!0,Global.ResourceManager.loadGameBundleAutoAtlas(this.stateIconSp.node.children[0].getComponent(cc.Sprite),a.default.gameTexturePath+"atlas/frame/atlas_frame",l.default.GameMultStrCfg[o]);break;case l.DdzGameActState.Play:this.stateIconSp.node.active=!0,Global.ResourceManager.loadGameBundleAutoAtlas(this.stateIconSp.node.children[0].getComponent(cc.Sprite),a.default.gameTexturePath+"atlas/frame/atlas_frame",l.default.GamePlayStrCfg[o]);break;default:this.stateIconSp.node.active=!1}this.stateIconSp.node.active=e},t.prototype.setPlayerLeftPokers=function(e,t){this.pokerGroup.setRestCountShow(e,t)},t.prototype.showPlayPokers=function(e,t,o){var n=this;void 0===t&&(t=[]),this.pokerGroup.showPlayPokers(e,t),e&&t.length>0&&Game.Component.scheduleOnce(function(){n.pokerGroup.playOutPokersAnim(o,t)},this.Define.PokerPlayDelayTime)},t.prototype.showWarnSign=function(e){this.warnSign.active!=e&&(this.warnSign.active=e)},t.prototype.showAutoSign=function(e){this.autoSign.active=e},t.prototype.showMultSign=function(e){this.multNode.active=e},t.prototype.getPlayerClockWorldPos=function(){return this.node.convertToWorldSpaceAR(this.clockRoot.position)},t.prototype.clearByRound=function(){this.rewardRoot.active=!1,this.warnSign.active=!1,this.autoSign.active=!1,this.setDz(!1),this.setState(!1),this.showMultSign(!1),this.pokerGroup.resetGroupPoker()},t.prototype.clearByGame=function(){this.clearByRound()},t}(r.default);o.default=h,cc._RF.pop()},{"../DdzDriver":"DdzDriver","../data/DdzGameConst":"DdzGameConst","../data/DdzPathHelper":"DdzPathHelper","./DdzBaseView":"DdzBaseView","./DdzPokerGroup":"DdzPokerGroup","./DdzRoleView":"DdzRoleView"}],DdzPokerCheck:[function(e,t,o){"use strict";var n,i,r;cc._RF.push(t,"ada49349+9GgY7AK4ZZeJvC","DdzPokerCheck"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e[e.RedGhost=95]="RedGhost",e[e.BlackGhost=79]="BlackGhost"}(n||(n={})),function(e){e[e.Diamond=1]="Diamond",e[e.Club=2]="Club",e[e.Heart=3]="Heart",e[e.Spade=4]="Spade"}(i||(i={})),function(e){e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five",e[e.Six=6]="Six",e[e.Seven=7]="Seven",e[e.Eight=8]="Eight",e[e.Nine=9]="Nine",e[e.Ten=10]="Ten",e[e.Jack=11]="Jack",e[e.Queen=12]="Queen",e[e.King=13]="King",e[e.Ace=14]="Ace",e[e.Two=16]="Two",e[e.BlackGhost=79]="BlackGhost",e[e.RedGhost=95]="RedGhost"}(r||(r={}));var a=function(){function e(){}return e.getPokerWeight=function(t){if(t==n.RedGhost)return[r.RedGhost,0];if(t==n.BlackGhost)return[r.BlackGhost,0];var o=e.getPokerValue(t),i=o[0],a=o[1],s=i;return 2==i&&(s=r.Two),[s,a]},e.checkIsGhost=function(e){return e==n.RedGhost||e==n.BlackGhost},e.getPokerValue=function(e){return e==n.RedGhost?[95,0]:e==n.BlackGhost?[79,0]:[e%16,Math.floor(e/16)+1]},e.checkPokerValid=function(t){if(e.checkIsGhost(t))return!0;var o=e.getPokerValue(t),n=o[0],r=o[1];return n>=2&&n<=14&&r>=i.Diamond&&r<=i.Spade},e}();o.default=a,cc._RF.pop()},{}],DdzPokerGroup:[function(e,t,o){"use strict";cc._RF.push(t,"69240GLbxRPibzO4zMaUR9M","DdzPokerGroup");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("./DdzBaseView"),a=e("../DdzDriver"),s=function(e){function t(t,o){var n=e.call(this)||this;return n.nSeat=o,n.onShowPokers=[],n.showSpaceX=23,n.showSpaceY=-60,n.pokerPool=a.default.instance.PokerPool,n.setNode(t),n}return i(t,e),t.prototype.initView=function(){this.restNode=this.getChild("rest"),this.restNode.active=!1,this.restCountLbl=this.getComponent("rest/countLbl",cc.Label),this.pokerShowRoot=this.getChild("pokerShow"),this.desPos=this.pokerShowRoot.position,this.playStartRoot=this.getChild("playStartRoot")},t.prototype.setRestCountShow=function(e,t){this.restNode.active=e,e&&(this.restCountLbl.string=String(t))},t.prototype.showPlayPokers=function(e,t){var o=this;if(void 0===t&&(t=[]),e){this.showCenterPos=cc.Vec3.ZERO,this.pokerPool.recycleAll(this.onShowPokers),this.onShowPokers=[];var n=t;this.onShowPokers=this.pokerPool.getItemArr(n.length),this.onShowPokers.forEach(function(e,t){e.active=!0,e.isFront=!0,e.pokerValue=n[t],e.setPokerStyle(0),e.node.setParent(o.pokerShowRoot)}),this.layoutShowPokers();var i=this.Context.get(this.Define.FieldDzLocSeat);this.nSeat==i&&this.onShowPokers[n.length-1].setDzOwner(!0),this.pokerShowRoot.active=!1}else this.showCenterPos=cc.Vec3.ZERO,this.pokerPool.recycleAll(this.onShowPokers),this.onShowPokers=[]},t.prototype.playOutPokersAnim=function(e,t){if(this.pokerShowRoot.active=!0,e){var o=t.length;o>=5?(this.pokerShowRoot.setPosition(this.desPos),this.onShowPokers.forEach(function(e,t){e.active=!1,Game.Component.scheduleOnce(function(){e.active=!0},.03*t+.01)}),Game.Event.event(Game.EVENT_ADDTIMELOCK,"playOutPokersAnim",.03*o+.01)):(this.pokerShowRoot.setPosition(this.playStartRoot.position),Game.Tween.get(this.pokerShowRoot).to(this.Define.PokerPlayMoveTime,{position:this.desPos},cc.easeQuarticActionOut()).start())}else this.pokerShowRoot.setPosition(this.desPos)},t.prototype.layoutShowPokers=function(){var e=this,t=this.onShowPokers.length;if(!(t<=0)){var o=this.onShowPokers[0].getPokerSize(),n=o[0],i=o[1],r=[n/2,-i/2],a=r[0],s=r[1];0==this.nSeat?(this.onShowPokers.forEach(function(o,n){var i=cc.v3((n-Math.ceil(t/2-1))*e.showSpaceX,0);o.setPokerPosition(i)}),this.showCenterPos=this.desPos):1==this.nSeat?(this.onShowPokers.forEach(function(o,n){if(n<=9){var i=t>10?10:t,r=cc.v3(-a-(i-n-1)*e.showSpaceX,s);o.setPokerPosition(r)}else i=t-10,r=cc.v3(-a-(i-n%10-1)*e.showSpaceX,s+e.showSpaceY),o.setPokerPosition(r)}),this.showCenterPos=t<=10?cc.v3(this.desPos.x-(n*t-2*(t-1)*this.showSpaceX)/2,this.desPos.y-i/2):cc.v3(this.desPos.x-(n*t-2*(t-1)*this.showSpaceX)/2,this.desPos.y+i/2-(2*i-this.showSpaceY)/2)):2==this.nSeat&&(this.onShowPokers.forEach(function(t,o){if(o<=9){var n=cc.v3(a+o*e.showSpaceX,s);t.setPokerPosition(n)}else n=cc.v3(a+o%10*e.showSpaceX,s+e.showSpaceY),t.setPokerPosition(n)}),this.showCenterPos=t<=10?cc.v3(this.desPos.x+(n*t-2*(t-1)*this.showSpaceX)/2,this.desPos.y-i/2):cc.v3(this.desPos.x+(n*t-2*(t-1)*this.showSpaceX)/2,this.desPos.y+i/2-(2*i-this.showSpaceY)/2))}},t.prototype.getPokerDealAnimPos=function(){return this.restNode.parent.convertToWorldSpaceAR(this.restNode.position)},t.prototype.getPokerShowDesWorldPos=function(){return this.pokerShowRoot.parent.convertToWorldSpaceAR(this.showCenterPos||this.desPos)},t.prototype.resetGroupPoker=function(){this.restNode.active=!1,this.showPlayPokers(!1)},t}(r.default);o.default=s,cc._RF.pop()},{"../DdzDriver":"DdzDriver","./DdzBaseView":"DdzBaseView"}],DdzPokerHelper:[function(e,t,o){"use strict";cc._RF.push(t,"3366a8krURDv5RUCWueG81d","DdzPokerHelper");var n,i,r,a,s,l,c=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<o;t++)for(var r=arguments[t],a=0,s=r.length;a<s;a++,i++)n[i]=r[a];return n};Object.defineProperty(o,"__esModule",{value:!0}),function(e){e[e.Diamond=1]="Diamond",e[e.Club=2]="Club",e[e.Heart=3]="Heart",e[e.Spade=4]="Spade"}(l||(l={}));var d=function(){function e(){}return e.prototype.getPokerStyle=function(e){if(this.checkPokerValid(e))return this.checkIsGhost(e)?this.getGhostStyle(e):this.getNormalStyle(e);Logger.error("\u670d\u52a1\u5668\u724c\u503c\u9519\u8bef",String(e))},e.prototype.getGhostStyle=function(t){return[!0,e.ghostColorSprite[t],e.ghostNumSprite[t],""]},e.prototype.getNormalStyle=function(t){var o=this.getPokerValue(t),n=o[0],i=o[1];return[!1,e.pokerColorSprite[i],e.pokerNumProSpriteStr[i]+String(n),e.pokerSmallColorSprite[i]]},e.prototype.checkPokerValid=function(e){if(this.checkIsGhost(e))return!0;var t=this.getPokerValue(e),o=t[0],n=t[1];return o>=2&&o<=14&&n>=l.Diamond&&n<=l.Spade},e.prototype.checkIsGhost=function(t){return t==e.RedGhost||t==e.BlackGhost},e.prototype.getPokerValue=function(e){return[e%16,Math.floor(e/16)+1]},e.prototype.sortPokerArr=function(e){var t=this,o=c(e);return o.sort(function(e,o){var n=t.getPokerWeight(e),i=n[0],r=n[1],a=t.getPokerWeight(o),s=a[0],l=a[1];return i==s?l-r:s-i}),o},e.prototype.sortPokerArrByCount=function(e){var t=this,o=c(e),n=this.computeValueTimes(e)[0];return o.sort(function(e,o){var i=t.getPokerValue(e)[0],r=t.getPokerValue(o)[0];if(n[i]==n[r]){var a=t.getPokerWeight(e),s=a[0],l=a[1],c=t.getPokerWeight(o),d=c[0],h=c[1];return s==d?h-l:d-s}return n[r]-n[i]}),o},e.prototype.getPokerWeight=function(t){if(t==e.RedGhost)return[21,0];if(t==e.BlackGhost)return[20,0];var o=this.getPokerValue(t),n=o[0],i=n;return 2==n&&(i=15),[i,o[1]]},e.prototype.computeValueTimes=function(e){var t=this;void 0===e&&(e=[]);var o={};e.forEach(function(e){var n=t.getPokerValue(e)[0];o[n]?o[n]++:o[n]=1});var n=0;for(var i in o)o[i]>n&&(n=o[i]);var r=[];for(var i in o)o[i]==n&&r.push(i);return[o,n,r]},e.RedGhost=95,e.BlackGhost=79,e.pokerColorSprite=((n={})[l.Diamond]="puke_9",n[l.Club]="puke_8",n[l.Heart]="puke_6",n[l.Spade]="puke_7",n),e.pokerSmallColorSprite=((i={})[l.Diamond]="puke_5",i[l.Club]="puke_4",i[l.Heart]="puke_2",i[l.Spade]="puke_3",i),e.pokerNumProSpriteStr=((r={})[l.Diamond]="r_",r[l.Club]="b_",r[l.Heart]="r_",r[l.Spade]="b_",r),e.ghostColorSprite=((a={})[e.RedGhost]="puke_37",a[e.BlackGhost]="puke_36",a),e.ghostNumSprite=((s={})[e.RedGhost]="puke_39",s[e.BlackGhost]="puke_38",s),e.smallPokerBgCfg=["puke_57","puke_56"],e.bigPokerBgCfg=["puke_1","puke_55"],e}();o.default=d,cc._RF.pop()},{}],DdzPokerPool:[function(e,t,o){"use strict";cc._RF.push(t,"bbc3cTEDHhANrZENcqN/V/b","DdzPokerPool"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../subView/DdzPokerView"),i=e("../data/DdzPathHelper"),r=function(){function e(e){this.rootNode=e,this.pool=[],this.preCount=54,this.preCreate()}return e.prototype.preCreate=function(){var e=this,t=0,o=function(){for(var n=0;n<e.preCount/2;n++){var i=e.createItem();if(e.recycleItem(i),++t>=e.preCount){Game.Component.unschedule(o);break}}};Game.Component.schedule(o,0)},e.prototype.createItem=function(){var e=Global.ResourceManager.getGameBundleRes(i.default.gamePrefabsPath+"panel/subView/pokerPreNode",cc.Prefab),t=cc.instantiate(e);return t.setParent(this.rootNode),new n.default(t)},e.prototype.resetItem=function(e){e.active=!1,e.reset(),e.node.setParent(this.rootNode)},e.prototype.getItem=function(){return this.pool.length>0?this.pool.pop():this.createItem()},e.prototype.getItemArr=function(e){for(var t=[],o=0;o<e;o++){var n=this.getItem();t.push(n)}return t},e.prototype.recycleItem=function(e){this.resetItem(e),this.pool.push(e)},e.prototype.recycleAll=function(e){var t=this;e.forEach(function(e){t.recycleItem(e)})},e.prototype.resetPool=function(){this.pool=[]},e.GetPokerHuaseByValue=function(t){var o=e.POKER_VALUE.indexOf(t);if(o<0)return Logger.error("\u8ba1\u7b97\u82b1\u8272\u9519\u8bef\uff1a"+t),-1;var n=Math.floor(o/13);return n>=4?52==o?4:53==o?5:(Logger.error("\u8ba1\u7b97\u9b3c\u724c\u82b1\u8272\u9519\u8bef\uff1a"+t),-1):n},e.GetPokerNumByValue=function(t){var o=e.POKER_VALUE.indexOf(t);return o<0?(Logger.error("\u8ba1\u7b97\u9762\u503c\u9519\u8bef\uff1a"+t),-2):o>=52?-1:Math.floor(o%13)},e.POKER_VALUE=[14,2,3,4,5,6,7,8,9,10,11,12,13,30,18,19,20,21,22,23,24,25,26,27,28,29,46,34,35,36,37,38,39,40,41,42,43,44,45,62,50,51,52,53,54,55,56,57,58,59,60,61,79,95],e}();o.default=r,cc._RF.pop()},{"../data/DdzPathHelper":"DdzPathHelper","../subView/DdzPokerView":"DdzPokerView"}],DdzPokerTypeData:[function(e,t,o){"use strict";cc._RF.push(t,"bdacdwQXdVN35vo7hrwOaL5","DdzPokerTypeData"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./DdzPlayRule"),i=function(){function e(e,t,o){void 0===e&&(e=0),void 0===t&&(t=0),void 0===o&&(o=0),this.type=e,this.count=t,this.weight=o}return e.prototype.getData=function(){return[this.type,this.count,this.weight]},e.prototype.isDataValid=function(){return this.type>n.DdzPlayTypeDefine.DDZ_NONE},e}();o.default=i,cc._RF.pop()},{"./DdzPlayRule":"DdzPlayRule"}],DdzPokerView:[function(e,t,o){"use strict";cc._RF.push(t,"a8299ifoItMKKCQ3cogCFhA","DdzPokerView");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("./DdzBaseView"),a=e("../data/DdzPathHelper"),s=e("../data/DdzPokerHelper"),l=e("../tool/DdzPokerPool"),c=function(e){function t(t){var o=e.call(this)||this;return o.fixedPos=cc.Vec3.ZERO,o._scale=1,o._isSelect=!1,o.isDrag=!1,o._index=-1,o.huaseArrFang=["01","05","09","13","17","21","25","29","33","37","41","45","49"],o.huaseArrHei=["02","06","10","14","18","22","26","30","34","38","42","46","50"],o.huaseArrHong=["03","07","11","15","19","23","27","31","35","39","43","47","51"],o.huaseArrMei=["04","08","12","16","20","24","28","32","36","40","44","48","52"],o.Allhuase=[o.huaseArrFang,o.huaseArrMei,o.huaseArrHong,o.huaseArrHei],o.setNode(t),o}return i(t,e),t.prototype.initView=function(){this.frontSp=this.getComponent("front",cc.Sprite),this.backSp=this.getComponent("back",cc.Sprite),this.dzSignNode=this.getChild("front/dz"),this.dzSignNode.active=!1},Object.defineProperty(t.prototype,"nowIndex",{get:function(){return this._index},set:function(e){this._index=e},enumerable:!1,configurable:!0}),t.prototype.setPokerDealPos=function(){this.fixedPos=this.node.position},t.prototype.setPokerDealPosX=function(){this.fixedPos.x=this.node.position.x},t.prototype.setPokerPosition=function(e){this.node.setPosition(e)},Object.defineProperty(t.prototype,"isFront",{get:function(){return this._isFront},set:function(e){this._isFront=e,this.frontSp.node.active=e,this.backSp.node.active=!e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pokerValue",{get:function(){return this._value},set:function(e){if(this._value!=e){this._value=e;var t="texture/atlas/pokers/pokers";if(e){var o=l.default.GetPokerNumByValue(this.pokerValue),n=l.default.GetPokerHuaseByValue(this.pokerValue);-1==o?5==n?Global.ResourceManager.loadGameBundleAutoAtlas(this.frontSp,t,"puke_53",null,!0):4==n&&Global.ResourceManager.loadGameBundleAutoAtlas(this.frontSp,t,"puke_54",null,!0):Global.ResourceManager.loadGameBundleAutoAtlas(this.frontSp,t,"puke_"+this.Allhuase[n][o],null,!0)}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSelect",{get:function(){return this._isSelect},set:function(e){this._isSelect=e},enumerable:!1,configurable:!0}),t.prototype.setPokerScale=function(e){this._scale=e},t.prototype.updatePokerScale=function(){this.node.scale=this._scale},t.prototype.setPokerStyle=function(e){if(void 0===e&&(e=1),1==e){this.node.scale=this.Define.BigPokerScale;var t=s.default.bigPokerBgCfg;t[0],t[1]}else{this.node.scale=this.Define.SmallPokerScale;var o=s.default.smallPokerBgCfg;o[0],o[1]}},t.prototype.showPokerAnim=function(e,t,o,n){var i=this;void 0===t&&(t=1),void 0===o&&(o=0),void 0===n&&(n=!1),this.isFront=!1;var r=Game.Tween.get(this.node),a=this.node.scale;r.delay(o).to(.1*t,{scale:1.3*a},cc.easeCubicActionIn()).to(.2*t,{scaleX:0},cc.easeCubicActionIn()).call(function(){i.isFront=!0}).to(.35*t,{scaleX:1.3*a},cc.easeCubicActionOut()).delay(.25*t).to(.1,{scale:a},cc.easeCubicActionOut()).call(e).start()},t.prototype.showPokerEasyAnim=function(e,t,o,n){var i=this;void 0===t&&(t=1),void 0===o&&(o=0),void 0===n&&(n=!1),this.isFront=!1;var r=Game.Tween.get(this.node),a=this.node.scale;r.delay(o).to(.3*t,{scaleX:0},cc.easeCubicActionIn()).call(function(){i.isFront=!0}).to(.5*t,{scaleX:a},cc.easeCubicActionOut()).delay(.2*t).call(e).start()},t.prototype.doPokerMove=function(e,t,o,n,i,r,s){void 0===o&&(o=1),void 0===n&&(n=0),void 0===r&&(r=!1),void 0===s&&(s=cc.easeIn(1)),this.node.setPosition(e),Game.Tween.get(this.node).delay(n).call(function(){r&&Global.Audio.playGameBundleSound(a.DdzAudioConst.audioCommonPath+a.DdzAudioConst.DispatchPoker,!0)}).to(o,{position:t,scale:this._scale},s).call(i).start()},t.prototype.onSelect=function(e){void 0===e&&(e=!1),this.isSelect=!this.isSelect,this.isSelect?this.node.setPosition(cc.v2(this.fixedPos.x,this.fixedPos.y+this.Define.ChooseOffsetY)):this.node.setPosition(this.fixedPos)},t.prototype.resetSelect=function(){this.node.setPosition(this.fixedPos),this.isSelect=!1},t.prototype.setDragSign=function(e){this.isDrag!=e&&(this.isDrag=e,Global.UIHelper.setNodeGray(this.node,e))},t.prototype.setDzOwner=function(e){this.dzSignNode.active=e},t.prototype.getRawPos=function(){return this.fixedPos},t.prototype.getWorldPosition=function(){return this.node.parent.convertToWorldSpaceAR(this.node.position)},t.prototype.getPokerSize=function(){return[this.node.scaleX*this.node.width,this.node.scaleY*this.node.height]},t.prototype.checkIsTouch=function(e){return this.node.getBoundingBoxToWorld().contains(e)},t.prototype.checkPokerValid=function(){return this.node.activeInHierarchy&&this.node.active},t.prototype.reset=function(){this.isSelect=!1,this.isFront=!1,this.setDzOwner(!1),this.setDragSign(!1)},t}(r.default);o.default=c,cc._RF.pop()},{"../data/DdzPathHelper":"DdzPathHelper","../data/DdzPokerHelper":"DdzPokerHelper","../tool/DdzPokerPool":"DdzPokerPool","./DdzBaseView":"DdzBaseView"}],DdzReadyHandler:[function(e,t,o){"use strict";cc._RF.push(t,"92c11JHjbJPuZlrDtdkNNbH","DdzReadyHandler");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(e){this.context.isWaitMatch=!1,this.mainUI.matchPlayerView.active=!1;var t=1e3*e._timeo-(Date.now()-e._receiveTime);t>=1e3&&this.mainUI.showActionTimer(!0,0,t,null)},t.prototype.executeSync=function(e){this.execute(e)},t}(e("./DdzBaseHandler").default);o.default=r,cc._RF.pop()},{"./DdzBaseHandler":"DdzBaseHandler"}],DdzRecommendPlay:[function(e,t,o){"use strict";cc._RF.push(t,"49e15rYiI9PWoUIxKxYSbPc","DdzRecommendPlay");var n=this&&this.__generator||function(e,t){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return l([e,t])}}function l(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./DdzPokerTypeData"),r=e("./DdzTypeCheck"),a=e("./DdzPlayRule"),s=e("./DdzPokerCheck"),l=e("../data/DdzRuleConst"),c=e("../DdzDriver"),d=function(){function e(e,t){void 0===t&&(t=[]),this.onData=e,this.curArr=t,this.numMap={},this.rocketCatch={},this.bombCatchArr=[],this.typeCheckHelper=new r.default,this.initMap()}return e.prototype.initMap=function(){this.numMap=this.typeCheckHelper.computeValueTimes(this.curArr)[0],this.rocketCatch=this.getRocket(),this.bombCatchArr=this.getBombArr()},e.prototype.getRecommendPlayGen=function(){if(this.onData instanceof i.default){var e=this.onData.getData(),t=e[0],o=e[1],n=e[2];if(t==a.DdzPlayTypeDefine.DDZ_SINGLE)return this.createSingleGen(n);if(t==a.DdzPlayTypeDefine.DDZ_PAIR)return this.createPairGen(n);if(t==a.DdzPlayTypeDefine.DDZ_THREE_ZERO)return this.createThreeZeroGen(n);if(t==a.DdzPlayTypeDefine.DDZ_THREE_ONE)return this.createThreeOneGen(n);if(t==a.DdzPlayTypeDefine.DDZ_THREE_TWO)return this.createThreeTwoGen(n);if(t==a.DdzPlayTypeDefine.DDZ_STRAIGHT)return this.createStraightGen(n,o);if(t==a.DdzPlayTypeDefine.DDZ_LINK_PAIR)return this.createLinkPairGen(n,o);if(t==a.DdzPlayTypeDefine.DDZ_PLANE_ZERO)return this.createPlaneZeroGen(n,o);if(t==a.DdzPlayTypeDefine.DDZ_PLANE_ONE)return this.createPlaneOneGen(n,o);if(t==a.DdzPlayTypeDefine.DDZ_PLANE_TWO)return this.createPlaneTwoGen(n,o);if(t==a.DdzPlayTypeDefine.DDZ_FOUR_ONE)return this.createFourOneGen(n);if(t==a.DdzPlayTypeDefine.DDZ_FOUR_TWO)return this.createFourTwoGen(n);if(t==a.DdzPlayTypeDefine.DDZ_BOMB)return this.createBombGen(n);t==a.DdzPlayTypeDefine.DDZ_ROCKET||t==a.DdzPlayTypeDefine.DDZ_NONE&&console.error("\u524d\u7f6e\u51fa\u724c\u5f02\u5e38\uff01")}},e.prototype.createSingleGen=function(e){var t,o,i,r,a,l,c;return n(this,function(n){switch(n.label){case 0:t=this.typeCheckHelper.getOrderBiggerNumArrByCount(this.numMap,1),c=0,n.label=1;case 1:if(!(c<t.length))return[3,4];if(o=t[c],!(s.default.getPokerWeight(o)[0]>e))return[3,3];for(i={},r=0,a=0;a<this.curArr.length&&(l=this.curArr[a],s.default.getPokerValue(l)[0]==o&&(i[a]=l,r++),1!=r);a++);return[4,i];case 2:n.sent(),n.label=3;case 3:return c++,[3,1];case 4:if(!(this.bombCatchArr&&this.bombCatchArr.length>0))return[3,8];c=0,n.label=5;case 5:return c<this.bombCatchArr.length?[4,this.bombCatchArr[c]]:[3,8];case 6:n.sent(),n.label=7;case 7:return c++,[3,5];case 8:return!this.rocketCatch||Global.Toolkit.isEmptyObject(this.rocketCatch)?[3,10]:[4,this.rocketCatch];case 9:n.sent(),n.label=10;case 10:return[2,-1]}})},e.prototype.createPairGen=function(e){var t,o,i,r,a,l,c;return n(this,function(n){switch(n.label){case 0:t=this.typeCheckHelper.getOrderBiggerNumArrByCount(this.numMap,2),c=0,n.label=1;case 1:if(!(c<t.length))return[3,4];if(o=t[c],!(s.default.getPokerWeight(o)[0]>e))return[3,3];for(i={},r=0,a=0;a<this.curArr.length&&(l=this.curArr[a],s.default.getPokerValue(l)[0]==o&&(i[a]=l,r++),2!=r);a++);return[4,i];case 2:n.sent(),n.label=3;case 3:return c++,[3,1];case 4:if(!(this.bombCatchArr&&this.bombCatchArr.length>0))return[3,8];c=0,n.label=5;case 5:return c<this.bombCatchArr.length?[4,this.bombCatchArr[c]]:[3,8];case 6:n.sent(),n.label=7;case 7:return c++,[3,5];case 8:return!this.rocketCatch||Global.Toolkit.isEmptyObject(this.rocketCatch)?[3,10]:[4,this.rocketCatch];case 9:n.sent(),n.label=10;case 10:return[2,-1]}})},e.prototype.createThreeZeroGen=function(e){var t,o,i,r,a,l,c;return n(this,function(n){switch(n.label){case 0:t=this.typeCheckHelper.getOrderBiggerNumArrByCount(this.numMap,3),c=0,n.label=1;case 1:if(!(c<t.length))return[3,4];if(o=t[c],!(s.default.getPokerWeight(o)[0]>e))return[3,3];for(i={},r=0,a=0;a<this.curArr.length&&(l=this.curArr[a],s.default.getPokerValue(l)[0]==o&&(i[a]=l,r++),3!=r);a++);return[4,i];case 2:n.sent(),n.label=3;case 3:return c++,[3,1];case 4:if(!(this.bombCatchArr&&this.bombCatchArr.length>0))return[3,8];c=0,n.label=5;case 5:return c<this.bombCatchArr.length?[4,this.bombCatchArr[c]]:[3,8];case 6:n.sent(),n.label=7;case 7:return c++,[3,5];case 8:return!this.rocketCatch||Global.Toolkit.isEmptyObject(this.rocketCatch)?[3,10]:[4,this.rocketCatch];case 9:n.sent(),n.label=10;case 10:return[2,-1]}})},e.prototype.createThreeOneGen=function(e){var t,o,i,r,a,l,c,d,h,u;return n(this,function(n){switch(n.label){case 0:t=this.typeCheckHelper.getOrderBiggerNumArrByCount(this.numMap,3),u=0,n.label=1;case 1:if(!(u<t.length))return[3,4];if(o=t[u],!(s.default.getPokerWeight(o)[0]>e))return[3,3];for(i={},r=0,a={},l=0;l<this.curArr.length&&(c=this.curArr[l],s.default.getPokerValue(c)[0]==o&&(i[l]=c,a[c]=1,r++),3!=r);l++);if(!(d=this.getExtraWing(1,1,a))||Global.Toolkit.isEmptyObject(d))return[3,3];for(h in d)i[h]=d[h];return[4,i];case 2:n.sent(),n.label=3;case 3:return u++,[3,1];case 4:if(!(this.bombCatchArr&&this.bombCatchArr.length>0))return[3,8];u=0,n.label=5;case 5:return u<this.bombCatchArr.length?[4,this.bombCatchArr[u]]:[3,8];case 6:n.sent(),n.label=7;case 7:return u++,[3,5];case 8:return!this.rocketCatch||Global.Toolkit.isEmptyObject(this.rocketCatch)?[3,10]:[4,this.rocketCatch];case 9:n.sent(),n.label=10;case 10:return[2,-1]}})},e.prototype.createThreeTwoGen=function(e){var t,o,i,r,a,l,c,d,h,u;return n(this,function(n){switch(n.label){case 0:t=this.typeCheckHelper.getOrderBiggerNumArrByCount(this.numMap,3),u=0,n.label=1;case 1:if(!(u<t.length))return[3,4];if(o=t[u],!(s.default.getPokerWeight(o)[0]>e))return[3,3];for(i={},r=0,a={},l=0;l<this.curArr.length&&(c=this.curArr[l],s.default.getPokerValue(c)[0]==o&&(i[l]=c,a[c]=1,r++),3!=r);l++);if(!(d=this.getExtraWing(2,1,a))||Global.Toolkit.isEmptyObject(d))return[3,3];for(h in d)i[h]=d[h];return[4,i];case 2:n.sent(),n.label=3;case 3:return u++,[3,1];case 4:if(!(this.bombCatchArr&&this.bombCatchArr.length>0))return[3,8];u=0,n.label=5;case 5:return u<this.bombCatchArr.length?[4,this.bombCatchArr[u]]:[3,8];case 6:n.sent(),n.label=7;case 7:return u++,[3,5];case 8:return!this.rocketCatch||Global.Toolkit.isEmptyObject(this.rocketCatch)?[3,10]:[4,this.rocketCatch];case 9:n.sent(),n.label=10;case 10:return[2,-1]}})},e.prototype.createStraightGen=function(e,t){var o,i,r,a,d,h,u,p,f,m,y;return n(this,function(n){switch(n.label){case 0:if(c.default.instance.Context.mode==l.DdzMode.Normal&&t<5||c.default.instance.Context.mode==l.DdzMode.Quick&&t<3)return[2,-1];o=this.typeCheckHelper.getOrderBiggerNumArr(this.numMap,1),i=e-t+1,y=0,n.label=1;case 1:if(!(y<o.length))return[3,4];if(r=o[y],!((a=s.default.getPokerWeight(r)[0])>i))return[3,3];if(d=a+t-1,h=o[y+t-1],!(d<=14&&h))return[3,3];if(s.default.getPokerWeight(h)[0]!=d)return[3,3];for(u={},p=0;p<t;p++)for(f=0;f<this.curArr.length;f++)if(m=this.curArr[f],s.default.getPokerValue(m)[0]==o[y+p]){u[f]=m;break}return[4,u];case 2:n.sent(),n.label=3;case 3:return y++,[3,1];case 4:if(!(this.bombCatchArr&&this.bombCatchArr.length>0))return[3,8];y=0,n.label=5;case 5:return y<this.bombCatchArr.length?[4,this.bombCatchArr[y]]:[3,8];case 6:n.sent(),n.label=7;case 7:return y++,[3,5];case 8:return!this.rocketCatch||Global.Toolkit.isEmptyObject(this.rocketCatch)?[3,10]:[4,this.rocketCatch];case 9:n.sent(),n.label=10;case 10:return[2,-1]}})},e.prototype.createLinkPairGen=function(e,t){var o,i,r,a,d,h,u,p,f,m,y,D;return n(this,function(n){switch(n.label){case 0:if(c.default.instance.Context.mode==l.DdzMode.Normal&&t<3||c.default.instance.Context.mode==l.DdzMode.Quick&&t<2)return[2,-1];o=this.typeCheckHelper.getOrderBiggerNumArr(this.numMap,2),i=e-t+1,D=0,n.label=1;case 1:if(!(D<o.length))return[3,4];if(r=o[D],!((a=s.default.getPokerWeight(r)[0])>i))return[3,3];if(d=a+t-1,h=o[D+t-1],!(d<=14&&h))return[3,3];if(s.default.getPokerWeight(h)[0]!=d)return[3,3];for(u={},p=0;p<t;p++)for(f=0,m=0;m<this.curArr.length&&(y=this.curArr[m],s.default.getPokerValue(y)[0]==o[D+p]&&(u[m]=y,f++),2!=f);m++);return[4,u];case 2:n.sent(),n.label=3;case 3:return D++,[3,1];case 4:if(!(this.bombCatchArr&&this.bombCatchArr.length>0))return[3,8];D=0,n.label=5;case 5:return D<this.bombCatchArr.length?[4,this.bombCatchArr[D]]:[3,8];case 6:n.sent(),n.label=7;case 7:return D++,[3,5];case 8:return!this.rocketCatch||Global.Toolkit.isEmptyObject(this.rocketCatch)?[3,10]:[4,this.rocketCatch];case 9:n.sent(),n.label=10;case 10:return[2,-1]}})},e.prototype.createPlaneZeroGen=function(e,t){var o,i,r,a,l,c,d,h,u,p,f,m;return n(this,function(n){switch(n.label){case 0:if(t<2)return[2,-1];o=this.typeCheckHelper.getOrderBiggerNumArr(this.numMap,3),i=e-t+1,m=0,n.label=1;case 1:if(!(m<o.length))return[3,4];if(r=o[m],!((a=s.default.getPokerWeight(r)[0])>i))return[3,3];if(l=a+t-1,c=o[m+t-1],!(l<=14&&c))return[3,3];if(s.default.getPokerWeight(c)[0]!=l)return[3,3];for(d={},h=0;h<t;h++)for(u=0,p=0;p<this.curArr.length&&(f=this.curArr[p],s.default.getPokerValue(f)[0]==o[m+h]&&(d[p]=f,u++),3!=u);p++);return[4,d];case 2:n.sent(),n.label=3;case 3:return m++,[3,1];case 4:if(!(this.bombCatchArr&&this.bombCatchArr.length>0))return[3,8];m=0,n.label=5;case 5:return m<this.bombCatchArr.length?[4,this.bombCatchArr[m]]:[3,8];case 6:n.sent(),n.label=7;case 7:return m++,[3,5];case 8:return!this.rocketCatch||Global.Toolkit.isEmptyObject(this.rocketCatch)?[3,10]:[4,this.rocketCatch];case 9:n.sent(),n.label=10;case 10:return[2,-1]}})},e.prototype.createPlaneOneGen=function(e,t){var o,i,r,a,l,c,d,h,u,p,f,m,y,D,P;return n(this,function(n){switch(n.label){case 0:if(t<2)return[2,-1];o=this.typeCheckHelper.getOrderBiggerNumArr(this.numMap,3),i=e-t+1,P=0,n.label=1;case 1:if(!(P<o.length))return[3,4];if(r=o[P],!((a=s.default.getPokerWeight(r)[0])>i))return[3,3];if(l=a+t-1,c=o[P+t-1],!(l<=14&&c))return[3,3];if(s.default.getPokerWeight(c)[0]!=l)return[3,3];for(d={},h={},u=0;u<t;u++)for(p=0,f=0;f<this.curArr.length&&(m=this.curArr[f],s.default.getPokerValue(m)[0]==o[P+u]&&(d[f]=m,h[m]=1,p++),3!=p);f++);if(!(y=this.getExtraWing(1,t,h))||Global.Toolkit.isEmptyObject(y))return[3,3];for(D in y)d[D]=y[D];return[4,d];case 2:n.sent(),n.label=3;case 3:return P++,[3,1];case 4:if(!(this.bombCatchArr&&this.bombCatchArr.length>0))return[3,8];P=0,n.label=5;case 5:return P<this.bombCatchArr.length?[4,this.bombCatchArr[P]]:[3,8];case 6:n.sent(),n.label=7;case 7:return P++,[3,5];case 8:return!this.rocketCatch||Global.Toolkit.isEmptyObject(this.rocketCatch)?[3,10]:[4,this.rocketCatch];case 9:n.sent(),n.label=10;case 10:return[2,-1]}})},e.prototype.createPlaneTwoGen=function(e,t){var o,i,r,a,l,c,d,h,u,p,f,m,y,D,P;return n(this,function(n){switch(n.label){case 0:if(t<2)return[2,-1];o=this.typeCheckHelper.getOrderBiggerNumArr(this.numMap,3),i=e-t+1,P=0,n.label=1;case 1:if(!(P<o.length))return[3,4];if(r=o[P],!((a=s.default.getPokerWeight(r)[0])>i))return[3,3];if(l=a+t-1,c=o[P+t-1],!(l<=14&&c))return[3,3];if(s.default.getPokerWeight(c)[0]!=l)return[3,3];for(d={},h={},u=0;u<t;u++)for(p=0,f=0;f<this.curArr.length&&(m=this.curArr[f],s.default.getPokerValue(m)[0]==o[P+u]&&(d[f]=m,h[m]=1,p++),3!=p);f++);if(!(y=this.getExtraWing(2,t,h))||Global.Toolkit.isEmptyObject(y))return[3,3];for(D in y)d[D]=y[D];return[4,d];case 2:n.sent(),n.label=3;case 3:return P++,[3,1];case 4:if(!(this.bombCatchArr&&this.bombCatchArr.length>0))return[3,8];P=0,n.label=5;case 5:return P<this.bombCatchArr.length?[4,this.bombCatchArr[P]]:[3,8];case 6:n.sent(),n.label=7;case 7:return P++,[3,5];case 8:return!this.rocketCatch||Global.Toolkit.isEmptyObject(this.rocketCatch)?[3,10]:[4,this.rocketCatch];case 9:n.sent(),n.label=10;case 10:return[2,-1]}})},e.prototype.createFourOneGen=function(e){var t,o,i,r,a,l,c,d,h;return n(this,function(n){switch(n.label){case 0:t=this.typeCheckHelper.getOrderBiggerNumArrByCount(this.numMap,4),h=0,n.label=1;case 1:if(!(h<t.length))return[3,4];if(o=t[h],!(s.default.getPokerWeight(o)[0]>e))return[3,3];for(i={},r=0,a=0;a<this.curArr.length&&(l=this.curArr[a],s.default.getPokerValue(l)[0]==o&&(i[a]=l,r++),4!=r);a++);if(!(c=this.getExtraWing(1,2,{}))||Global.Toolkit.isEmptyObject(c))return[3,3];for(d in c)i[d]=c[d];return[4,i];case 2:n.sent(),n.label=3;case 3:return h++,[3,1];case 4:if(!(this.bombCatchArr&&this.bombCatchArr.length>0))return[3,8];h=0,n.label=5;case 5:return h<this.bombCatchArr.length?[4,this.bombCatchArr[h]]:[3,8];case 6:n.sent(),n.label=7;case 7:return h++,[3,5];case 8:return!this.rocketCatch||Global.Toolkit.isEmptyObject(this.rocketCatch)?[3,10]:[4,this.rocketCatch];case 9:n.sent(),n.label=10;case 10:return[2,-1]}})},e.prototype.createFourTwoGen=function(e){var t,o,i,r,a,l,c,d,h;return n(this,function(n){switch(n.label){case 0:t=this.typeCheckHelper.getOrderBiggerNumArrByCount(this.numMap,4),h=0,n.label=1;case 1:if(!(h<t.length))return[3,4];if(o=t[h],!(s.default.getPokerWeight(o)[0]>e))return[3,3];for(i={},r=0,a=0;a<this.curArr.length&&(l=this.curArr[a],s.default.getPokerValue(l)[0]==o&&(i[a]=l,r++),4!=r);a++);if(!(c=this.getExtraWing(2,2,{}))||Global.Toolkit.isEmptyObject(c))return[3,3];for(d in c)i[d]=c[d];return[4,i];case 2:n.sent(),n.label=3;case 3:return h++,[3,1];case 4:if(!(this.bombCatchArr&&this.bombCatchArr.length>0))return[3,8];h=0,n.label=5;case 5:return h<this.bombCatchArr.length?[4,this.bombCatchArr[h]]:[3,8];case 6:n.sent(),n.label=7;case 7:return h++,[3,5];case 8:return!this.rocketCatch||Global.Toolkit.isEmptyObject(this.rocketCatch)?[3,10]:[4,this.rocketCatch];case 9:n.sent(),n.label=10;case 10:return[2,-1]}})},e.prototype.createBombGen=function(e){var t,o,i,r,a,l,c;return n(this,function(n){switch(n.label){case 0:t=this.typeCheckHelper.getOrderBiggerNumArrByCount(this.numMap,4),o=0,n.label=1;case 1:if(!(o<t.length))return[3,4];if(i=t[o],!(s.default.getPokerWeight(i)[0]>e))return[3,3];for(r={},a=0,l=0;l<this.curArr.length&&(c=this.curArr[l],s.default.getPokerValue(c)[0]==i&&(r[l]=c,a++),4!=a);l++);return[4,r];case 2:n.sent(),n.label=3;case 3:return o++,[3,1];case 4:return!this.rocketCatch||Global.Toolkit.isEmptyObject(this.rocketCatch)?[3,6]:[4,this.rocketCatch];case 5:n.sent(),n.label=6;case 6:return[2,-1]}})},e.prototype.getRocket=function(){var e=0,t={};return this.curArr.forEach(function(o,n){s.default.checkIsGhost(o)&&(t[n]=o,e++)}),2==e?t:{}},e.prototype.getBombArr=function(){for(var e=[],t=this.typeCheckHelper.getOrderBiggerNumArrByCount(this.numMap,4),o=0;o<t.length;o++){for(var n=t[o],i={},r=0;r<this.curArr.length;r++){var a=this.curArr[r];s.default.getPokerValue(a)[0]==n&&(i[r]=a)}e.push(i)}return e},e.prototype.getExtraWing=function(e,t,o){if(1!=e&&2!=e)return{};var n={},i={},r=0,a=Global.Toolkit.copyObj(this.numMap);for(var l in o)a[u=s.default.getPokerValue(Number(l))[0]]&&a[u]--;for(var c=this.typeCheckHelper.getOrderBiggerNumArrByCount(a,e),d=0;d<t;d++)for(var h=0;h<c.length;h++){for(var u=c[h],p=0,f=0;f<this.curArr.length;f++){var m=this.curArr[f];if(s.default.getPokerValue(m)[0]!=u||i[m]||o[m]||(i[m]=1,n[f]=m,p++),p==e){r++;break}}if(p==e)break}return r==t?n:{}},e}();o.default=d,cc._RF.pop()},{"../DdzDriver":"DdzDriver","../data/DdzRuleConst":"DdzRuleConst","./DdzPlayRule":"DdzPlayRule","./DdzPokerCheck":"DdzPokerCheck","./DdzPokerTypeData":"DdzPokerTypeData","./DdzTypeCheck":"DdzTypeCheck"}],DdzRefreshHandPokerHandler:[function(e,t,o){"use strict";cc._RF.push(t,"2d1faQa94lPiaJ0kJrQS+N0","DdzRefreshHandPokerHandler");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(e){0==this.SitHelper.serverSToLocalN(e._src)&&this.context.refreshHandPokers(e._para.cards)},t.prototype.executeSync=function(e){this.execute(e)},t}(e("./DdzBaseHandler").default);o.default=r,cc._RF.pop()},{"./DdzBaseHandler":"DdzBaseHandler"}],DdzRewardHandler:[function(e,t,o){"use strict";cc._RF.push(t,"0ec66nynf5HcIK+nJRCou+A","DdzRewardHandler");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("../DdzDriver"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(e){Global.Audio.stopMusic(),this.context.set(this.Define.FieldInSettle,!0);var t=(1e3*e._timeo-(Date.now()-e._receiveTime))/1e3;(!t||t<=this.Define.PlayRoleWinTime+this.Define.FloatScoreTime)&&(t=this.Define.PlayRoleWinTime+this.Define.FloatScoreTime+1),this.mainUI.playAwardAnim(e._para.awards,e._para.details),this.context.syncMode&&r.default.instance.mainUI.taskManager.reqGetCommisionInfo()},t.prototype.executeSync=function(e){this.execute(e)},t}(e("./DdzBaseHandler").default);o.default=a,cc._RF.pop()},{"../DdzDriver":"DdzDriver","./DdzBaseHandler":"DdzBaseHandler"}],DdzRoleView:[function(e,t,o){"use strict";cc._RF.push(t,"ef787hmdkFD4r90+70/cpau","DdzRoleView");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.DdzRoleDefine=void 0;var r,a=e("./DdzBaseView"),s=e("../DdzDriver");(function(e){e[e.FLandord=1]="FLandord",e[e.FFramer=2]="FFramer"})(r=o.DdzRoleDefine||(o.DdzRoleDefine={}));var l=function(e){function t(t){var o=e.call(this)||this;return o.nCurRole=0,o.setNode(t),o}return i(t,e),t.prototype.initView=function(){this.farmerSk=this.getComponent("farmer",sp.Skeleton),this.farmerSk.node.active=!1,this.landlordSk=this.getComponent("landlord",sp.Skeleton),this.landlordSk.node.active=!1,this.switchSk=this.getComponent("switch",sp.Skeleton),this.switchSk.node.active=!1},t.prototype.showRole=function(e,t){void 0===t&&(t=0),s.default.instance.skinDefine.useRole&&(e?(t==r.FLandord?(this.farmerSk.node.active=!1,this.landlordSk.node.active=!0):t==r.FFramer&&(this.farmerSk.node.active=!0,this.landlordSk.node.active=!1),this.nCurRole=t,this.playRoleNormalEffect()):(this.farmerSk.node.active=!1,this.landlordSk.node.active=!1))},t.prototype.switchRole=function(){var e=this;s.default.instance.skinDefine.useRole&&(this.showRole(!1),this.switchSk.node.active=!0,this.switchSk.setAnimation(0,"idle",!1),Game.Component.scheduleOnce(function(){e.switchSk.node.active=!1,e.showRole(!0,1)},.3))},t.prototype.playRoleEffect=function(e,o,n){void 0===o&&(o=!0),void 0===n&&(n=1),s.default.instance.skinDefine.useRole&&(this.nCurRole==r.FLandord?(this.landlordSk.setAnimation(0,e,o),o||this.landlordSk.addAnimation(0,t.RoleAct.Normal,!0,n)):this.nCurRole==r.FFramer&&(this.farmerSk.setAnimation(0,e,o),o||this.farmerSk.addAnimation(0,t.RoleAct.Normal,!0,n)))},t.prototype.playRoleNormalEffect=function(){s.default.instance.skinDefine.useRole&&(this.nCurRole==r.FLandord?this.landlordSk.setAnimation(0,t.RoleAct.Normal,!0):this.nCurRole==r.FFramer&&this.farmerSk.setAnimation(0,t.RoleAct.Normal,!0))},t.prototype.playRoleThinkEffect=function(){s.default.instance.skinDefine.useRole&&(this.nCurRole==r.FLandord?this.landlordSk.setAnimation(0,t.RoleAct.Think,!0):this.nCurRole==r.FFramer&&this.farmerSk.setAnimation(0,t.RoleAct.Think,!0))},t.prototype.playRoleSettleEffect=function(e){if(s.default.instance.skinDefine.useRole){var o=e&&t.RoleAct.Win||t.RoleAct.Lose;this.nCurRole==r.FLandord?this.landlordSk.setAnimation(0,o,!0):this.nCurRole==r.FFramer&&this.farmerSk.setAnimation(0,o,!0)}},t.prototype.playRoleOutPokersEffect=function(e){s.default.instance.skinDefine.useRole&&(this.nCurRole==r.FLandord?(this.landlordSk.setAnimation(0,t.RoleAct.Play,!1),e?(this.landlordSk.addAnimation(0,t.RoleAct.Win,!1,1),this.landlordSk.addAnimation(0,t.RoleAct.Normal,!0,1)):this.landlordSk.addAnimation(0,t.RoleAct.Normal,!0,1)):this.nCurRole==r.FFramer&&(this.farmerSk.setAnimation(0,t.RoleAct.Play,!1),e?(this.farmerSk.addAnimation(0,t.RoleAct.Win,!1,1),this.farmerSk.addAnimation(0,t.RoleAct.Normal,!0,1)):this.farmerSk.addAnimation(0,t.RoleAct.Normal,!0,1)))},t.RoleAct={Normal:"idle",Play:"idle_chupai",Win:"idle_win",Lose:"idle_shibai",Think:"idle_sikao"},t}(a.default);o.default=l,cc._RF.pop()},{"../DdzDriver":"DdzDriver","./DdzBaseView":"DdzBaseView"}],DdzRuleConst:[function(e,t,o){"use strict";var n,i,r,a,s;cc._RF.push(t,"d02d59TdPZBqq83dE4imPWL","DdzRuleConst"),Object.defineProperty(o,"__esModule",{value:!0}),o.DdzMode=o.DdzTypeDefine=void 0,function(e){e[e.DDZ_SINGLE=1]="DDZ_SINGLE",e[e.DDZ_PAIR=2]="DDZ_PAIR",e[e.DDZ_THREE_ZERO=3]="DDZ_THREE_ZERO",e[e.DDZ_THREE_ONE=4]="DDZ_THREE_ONE",e[e.DDZ_THREE_TWO=5]="DDZ_THREE_TWO",e[e.DDZ_STRAIGHT=6]="DDZ_STRAIGHT",e[e.DDZ_LINK_PAIR=7]="DDZ_LINK_PAIR",e[e.DDZ_PLANE_ZERO=8]="DDZ_PLANE_ZERO",e[e.DDZ_PLANE_ONE=9]="DDZ_PLANE_ONE",e[e.DDZ_PLANE_TWO=10]="DDZ_PLANE_TWO",e[e.DDZ_FOUR_ONE=11]="DDZ_FOUR_ONE",e[e.DDZ_FOUR_TWO=12]="DDZ_FOUR_TWO",e[e.DDZ_BOMB=13]="DDZ_BOMB",e[e.DDZ_ROCKET=14]="DDZ_ROCKET"}(a=o.DdzTypeDefine||(o.DdzTypeDefine={})),function(e){e[e.Normal=0]="Normal",e[e.Quick=1]="Quick"}(s=o.DdzMode||(o.DdzMode={}));var l=function(){function e(){}return e.checkIsPlane=function(e){return e==a.DDZ_PLANE_ZERO||e==a.DDZ_PLANE_ONE||e==a.DDZ_PLANE_TWO},e.checkIsRocket=function(e){return e==a.DDZ_ROCKET},e.checkIsBomb=function(e){return e==a.DDZ_BOMB},e.checkIsLinkPair=function(e){return e==a.DDZ_LINK_PAIR},e.checkIsStraight=function(e){return e==a.DDZ_STRAIGHT},e.getPlayTypeSoundRes=function(t,o){var n;return t==a.DDZ_SINGLE?(n=e.SingleSoundCfg[o])[Global.Toolkit.getRoundInteger(n.length)]:t==a.DDZ_PAIR?(n=e.PairSoundCfg[o])[Global.Toolkit.getRoundInteger(n.length)]:t==a.DDZ_THREE_ZERO?(n=e.ThreeSoundCfg[o])[Global.Toolkit.getRoundInteger(n.length)]:(n=e.cardTypeSound[t])[Global.Toolkit.getRoundInteger(n.length)]},e.getPassSoundRes=function(t){return t==a.DDZ_SINGLE?e.NotPlayPokerArr[0]:t==a.DDZ_PAIR?e.NotPlayPokerArr[1]:e.NotPlayPokerArr[2]},e.cardTypeStr=((n={})[a.DDZ_SINGLE]="\u5355\u724c",n[a.DDZ_PAIR]="\u5bf9\u5b50",n[a.DDZ_THREE_ZERO]="\u4e09\u6761",n[a.DDZ_THREE_ONE]="\u4e09\u5e26\u4e00",n[a.DDZ_THREE_TWO]="\u4e09\u5e26\u4e8c",n[a.DDZ_STRAIGHT]="\u987a\u5b50",n[a.DDZ_LINK_PAIR]="\u8fde\u5bf9",n[a.DDZ_PLANE_ZERO]="\u98de\u673a",n[a.DDZ_PLANE_ONE]="\u98de\u673a\u5e26\u5355\u7fc5\u8180",n[a.DDZ_PLANE_TWO]="\u98de\u673a\u5e26\u53cc\u7fc5\u8180",n[a.DDZ_FOUR_ONE]="\u56db\u5e26\u4e24\u5355",n[a.DDZ_FOUR_TWO]="\u56db\u5e26\u4e24\u5bf9",n[a.DDZ_BOMB]="\u70b8\u5f39",n[a.DDZ_ROCKET]="\u706b\u7bad",n),e.cardTypeSound=((i={})[a.DDZ_THREE_ZERO]=[""],i[a.DDZ_THREE_ONE]=["type7"],i[a.DDZ_THREE_TWO]=["type8"],i[a.DDZ_STRAIGHT]=["type4"],i[a.DDZ_LINK_PAIR]=["type5"],i[a.DDZ_PLANE_ZERO]=["type6"],i[a.DDZ_PLANE_ONE]=["type6"],i[a.DDZ_PLANE_TWO]=["type6"],i[a.DDZ_FOUR_ONE]=["type9"],i[a.DDZ_FOUR_TWO]=["type13"],i[a.DDZ_BOMB]=["type11"],i[a.DDZ_ROCKET]=["type12"],i),e.PlaneSoundArr=["common_plane"],e.BombSoundArr=["common_bomb"],e.RocketSoundArr=["huojian"],e.StraightSoundArr=["shunzi"],e.LinkPairSoundArr=["liandui"],e.NotPlayPokerArr=["pass1","pass0","pass3"],e.SingleSoundCfg={16:["2"],3:["3"],4:["4"],5:["5"],6:["6"],7:["7"],8:["8"],9:["9"],10:["10"],11:["11"],12:["12"],13:["13"],14:["1"],79:["14"],95:["15"]},e.PairSoundCfg={16:["type2_2"],3:["type2_3"],4:["type2_4"],5:["type2_5"],6:["type2_6"],7:["type2_7"],8:["type2_8"],9:["type2_9"],10:["type2_10"],11:["type2_11"],12:["type2_12"],13:["type2_13"],14:["type2_1"]},e.ThreeSoundCfg={16:["type3_2"],3:["type3_3"],4:["type3_4"],5:["type3_5"],6:["type3_6"],7:["type3_7"],8:["type3_8"],9:["type3_9"],10:["type3_10"],11:["type3_11"],12:["type3_12"],13:["type3_13"],14:["type3_1"]},e.ModeConfig=((r={})[s.Normal]={totalCount:54,baseCount:17,leftCount:3},r[s.Quick]={totalCount:42,baseCount:13,leftCount:3},r),e}();o.default=l,cc._RF.pop()},{}],DdzSelfInfoView:[function(e,t,o){"use strict";cc._RF.push(t,"03c7euicuZNKbg0friNWWOo","DdzSelfInfoView");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("./DdzBaseView"),a=e("../DdzDriver"),s=function(e){function t(t){var o=e.call(this)||this;return o.setNode(t),o}return i(t,e),t.prototype.initView=function(){this.nameLbl=this.getComponent("nameNode/nameLbl",cc.Label),this.idLbl=this.getComponent("nameNode/idLbl",cc.Label),this.headImg=this.getComponent("nameNode/mask/headImg",cc.Sprite),this.headBox=this.getComponent("nameNode/headBox",cc.Sprite),this.coinLbl=this.getComponent("coinNode/coinLbl",cc.Label),this.vip=this.getComponent("nameNode/vip",cc.Sprite)},t.prototype.updateSelfInfo=function(){var e=Global.PlayerData;this.headBox&&a.default.instance.LoadVipHeadKuang(this.headBox,e.headkuang),this.loadHeadImg(e.headimg),this.nameLbl.string=e.nickname,this.idLbl.string="ID:"+e.uid,this.coinLbl.string=Global.Toolkit.formatPointStr(e.point,!0),this.vip&&Global.Toolkit.loadLocalVipIconGame(this.vip,e.vip)},t.prototype.loadHeadImg=function(e){this.headImg.spriteFrame=Global.Toolkit.getLocalHeadSf(e)},t.prototype.updateSelfPoint=function(e){this.coinLbl.string=Global.Toolkit.formatPointStr(e,!0)},t}(r.default);o.default=s,cc._RF.pop()},{"../DdzDriver":"DdzDriver","./DdzBaseView":"DdzBaseView"}],DdzSelfPlayView:[function(e,t,o){"use strict";cc._RF.push(t,"9dd414xYh5ItroUDcog/2Rd","DdzSelfPlayView");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.DdzSelfPlayView=void 0;var r=e("./DdzBaseView"),a=e("../data/DdzPathHelper"),s=e("../data/DdzRuleConst"),l=e("../DdzDriver"),c=e("../data/DdzGameConst"),d=function(e){function t(t){var o=e.call(this)||this;return o.offsetX=-87.5,o.targetPokerList=[],o.validPokers=[],o.pokerValueList=[],o.pokerHandList=[],o.handSpaceX=45,o.PokerPool=l.default.instance.PokerPool,o.setNode(t),o}return i(t,e),Object.defineProperty(t.prototype,"validPokersCount",{get:function(){return this.validPokers.length},enumerable:!1,configurable:!0}),t.prototype.initView=function(){var t=this;e.prototype.initView.call(this),this.touchLayer=this.getChild("touchLayer"),this.touchLayer.width=cc.Canvas.instance.node.width,c.default.addCommonClick(this.touchLayer,"",function(){Global.Audio.playGameBundleSound(a.DdzAudioConst.audioCommonPath+a.DdzAudioConst.CancelSelect,!0),t.resetPokers(),l.default.instance.PlayRuleHelper.resetRecommendGen()},this),this.handPokerNode=this.getChild("handPoker"),this.initPokerHand(),this.initChooseFunction()},t.prototype.initPokerHand=function(){for(var e=this.PokerPool.getItemArr(20),t=this.getIndexPosArr(20),o=0;o<20;o++){var n=t[o],i=e[o];i.node.setParent(this.handPokerNode),i.setPokerPosition(n),i.active=!1,this.pokerHandList.push(i)}},t.prototype.initChooseFunction=function(){var e;this.pokerHandList.length<=0||(e=this.pokerHandList[0].getPokerSize(),this.maxWidth=e[0],this.maxHeight=e[1],this.handPokerNode.height=this.maxHeight+this.Define.ChooseOffsetY,this.setValidPokers())},t.prototype.readyForChoose=function(e){e?(this.handPokerNode.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.handPokerNode.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.handPokerNode.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.handPokerNode.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEnd,this)):this.handPokerNode.targetOff(this)},t.prototype.getIndexPosArr=function(e,t){void 0===t&&(t=!1);for(var o=[],n=0;n<e;n++){var i=cc.v2((n-Math.ceil(e/2-1))*this.handSpaceX,0);t&&(i=this.handPokerNode.convertToWorldSpaceAR(i)),o.push(i)}return o},t.prototype.layoutHandPokers=function(){this.setValidPokers();for(var e=this.validPokers.length,t=this.getIndexPosArr(e),o=0;o<this.validPokers.length;o++){var n=this.validPokers[o];n.setPokerPosition(t[o]),n.setPokerDealPosX(),n.nowIndex=o}},t.prototype.setGroupPokersValue=function(e){void 0===e&&(e=[]),this.pokerValueList=this.PokerHelper.sortPokerArr(e)},t.prototype.showDealPokerIndex=function(e,t){var o=this.getIndexPosArr(t);this.pokerHandList[e].active=!0,this.pokerHandList[e].isFront=!0,this.pokerHandList[e].setPokerPosition(o[e]),this.pokerHandList[e].setPokerDealPos(),this.pokerValueList[e]&&(this.pokerHandList[e].pokerValue=this.pokerValueList[e])},t.prototype.showLandlordPoker=function(e){var t=this;void 0===e&&(e=[]),this.pokerValueList=this.PokerHelper.sortPokerArr(this.pokerValueList.concat(e));var o=s.default.ModeConfig[this.Context.mode],n=o.baseCount+o.leftCount;this.resetPokers();for(var i=this.getIndexPosArr(n),r=0;r<this.pokerHandList.length;r++)if(r<n){var a=this.pokerHandList[r],l=this.pokerValueList[r];if(a.active=!0,a.isFront=!0,a.pokerValue=l,a.setPokerPosition(i[r]),a.setPokerDealPos(),e.indexOf(l)>-1){var c=a.node.position;a.doPokerMove(c,cc.v3(c.x,c.y+this.Define.ChooseOffsetY),.1)}}this.setValidPokers(),Game.Component.scheduleOnce(function(){for(var e=0;e<t.pokerHandList.length;e++)t.pokerHandList[e].resetSelect();t.Context.clearSelectPokerCache()},this.Define.FlyDzIcon)},t.prototype.setValidPokers=function(){this.validPokers=[],this.validPokers=this.pokerHandList.filter(function(e){return e.checkPokerValid()}),this.validPokers.forEach(function(e,t){e.setPokerDealPosX(),e.nowIndex=t}),this.showDzOwnerSign()},t.prototype.touchStart=function(e){this.toucheEnable=!0;var t=e.getLocation();this.startIndex=this.getChoosePokerIndex(t),this.startIndex>-1?(this.targetPokerList=[],this.targetPokerList.push(this.validPokers[this.startIndex])):(this.toucheEnable=!1,this.resetPokers())},t.prototype.touchMove=function(e){if(this.toucheEnable){var t=e.getLocation();if(this.endIndex=this.getChoosePokerIndex(t),-1!=this.endIndex&&this.startIndex>=0&&this.endIndex>=0){var o=[Math.min(this.startIndex,this.endIndex),Math.max(this.startIndex,this.endIndex)],n=o[0],i=o[1];this.targetPokerList=[];for(var r=0;r<this.validPokers.length;r++){var a=this.validPokers[r];r<=i&&r>=n?(this.targetPokerList.push(a),a.setDragSign(!0)):a.setDragSign(!1)}}}},t.prototype.touchEnd=function(e){var t=this,o=e.getLocation();if(this.endIndex=this.getChoosePokerIndex(o),-1==this.endIndex){var n=o.x-e.getStartLocation().x>0?1:-1;this.endIndex=this.getChoosePokerIndex(cc.v2(o.x-n*this.Define.PokerSlideValidOffsetX,o.y))}this.targetPokerList.length>0?Global.Audio.playGameBundleSound(a.DdzAudioConst.audioCommonPath+a.DdzAudioConst.SelectPoker,!0):Global.Audio.playGameBundleSound(a.DdzAudioConst.audioCommonPath+a.DdzAudioConst.CancelSelect,!0);var i=[];this.targetPokerList.forEach(function(e){i.push(e.pokerValue),e.setDragSign(!1),t.endIndex>-1&&(e.onSelect(!0),e.isSelect?t.Context.addSelectPoker(e.pokerValue,e.nowIndex):t.Context.removeSelectPoker(e.pokerValue,e.nowIndex))});var r=this.PlayRuleHelper.searchStraight(i);if(r&&!Global.Toolkit.isEmptyObject(r))for(var s in this.resetPokers(),r)if(r[s]){var l=this.targetPokerList[Number(s)];l&&l.checkPokerValid()&&(l.isSelect||l.onSelect(!0),this.Context.addSelectPoker(l.pokerValue,l.nowIndex))}this.onReset()},t.prototype.onReset=function(){this.toucheEnable=!1,this.startIndex=-1,this.endIndex=-1,this.targetPokerList=[]},t.prototype.getChoosePokerIndex=function(e){for(var t=0;t<this.validPokersCount;t++){var o=this.validPokers[t].getWorldPosition().x;if(this.validPokers[t].checkIsTouch(e)){if(t==this.validPokersCount-1&&e.x>o-this.maxWidth/2&&e.x<o+this.maxWidth/2)return t;if(e.x>o-this.maxWidth/2&&e.x<o+this.maxWidth/2+this.offsetX)return t}}return-1},t.prototype.resetPokers=function(){this.validPokers.forEach(function(e){e.setDragSign(!1),e.isSelect&&e.onSelect()}),this.Context.clearSelectPokerCache()},t.prototype.hideAllPokers=function(){this.pokerHandList.forEach(function(e){e.active=!1,e.isSelect&&e.onSelect(),e.reset()})},t.prototype.onPlayPokers=function(e){for(var t in void 0===e&&(e={}),e)if(e[t]){var o=this.validPokers[Number(t)];o&&o.checkPokerValid()&&(o.active=!1)}this.layoutHandPokers()},t.prototype.onPromptPokers=function(e){for(var t in void 0===e&&(e={}),this.resetPokers(),Global.Audio.playGameBundleSound(a.DdzAudioConst.audioCommonPath+a.DdzAudioConst.SelectPoker,!0),e)if(e[t]){var o=this.validPokers[Number(t)];o&&o.checkPokerValid()&&(o.isSelect||o.onSelect(!0),this.Context.addSelectPoker(o.pokerValue,o.nowIndex))}},t.prototype.showDzOwnerSign=function(){0==this.Context.get(this.Define.FieldDzLocSeat)&&this.validPokersCount>0&&this.validPokers[this.validPokers.length-1].setDzOwner(!0)},t.prototype.getPokerArrMap=function(e){void 0===e&&(e=[]);var t={};return this.validPokers.forEach(function(o,n){e.indexOf(o.pokerValue)>-1&&(t[n]=o.pokerValue)}),t},t.prototype.refreshHandPokersOnErr=function(){var e=this;this.Context.clearSelectPokerCache(),this.hideAllPokers();var t=this.Context.getSelfHandPokers(),o=t.length;this.setGroupPokersValue(t),t.forEach(function(t,n){e.showDealPokerIndex(n,o)}),this.layoutHandPokers()},t.prototype.clearByRound=function(){this.resetPokers(),this.hideAllPokers(),this.PlayRuleHelper.clearRecommend()},t.prototype.clearByGame=function(){this.readyForChoose(!1),this.clearByRound()},t}(r.default);o.DdzSelfPlayView=d,cc._RF.pop()},{"../DdzDriver":"DdzDriver","../data/DdzGameConst":"DdzGameConst","../data/DdzPathHelper":"DdzPathHelper","../data/DdzRuleConst":"DdzRuleConst","./DdzBaseView":"DdzBaseView"}],DdzSettleView:[function(e,t,o){"use strict";cc._RF.push(t,"274acS12ZZNY6jpjWoAK80u","DdzSettleView");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=e("./DdzBaseView"),a=e("../data/DdzPathHelper"),s=e("../DdzDriver"),l=e("../data/DdzGameConst"),c=function(e){function t(t){var o=e.call(this)||this;return o.clickLimit=!1,o.setNode(t),o}return i(t,e),t.prototype.initView=function(){this.winView=new d(this.getChild("contentNode/winNode")),this.winView.active=!1,this.loseView=new d(this.getChild("contentNode/loseNode")),this.loseView.active=!1,this.closeBtn=this.getChild("contentNode/closeBtn"),this.closeBtn.active=!1,l.default.addCommonClick(this.closeBtn,"",this.closeView,this),this.exitBtn=this.getChild("contentNode/exitBtn"),this.exitBtn.active=!1,l.default.addCommonClick(this.exitBtn,"",this.onExitClick,this),this.gameBtn=this.getChild("contentNode/gameBtn"),this.gameBtn.active=!1,l.default.addCommonClick(this.gameBtn,"",this.onGameClick,this)},t.prototype.onOpen=function(){this.delayShowActionBtn(5e3)},t.prototype.delayShowActionBtn=function(e){var t=this;this.timer=setTimeout(function(){t.showActionBtn(!0)},e)},t.prototype.playSettleAnim=function(e,t){void 0===t&&(t={});var o=t.user_calcs||[];e?(this.winView.active=!0,this.winView.showData(o,e,t.land_chair)):(this.loseView.active=!0,this.loseView.showData(o,e,t.land_chair))},t.prototype.showActionBtn=function(e){this.closeBtn.active=e,this.exitBtn.active=e,this.gameBtn.active=e,e&&clearTimeout(this.timer)},t.prototype.onClose=function(){this.winView.active=!1,this.loseView.active=!1,this.closeBtn.active=!1,this.exitBtn.active=!1,this.gameBtn.active=!1,this.clickLimit=!1,clearTimeout(this.timer)},t.prototype.closeView=function(){Global.Audio.playGameBundleSound(a.DdzAudioConst.audioCommonPath+a.DdzAudioConst.commonAudio.ButtonClick,!0),this.active=!1},t.prototype.onExitClick=function(){Global.Audio.playGameBundleSound(a.DdzAudioConst.audioCommonPath+a.DdzAudioConst.commonAudio.ButtonClick,!0),Game.Server.send(this.Define.CmdLeave,{IsClose:1}),s.default.instance.leaveGame()},t.prototype.onGameClick=function(){var e=this;Global.Audio.playGameBundleSound(a.DdzAudioConst.audioCommonPath+a.DdzAudioConst.commonAudio.ButtonClick,!0),this.clickLimit||(s.default.instance.reMatchPlayer(),this.clickLimit=!0,Game.Component.scheduleOnce(function(){e.clickLimit=!1},3))},t.prototype.clearByRound=function(){this.active=!1},t}(r.default);o.default=c;var d=function(e){function t(t){var o=e.call(this)||this;return o.itemList=[],o.setNode(t),o}return i(t,e),t.prototype.initView=function(){this.effect=this.getComponent("effect",sp.Skeleton),this.contentNode=this.getChild("content");for(var e=1;e<=3;e++){var t=this.getChild("content/item"+e),o=new h(t);this.itemList.push(o)}},t.prototype.onOpen=function(){var e=this;this.effect.setAnimation(0,"idle",!1),this.effect.addAnimation(0,"idle1",!0,this.Define.PlaySettleEffectTime),this.contentNode.opacity=1,Game.Component.scheduleOnce(function(){var t=cc.fadeTo(.5,255);e.contentNode.runAction(t)},this.Define.PlaySettleEffectTime)},t.prototype.showData=function(e,t,o){var n=this;void 0===e&&(e=[]);var i=this.Context.get(this.Define.FieldDzLocSeat);t&&0==i&&e.sort(function(e){return e.chair-o==0?-1:1}),e.forEach(function(e,o){n.itemList[o]&&n.itemList[o].setStyle(i,t,e)})},t.prototype.onClose=function(){this.contentNode.stopAllActions()},t}(r.default),h=function(e){function t(t){var o=e.call(this)||this;return o.setNode(t),o}return i(t,e),t.prototype.initView=function(){this.checkBg=this.getChild("checkBg"),this.dzIcon=this.getChild("dzIcon"),this.nameLbl=this.getComponent("nameLbl",cc.Label),this.multLbl=this.getComponent("multLbl",cc.Label),this.pointLbl=this.getComponent("pointLbl",cc.Label)},t.prototype.setStyle=function(e,t,o){var n=s.default.instance.SitHelper.serverSToLocalN(o.chair);this.dzIcon.active=e==n,this.checkBg.active=0==n,this.multLbl.string=""+o.total_mult,this.pointLbl.string=""+Global.Toolkit.formatPointStr(o.total_points,!1,!1);var i=this.Context.playerList[n];this.nameLbl.string=Global.Toolkit.substrEndWithElli(i.nickname,10,!1);var r=new cc.Color(255,255,255);r=t?0==n?new cc.Color(255,197,148):new cc.Color(251,250,241):0==n?new cc.Color(151,181,252):new cc.Color(203,227,255),this.multLbl.node.color=r,this.nameLbl.node.color=r,this.pointLbl.node.color=r},t}(r.default);cc._RF.pop()},{"../DdzDriver":"DdzDriver","../data/DdzGameConst":"DdzGameConst","../data/DdzPathHelper":"DdzPathHelper","./DdzBaseView":"DdzBaseView"}],DdzSkinDefine:[function(e,t,o){"use strict";cc._RF.push(t,"1b7491tuf5PF6yueyiQpLkw","DdzSkinDefine"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./DdzPathHelper"),i=function(){function e(e){void 0===e&&(e={}),this.jsonMap=e,this.skinIndex=0,this.markerColorArr=[],this.useRole=!1,this.initData()}return e.prototype.initData=function(){this.skinIndex=this.jsonMap.skinIndex||0,this.markerColorArr=this.jsonMap.markerLblColor||[],this.useRole=this.jsonMap.useRole},e.jsonPath=n.default.configPath+"DdzSkinConfig",e}();o.default=i,cc._RF.pop()},{"./DdzPathHelper":"DdzPathHelper"}],DdzSyncHandler:[function(e,t,o){"use strict";cc._RF.push(t,"319dbgJd9FAMLSv1V+QdBjR","DdzSyncHandler");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.DdzSyncRefreshHandler=o.DdzSyncEndHandler=o.DdzSyncBeginHandler=void 0;var r=e("./DdzBaseHandler"),a=e("../data/DdzGameConst"),s=e("../data/DdzPathHelper"),l=e("../DdzDriver"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.refreshData=function(){this.context.syncMode=!0},t.prototype.execute=function(){l.default.instance.beginSync()},t}(r.default);o.DdzSyncBeginHandler=c;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.refreshData=function(){this.context.syncMode=!1},t}(r.default);o.DdzSyncEndHandler=d;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(e){var t=this;this.context.updateMarkerData(e._para.out_cards);var o=e._para.user_plays,n=e._para.bomb_count;n&&n>0&&(this.context.get(this.Define.FieldBombBgm)||(Global.Audio.playGameBundleMusic(s.DdzAudioConst.Bgm2,!0),this.context.set(this.Define.FieldBombBgm,!0))),o&&o.length>0&&o.forEach(function(e){var o=e.cards,n=e.type,i=t.SitHelper.serverSToLocalN(e.chair);1==e.status&&o&&n?(t.context.set(t.Define.FieldOnOutPokers,l.default.instance.PlayRuleHelper.getPokersType(o)),t.mainUI.callPlayer(i,"showPlayPokers",!0,o,!1)):t.mainUI.callPlayer(i,"setState",!0,a.DdzGameActState.Play,0)})},t}(r.default);o.DdzSyncRefreshHandler=h,cc._RF.pop()},{"../DdzDriver":"DdzDriver","../data/DdzGameConst":"DdzGameConst","../data/DdzPathHelper":"DdzPathHelper","./DdzBaseHandler":"DdzBaseHandler"}],DdzTypeCheck:[function(e,t,o){"use strict";cc._RF.push(t,"67381tp7yZExLrrPYUgw+Vt","DdzTypeCheck"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./DdzPokerCheck"),i=function(){function e(){}return e.prototype.checkSingle=function(e){return 1!=e.length?0:n.default.getPokerWeight(e[0])[0]},e.prototype.checkRocket=function(e){return n.default.checkIsGhost(e[0])&&n.default.checkIsGhost(e[1])?99:0},e.prototype.checkPair=function(e){return 2!=e.length?0:n.default.getPokerValue(e[0])[0]==n.default.getPokerValue(e[1])[0]?n.default.getPokerWeight(e[0])[0]:0},e.prototype.checkThreeZero=function(e,t,o){return 3!=e.length||3!=t?0:1==o.length?n.default.getPokerWeight(o[0])[0]:0},e.prototype.checkThreeOne=function(e,t,o){return 4!=e.length||3!=t?0:1==o.length?n.default.getPokerWeight(o[0])[0]:0},e.prototype.checkThreeTwo=function(e,t,o,i){if(5!=e.length||3!=t)return 0;var r=this.getOrderNumArr(i,2);return 1==o.length&&1==r.length?n.default.getPokerWeight(o[0])[0]:0},e.prototype.checkPlaneZero=function(e,t,o,i){if(e.length<6||e.length!=3*o.length)return 0;if(this.checkContinuity(i,3)){var r=this.getOrderNumArr(i,3);return n.default.getPokerWeight(r[r.length-1])[0]}return 0},e.prototype.checkPlaneOne=function(e,t,o,i){var r=e.length;if(r>=8&&r%4==0)for(var a=e.length/4,s=this.getOrderBiggerNumArr(i,3),l=0,c=[],d=s.length-1;d>=0;d--){if(l=Number(s[d]),c.push(l),c.length==a){var h=l+a-1;return n.default.getPokerWeight(h)[0]}(l>0&&l-Number(s[d-1])!=1||2==l)&&(c=[])}return 0},e.prototype.checkPlaneTwo=function(e,t,o,i){var r=e.length;if(r>=10&&r%5==0)for(var a=e.length/5,s=this.getOrderBiggerNumArr(i,3),l=0,c=[],d=s.length-1;d>=0;d--){if(l=Number(s[d]),c.push(l),c.length==a){var h=this.getRealValueArr(e);this.removeRootArr(h,c,3);var u=this.computeValueTimes(h)[0];if(this.getOrderNumArr(u,3).length>0){c.shift();continue}var p=this.getOrderNumArr(u,4),f=this.getOrderNumArr(u,2);if(2*p.length+f.length==a){var m=l+a-1;return n.default.getPokerWeight(m)[0]}}(l>0&&l-Number(s[d-1])!=1||2==l)&&(c=[])}return 0},e.prototype.removeRootArr=function(e,t,o){void 0===o&&(o=1);for(var n=0;n<t.length*o;n++){var i=e.indexOf(t[n%t.length]);i>-1&&e.splice(i,1)}},e.prototype.checkBomb=function(e,t){return 4!=e.length||4!=t?0:n.default.getPokerWeight(e[0])[0]},e.prototype.checkBombWithSingles=function(e,t,o){return 6!=e.length||4!=t?0:n.default.getPokerWeight(o[0])[0]},e.prototype.checkBombWithPairs=function(e,t,o,i){if(8!=e.length||4!=t)return 0;var r=this.getOrderNumArr(i,4);if(2==o.length)return n.default.getPokerWeight(r[1])[0];var a=0;for(var s in i)2==i[s]&&a++;return 2==a?n.default.getPokerWeight(o[0])[0]:0},e.prototype.checkLinkPairs=function(e,t,o,i){if(2!=t||e.length!=2*o.length||o.length<3)return 0;if(this.checkContinuity(i,2)){var r=this.getOrderNumArr(i,2);return n.default.getPokerWeight(r[o.length-1])[0]}return 0},e.prototype.checkQuickLinkPairs=function(e,t,o,i){if(2!=t||e.length!=2*o.length||o.length<2)return 0;if(this.checkContinuity(i,2)){var r=this.getOrderNumArr(i,2);return n.default.getPokerWeight(r[o.length-1])[0]}return 0},e.prototype.checkStraight=function(e,t,o,i){if(1!=t||e.length!=o.length||o.length<5)return 0;if(this.checkContinuity(i,1)){var r=this.getOrderNumArr(i,1);return n.default.getPokerWeight(r[o.length-1])[0]}return 0},e.prototype.checkQuickStraight=function(e,t,o,i){if(1!=t||e.length!=o.length||o.length<3)return 0;if(this.checkContinuity(i,1)){var r=this.getOrderNumArr(i,1);return n.default.getPokerWeight(r[o.length-1])[0]}return 0},e.prototype.computeValueTimes=function(e){void 0===e&&(e=[]);var t={};e.forEach(function(e){var o=n.default.getPokerValue(e)[0];t[o]?t[o]++:t[o]=1});var o=0;for(var i in t)t[i]>o&&(o=t[i]);var r=[];for(var i in t)t[i]==o&&r.push(i);return[t,o,r]},e.prototype.getOrderNumArr=function(e,t){void 0===t&&(t=1);var o=[];for(var i in e)e[i]==t&&o.push(i);return o.sort(function(e,t){return n.default.getPokerWeight(e)[0]-n.default.getPokerWeight(t)[0]}),o},e.prototype.checkContinuity=function(e,t){for(var o=this.getOrderNumArr(e,t),n=0,i=0;i<o.length;i++){if(n>0&&o[i]-n!=1||2==o[i])return!1;n=o[i]}return n>0},e.prototype.getOrderBiggerNumArr=function(e,t){void 0===t&&(t=1);var o=[];for(var i in e)e[i]>=t&&o.push(i);return o.sort(function(e,t){return n.default.getPokerWeight(e)[0]-n.default.getPokerWeight(t)[0]}),o},e.prototype.getOrderBiggerNumArrByCount=function(e,t){void 0===t&&(t=1);var o=[];for(var i in e)e[i]>=t&&o.push(i);return o.sort(function(t,o){return e[t]==e[o]?n.default.getPokerWeight(t)[0]-n.default.getPokerWeight(o)[0]:e[t]-e[o]}),o},e.prototype.getRealValueArr=function(e){for(var t=[],o=0;o<e.length;o++){var i=n.default.getPokerValue(e[o])[0];t.push(i)}return t},e}();o.default=i,cc._RF.pop()},{"./DdzPokerCheck":"DdzPokerCheck"}]},{},["DdzDriver","DDZTimeAutoRun","DdzAskClockView","DdzBaseComponent","DdzLoadingUI","DdzContext","DdzDefine","DdzGameConst","DdzGameEvent","DdzPathHelper","DdzPokerHelper","DdzRuleConst","DdzSkinDefine","DdzAllOpenHandler","DdzAutoHandler","DdzBaseHandler","DdzChangeScoreHandler","DdzDealHandler","DdzEasyHandlers","DdzEnterHandler","DdzGameCfgHandler","DdzLandlordHandler","DdzLeaveHandler","DdzMultHandler","DdzPlayHandler","DdzReadyHandler","DdzRefreshHandPokerHandler","DdzRewardHandler","DdzSyncHandler","DdzMainUI","DdzAskActionView","DdzBaseView","DdzLeftThreePokerView","DdzMarkerView","DdzMatchPlayerView","DdzMenuView","DdzPlayerView","DdzPokerGroup","DdzPokerView","DdzRoleView","DdzSelfInfoView","DdzSelfPlayView","DdzSettleView","DdzPlayRule","DdzPokerCheck","DdzPokerPool","DdzPokerTypeData","DdzRecommendPlay","DdzTypeCheck"]);