{"version":3,"sources":["assets\\hall\\scripts\\logic\\hall\\ui\\Activity\\DailyRecharge\\WndDailyRechargeGift.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\n// import ViewBase from \"../../../../core/ui/ViewBase\";\r\n\r\nimport RechargeGiftModel from \"../../../../hallcommon/model/RechargeGiftModel\";\r\nimport { ActivityConstants, ActivityType } from \"../ActivityConstants\";\r\nimport AwardBoxItem from \"./AwardBoxItem\";\r\nimport WndBase from \"../../../../core/ui/WndBase\";\r\nimport HallPopMsgHelper from \"../../../tool/HallPopMsgHelper\";\r\n\r\n\r\nexport default class WndDailyRechargeGift extends WndBase {\r\n    private model: RechargeGiftModel\r\n    awardBtnArr:cc.Node []= []\r\n    damaArr:cc.Label []= []\r\n    rateLabe:cc.Label\r\n    awardPanel:cc.Node\r\n    progress:cc.ProgressBar\r\n    winProgress:cc.Label\r\n    clickNode :cc.Node = null\r\n\r\n    protected onInit(){\r\n        this.name = \"WndDailyRechargeGift\";\r\n        this.layer = Global.UI.PopLayer;\r\n        this.resPath = \"hall/prefabs/ui/DailyRechargeGift/dailyRechargeGift\"\r\n    }\r\n    protected initView()\r\n    {\r\n       \r\n        this.model = <RechargeGiftModel>Global.ModelManager.getModel(\"RechargeGiftModel\");\r\n        this.addCommonClick(\"button\",this.onJoinButtonClicked,this)\r\n        this.addCommonClick(\"close\",this.close,this)\r\n        this.progress = this.getComponent(\"progressBar\",cc.ProgressBar)\r\n        this.winProgress = this.getComponent(\"WinProgress/WinProgressLabel\",cc.Label)\r\n        this.rateLabe = this.getComponent(\"rateLabe\",cc.Label)\r\n        this.progress.progress = 0;\r\n        this.awardPanel = this.getChild(\"AwarPanel\")\r\n        for (let index = 0; index < 3; index++) {\r\n             this.awardBtnArr[index] = Global.UIHelper.addCommonClick(this.awardPanel,cc.js.formatStr(\"Award_%s\",index),this.onAwardBtnClicked,this)\r\n             this.damaArr[index] = this.getComponent(\"AwarPanel/\"+cc.js.formatStr(\"damaLabe_%s\",index), cc.Label)\r\n        }\r\n        this.model.on(RechargeGiftModel.GetAward, this, this.onGetAward);\r\n        this.model.on(RechargeGiftModel.GetCfg, this, this.onGetConfig);\r\n    }\r\n    onAwardBtnClicked(target) {\r\n        let node = target.node\r\n        this.clickNode = node\r\n        if(node && node.isValid)\r\n        {\r\n            let awardItem = node.getComponent(AwardBoxItem)\r\n            if(awardItem.data && awardItem.is_todayData && awardItem.isYesterdayAchieve)\r\n            {\r\n                Global.UI.fastTip(\"已领取今日全部奖励，请明天再来！\")\r\n                return\r\n            }\r\n            if(awardItem.data && awardItem.is_todayData && !awardItem.isYesterdayAchieve)\r\n            {\r\n                Global.UI.fastTip(\"未完成任务，请明日完成任意充值后再领取！\")\r\n                return\r\n            }\r\n            if( awardItem.data && awardItem.data.is_ava && !awardItem.data.status && !awardItem.is_done)\r\n            {\r\n                this.model.reqReceiveActivityAward(ActivityType.dailyRechargeGift,awardItem.data.key)\r\n            }\r\n        }\r\n\r\n    }\r\n    onJoinButtonClicked() \r\n    {\r\n        Global.UI.show(\"WndRecharge\")\r\n    }\r\n\r\n    close(){\r\n        Global.UI.close(this.name);\r\n    }\r\n\r\n    protected onOpen()\r\n    {\r\n       \r\n        this.model.reqGetActivityCfg(false)\r\n    }\r\n\r\n    private onGetAward(awardData) {\r\n        \r\n        if(awardData && awardData.atype != ActivityType.dailyRechargeGift)\r\n        {\r\n            return\r\n        }\r\n        Global.UI.show(\"WndRebateGet\", awardData.award);\r\n        if(this.clickNode && this.clickNode.isValid)\r\n        {\r\n            let awardItem = this.clickNode.getComponent(AwardBoxItem)\r\n            if(awardItem)\r\n            {\r\n                awardItem.setBoxState(BoxState.AlreadyGot)\r\n            }\r\n        }\r\n\r\n    }\r\n    protected onClose()\r\n    {\r\n        this.clickNode = null\r\n        HallPopMsgHelper.Instance.releaseLock(ActivityType.dailyRechargeGift);\r\n    }\r\n    private onGetConfig(data)\r\n    {\r\n        if(data == null) return\r\n        Global.Event.event(ActivityConstants.SHOW_ACT_WAITTING, false)\r\n        let arr = data.data\r\n        for (let index = 0; index < arr.length; index++) {\r\n            let cfg = arr[index];\r\n            if(cfg && cfg.atype == ActivityType.dailyRechargeGift )\r\n            {\r\n                let actData = cfg.cfg\r\n                this.refreshPanel(actData)\r\n                break\r\n            }\r\n            \r\n        }\r\n    }\r\n    /**\r\n     * 1.昨日未参与，显示今天数据\r\n     * 2.昨日参与，未完成任何一项，今日参与（充值)，显示今天数据\r\n     * 3.昨日参与，未完成任何一项，今日未参与（充值)，显示昨天数据\r\n     * 4.昨日参与，已完成的项全部领取完成，显示今天数据\r\n     * 5.昨日参与，有完成且未领取的项，显示昨天数据\r\n     * 6.昨日今日均未参与，显示默认数据\r\n     * \r\n     */\r\n    refreshPanel(actData: any) {\r\n        if(actData == null) return\r\n        this.setAwardBoxRate(actData.cfg);\r\n        if(actData.yes_list && actData.yes_list.list == null) //1 6\r\n        {\r\n            let total = actData.today_list.total || 0\r\n            let dama = actData.today_list.dama || 0\r\n            this.progress.progress = 0\r\n            if(total)\r\n            {\r\n                this.progress.progress = dama/total\r\n            }\r\n            this.setAwardBoxState(actData.today_list,false,true,false)\r\n            this.setProgress(actData.today_list);\r\n            this.setWinProgressRichText(actData.today_list.dama,actData.today_list.total)\r\n            return\r\n        }\r\n        let isYesterdayAchieve:boolean = this.getIsYesterdayAchieve(actData)\r\n        let isYesterdayDone:boolean = this.getIsYesterdayDone(actData)\r\n        let isTodayRecharge:boolean = actData.today_list && actData.today_list.pay >0\r\n        if(isYesterdayAchieve) // 5 4\r\n        {\r\n            let achieveList =  isYesterdayDone ? actData.today_list : actData.yes_list\r\n            let total = achieveList.total\r\n            let dama = achieveList.dama\r\n            \r\n            this.progress.progress = 0\r\n            if(total)\r\n            {\r\n                this.progress.progress = (dama/total)\r\n            }\r\n            this.setAwardBoxState(achieveList,isYesterdayDone,isYesterdayDone,isYesterdayAchieve)\r\n            this.setProgress(achieveList);\r\n            this.setWinProgressRichText(dama,total)\r\n            return\r\n        }\r\n\r\n        if(!isYesterdayAchieve)//2 3\r\n        {\r\n            let achieveList =  isTodayRecharge ? actData.today_list : actData.yes_list\r\n            let total = achieveList.total\r\n            let dama = achieveList.dama\r\n            \r\n            this.progress.progress = 0\r\n            if(total)\r\n            {\r\n                this.progress.progress = (dama/total)\r\n            }\r\n            this.setAwardBoxState(achieveList,isYesterdayDone,isTodayRecharge,isYesterdayAchieve)\r\n            this.setProgress(achieveList);\r\n            this.setWinProgressRichText(dama,total)\r\n            return\r\n        }\r\n\r\n    }\r\n    /**\r\n     * 设置进度条\r\n     * @param actData \r\n     */\r\n    setProgress(data:any) {\r\n        if(data == null || data.list == null)\r\n        {\r\n            return\r\n        }\r\n        for (let index = 0; index < data.list.length; index++) {\r\n            let is_ava = data.list[index].is_ava\r\n            if(index == 1 && is_ava)\r\n            {\r\n                this.progress.progress = 0.5\r\n            }if(index == 2 && is_ava){\r\n                this.progress.progress = 1\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 检查昨日是否有达成任意一项奖励\r\n     * @param actData \r\n     */\r\n    getIsYesterdayAchieve(actData: any) {\r\n        let yesterdayData = actData.yes_list\r\n        if(!yesterdayData || !yesterdayData.list)\r\n        {\r\n            return false\r\n        }\r\n        for (let index = 0; index < yesterdayData.list.length; index++) {\r\n            if(yesterdayData.list[index].is_ava  )\r\n            {\r\n                return true\r\n            }\r\n        }\r\n        return false\r\n    }\r\n    /**\r\n     * 检查是否昨日奖励已全部领取完毕\r\n     * @param actData \r\n     */\r\n    getIsYesterdayDone(actData: any): boolean {\r\n        let yesterdayData = actData.yes_list\r\n        if(!yesterdayData || !yesterdayData.list)\r\n        {\r\n            return false\r\n        }\r\n        //data.is_ava && !data.status\r\n        for (let index = 0; index < yesterdayData.list.length; index++) {\r\n            if(yesterdayData.list[index].is_ava && !yesterdayData.list[index].status )\r\n            {\r\n                return false\r\n            }\r\n        }\r\n        return true\r\n    }\r\n\r\n    setAwardBoxState(data:any,is_done:boolean,isTodayData:boolean,isYesterdayAchieve) {\r\n        if(data == null || data.list == null)\r\n        {\r\n            for (let index = 0; index < this.awardBtnArr.length; index++) {\r\n                let node = this.awardBtnArr[index]\r\n                if(node && node.isValid)\r\n                {\r\n                    node.getComponent(AwardBoxItem).refreshState(null,false,isTodayData,isYesterdayAchieve)\r\n                }\r\n            }\r\n            return\r\n        }\r\n        for (let index = 0; index < data.list.length; index++) {\r\n            let node = this.awardBtnArr[index]\r\n            if(node && node.isValid)\r\n            {\r\n                node.getComponent(AwardBoxItem).refreshState(data.list[index],is_done,isTodayData,isYesterdayAchieve)\r\n            }\r\n        }\r\n    }\r\n    setAwardBoxRate(data:any) {\r\n        if(data == null || data.list == null)\r\n        {\r\n            return\r\n        }\r\n        let rateLabeText = cc.js.formatStr(\"%s+%s=%s\",data.list[0].rate *10,data.list[1].rate *10,(data.list[0].rate + data.list[1].rate) * 10);\r\n        this.rateLabe.string = \"当日打码量和返利金额均为累计计算，比如玩家打到第2档时实际可获得\"+rateLabeText+\"元奖励。次日充值任意金额，即可领取对应返利金额。\";                    \r\n        \r\n\r\n        for (let index = 0; index < data.list.length; index++) {\r\n            let ratedata = data.list[index];\r\n            let text = \"%s.玩家当日打码量(1000+%s)*%s=%s时,即可获得%s%首充返利奖励%s元\"\r\n            let dama = (1000 + ratedata.dama_rate*10)*ratedata.dama_multi;\r\n            var msgStr = cc.js.formatStr(text,ratedata.key,ratedata.dama_rate*10,ratedata.dama_multi,dama,ratedata.rate,ratedata.rate*10);\r\n            let damaLabel = this.damaArr[index]\r\n            damaLabel.string = msgStr;\r\n            let node = this.awardBtnArr[index]\r\n            if(node && node.isValid)\r\n            {\r\n                node.getComponent(AwardBoxItem).refreshRate(ratedata)\r\n            }\r\n        }\r\n    }\r\n    setWinProgressRichText(charge:number,total:number){\r\n       // [\"#F2D060\",\"#F2D060\",20,22]\r\n        let str = cc.js.formatStr(\"<color=%s><size=%s>%s/</c><color=%s><size=%s>%s</color>\",\r\n        Global.Setting.SkinConfig.dailyRechargeFontColorAndSize[0],Global.Setting.SkinConfig.dailyRechargeFontColorAndSize[2],\r\n        Global.Toolkit.formatPointStr(charge),\r\n        Global.Setting.SkinConfig.dailyRechargeFontColorAndSize[1],Global.Setting.SkinConfig.dailyRechargeFontColorAndSize[3],Global.Toolkit.formatPointStr(total));\r\n        this.winProgress.string = \"\"+Global.Toolkit.formatPointStr(charge)+\"/\" + Global.Toolkit.formatPointStr(total);\r\n    }\r\n\r\n    protected onDispose()\r\n    {\r\n        this.model.off(RechargeGiftModel.GetAward, this, this.onGetAward);\r\n        this.model.off(RechargeGiftModel.GetCfg, this, this.onGetConfig);\r\n    }\r\n  \r\n}\r\n\r\nexport enum BoxState\r\n{\r\n    /**常规 不可点击*/\r\n    Normal = 0, \r\n    /**高亮 可点击*/\r\n    TodayAchieved = 1,\r\n    /**打开 */\r\n    AlreadyGot = 2,\r\n    /**达到条件 */\r\n    RealAchieved = 3,\r\n    \r\n}\r\n"]}