{"version":3,"sources":["assets\\hall\\scripts\\logic\\core\\game\\pvp\\PvpSitHelper.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["//p0 为公共位置 1-n 为玩家座位\r\nexport default class PVPSitHelper\r\n{\r\n    public selfSvrSit:number;\r\n    public maxPlayerNum:number;\r\n    public localSitToViewSitMap = {}\r\n\r\n    public init(serverSit: number, maxPlayerNum: number, map: any = {})\r\n    {\r\n        this.selfSvrSit = serverSit;\r\n        this.maxPlayerNum = maxPlayerNum;\r\n        this.localSitToViewSitMap = map;\r\n    }\r\n\r\n    public clear()\r\n    {\r\n        this.localSitToViewSitMap = {}\r\n        this.selfSvrSit = 0;\r\n        this.maxPlayerNum = 0;\r\n    }\r\n\r\n    public getSelfServerSeat():number\r\n    {\r\n        return this.selfSvrSit;\r\n    }\r\n\r\n    public getSelfServerSeatS():string\r\n    {\r\n        return \"p\" + this.selfSvrSit;\r\n    }\r\n    \r\n\r\n    public serverToLocal(svrSeat:number)\r\n    {\r\n        if(!this.selfSvrSit || this.selfSvrSit == -1)\r\n            return svrSeat;\r\n        let selfViewSeat = this.getSelfViewSeat();\r\n        let localSeat = ((svrSeat - this.selfSvrSit + this.maxPlayerNum) % this.maxPlayerNum + selfViewSeat) % this.maxPlayerNum\r\n        localSeat = this.localToView(localSeat)\r\n        return localSeat;\r\n    }\r\n\r\n    //local -> ui的映射    如 ：2人时 二号位对应的是head3  4人时 2号位对应的是head2 \r\n    public localToView(localSeat)\r\n    {\r\n        if(this.localSitToViewSitMap == null || Global.Toolkit.isEmptyObject(this.localSitToViewSitMap))\r\n            return localSeat\r\n        return this.localSitToViewSitMap[localSeat];\r\n    }\r\n\r\n    public viewToLocal(viewSeat){\r\n        if(this.localSitToViewSitMap == null || Global.Toolkit.isEmptyObject(this.localSitToViewSitMap))\r\n            return viewSeat;\r\n        for(let local in this.localSitToViewSitMap){\r\n            if (this.localSitToViewSitMap[local] == viewSeat)\r\n                return local;\r\n        }\r\n    }\r\n\r\n    public localToServer(localSeat:number)\r\n    {\r\n        if(!this.selfSvrSit || this.selfSvrSit == -1)\r\n            return localSeat;\r\n        let seat = this.viewToLocal(localSeat);\r\n        let sitOffset = seat - this.getSelfViewSeat() + this.selfSvrSit;\r\n        if (sitOffset == this.maxPlayerNum){\r\n            return this.maxPlayerNum;\r\n        }\r\n        else{\r\n            return sitOffset % this.maxPlayerNum;\r\n        }\r\n    }\r\n\r\n    //server seat string  ->  local seat number\r\n    public serverSToLocalN(svrSeat:number):number\r\n    {\r\n        // let num = this.serverSeatStrToNum(svrSeatStr);\r\n        return this.serverToLocal(svrSeat);\r\n    }\r\n\r\n    //local seat number  -> server seat string\r\n    public localNToServerS(localToServer:number):number\r\n    {\r\n        let num = this.localToServer(localToServer);\r\n        //return \"p\" + num;\r\n        return num;\r\n    }\r\n\r\n    //\"p1\" => 1\r\n    public serverSeatStrToNum(serverSeatStr:number):number\r\n    {\r\n        // let numstr = serverSeatStr.substr(1);\r\n        // let num = Number(numstr);\r\n        // if(isNaN(num))\r\n        // {\r\n        //     Logger.error(\"转换失败\", serverSeatStr);\r\n        //     num = -1;\r\n        // }\r\n        return serverSeatStr;\r\n    }\r\n\r\n\r\n    //自己的viewSit为0\r\n    private getSelfViewSeat()\r\n    {\r\n        return 0;\r\n    }\r\n}"]}