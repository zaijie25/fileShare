{"version":3,"sources":["assets\\ddz\\ddz\\scripts\\handlers\\DdzMultHandler.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import DdzBaseHandler from \"./DdzBaseHandler\";\r\nimport { DdzGameActState } from \"../data/DdzGameConst\";\r\nimport { DdzAudioConst } from \"../data/DdzPathHelper\";\r\n\r\nexport class DdzCalMultHandler extends DdzBaseHandler{\r\n    protected execute(msg){\r\n        let localSeat = this.SitHelper.serverSToLocalN(msg._src);\r\n        let time = 0;\r\n        let serverTime = msg._times;\r\n        if (serverTime && Game.Component.correctTime){\r\n            let dev = Game.Component.correctTime(serverTime);\r\n            time = msg._timeo * 1000 - dev;\r\n        }\r\n        else{\r\n            time = msg._timeo * 1000 - (Date.now() - msg._receiveTime);\r\n        }\r\n        if (time <= 0)\r\n            time = 1000;\r\n        if (localSeat == 0){\r\n            if (localSeat != this.context.get(this.Define.FieldDzLocSeat)){\r\n                this.mainUI.askActionView.setMultViewShow(true);\r\n            }\r\n            this.mainUI.showActionTimer(true, localSeat, time, null);\r\n        }\r\n        this.mainUI.callAllPlayers('setState', false);\r\n    }\r\n}\r\n\r\nexport class DdzOnMultHandler extends DdzBaseHandler{\r\n    protected execute(msg){\r\n        let localSeat = this.SitHelper.serverSToLocalN(msg._src);\r\n        let selected = msg._para.selected;\r\n        if (localSeat == 0){\r\n            this.mainUI.askActionView.setMultViewShow(false);\r\n        }\r\n        let res = '';\r\n        if (selected == 2){\r\n            res = DdzAudioConst.Mult;\r\n            this.mainUI.callPlayer(localSeat, 'showMultSign', true);\r\n        }\r\n        else{\r\n            res = DdzAudioConst.NotMult;\r\n        }\r\n        Global.Audio.playGameBundleSound(DdzAudioConst.genderSoundPath(res, 0), true);\r\n        this.mainUI.callPlayer(localSeat, 'setState', true, DdzGameActState.Mult, selected);\r\n        Game.Event.event(Game.EVENT_ADDTIMELOCK, 'DdzOnMultHandler', 0.3);\r\n    }\r\n\r\n    protected executeSync(msg){\r\n        let localSeat = this.SitHelper.serverSToLocalN(msg._src);\r\n        let selected = msg._para.selected;\r\n        if (selected == 2){\r\n            this.mainUI.callPlayer(localSeat, 'showMultSign', true);\r\n        }\r\n    }\r\n}"]}