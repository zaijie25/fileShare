{"version":3,"sources":["assets\\bbwz\\Bbwz\\scripts\\handler\\BbwzBetEndHandler.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA,iEAA4D;AAC5D,6CAAwC;AACxC,4CAAuC;AACvC,2DAAwD;AAExD;;GAEG;AACH;IAAuC,qCAAqB;IAA5D;;IAgCA,CAAC;IA/BG,sCAAU,GAAV,UAAW,IAAI;QACX,mFAAmF;QACnF,MAAM;QACN,kBAAQ,CAAC,QAAQ,CAAC,SAAS,GAAG,+BAAa,CAAC,MAAM,CAAC;QAAA,CAAC;QAEpD,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,iBAAiB,EAAE,mBAAmB,EAAE,CAAC,CAAC,CAAC;QACjE,oBAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,kBAAQ,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;QAC3E,eAAe;QACf,wEAAwE;QAExE,UAAU;QACV,kBAAQ,CAAC,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;QACnD,UAAU;QACV,kBAAQ,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAE9C,IAAI,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;QACnC,KAAK,IAAM,OAAO,IAAI,OAAO,EAAE;YAC3B,kBAAQ,CAAC,QAAQ,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC,WAAW,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;SAC9E;QAED,UAAU;QACV,kBAAQ,CAAC,QAAQ,CAAC,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC;QACpD,oBAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QAClE,QAAQ;QACR,oBAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,eAAe,CAAC,kBAAkB,CAAC,kBAAQ,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC;QAClG,oBAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,eAAe,CAAC,mBAAmB,CAAC,kBAAQ,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC;QACnG,YAAY;QACZ,oBAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,qBAAqB,EAAE,CAAC;QACnD,SAAS;QACT,oBAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,GAAG,KAAK,CAAC;IACjD,CAAC;IACL,wBAAC;AAAD,CAhCA,AAgCC,CAhCsC,+BAAqB,GAgC3D;AAhCY,8CAAiB","file":"","sourceRoot":"/","sourcesContent":["import BbwzSocketBaseHandler from \"./BbwzSocketBaseHandler\";\r\nimport BbwzData from \"../data/BbwzData\";\r\nimport BbwzDriver from \"../BbwzDriver\";\r\nimport { BbwzGameState } from \"../data/BbwzConstDefine\";\r\n\r\n/**\r\n * 结束下注 e2\r\n */\r\nexport class BbwzBetEndHandler extends BbwzSocketBaseHandler {\r\n    handleData(data) {\r\n        //cc.log(\"BetEndHandler----------handleData------data = \" + JSON.stringify( data ))\r\n        //设置状态\r\n        BbwzData.instance.gameState = BbwzGameState.BetEnd;;\r\n        \r\n        Game.Event.event(Game.EVENT_ADDTIMELOCK, \"BbwzBetEndHandler\", 1);\r\n        BbwzDriver.instance.gameUI.stateView.runState(BbwzData.instance.gameState);\r\n        //如果是中途进入需要显示好牌\r\n        // BbwzDriver.instance.gameUI.compareRootView.dealAllGroupPokers(false);\r\n\r\n        //更新本次续压数据\r\n        BbwzData.instance.updateCurData(data._para.my_bet);\r\n        //设置牌桌下注数据\r\n        BbwzData.instance.setTableBetData(data._para);\r\n\r\n        let allBets = data._para.table_bet;\r\n        for (const keyName in allBets) {\r\n            BbwzData.instance.gameTableBetInfo[keyName].totalBetNum = allBets[keyName];\r\n        }\r\n\r\n        //更新在线玩家数量\r\n        BbwzData.instance.onlinePlayer = data._para.p_count;\r\n        BbwzDriver.instance.gameUI.updateOnlinePlayer(data._para.p_count);\r\n        //更新下注显示\r\n        BbwzDriver.instance.gameUI.betAreaRootView.updateSelfBetLabel(BbwzData.instance.gameTableBetInfo);\r\n        BbwzDriver.instance.gameUI.betAreaRootView.updateTotalBetLabel(BbwzData.instance.gameTableBetInfo);\r\n        // 更新下注底部筹码栏\r\n        BbwzDriver.instance.gameUI.updateBetSelectButton();\r\n        // 不允许飞筹码\r\n        BbwzDriver.instance.gameUI.betEnable = false;\r\n    }\r\n}"]}