{"version":3,"sources":["assets\\hall\\scripts\\logic\\hall\\ui\\serviver\\WndServicerUI.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import WndBase from \"../../../core/ui/WndBase\";\r\nimport ServicerItem from \"./ServicerItem\";\r\nimport { ServicerEvent } from \"./ServicerEvent\";\r\nimport FeedbackServiceItem from \"../Feedback/FeedbackServiceItem\";\r\n\r\n\r\nexport default class WndServicerUI extends WndBase\r\n{\r\n\r\n    private listNode: cc.Node = null;\r\n    private itemPrefab: cc.Node = null;\r\n    private itemList : Array<FeedbackServiceItem> = new Array();\r\n    private itemPool : Array<FeedbackServiceItem> = new Array();\r\n\r\n\r\n\r\n    private serviceDatas = []\r\n\r\n    private getItem(){\r\n        if(this.itemPool.length > 0){\r\n            var item = this.itemPool.pop();\r\n            item.node.setSiblingIndex(-1);\r\n            item.node.active = true;\r\n            return item;\r\n        }else{\r\n            var itemObj = cc.instantiate(this.itemPrefab);\r\n            var item = itemObj.getComponent(FeedbackServiceItem);\r\n            item.node.setParent(this.listNode);\r\n            item.node.active = true;\r\n            return item;\r\n        }\r\n    }\r\n\r\n    private recoveryItem( item : FeedbackServiceItem){\r\n        item.node.active = false;\r\n        this.itemPool.push(item);\r\n    }\r\n\r\n    private clearItem(){\r\n        this.listNode.y = 0;\r\n        for (let index = 0; index < this.itemList.length; index++) {\r\n            const item = this.itemList[index];\r\n            this.recoveryItem(item);\r\n        }\r\n        this.itemList = [];\r\n    }\r\n\r\n    protected onInit()\r\n    {\r\n        this.name = \"WndServicerUI\";\r\n        this.layer = \"PopLayer\";\r\n        this.resPath = \"hall/prefabs/ui/ServiceUI\";\r\n    }\r\n\r\n    protected initView()\r\n    {\r\n        this.node.width = cc.Canvas.instance.node.width;\r\n        this.node.height = cc.Canvas.instance.node.height;\r\n        this.addCommonClick(\"close\",this.close,this);\r\n\r\n        this.listNode = this.getChild(\"ScrollView/view/ServicersNode\");\r\n        this.itemPrefab = this.getChild(\"ScrollView/view/ServicersNode/ServicerItem\");\r\n        if(this.itemPrefab)\r\n        {\r\n            this.itemPrefab.active = false\r\n        }\r\n    }\r\n\r\n    onDispose()\r\n    {\r\n        this.itemPool = [];\r\n        this.itemList = [];\r\n    }\r\n\r\n    onOpen(){\r\n        if(this.args && this.args[0] )\r\n        {\r\n            this.serviceDatas = this.args[0]\r\n            /* let res = this.args[1];\r\n            if(res != \"\")\r\n                this.titleSp.spriteFrame = Global.ResourceManager.getSprite(\"hall/texture/common/txtImg\", res) */\r\n        }\r\n        else\r\n            this.serviceDatas = [];\r\n        \r\n        this.updateView();\r\n    }\r\n\r\n    onClose(){\r\n        this.itemPool = [];\r\n        this.listNode.removeAllChildren();\r\n    }\r\n\r\n    protected updateView(){\r\n        if(!this.serviceDatas) return;\r\n        //\r\n        this.clearItem();\r\n        for (let index = 0; index < this.serviceDatas.length; index++) {\r\n            if(!this.serviceDatas[index].type)\r\n            {\r\n                continue\r\n            }\r\n            var item = this.getItem();\r\n            item.refreshUI(this.serviceDatas[index]);\r\n        }\r\n    }\r\n\r\n   \r\n\r\n}"]}