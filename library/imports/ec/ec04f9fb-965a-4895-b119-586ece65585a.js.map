{"version":3,"sources":["assets\\ermj\\Ermj\\scripts\\ErmjDriver.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ErmjContext from \"./data/ErmjContext\";\r\nimport ErmjDefine from \"./data/ErmjDefine\";\r\nimport ErmjPathHelper, { ErmjAudioConst } from \"./data/ErmjPathHelper\";\r\nimport ErmjGameConst from \"./data/ErmjGameConst\";\r\nimport ErmjGameCfgHandler from \"./handlers/ErmjGameCfgHandler\";\r\nimport ErmjEnterHandler from \"./handlers/ErmjEnterHandler\";\r\nimport ErmjLeaveHandler from \"./handlers/ErmjLeaveHandler\";\r\nimport { ErmjLeaveMatchHandler, ErmjRefreshHandler, ErmjOfflineHandler, ErmjStartHandler, ErmjEndHandler, ErmjWaitHandler, ErmjReadyHandler } from \"./handlers/ErmjEasyHandler\";\r\nimport { ErmjSyncEndHandler, ErmjSyncBeginHandler, ErmjSyncRefreshHandler } from \"./handlers/ErmjSyncHandler\";\r\nimport ErmjDealHandler from \"./handlers/ErmjDealHandler\";\r\nimport ErmjRewardHandler from \"./handlers/ErmjRewardHandler\";\r\nimport ErmjDrawCardHandler from \"./handlers/ErmjDrawCardHandler\";\r\nimport ErmjBankerHandler from \"./handlers/ErmjBankerHandler\";\r\nimport ErmjChangeFlowerHandler from \"./handlers/ErmjChangeFlowerHandler\";\r\nimport { ErmjCallSelfBlockHandler, ErmjCallOtherBlockHandler } from \"./handlers/ErmjCallBlockHandler\";\r\nimport { ErmjPlayStartHandler, ErmjCallPlayHandler, ErmjPlayHandler, ErmjChowHandler, ErmjPongHandler, ErmjKongHandler } from \"./handlers/ErmjPlayHandler\";\r\nimport ErmjWinHandler from \"./handlers/ErmjWinHandler\";\r\nimport { ErmjCallTingHandler, ErmjTingHandler, ErmjTingResultHandler } from \"./handlers/ErmjTingHandler\";\r\nimport ErmjChatHandler from \"./handlers/ErmjChatHandler\";\r\nimport ErmjAutoHandler from \"./handlers/ErmjAutoHandler\";\r\nimport ErmjLoadingUI from \"./component/ErmjLoadingUI\";\r\nimport ErmjMainUI from \"./panel/ErmjMainUI\";\r\nimport ErmjOutMjViewManager from \"./manager/ErmjOutMjViewManager\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n@ccclass\r\nexport default class ErmjDriver extends cc.Component{\r\n    /** 默认头像框资源 */\r\n    @property(cc.SpriteFrame)\r\n    defaultHeadKuang:cc.SpriteFrame = null;\r\n    static instance: ErmjDriver = null;\r\n    public maskNode: cc.Node;\r\n    private loadingUI: ErmjLoadingUI;\r\n\r\n    public Context: ErmjContext;\r\n    public Define: ErmjDefine;\r\n    public Path: ErmjPathHelper;\r\n    public SitHelper: PVPSitHelper;\r\n    \r\n    public mainUI: ErmjMainUI;\r\n    public outMjManager: ErmjOutMjViewManager;\r\n\r\n    public settingPop: cc.Node;\r\n    public rulePop: cc.Node;\r\n    public inGame = false;     // 处理某些极端场景的报错, 资源预加载时强退到大厅, 场景未来得及销毁时立马又进来\r\n\r\n    onLoad(){\r\n        ErmjDriver.instance = this;\r\n        this.inGame = true;\r\n        this.maskNode = cc.find(\"mask\", this.node);\r\n        this.maskNode.zIndex = 9;\r\n        this.loadingUI = Global.UIHelper.safeGetComponent(this.node, \"loading\", ErmjLoadingUI);\r\n        this.loadingUI.node.zIndex = 8;\r\n\r\n        this.setupGlobal();\r\n        this.setup();\r\n        ErmjGameConst.playMusic(ErmjAudioConst.bgm, true);\r\n    }\r\n\r\n    //初始化大厅相关逻辑\r\n    private setupGlobal(){\r\n        //初始化update驱动  初始化timer\r\n        Global.Component.initDriver();\r\n        //初始化Game驱动\r\n        Game.Component.initDriver();\r\n        Global.UI.initUIRoot();\r\n    }\r\n\r\n    private setup(){\r\n        Game.Context = new ErmjContext();\r\n        this.Context = Game.Context;\r\n        this.Define = new ErmjDefine();\r\n        this.Path = new ErmjPathHelper();\r\n        this.SitHelper = new PVPSitHelper();\r\n\r\n        this.registHandler(this.Define);\r\n    }\r\n\r\n    start(){\r\n        Game.Event.on(Game.EVENT_FORCE_LEAVE_GAME, this, this.onForceLeave);\r\n        Game.Event.on(Game.EVENT_NOT_IN_TABLE, this, this.onForceLeave);\r\n        Game.Event.on(Game.EVENT_SOCKET_RECONNECT, this, this.onSocketReconnect);\r\n        Game.Event.on(Game.EVENT_SOCKET_RESUME, this, this.onResume);\r\n        Game.Event.on(Game.EVENT_MATCH_PLAYER, this, this.onMatchPlayer);\r\n    }\r\n\r\n    onDestroy(){\r\n        Game.Event.off(Game.EVENT_FORCE_LEAVE_GAME, this, this.onForceLeave);\r\n        Game.Event.off(Game.EVENT_NOT_IN_TABLE, this, this.onForceLeave);\r\n        Game.Event.off(Game.EVENT_SOCKET_RECONNECT, this, this.onSocketReconnect);\r\n        Game.Event.off(Game.EVENT_SOCKET_RESUME, this, this.onResume);\r\n        Game.Event.off(Game.EVENT_MATCH_PLAYER, this, this.onMatchPlayer);\r\n        \r\n        this.unscheduleAllCallbacks();\r\n        ErmjDriver.instance = null;\r\n    }\r\n\r\n    /**\r\n     * 加载vip头像框，如果使用的不是vip头像框，则使用子游戏默认头像框\r\n     * @param spriteHeadKuang 头像框Sprite\r\n     * @param headkuang vip头像框字符串\r\n     */\r\n    LoadVipHeadKuang(spriteHeadKuang:cc.Sprite, headkuang:string){\r\n        // if(headkuang > \"0\"){\r\n        //     Global.Toolkit.loadLocalHeadFrame(spriteHeadKuang, headkuang);\r\n        // }else{\r\n        //     spriteHeadKuang.spriteFrame = this.defaultHeadKuang;\r\n        // }\r\n        var atlasString = \"texture/headFrame/headFrame\";\r\n        var sfString = \"txkuang_vip\" + headkuang;\r\n        Global.ResourceManager.loadBundleAutoAtlas(\"2101\", spriteHeadKuang, atlasString, sfString, null, true);\r\n    }\r\n\r\n    private registHandler(Define:ErmjDefine){\r\n        Game.Control.registDefaultHandler();\r\n\r\n        Game.Control.registHandler(Define.CmdGameCfg, new ErmjGameCfgHandler);\r\n        Game.Control.registHandler(Define.CmdEnter, new ErmjEnterHandler);\r\n        Game.Control.registHandler(Define.CmdLeave, new ErmjLeaveHandler);\r\n        Game.Control.registHandler(Define.CmdLeaveMatch, new ErmjLeaveMatchHandler);\r\n        Game.Control.registHandler(Define.CmdRefresh, new ErmjRefreshHandler);\r\n        Game.Control.registHandler(Define.CmdOffline, new ErmjOfflineHandler);\r\n        Game.Control.registHandler(Define.CmdSyncEnd, new ErmjSyncEndHandler);\r\n        Game.Control.registHandler(Define.CmdSyncBegin, new ErmjSyncBeginHandler);\r\n        Game.Control.registHandler(Define.CmdSyncTable, new ErmjSyncRefreshHandler);\r\n\r\n        Game.Control.registHandler(Define.CmdCallReady, new ErmjReadyHandler);\r\n        Game.Control.registHandler(Define.CmdGameStart, new ErmjStartHandler);\r\n        Game.Control.registHandler(Define.CmdBanker, new ErmjBankerHandler);\r\n        Game.Control.registHandler(Define.CmdDeal, new ErmjDealHandler);\r\n        Game.Control.registHandler(Define.CmdChangeFlower, new ErmjChangeFlowerHandler);\r\n        Game.Control.registHandler(Define.CmdPlayStart, new ErmjPlayStartHandler);\r\n        Game.Control.registHandler(Define.CmdDrawCard, new ErmjDrawCardHandler);\r\n        Game.Control.registHandler(Define.CmdCallPlay, new ErmjCallPlayHandler);\r\n        Game.Control.registHandler(Define.CmdPlay, new ErmjPlayHandler);\r\n        Game.Control.registHandler(Define.CmdChow, new ErmjChowHandler);\r\n        Game.Control.registHandler(Define.CmdPong, new ErmjPongHandler);\r\n        Game.Control.registHandler(Define.CmdKong, new ErmjKongHandler);\r\n        Game.Control.registHandler(Define.CmdCallTing, new ErmjCallTingHandler);\r\n        Game.Control.registHandler(Define.CmdTing, new ErmjTingHandler);\r\n        Game.Control.registHandler(Define.CmdTingResult, new ErmjTingResultHandler);\r\n        \r\n        Game.Control.registHandler(Define.CmdCallSelfBlock, new ErmjCallSelfBlockHandler);\r\n        Game.Control.registHandler(Define.CmdCallOtherBlock, new ErmjCallOtherBlockHandler);\r\n        \r\n        Game.Control.registHandler(Define.CmdWin, new ErmjWinHandler);\r\n        Game.Control.registHandler(Define.CmdReward, new ErmjRewardHandler);\r\n        Game.Control.registHandler(Define.CmdGameEnd, new ErmjEndHandler);\r\n        Game.Control.registHandler(Define.CmdWait, new ErmjWaitHandler);\r\n        Game.Control.registHandler(Define.CmdChat, new ErmjChatHandler);\r\n        Game.Control.registHandler(Define.CmdAuto, new ErmjAutoHandler);\r\n    }\r\n\r\n    //重连时需要先清理玩家列表，后续重新进入\r\n    private onSocketReconnect(){\r\n        if(this.mainUI){\r\n            Global.Audio.stopAllEffect();\r\n            Game.Tween.clear();\r\n            Game.Component.unscheduleAllCallbacks();\r\n            this.mainUI.clearWnd();\r\n            this.Context.clearByGame();\r\n        }\r\n    }\r\n\r\n    private onForceLeave(forceGoToHall){\r\n        if(forceGoToHall)\r\n            this.exitScene();\r\n        else\r\n            this.leaveGame();\r\n    }\r\n\r\n    private onResume(time){\r\n        // if (time >= 2 * 60)\r\n        //     this.leaveGame();\r\n    }\r\n\r\n    //进入游戏场景\r\n    public startScene(){\r\n        this.mainUI.node.active = false;\r\n        this.reqEnterGame(ErmjGameConst.Gid, Game.Control.curLv);\r\n    }\r\n\r\n    // //请求进入房间\r\n    public reqEnterGame(gid: number, glv:string, gsc:string = \"default\"){\r\n        Game.Control.connnectAndEnterGameInLevelScene(gid, glv, gsc, null);\r\n    }\r\n\r\n    public enterGame(){\r\n        this.mainUI.callAllPlayers('hide');\r\n        this.mainUI.clearByRound();\r\n        this.mainUI.clearByGame();\r\n        this.Context.clearByRound();\r\n        //已经在游戏中  不重复播\r\n        if (this.mainUI.node.active)\r\n            return;\r\n        ErmjGameConst.playMusic(ErmjAudioConst.bgm, true);  \r\n        let comp = Global.UIHelper.addIntoGameAnimComp(this.mainUI.node, this.loadingUI.node, [], [], [], []);\r\n        comp.maskNode = this.maskNode;\r\n        this.maskNode.opacity = 1;\r\n        this.maskNode.active = true;\r\n        this.mainUI.node.active = true;\r\n        comp.startAnimtionByMask(1, 0, null, null);\r\n    }\r\n\r\n    public leaveGame(){\r\n        Game.Tween.clear();\r\n        Game.Component.unscheduleAllCallbacks();\r\n        // this.Context.clearByGame();      // debug 提前清理可能会导致报错\r\n        // if (this.mainUI){\r\n        //     this.mainUI.clearWnd();\r\n        // }\r\n        \r\n        this.scheduleOnce(()=>{\r\n            this.exitScene();\r\n        }, 0.5);\r\n    }\r\n\r\n    public exitScene(){\r\n        if (!this.inGame)       // 1.加延时退出保证服务器收到leave消息避免shutDown掉  2.加return判断已经退出的无须重复执行\r\n            return;\r\n        this.inGame = false;\r\n        \r\n        Game.Tween.clear();\r\n        Game.Component.unscheduleAllCallbacks();\r\n        if (this.mainUI){\r\n            this.mainUI.clearWnd();\r\n            if (this.rulePop)\r\n                this.rulePop.active = false;\r\n            if (this.settingPop)\r\n                this.settingPop.active = false;\r\n        }\r\n        this.Context.clearByGame();\r\n        Game.Control.shutDown();\r\n        Global.Toolkit.transmitHallWindow(\"WndGameLobbyShell\", ErmjGameConst.Gid);\r\n        Game.GamePreloadTool.releaseKeepAsset(ErmjGameConst.Gid, true);\r\n        Global.SceneManager.goToHall();\r\n    }\r\n\r\n    public beginSync(){\r\n        Game.Tween.clear();\r\n        Game.Component.unscheduleAllCallbacks();\r\n        this.mainUI.clearByGame();\r\n    }\r\n\r\n    public reMatchPlayer(){\r\n        if(this.Context.session && this.Context.session._glv){\r\n            this.stopGameConnect();    \r\n            let lv = this.Context.session._glv;\r\n            this.reqEnterGame(ErmjGameConst.Gid, lv);\r\n        }\r\n        else{\r\n            Game.Server.send(this.Define.CmdLeave, { \"IsClose\": 1 });\r\n            this.leaveGame();\r\n        }\r\n    }\r\n\r\n    public stopGameConnect(){\r\n        Game.Server.stop();\r\n        Game.Server.clearDst();\r\n        Game.Server.clearData();\r\n    }\r\n\r\n    private onMatchPlayer(msg){\r\n        if (!this.inGame)\r\n            return;\r\n        this.enterGame();\r\n        this.Context.isWaitMatch = true;\r\n\r\n        let data = Global.GameData.getGameInfo(ErmjGameConst.Gid);\r\n        let lv = msg._para._glv;\r\n        let arr = data.levels;\r\n        for(let i = 0; i < arr.length; i++){\r\n            if (arr[i].level == lv){\r\n                this.mainUI.updateLevelBase(arr[i].PointRate, lv);\r\n                break;\r\n            }\r\n        }\r\n        let timeo = Math.ceil((msg._timeo * 1000 - Date.now() + msg._receiveTime) / 1000);\r\n        this.mainUI.showMatch(timeo);\r\n    }\r\n\r\n    public async openSettingPop(){\r\n        if (this.settingPop && cc.isValid(this.settingPop)){\r\n            this.settingPop.active = true;\r\n        }\r\n        else{\r\n            let prefab = await Game.GamePreloadTool.preloadPrefab(Game.GamePreloadTool.settingPop, true);\r\n            if (this.mainUI.node && cc.isValid(this.mainUI.node) && prefab && cc.isValid(prefab)){\r\n                let node = <cc.Node>cc.instantiate(prefab);\r\n                node.setParent(Global.UI.getLayer(\"PopLayer\"));\r\n                node.active = true;\r\n                this.settingPop = node;\r\n            }\r\n        }\r\n    }\r\n\r\n    public async openRulePop(){\r\n        if (this.rulePop && cc.isValid(this.rulePop)){\r\n            this.rulePop.active = true;\r\n        }\r\n        else{\r\n            let prefab = await Game.GamePreloadTool.preloadPrefab(Game.GamePreloadTool.rulePop, true);\r\n            if (this.mainUI.node && cc.isValid(this.mainUI.node) && prefab && cc.isValid(prefab)){\r\n                let node = <cc.Node>cc.instantiate(prefab);\r\n                node.setParent(Global.UI.getLayer(\"PopLayer\"));\r\n                node.active = true;\r\n                this.rulePop = node;\r\n            }\r\n        }\r\n    }\r\n}"]}