{"version":3,"sources":["assets\\hall\\scripts\\logic\\core\\Global.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import EventDispatcher from \"../../framework/event/EventDispatcher\";\r\nimport { Logger, LogLevel } from \"../../framework/debug/Logger\";\r\nimport FsmManager from \"../../framework/fsm/FsmManager\";\r\nimport HttpProxy from \"../../framework/net/http/HttpProxy\";\r\nimport HallServer from \"./net/hall/HallServer\";\r\nimport ResourceManager from \"../../framework/resource/ResourceManager\";\r\nimport Setting from \"./setting/Setting\";\r\nimport Toolkit from \"./tool/Toolkit\";\r\nimport AudioManager from \"../../framework/audio/AudioManager\";\r\nimport UIManager from \"./ui/UIManager\";\r\nimport ModelManager from \"../../framework/model/ModelMananger\";\r\nimport ConfigManager from \"../../framework/config/ConfigManager\";\r\nimport SectionManager from \"../../framework/section/SectionManager\";\r\nimport SceneManager from \"./scene/SceneManager\";\r\nimport ComponentProvider from \"./component/ComponentProvider\";\r\nimport NativeEvent from \"../../framework/native/NatvieEvent\";\r\nimport HotUpdateManager from \"./hotUpdate/HotUpdateManager\";\r\nimport PlayerData from \"../hallcommon/data/PlayerData\";\r\nimport GameData from \"../hallcommon/data/GameData\";\r\nimport Language from \"./tool/Language\";\r\nimport UIHelper from \"./tool/UIHelper\";\r\nimport PersistHelper from \"./tool/PersisitHelpper\";\r\nimport GongGaoData from \"../hallcommon/data/GongGaoData\";\r\nimport ActivityToggle from \"../hall/ui/hall/ActivityToggle\";\r\nimport ChatServer from \"./net/chat/ChatServer\";\r\nimport { ReportTool } from \"./tool/ReportTool\";\r\nimport DNSControl from \"../../framework/net/dns/DNSControl\";\r\nimport NativeJSBBridge from \"../../framework/native/NativeJSBBridge\";\r\nimport AppDunControl from \"../../framework/net/dun/AppDunControl\";\r\nimport CustomAppInfo from \"../hallcommon/app/CustomApp\";\r\nimport { AESUtil } from \"./tool/AESUtil\";\r\nimport ArrayUtil from \"./tool/ArrayUtil\";\r\nimport { ChannelUtil } from \"./tool/ChannelUtil\";\r\nimport { JSUtil } from \"./tool/JSUtil\";\r\nimport UIUtil from \"./tool/UIUtil\";\r\nimport { UrlUtil } from \"./tool/UrlUtil\";\r\nimport { ModuleManager } from \"../../framework/module/ModuleManager\";\r\nimport WebViewControl from \"./component/WebViewControl\";\r\nimport AppUpdateHelper from \"./tool/AppUpdateHelper\";\r\nimport SearchPathHelper from \"./tool/SearchPathHelper\";\r\nimport WebNative from \"../../framework/native/WebNative\";\r\nimport GameWebView from \"../../framework/native/GameWebView\";\r\nimport DunHotUpdateUrlSetting from \"./setting/DunHotUpdateUrlSetting\";\r\n\r\n\r\nexport default  class Global \r\n{\r\n    public static Event:EventDispatcher;\r\n    public static FsmManager:FsmManager;\r\n    \r\n    public static Http:HttpProxy;\r\n    public static HallServer:HallServer;\r\n\r\n\r\n    public static Toolkit:Toolkit;\r\n\r\n    public static UIHelper:UIHelper;\r\n\r\n    public static Setting:Setting;\r\n\r\n    public static ResourceManager:ResourceManager;\r\n\r\n    public static Audio:AudioManager;\r\n\r\n    public static ModelManager:ModelManager;\r\n    public static ConfigManager:ConfigManager;\r\n    public static SectionManager:SectionManager;\r\n\r\n    public static UI:UIManager;\r\n    public static SceneManager:SceneManager;\r\n    public static NativeEvent:NativeEvent;\r\n    public static WebNative:WebNative;\r\n    public static GameWebView:GameWebView;\r\n    \r\n    public static Component:ComponentProvider;\r\n    public static HotUpdateManager:HotUpdateManager;\r\n\r\n    public static Language:Language;\r\n\r\n    public static PlayerData:PlayerData;\r\n    public static GameData:GameData;\r\n    public static GongGaoData:GongGaoData;\r\n\r\n    public static Persist:PersistHelper;\r\n    public static ActivityToggle:ActivityToggle;\r\n    public static ChatServer:ChatServer;\r\n\r\n    public static ReportTool:ReportTool;\r\n\r\n    public static DNS:DNSControl;\r\n    public static NativeJSBBridge:NativeJSBBridge;\r\n    public static AppDun:AppDunControl\r\n    public static customApp:CustomAppInfo;\r\n    public static AESUtil:AESUtil;\r\n    public static ArrayUtil:ArrayUtil;\r\n    public static ChannelUtil:ChannelUtil;\r\n    public static JSUtil:JSUtil;\r\n    public static UIUtil:UIUtil;\r\n    public static UrlUtil:UrlUtil;\r\n    public static ModuleManager:ModuleManager;\r\n    public static WebViewControl:WebViewControl;\r\n    public static AppUpdateHelper:AppUpdateHelper;\r\n    public static SearchPathHelper: SearchPathHelper;\r\n    public static DunHotUpdateUrlSetting : DunHotUpdateUrlSetting\r\n\r\n    public static setup()\r\n    {\r\n        //全局事件管理器\r\n        this.Event = new EventDispatcher();\r\n        //三方库的使用 + 常用工具函数\r\n        this.Toolkit = new Toolkit();\r\n        this.AESUtil = new AESUtil();\r\n        this.ArrayUtil = new ArrayUtil();\r\n        this.ChannelUtil = new ChannelUtil();\r\n        this.JSUtil = new JSUtil();\r\n        this.UIUtil = new UIUtil();\r\n        this.UrlUtil = new UrlUtil();\r\n        this.ModuleManager = new ModuleManager();\r\n        this.WebViewControl = new WebViewControl()\r\n        this.AppUpdateHelper = new AppUpdateHelper();\r\n        this.SearchPathHelper = new SearchPathHelper();\r\n\r\n        \r\n        this.UIHelper = new UIHelper();\r\n\r\n        Logger.logLevel = LogLevel.All;\r\n        Logger.logEnable = false;\r\n\r\n        //fsm管理器\r\n        this.FsmManager = new FsmManager();\r\n        //http请求  主要负责common协议请求  和 get请求  业务逻辑走netmanager\r\n        this.Http = new HttpProxy();\r\n        //大厅协议通信\r\n\r\n\r\n        //各类游戏配置  +  本地存储\r\n        this.Setting = new Setting();\r\n        this.Setting.setup();\r\n        //资源管理器  资源加载  释放   依赖管理\r\n        this.ResourceManager = new ResourceManager();\r\n\r\n        //数据模块管理器\r\n        this.ModelManager = ModelManager.Instance;\r\n        this.ModelManager.init();\r\n        //配置管理器\r\n        this.ConfigManager = ConfigManager.Instance;\r\n        this.SectionManager = SectionManager.Instance;\r\n        \r\n        this.Audio = new AudioManager();\r\n        this.Audio.setup(this.Setting.settingData, this.ResourceManager);\r\n\r\n        this.UI = new UIManager();\r\n        this.UI.setup(this.ResourceManager);\r\n\r\n        this.Persist = new PersistHelper();\r\n\r\n        this.PlayerData = new PlayerData();\r\n        this.GameData = new GameData();\r\n        this.GongGaoData = new GongGaoData();\r\n        this.ActivityToggle = new ActivityToggle();\r\n\r\n        this.DunHotUpdateUrlSetting = new DunHotUpdateUrlSetting()\r\n\r\n        this.SceneManager = new SceneManager();\r\n        this.SceneManager.setup();\r\n\r\n        this.Component = new ComponentProvider(\"GlobalDriver\");\r\n        this.Component.setup(this.onUpdate.bind(this), this.onLateUpdate.bind(this));\r\n        \r\n        this.NativeEvent = new NativeEvent();\r\n        this.HotUpdateManager = new HotUpdateManager();\r\n\r\n        this.HallServer = new HallServer();\r\n        this.HallServer.setup();\r\n\r\n        this.Language = new Language();\r\n        this.ChatServer = new ChatServer();\r\n\r\n        this.ReportTool = new ReportTool();\r\n        this.ReportTool.init();\r\n\r\n        this.DNS = new DNSControl();\r\n        this.NativeJSBBridge = new NativeJSBBridge();\r\n        this.AppDun = new AppDunControl();\r\n\r\n        this.customApp = new CustomAppInfo();\r\n        this.customApp.initConfig()\r\n\r\n        if(cc.sys.isBrowser){   //浏览器状态下注册webNative类\r\n            this.WebNative = new WebNative();\r\n            this.WebNative.setup();\r\n            this.GameWebView = new GameWebView();\r\n            this.GameWebView.init();\r\n        }\r\n        \r\n    }\r\n\r\n\r\n    public static onUpdate(dt)\r\n    {\r\n        this.HallServer.onUpdate(dt)\r\n        this.FsmManager.onUpdate();\r\n        this.UI.onUpdate(dt);\r\n        this.Http.onUpdate(dt);\r\n        this.ReportTool.onUpdate(dt);\r\n    }\r\n\r\n    public static onLateUpdate()\r\n    {\r\n    }\r\n}"]}