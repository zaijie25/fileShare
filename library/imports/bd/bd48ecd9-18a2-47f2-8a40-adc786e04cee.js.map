{"version":3,"sources":["assets\\hall\\scripts\\logic\\hall\\ui\\BindingGift\\WndBindingGift.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import WndBase, { DestoryType } from \"../../../core/ui/WndBase\";\r\nimport GlobalEvent from \"../../../core/GlobalEvent\";\r\nimport BindingGiftModel from \"../../../hallcommon/model/BindingGiftModel\";\r\nimport HallPopMsgHelper, { PopWndName } from \"../../tool/HallPopMsgHelper\";\r\n\r\nexport default class WndBindingGift extends WndBase {\r\n\r\n    private model: BindingGiftModel\r\n    private SpineNode: sp.Skeleton\r\n    private bindBtn: cc.Node\r\n    private timerId: NodeJS.Timeout\r\n    private bindGiftLabel: cc.Label\r\n\r\n    protected onInit() {\r\n        this.name = \"WndBindingGift\";\r\n        this.layer = Global.UI.PopLayer;\r\n        this.resPath = \"hall/prefabs/ui/BindingGift/BindingGift\";\r\n        this.model = <BindingGiftModel>Global.ModelManager.getModel(\"BindingGiftModel\");\r\n        this.destoryType = DestoryType.Now;\r\n    }\r\n\r\n    protected initView() {\r\n        this.node.width = cc.Canvas.instance.node.width;\r\n        this.node.height = cc.Canvas.instance.node.height;\r\n        this.bindBtn = cc.find(\"BindBtn\", this.node)\r\n        this.bindGiftLabel = this.getComponent(\"awardLabel\", cc.Label)\r\n        this.addCommonClick(\"close\", this.close, this)\r\n        this.bindBtn = this.addCommonClick(\"BindBtn\", this.OpenBindingPhone, this)\r\n        if(this.bindBtn)\r\n        {\r\n            this.bindBtn.active = true\r\n        }\r\n    }\r\n\r\n\r\n    private playSpineAward() {\r\n        if (this.SpineNode == null) {\r\n            this.SpineNode = cc.find(\"spineNode\", this.node).getComponent(sp.Skeleton)\r\n            this.SpineNode.setCompleteListener(() => {\r\n\r\n                this.SpineNode.clearTrack(0)\r\n                this.SpineNode.setAnimation(0, \"idle2\", true)\r\n            })\r\n        }\r\n        this.SpineNode.clearTrack(0)\r\n        this.SpineNode.setAnimation(0, \"idle\", false)\r\n    }\r\n\r\n    OpenBindingPhone() {\r\n        Logger.error(\"点击绑定手机:0000\");\r\n        HallPopMsgHelper.Instance.addMsgList(PopWndName.BindPhone, () => {\r\n            Logger.error(\"点击绑定手机\");\r\n            Global.Event.event(GlobalEvent.POP_BIND_PHONE);\r\n        });\r\n        this.close();\r\n    }\r\n\r\n    protected onOpen(args) {\r\n        if (this.model.BindAwardNum === 3)\r\n            Global.Audio.playAudioSource(\"hall/sound/binding\")\r\n        this.model.SetStatus(false);\r\n        this.bindGiftLabel.string = this.model.BindAwardNum.toString() || \"\"\r\n        \r\n        if (Global.Setting.SkinConfig.isPurple)\r\n            this.playSpineAward();\r\n    }\r\n\r\n\r\n    protected onClose() {\r\n        HallPopMsgHelper.Instance.releaseLock(PopWndName.BindGift);\r\n        clearTimeout(this.timerId)\r\n    }\r\n\r\n}"]}