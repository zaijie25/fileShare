{"version":3,"sources":["assets\\hall\\scripts\\logic\\hall\\ui\\recharge\\WndRecharge.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import RechargeModel from \"../../../hallcommon/model/RechargeModel\";\r\nimport WndBase, { DestoryType } from \"../../../core/ui/WndBase\";\r\nimport RechangeView from \"./RechangeView\";\r\nimport CashView from \"./CashView\";\r\nimport AppHelper from \"../../../core/tool/AppHelper\";\r\nimport RechagreTipModel from \"../../../hallcommon/model/RechagreTipModel\";\r\nimport { SceneType } from \"../../../core/scene/SceneManager\";\r\n\r\nexport default class WndRecharge extends WndBase{\r\n    public rechargeView: RechangeView;\r\n    private cashView: CashView;\r\n    rechargeTitle: cc.Node\r\n    cashTitle: cc.Node\r\n    rechargePanel: cc.Node;\r\n    cashPanel: cc.Node;\r\n    private model: RechargeModel;\r\n    private loadingNode: cc.Node;\r\n    private iconSp: cc.Sprite;\r\n    Tipmodel: RechagreTipModel;\r\n\r\n\r\n    private subViewPath :any = {\r\n        \"rechargeView\":\"hall/prefabs/ui/Recharge/subView/RechangePanel\",\r\n        \"cashView\":\"hall/prefabs/ui/Recharge/subView/CashPanel\",\r\n        \r\n    }\r\n\r\n    private viewKeyTypeMap :any = {\r\n        \"rechargeView\":RechangeView,\r\n        \"cashView\":CashView,\r\n       \r\n    }\r\n    protected onInit() {\r\n        this.name = \"WndRecharge\";\r\n        this.layer = Global.UI.PopLayer;\r\n        this.resPath = \"hall/prefabs/ui/Recharge/RechangeUI\";\r\n        this.model = <RechargeModel>Global.ModelManager.getModel(\"RechargeModel\");\r\n        this.destoryType = DestoryType.None;\r\n    }\r\n    onOpen(){\r\n        if (AppHelper.isCash) {\r\n            // this.cashTitle.isChecked =true;\r\n            this.changeToRechargeToggle(false);\r\n            this.changePanel2();\r\n        }else{\r\n            // this.rechargeTitle.isChecked =true;\r\n            this.changeToRechargeToggle(true);\r\n            this.changePanel()\r\n        }\r\n        this.model.on(RechargeModel.ShowWaitingAnim, this, this.showLoading); \r\n    }\r\n   \r\n    protected initView(){\r\n        this.addCommonClick(\"close\",this.close,this);\r\n        this.rechargeTitle = this.getChild(\"topButton/rechargeTitle\");\r\n        this.cashTitle = this.getChild(\"topButton/cashTitle\");\r\n        this.Tipmodel = <RechagreTipModel>Global.ModelManager.getModel(\"RechagreTipModel\");\r\n        this.rechargeTitle.on(\"click\",this.changePanel,this);\r\n        this.cashTitle.on(\"click\",this.changePanel2,this);\r\n\r\n        this.loadingNode = this.getChild(\"animLoading\");\r\n        this.loadingNode.active = false\r\n        this.iconSp = <cc.Sprite>this.getComponent(\"animLoading/icon\", cc.Sprite);\r\n        this.initSubViewClass(this.viewKeyTypeMap)\r\n        \r\n        this.InitScripts()\r\n    }\r\n\r\n\r\n    async InitScripts() {\r\n        await this.initSubView(this.subViewPath,this.viewKeyTypeMap,this.getChild(\"payNode\"))\r\n    }\r\n    private showLoading(flag: boolean, key?: string){\r\n        this.loadingNode.active = flag;\r\n        if (flag){\r\n            //除了紫色版本外 其他版本资源需要放到hall/texture/hall/rechargeCash/rechargeCash  中\r\n            if(Global.Setting.SkinConfig.isPurple)\r\n                this.iconSp.spriteFrame = Global.ResourceManager.getSprite(\"hall/texture/common/icon\", Global.Setting.SkinConfig.rechargeIconsCfg[key][2]);\r\n            else\r\n            {\r\n                Global.ResourceManager.loadAutoAtlas(this.iconSp, \"hall/texture/hall/rechargeCash/rechargeCash\", Global.Setting.SkinConfig.rechargeIconsCfg[key][2]);\r\n            }\r\n        }\r\n    }\r\n\r\n    changePanel(){\r\n        if(this.rechargeView)\r\n        {\r\n            this.rechargeView.subViewState = true;\r\n        }\r\n        if(this.cashView)\r\n        {\r\n            this.cashView.subViewState = false;\r\n        }\r\n        this.changeToRechargeToggle(true);\r\n    }\r\n\r\n    changeToRechargeToggle(yes:boolean){\r\n        let cashCheck = this.cashTitle.getChildByName(\"check\") as cc.Node;\r\n        let cashUncheck = this.cashTitle.getChildByName(\"unchecked\") as cc.Node;\r\n        let rechargeCheck = this.rechargeTitle.getChildByName(\"check\") as cc.Node;\r\n        let rechargeUncheck = this.rechargeTitle.getChildByName(\"unchecked\") as cc.Node;\r\n        rechargeCheck.active = yes;\r\n        rechargeUncheck.active = !yes;\r\n        cashCheck.active = !yes;\r\n        cashUncheck.active = yes;\r\n    }\r\n\r\n    changePanel2(){\r\n        if (Global.SceneManager.sceneType == SceneType.Game) {\r\n            Global.UI.fastTip(\"请返回游戏大厅后，再进行提现操作哦！\");\r\n            Game.Component.scheduleOnce(()=>{\r\n                // this.rechargeTitle.isChecked =true;\r\n                this.changeToRechargeToggle(true);\r\n                this.changePanel()\r\n            },0.1);\r\n            return\r\n        }\r\n        if(this.rechargeView)\r\n        {\r\n            this.rechargeView.subViewState = false;\r\n        }\r\n        if(this.cashView)\r\n        {\r\n            this.cashView.subViewState = true;\r\n        }\r\n        this.changeToRechargeToggle(false);\r\n    }\r\n    protected onClose(){\r\n        //Listener\r\n        this.Tipmodel.flag = false;\r\n        AppHelper.isCash=false;\r\n        this.model.off(RechargeModel.ShowWaitingAnim, this, this.showLoading); \r\n    }\r\n}    "]}