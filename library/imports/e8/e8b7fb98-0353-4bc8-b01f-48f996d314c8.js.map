{"version":3,"sources":["assets\\hall_libs\\state-machine.js"],"names":["webpackUniversalModuleDefinition","root","factory","exports","module","define","amd","modules","installedModules","__webpack_require__","moduleId","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","target","sources","source","key","arguments","length","mixin","build","config","max","plugin","plugins","methods","properties","defineProperties","hook","fsm","additional","method","args","context","concat","apply","camelize","label","result","word","words","split","toLowerCase","charAt","toUpperCase","substring","prepended","prepend","Config","options","StateMachine","defaults","states","transitions","map","lifecycle","configureLifecycle","init","configureInitTransition","data","configureData","configureMethods","wildcard","configureTransitions","configurePlugins","addState","push","addStateLifecycleNames","onEnter","onLeave","on","addTransition","indexOf","addTransitionLifecycleNames","onBefore","onAfter","mapTransition","transition","from","to","state","active","builtin","configure","Array","isArray","transitionFor","transitionsFor","keys","allStates","allTransitions","Exception","UNOBSERVED","JSM","observers","fire","is","isPending","pending","can","seek","cannot","entry","transit","changed","observeUnchangedState","onInvalidTransition","onPendingTransition","beginTransit","unshift","observeEvents","observersForEvent","endTransit","failTransit","doTransit","observe","observer","event","events","previousEvent","previousResult","undefined","pluggable","shift","then","bind","PublicMethods","_fsm","t","PublicProperties","set","Error","cstor","instance","forEach","slice","version","message","current"],"mappings":"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","sourceRoot":"/","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\r\n\tif(typeof exports === 'object' && typeof module === 'object')\r\n\t\tmodule.exports = factory();\r\n\telse if(typeof define === 'function' && define.amd)\r\n\t\tdefine(\"StateMachine\", [], factory);\r\n\telse if(typeof exports === 'object')\r\n\t\texports[\"StateMachine\"] = factory();\r\n\telse\r\n\t\troot[\"StateMachine\"] = factory();\r\n})(this, function() {\r\nreturn /******/ (function(modules) { // webpackBootstrap\r\n/******/ \t// The module cache\r\n/******/ \tvar installedModules = {};\r\n/******/\r\n/******/ \t// The require function\r\n/******/ \tfunction __webpack_require__(moduleId) {\r\n/******/\r\n/******/ \t\t// Check if module is in cache\r\n/******/ \t\tif(installedModules[moduleId]) {\r\n/******/ \t\t\treturn installedModules[moduleId].exports;\r\n/******/ \t\t}\r\n/******/ \t\t// Create a new module (and put it into the cache)\r\n/******/ \t\tvar module = installedModules[moduleId] = {\r\n/******/ \t\t\ti: moduleId,\r\n/******/ \t\t\tl: false,\r\n/******/ \t\t\texports: {}\r\n/******/ \t\t};\r\n/******/\r\n/******/ \t\t// Execute the module function\r\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\r\n/******/\r\n/******/ \t\t// Flag the module as loaded\r\n/******/ \t\tmodule.l = true;\r\n/******/\r\n/******/ \t\t// Return the exports of the module\r\n/******/ \t\treturn module.exports;\r\n/******/ \t}\r\n/******/\r\n/******/\r\n/******/ \t// expose the modules object (__webpack_modules__)\r\n/******/ \t__webpack_require__.m = modules;\r\n/******/\r\n/******/ \t// expose the module cache\r\n/******/ \t__webpack_require__.c = installedModules;\r\n/******/\r\n/******/ \t// identity function for calling harmony imports with the correct context\r\n/******/ \t__webpack_require__.i = function(value) { return value; };\r\n/******/\r\n/******/ \t// define getter function for harmony exports\r\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\r\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\r\n/******/ \t\t\tObject.defineProperty(exports, name, {\r\n/******/ \t\t\t\tconfigurable: false,\r\n/******/ \t\t\t\tenumerable: true,\r\n/******/ \t\t\t\tget: getter\r\n/******/ \t\t\t});\r\n/******/ \t\t}\r\n/******/ \t};\r\n/******/\r\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\r\n/******/ \t__webpack_require__.n = function(module) {\r\n/******/ \t\tvar getter = module && module.__esModule ?\r\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\r\n/******/ \t\t\tfunction getModuleExports() { return module; };\r\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\r\n/******/ \t\treturn getter;\r\n/******/ \t};\r\n/******/\r\n/******/ \t// Object.prototype.hasOwnProperty.call\r\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\r\n/******/\r\n/******/ \t// __webpack_public_path__\r\n/******/ \t__webpack_require__.p = \"\";\r\n/******/\r\n/******/ \t// Load entry module and return exports\r\n/******/ \treturn __webpack_require__(__webpack_require__.s = 5);\r\n/******/ })\r\n/************************************************************************/\r\n/******/ ([\r\n/* 0 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nmodule.exports = function(target, sources) {\r\n  var n, source, key;\r\n  for(n = 1 ; n < arguments.length ; n++) {\r\n    source = arguments[n];\r\n    for(key in source) {\r\n      if (source.hasOwnProperty(key))\r\n        target[key] = source[key];\r\n    }\r\n  }\r\n  return target;\r\n}\r\n\r\n\r\n/***/ }),\r\n/* 1 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\n//-------------------------------------------------------------------------------------------------\r\n\r\nvar mixin = __webpack_require__(0);\r\n\r\n//-------------------------------------------------------------------------------------------------\r\n\r\nmodule.exports = {\r\n\r\n  build: function(target, config) {\r\n    var n, max, plugin, plugins = config.plugins;\r\n    for(n = 0, max = plugins.length ; n < max ; n++) {\r\n      plugin = plugins[n];\r\n      if (plugin.methods)\r\n        mixin(target, plugin.methods);\r\n      if (plugin.properties)\r\n        Object.defineProperties(target, plugin.properties);\r\n    }\r\n  },\r\n\r\n  hook: function(fsm, name, additional) {\r\n    var n, max, method, plugin,\r\n        plugins = fsm.config.plugins,\r\n        args    = [fsm.context];\r\n\r\n    if (additional)\r\n      args = args.concat(additional)\r\n\r\n    for(n = 0, max = plugins.length ; n < max ; n++) {\r\n      plugin = plugins[n]\r\n      method = plugins[n][name]\r\n      if (method)\r\n        method.apply(plugin, args);\r\n    }\r\n  }\r\n\r\n}\r\n\r\n//-------------------------------------------------------------------------------------------------\r\n\r\n\r\n/***/ }),\r\n/* 2 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\n//-------------------------------------------------------------------------------------------------\r\n\r\nfunction camelize(label) {\r\n\r\n  if (label.length === 0)\r\n    return label;\r\n\r\n  var n, result, word, words = label.split(/[_-]/);\r\n\r\n  // single word with first character already lowercase, return untouched\r\n  if ((words.length === 1) && (words[0][0].toLowerCase() === words[0][0]))\r\n    return label;\r\n\r\n  result = words[0].toLowerCase();\r\n  for(n = 1 ; n < words.length ; n++) {\r\n    result = result + words[n].charAt(0).toUpperCase() + words[n].substring(1).toLowerCase();\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\n//-------------------------------------------------------------------------------------------------\r\n\r\ncamelize.prepended = function(prepend, label) {\r\n  label = camelize(label);\r\n  return prepend + label[0].toUpperCase() + label.substring(1);\r\n}\r\n\r\n//-------------------------------------------------------------------------------------------------\r\n\r\nmodule.exports = camelize;\r\n\r\n\r\n/***/ }),\r\n/* 3 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\n//-------------------------------------------------------------------------------------------------\r\n\r\nvar mixin    = __webpack_require__(0),\r\n    camelize = __webpack_require__(2);\r\n\r\n//-------------------------------------------------------------------------------------------------\r\n\r\nfunction Config(options, StateMachine) {\r\n\r\n  options = options || {};\r\n\r\n  this.options     = options; // preserving original options can be useful (e.g visualize plugin)\r\n  this.defaults    = StateMachine.defaults;\r\n  this.states      = [];\r\n  this.transitions = [];\r\n  this.map         = {};\r\n  this.lifecycle   = this.configureLifecycle();\r\n  this.init        = this.configureInitTransition(options.init);\r\n  this.data        = this.configureData(options.data);\r\n  this.methods     = this.configureMethods(options.methods);\r\n\r\n  this.map[this.defaults.wildcard] = {};\r\n\r\n  this.configureTransitions(options.transitions || []);\r\n\r\n  this.plugins = this.configurePlugins(options.plugins, StateMachine.plugin);\r\n\r\n}\r\n\r\n//-------------------------------------------------------------------------------------------------\r\n\r\nmixin(Config.prototype, {\r\n\r\n  addState: function(name) {\r\n    if (!this.map[name]) {\r\n      this.states.push(name);\r\n      this.addStateLifecycleNames(name);\r\n      this.map[name] = {};\r\n    }\r\n  },\r\n\r\n  addStateLifecycleNames: function(name) {\r\n    this.lifecycle.onEnter[name] = camelize.prepended('onEnter', name);\r\n    this.lifecycle.onLeave[name] = camelize.prepended('onLeave', name);\r\n    this.lifecycle.on[name]      = camelize.prepended('on',      name);\r\n  },\r\n\r\n  addTransition: function(name) {\r\n    if (this.transitions.indexOf(name) < 0) {\r\n      this.transitions.push(name);\r\n      this.addTransitionLifecycleNames(name);\r\n    }\r\n  },\r\n\r\n  addTransitionLifecycleNames: function(name) {\r\n    this.lifecycle.onBefore[name] = camelize.prepended('onBefore', name);\r\n    this.lifecycle.onAfter[name]  = camelize.prepended('onAfter',  name);\r\n    this.lifecycle.on[name]       = camelize.prepended('on',       name);\r\n  },\r\n\r\n  mapTransition: function(transition) {\r\n    var name = transition.name,\r\n        from = transition.from,\r\n        to   = transition.to;\r\n    this.addState(from);\r\n    if (typeof to !== 'function')\r\n      this.addState(to);\r\n    this.addTransition(name);\r\n    this.map[from][name] = transition;\r\n    return transition;\r\n  },\r\n\r\n  configureLifecycle: function() {\r\n    return {\r\n      onBefore: { transition: 'onBeforeTransition' },\r\n      onAfter:  { transition: 'onAfterTransition'  },\r\n      onEnter:  { state:      'onEnterState'       },\r\n      onLeave:  { state:      'onLeaveState'       },\r\n      on:       { transition: 'onTransition'       }\r\n    };\r\n  },\r\n\r\n  configureInitTransition: function(init) {\r\n    if (typeof init === 'string') {\r\n      return this.mapTransition(mixin({}, this.defaults.init, { to: init, active: true }));\r\n    }\r\n    else if (typeof init === 'object') {\r\n      return this.mapTransition(mixin({}, this.defaults.init, init, { active: true }));\r\n    }\r\n    else {\r\n      this.addState(this.defaults.init.from);\r\n      return this.defaults.init;\r\n    }\r\n  },\r\n\r\n  configureData: function(data) {\r\n    if (typeof data === 'function')\r\n      return data;\r\n    else if (typeof data === 'object')\r\n      return function() { return data; }\r\n    else\r\n      return function() { return {};  }\r\n  },\r\n\r\n  configureMethods: function(methods) {\r\n    return methods || {};\r\n  },\r\n\r\n  configurePlugins: function(plugins, builtin) {\r\n    plugins = plugins || [];\r\n    var n, max, plugin;\r\n    for(n = 0, max = plugins.length ; n < max ; n++) {\r\n      plugin = plugins[n];\r\n      if (typeof plugin === 'function')\r\n        plugins[n] = plugin = plugin()\r\n      if (plugin.configure)\r\n        plugin.configure(this);\r\n    }\r\n    return plugins\r\n  },\r\n\r\n  configureTransitions: function(transitions) {\r\n    var i, n, transition, from, to, wildcard = this.defaults.wildcard;\r\n    for(n = 0 ; n < transitions.length ; n++) {\r\n      transition = transitions[n];\r\n      from  = Array.isArray(transition.from) ? transition.from : [transition.from || wildcard]\r\n      to    = transition.to || wildcard;\r\n      for(i = 0 ; i < from.length ; i++) {\r\n        this.mapTransition({ name: transition.name, from: from[i], to: to });\r\n      }\r\n    }\r\n  },\r\n\r\n  transitionFor: function(state, transition) {\r\n    var wildcard = this.defaults.wildcard;\r\n    return this.map[state][transition] ||\r\n           this.map[wildcard][transition];\r\n  },\r\n\r\n  transitionsFor: function(state) {\r\n    var wildcard = this.defaults.wildcard;\r\n    return Object.keys(this.map[state]).concat(Object.keys(this.map[wildcard]));\r\n  },\r\n\r\n  allStates: function() {\r\n    return this.states;\r\n  },\r\n\r\n  allTransitions: function() {\r\n    return this.transitions;\r\n  }\r\n\r\n});\r\n\r\n//-------------------------------------------------------------------------------------------------\r\n\r\nmodule.exports = Config;\r\n\r\n//-------------------------------------------------------------------------------------------------\r\n\r\n\r\n/***/ }),\r\n/* 4 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\r\nvar mixin      = __webpack_require__(0),\r\n    Exception  = __webpack_require__(6),\r\n    plugin     = __webpack_require__(1),\r\n    UNOBSERVED = [ null, [] ];\r\n\r\n//-------------------------------------------------------------------------------------------------\r\n\r\nfunction JSM(context, config) {\r\n  this.context   = context;\r\n  this.config    = config;\r\n  this.state     = config.init.from;\r\n  this.observers = [context];\r\n}\r\n\r\n//-------------------------------------------------------------------------------------------------\r\n\r\nmixin(JSM.prototype, {\r\n\r\n  init: function(args) {\r\n    mixin(this.context, this.config.data.apply(this.context, args));\r\n    plugin.hook(this, 'init');\r\n    if (this.config.init.active)\r\n      return this.fire(this.config.init.name, []);\r\n  },\r\n\r\n  is: function(state) {\r\n    return Array.isArray(state) ? (state.indexOf(this.state) >= 0) : (this.state === state);\r\n  },\r\n\r\n  isPending: function() {\r\n    return this.pending;\r\n  },\r\n\r\n  can: function(transition) {\r\n    return !this.isPending() && !!this.seek(transition);\r\n  },\r\n\r\n  cannot: function(transition) {\r\n    return !this.can(transition);\r\n  },\r\n\r\n  allStates: function() {\r\n    return this.config.allStates();\r\n  },\r\n\r\n  allTransitions: function() {\r\n    return this.config.allTransitions();\r\n  },\r\n\r\n  transitions: function() {\r\n    return this.config.transitionsFor(this.state);\r\n  },\r\n\r\n  seek: function(transition, args) {\r\n    var wildcard = this.config.defaults.wildcard,\r\n        entry    = this.config.transitionFor(this.state, transition),\r\n        to       = entry && entry.to;\r\n    if (typeof to === 'function')\r\n      return to.apply(this.context, args);\r\n    else if (to === wildcard)\r\n      return this.state\r\n    else\r\n      return to\r\n  },\r\n\r\n  fire: function(transition, args) {\r\n    return this.transit(transition, this.state, this.seek(transition, args), args);\r\n  },\r\n\r\n  transit: function(transition, from, to, args) {\r\n\r\n    var lifecycle = this.config.lifecycle,\r\n        changed   = this.config.options.observeUnchangedState || (from !== to);\r\n\r\n    if (!to)\r\n      return this.context.onInvalidTransition(transition, from, to);\r\n\r\n    if (this.isPending())\r\n      return this.context.onPendingTransition(transition, from, to);\r\n\r\n    this.config.addState(to);  // might need to add this state if it's unknown (e.g. conditional transition or goto)\r\n\r\n    this.beginTransit();\r\n\r\n    args.unshift({             // this context will be passed to each lifecycle event observer\r\n      transition: transition,\r\n      from:       from,\r\n      to:         to,\r\n      fsm:        this.context\r\n    });\r\n\r\n    return this.observeEvents([\r\n                this.observersForEvent(lifecycle.onBefore.transition),\r\n                this.observersForEvent(lifecycle.onBefore[transition]),\r\n      changed ? this.observersForEvent(lifecycle.onLeave.state) : UNOBSERVED,\r\n      changed ? this.observersForEvent(lifecycle.onLeave[from]) : UNOBSERVED,\r\n                this.observersForEvent(lifecycle.on.transition),\r\n      changed ? [ 'doTransit', [ this ] ]                       : UNOBSERVED,\r\n      changed ? this.observersForEvent(lifecycle.onEnter.state) : UNOBSERVED,\r\n      changed ? this.observersForEvent(lifecycle.onEnter[to])   : UNOBSERVED,\r\n      changed ? this.observersForEvent(lifecycle.on[to])        : UNOBSERVED,\r\n                this.observersForEvent(lifecycle.onAfter.transition),\r\n                this.observersForEvent(lifecycle.onAfter[transition]),\r\n                this.observersForEvent(lifecycle.on[transition])\r\n    ], args);\r\n  },\r\n\r\n  beginTransit: function()          { this.pending = true;                 },\r\n  endTransit:   function(result)    { this.pending = false; return result; },\r\n  failTransit:  function(result)    { this.pending = false; throw result;  },\r\n  doTransit:    function(lifecycle) { this.state = lifecycle.to;           },\r\n\r\n  observe: function(args) {\r\n    if (args.length === 2) {\r\n      var observer = {};\r\n      observer[args[0]] = args[1];\r\n      this.observers.push(observer);\r\n    }\r\n    else {\r\n      this.observers.push(args[0]);\r\n    }\r\n  },\r\n\r\n  observersForEvent: function(event) { // TODO: this could be cached\r\n    var n = 0, max = this.observers.length, observer, result = [];\r\n    for( ; n < max ; n++) {\r\n      observer = this.observers[n];\r\n      if (observer[event])\r\n        result.push(observer);\r\n    }\r\n    return [ event, result, true ]\r\n  },\r\n\r\n  observeEvents: function(events, args, previousEvent, previousResult) {\r\n    if (events.length === 0) {\r\n      return this.endTransit(previousResult === undefined ? true : previousResult);\r\n    }\r\n\r\n    var event     = events[0][0],\r\n        observers = events[0][1],\r\n        pluggable = events[0][2];\r\n\r\n    args[0].event = event;\r\n    if (event && pluggable && event !== previousEvent)\r\n      plugin.hook(this, 'lifecycle', args);\r\n\r\n    if (observers.length === 0) {\r\n      events.shift();\r\n      return this.observeEvents(events, args, event, previousResult);\r\n    }\r\n    else {\r\n      var observer = observers.shift(),\r\n          result = observer[event].apply(observer, args);\r\n      if (result && typeof result.then === 'function') {\r\n        return result.then(this.observeEvents.bind(this, events, args, event))\r\n                     .catch(this.failTransit.bind(this))\r\n      }\r\n      else if (result === false) {\r\n        return this.endTransit(false);\r\n      }\r\n      else {\r\n        return this.observeEvents(events, args, event, result);\r\n      }\r\n    }\r\n  },\r\n\r\n  onInvalidTransition: function(transition, from, to) {\r\n    throw new Exception(\"transition is invalid in current state\", transition, from, to, this.state);\r\n  },\r\n\r\n  onPendingTransition: function(transition, from, to) {\r\n    throw new Exception(\"transition is invalid while previous transition is still in progress\", transition, from, to, this.state);\r\n  }\r\n\r\n});\r\n\r\n//-------------------------------------------------------------------------------------------------\r\n\r\nmodule.exports = JSM;\r\n\r\n//-------------------------------------------------------------------------------------------------\r\n\r\n\r\n/***/ }),\r\n/* 5 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\n//-----------------------------------------------------------------------------------------------\r\n\r\nvar mixin    = __webpack_require__(0),\r\n    camelize = __webpack_require__(2),\r\n    plugin   = __webpack_require__(1),\r\n    Config   = __webpack_require__(3),\r\n    JSM      = __webpack_require__(4);\r\n\r\n//-----------------------------------------------------------------------------------------------\r\n\r\nvar PublicMethods = {\r\n  is:                  function(state)       { return this._fsm.is(state)                                     },\r\n  can:                 function(transition)  { return this._fsm.can(transition)                               },\r\n  cannot:              function(transition)  { return this._fsm.cannot(transition)                            },\r\n  observe:             function()            { return this._fsm.observe(arguments)                            },\r\n  transitions:         function()            { return this._fsm.transitions()                                 },\r\n  allTransitions:      function()            { return this._fsm.allTransitions()                              },\r\n  allStates:           function()            { return this._fsm.allStates()                                   },\r\n  onInvalidTransition: function(t, from, to) { return this._fsm.onInvalidTransition(t, from, to)              },\r\n  onPendingTransition: function(t, from, to) { return this._fsm.onPendingTransition(t, from, to)              },\r\n}\r\n\r\nvar PublicProperties = {\r\n  state: {\r\n    configurable: false,\r\n    enumerable:   true,\r\n    get: function() {\r\n      return this._fsm.state;\r\n    },\r\n    set: function(state) {\r\n      throw Error('use transitions to change state')\r\n    }\r\n  }\r\n}\r\n\r\n//-----------------------------------------------------------------------------------------------\r\n\r\nfunction StateMachine(options) {\r\n  return apply(this || {}, options);\r\n}\r\n\r\nfunction factory() {\r\n  var cstor, options;\r\n  if (typeof arguments[0] === 'function') {\r\n    cstor   = arguments[0];\r\n    options = arguments[1] || {};\r\n  }\r\n  else {\r\n    cstor   = function() { this._fsm.apply(this, arguments) };\r\n    options = arguments[0] || {};\r\n  }\r\n  var config = new Config(options, StateMachine);\r\n  build(cstor.prototype, config);\r\n  cstor.prototype._fsm.config = config; // convenience access to shared config without needing an instance\r\n  return cstor;\r\n}\r\n\r\n//-------------------------------------------------------------------------------------------------\r\n\r\nfunction apply(instance, options) {\r\n  var config = new Config(options, StateMachine);\r\n  build(instance, config);\r\n  instance._fsm();\r\n  return instance;\r\n}\r\n\r\nfunction build(target, config) {\r\n  if ((typeof target !== 'object') || Array.isArray(target))\r\n    throw Error('StateMachine can only be applied to objects');\r\n  plugin.build(target, config);\r\n  Object.defineProperties(target, PublicProperties);\r\n  mixin(target, PublicMethods);\r\n  mixin(target, config.methods);\r\n  config.allTransitions().forEach(function(transition) {\r\n    target[camelize(transition)] = function() {\r\n      return this._fsm.fire(transition, [].slice.call(arguments))\r\n    }\r\n  });\r\n  target._fsm = function() {\r\n    this._fsm = new JSM(this, config);\r\n    this._fsm.init(arguments);\r\n  }\r\n}\r\n\r\n//-----------------------------------------------------------------------------------------------\r\n\r\nStateMachine.version  = '3.0.1';\r\nStateMachine.factory  = factory;\r\nStateMachine.apply    = apply;\r\nStateMachine.defaults = {\r\n  wildcard: '*',\r\n  init: {\r\n    name: 'init',\r\n    from: 'none'\r\n  }\r\n}\r\n\r\n//===============================================================================================\r\n\r\nmodule.exports = StateMachine;\r\n\r\n\r\n/***/ }),\r\n/* 6 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\"use strict\";\r\n\r\n\r\nmodule.exports = function(message, transition, from, to, current) {\r\n  this.message    = message;\r\n  this.transition = transition;\r\n  this.from       = from;\r\n  this.to         = to;\r\n  this.current    = current;\r\n}\r\n\r\n\r\n/***/ })\r\n/******/ ]);\r\n});"]}