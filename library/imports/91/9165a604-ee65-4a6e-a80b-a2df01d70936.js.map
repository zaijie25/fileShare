{"version":3,"sources":["assets\\bbwz\\Bbwz\\scripts\\handler\\BbwzNetHandler.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import BbwzConstDefine, { BbwzGameState } from \"../data/BbwzConstDefine\";\r\nimport BbwzData from \"../data/BbwzData\";\r\nimport BbwzDriver from \"../BbwzDriver\";\r\nimport { BbwzBetStartHandler, BbwzBetStartVSHandler, BbwzBetStartAnimationHandler, BbwzBetStartFapaiHandler, BbwzBetStartDaojishiHandler } from \"./BbwzBetStartHandler\";\r\nimport { BbwzBetEndHandler } from \"./BbwzBetEndHandler\";\r\nimport { BbwzRewardHandler, BbwzRewardWinShineHandler, BbwzRewardFeiChouMaHandler, BbwzRewardFlyWordHandler, BbwzRewardGeRenJieSuanHandler, BbwzRewardWaitNextHandler, BbwzRewardFanCardHandler, BbwzRewardAreaResultHandler, BbwzRewardDispatchHandler, BbwzRewardFapaiHandler } from \"./BbwzRewardHandler\";\r\nimport BbwzSocketBaseHandler from \"./BbwzSocketBaseHandler\";\r\nimport BbwzGameEvent from \"../data/BbwzGameEvent\";\r\nimport BbwzChatHandler from \"./BbwzChatHandler\";\r\n\r\nexport default class BbwzNetHandler {\r\n    /**\r\n     * 注册协议\r\n     */\r\n    static registerNetHandler() {\r\n\r\n        Game.Control.registHandler(BbwzConstDefine.RECEIVER_GAMECFG, new BbwzGameCfgHandler);   //a\r\n        Game.Control.registHandler(BbwzConstDefine.RECEIVER_ENTER, new BbwzEnterHandler); //en1\r\n        Game.Control.registHandler(BbwzConstDefine.RECEIVER_LEAVE, new BbwzLeaveHandler);//*lee*\r\n\r\n        Game.Control.registHandler(BbwzConstDefine.RECEIVER_BET, new BbwzSelfBetHandler);  //b1\r\n        Game.Control.registHandler(BbwzConstDefine.RECEIVER_OTHER_BET, new BbwzOtherBetHandler); //c2\r\n\r\n        Game.Control.registHandler(BbwzConstDefine.RECEIVER_GAME_START_BET, new BbwzBetStartHandler); //e1\r\n        Game.Control.registHandler(BbwzConstDefine.GameStart_VS, new BbwzBetStartVSHandler);//e1-x\r\n        Game.Control.registHandler(BbwzConstDefine.GameStart_Animation, new BbwzBetStartAnimationHandler);//e1-1\r\n        Game.Control.registHandler(BbwzConstDefine.GameStart_Fapai, new BbwzBetStartFapaiHandler);//e1-0\r\n        Game.Control.registHandler(BbwzConstDefine.GameStart_Daojishi, new BbwzBetStartDaojishiHandler);//e1-2\r\n\r\n        Game.Control.registHandler(BbwzConstDefine.RECEIVER_GAME_END_BET, new BbwzBetEndHandler);   //e2\r\n\r\n        Game.Control.registHandler(BbwzConstDefine.RECEIVER_GAME_REWARD, new BbwzRewardHandler);  //e3\r\n        Game.Control.registHandler(BbwzConstDefine.GameWait_DealCard, new BbwzRewardFapaiHandler);      //e3-1\r\n        Game.Control.registHandler(BbwzConstDefine.GameWait_Dispatch, new BbwzRewardDispatchHandler);      //e3-1-0\r\n        Game.Control.registHandler(BbwzConstDefine.GameWait_FanCard, new BbwzRewardFanCardHandler);      //e3-1-1\r\n        Game.Control.registHandler(BbwzConstDefine.GameWait_AreaResult, new BbwzRewardAreaResultHandler);      //e3-1-2\r\n        Game.Control.registHandler(BbwzConstDefine.GameWait_WinShine, new BbwzRewardWinShineHandler);      //e3-2\r\n        Game.Control.registHandler(BbwzConstDefine.GameWait_FeiChouMa, new BbwzRewardFeiChouMaHandler);      //e3-3\r\n        Game.Control.registHandler(BbwzConstDefine.GameWait_FlyWord, new BbwzRewardFlyWordHandler);      //e3-4\r\n        Game.Control.registHandler(BbwzConstDefine.GameWait_GeRenJieSuan, new BbwzRewardGeRenJieSuanHandler);      //e3-5\r\n        Game.Control.registHandler(BbwzConstDefine.GameWait_WaitNext, new BbwzRewardWaitNextHandler);      //e3-6\r\n\r\n        Game.Control.registHandler(BbwzConstDefine.RECEIVER_REFRESH, new BbwzBetRefreshHandler);//refresh\r\n        Game.Control.registHandler(BbwzConstDefine.RECEIVER_ONLINE_PLAYER_COUNT, new BbwzOnlinePlayerCountHandler);//ol\r\n        Game.Control.registHandler(BbwzConstDefine.RECEIVER_ONLINE_PLAYER_LIST, new BbwzOnlinePlayerListHandler);//pl\r\n        Game.Control.registHandler(BbwzConstDefine.RECEIVER_GAME_HISTORY, new BbwzGameHistoryHandler); //f1\r\n        Game.Control.registHandler(BbwzConstDefine.CmdChat, new BbwzChatHandler); \r\n    }\r\n}\r\n\r\n/**\r\n * 0 房间配置 a\r\n */\r\nexport class BbwzGameCfgHandler extends BbwzSocketBaseHandler {\r\n    //判断协议是否需要入队列，默认入队列\r\n    public checkInQueue(msgParam) {\r\n        return false;\r\n    }\r\n\r\n    handleData(data) {\r\n        //cc.log(\"GameCfgHandler----------handleData------data = \" + JSON.stringify(data))\r\n        BbwzData.instance.gameState = BbwzGameState.Deal;\r\n        //保存房间配置\r\n        BbwzData.instance.serverGameCfg = data._para;\r\n        //解析并存储配置\r\n        BbwzData.instance.parseServerCfg(data._para);\r\n        //进入游戏层\r\n        BbwzDriver.instance.gotoGamePanel();\r\n        BbwzDriver.instance.gameUI.selectChipsView.initChipListData();\r\n        BbwzDriver.instance.gameUI.headTipsManager.setConfig(data._src);\r\n        BbwzDriver.instance.gameUI.taskManager.reqGetCommisionInfo();\r\n    }\r\n}\r\n\r\n/**\r\n * 2 进入房间 包括自己和别人 en1    \r\n */\r\nexport class BbwzEnterHandler extends BbwzSocketBaseHandler {\r\n    //判断协议是否需要入队列，默认入队列\r\n    public checkInQueue(msgParam) {\r\n        return false;\r\n    }\r\n\r\n    handleData(data) {\r\n        let localSit = data._para._chair;\r\n        if (localSit == BbwzData.instance.selfSrc) {\r\n            localSit = 0;\r\n        }\r\n        BbwzData.instance.playerDataArr[localSit] = data._para;\r\n        BbwzDriver.instance.gameUI.onPlayerEnter(localSit, data._para);\r\n    }\r\n}\r\n\r\n/**\r\n * 离开游戏\r\n */\r\nexport class BbwzLeaveHandler extends BbwzSocketBaseHandler {\r\n    handleData(data) {\r\n        //如果是自己则退出游戏\r\n        if (data._src == BbwzData.instance.selfSrc) {\r\n            let explain: string = null;\r\n            if (data._para && data._para._reason != 0) {\r\n                explain = data._para._explain;\r\n            }\r\n            BbwzDriver.instance.onForceLeave(true, explain);\r\n        } else {\r\n            BbwzDriver.instance.gameUI.onPlayerLeave(data._src);\r\n            BbwzData.instance.playerDataArr[data._src] = null;\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * 自己下注返回 b1\r\n */\r\nexport class BbwzSelfBetHandler extends BbwzSocketBaseHandler {\r\n\r\n    handleData(data) {\r\n        //cc.log(\"SelfBetHandler----------handleData------data = \" + JSON.stringify(data))\r\n        Global.PlayerData.point = data._para.point;\r\n        //刷新玩家自己下注数据\r\n        BbwzData.instance.updateSelfTableData(data._para.my_bets);\r\n        for (let index = 0; index < data._para.bets.length; index++) {\r\n            const betData = data._para.bets[index];\r\n            let tableType = betData.k;\r\n            let totalBet = BbwzData.instance.gameTableBetInfo[tableType].totalBetNum;\r\n            if (!totalBet) {\r\n                totalBet = 0;\r\n            }\r\n            totalBet += betData.v;\r\n            BbwzData.instance.gameTableBetInfo[tableType].totalBetNum = totalBet;\r\n        }\r\n        BbwzDriver.instance.gameUI.onSelfBet(data._para);\r\n    }\r\n}\r\n\r\n/**\r\n * 其他玩家下注 c2\r\n */\r\nexport class BbwzOtherBetHandler extends BbwzSocketBaseHandler {\r\n    handleData(data) {\r\n        //cc.log(\"OtherBetHandler----------handleData------data = \" + JSON.stringify( data ))\r\n        //广播玩家下注一个筹码\r\n        let allBets = data._para.all_bets;\r\n        for (const keyName in allBets) {\r\n            BbwzData.instance.gameTableBetInfo[keyName].totalBetNum = allBets[keyName];\r\n        }\r\n        let bets = data._para.bets || [];\r\n        BbwzDriver.instance.gameUI.onPlayerBet(bets);\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * 刷新自己的金币 refresh  只有结算才推\r\n */\r\nexport class BbwzBetRefreshHandler extends BbwzSocketBaseHandler {\r\n    handleData(data) {\r\n        Global.PlayerData.point = data._para.point;\r\n        BbwzDriver.instance.gameUI.onSelfPointRefresh(data._para.point);\r\n        BbwzDriver.instance.gameUI.updateBetSelectButton();\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * 推送在线玩家数量\r\n */\r\nexport class BbwzOnlinePlayerCountHandler extends BbwzSocketBaseHandler {\r\n    handleData(data) {\r\n        BbwzData.instance.onlinePlayer = data._para.p_count;\r\n        BbwzDriver.instance.gameUI.updateOnlinePlayer(data._para.p_count);\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * 获取在线玩家列表\r\n */\r\nexport class BbwzOnlinePlayerListHandler extends BbwzSocketBaseHandler {\r\n    //判断协议是否需要入队列，默认入队列\r\n    public checkInQueue(msgParam) {\r\n        return false;\r\n    }\r\n\r\n    handleData(data) {\r\n        // cc.log(\"OnlinePlayerListHandler----------handleData------data = \" + JSON.stringify( data ));\r\n        if (data._para.my_index > 0) {\r\n            data._para.all[data._para.my_index - 1].isMy = true;\r\n        }\r\n        let dataList = data._para.all;\r\n        let zhiduoxing = data._para.smart;\r\n        if(zhiduoxing){\r\n            zhiduoxing.isZhiduoxing = true;\r\n            dataList.unshift(zhiduoxing);\r\n        }\r\n        BbwzData.instance.onLinePlayerList = dataList;\r\n        //按近20局投注总额排序，列表第一位是智多星（特殊处理）\r\n        dataList.sort((a, b) => {\r\n            if (a.total_bet >= b.total_bet) {\r\n                return -1;\r\n            }\r\n            return 1;\r\n        });\r\n\r\n        BbwzData.instance.onlinePlayer = dataList.length;\r\n        BbwzDriver.instance.gameUI.updateOnlinePlayer(dataList.length);\r\n\r\n        //调用在线玩家界面的 打开后更新函数\r\n        BbwzDriver.instance.onlinePop.updateAfterGetData();\r\n    }\r\n}\r\n\r\n/** 历史记录 f1 只在enter之后和清空时才会推送 其他走结算手动add*/\r\nexport class BbwzGameHistoryHandler extends BbwzSocketBaseHandler {\r\n    public checkInQueue(msgParam) {\r\n        return false;\r\n    }\r\n\r\n    handleData(msgParam: any) {\r\n        //cc.log(\"GameHistoryHandler----------handleData------data = \" + JSON.stringify(msgParam));\r\n        let qihaoList = msgParam._para;\r\n        if (qihaoList && qihaoList.awards) {\r\n            BbwzData.instance.historyDataArr = qihaoList.awards;\r\n            Game.Event.event(BbwzGameEvent.onHistoryDataRes, true);     // 通知刷新历史ui true表示清空重刷数据\r\n            BbwzDriver.instance.gameUI.betAreaRootView.showAreaTrend(null, qihaoList.awards, false);\r\n        }\r\n    }\r\n}"]}