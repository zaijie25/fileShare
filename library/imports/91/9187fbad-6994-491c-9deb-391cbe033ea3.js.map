{"version":3,"sources":["assets\\hall\\scripts\\logic\\hallcommon\\model\\CashBackModel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ModelBase from \"../../../framework/model/ModelBase\";\r\nimport { NetAppface } from \"../../core/net/hall/NetEvent\";\r\nimport { CashBackEvent } from \"../../hall/ui/CashBack/CashBackEvent\";\r\nimport { HallRedSpotType } from \"./HallModel\";\r\n\r\nexport default class CashBackModel extends ModelBase {\r\n    redFlag = false;\r\n\r\n    private CashBackErronFunc(data: any) {\r\n        if (data._errstr != null) {\r\n            Global.UI.fastTip(data._errstr);\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    public get Name() {\r\n        return \"CashBackModel\";\r\n    }\r\n\r\n    public get RedFLag() {\r\n        return this.redFlag\r\n    }\r\n\r\n    public set RedFLag(flag) {\r\n        this.redFlag = flag\r\n        if (this.redFlag) {\r\n            Global.Event.event(GlobalEvent.ShowRedSpot, [false, HallRedSpotType.CashBackDay]);\r\n        }\r\n    }\r\n\r\n    CheckRedFlag() {\r\n        if (this.redFlag) {\r\n            Global.Event.event(GlobalEvent.ShowRedSpot, [false, HallRedSpotType.CashBackDay]);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 返利说明数据\r\n     */\r\n    public GetActivityCfg() {\r\n        let param: any = {}\r\n        Global.HallServer.send(NetAppface.mod, NetAppface.GetActivityCfg, param, (msg) => {\r\n            this.event(CashBackEvent.GetActivityCfg, msg)\r\n        }, this.CashBackErronFunc.bind(this), false, 1)\r\n    }\r\n\r\n    /**\r\n    * 每日返利领取记录\r\n    */\r\n    public GetDayFlowBackRecord(page: number, limit: number) {\r\n        let param = {\r\n            \"page\": page,\r\n            \"limit\": limit\r\n        }\r\n        Global.HallServer.send(NetAppface.mod, NetAppface.GetDayFlowBackRecord, param, (msg) => {\r\n            this.event(CashBackEvent.GetDayFlowBackRecord, msg)\r\n        }, this.CashBackErronFunc.bind(this), false, 0)\r\n    }\r\n\r\n    /**\r\n     * 领取每日返利\r\n     */\r\n    public GetDayFlowBack(id:string)\r\n    {\r\n        let param = {\r\n            \"id\": id,\r\n        }\r\n        Global.HallServer.send(NetAppface.mod, NetAppface.GetDayFlowBackAll, param, (msg) => {\r\n            this.event(CashBackEvent.GetDayFlowBackAll, msg);\r\n            Global.HallServer.send(NetAppface.mod, NetAppface.GetUserPoint, {});\r\n        }, this.CashBackErronFunc.bind(this), true, 0)\r\n    }\r\n}\r\n"]}