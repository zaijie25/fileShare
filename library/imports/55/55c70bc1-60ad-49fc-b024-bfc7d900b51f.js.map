{"version":3,"sources":["assets\\hall\\scripts\\logic\\hallcommon\\model\\FeedbackModel.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,gEAA2D;AAC3D,yDAAuD;AACvD,8EAA6E;AAI7E;IAA2C,iCAAS;IAApD;QAAA,qEAyDC;QAnDW,WAAK,GAAW,CAAC,CAAC;;IAmD9B,CAAC;IAhDG,sBAAW,+BAAI;QAFf,+BAA+B;aAE/B;YACI,OAAO,eAAe,CAAC;QAC3B,CAAC;;;OAAA;IAEM,sCAAc,GAArB,UAAsB,OAAc,EAAE,UAA2B,EAAE,OAAsB,EAAC,WAA4B;QAAtH,iBASC;QATqC,2BAAA,EAAA,kBAA2B;QAAE,wBAAA,EAAA,eAAsB;QAAC,4BAAA,EAAA,mBAA4B;QAClH,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,qBAAU,CAAC,GAAG,EAAE,qBAAU,CAAC,UAAU,EAAE,EAAC,KAAK,EAAC,IAAI,CAAC,KAAK,EAAC,IAAI,EAAC,OAAO,EAAC,EAAC,UAAC,GAAG;YAC9F,IAAI,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;YACpB,KAAI,CAAC,WAAW,GAAG,GAAG,CAAC,IAAI,CAAC;YAC5B,KAAI,CAAC,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC;YACvB,KAAI,CAAC,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,KAAI,CAAC,KAAK,GAAC,KAAI,CAAC,KAAK,CAAC,CAAC;YAClD,KAAI,CAAC,KAAK,CAAC,qCAAiB,CAAC,oBAAoB,EAAC,IAAI,CAAC,CAAC;QAE5D,CAAC,EAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,WAAW,CAAC,CAAC;IACpD,CAAC;IAED;;;;;;;;;OASG;IACI,oCAAY,GAAnB,UAAoB,KAAK,EAAE,QAAgB;QAA3C,iBAYC;QAXG,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,qBAAU,CAAC,GAAG,EAAE,qBAAU,CAAC,UAAU,EAAE,KAAK,EAAC,UAAC,GAAG;YACpE,cAAc;YACd,IAAG,KAAK,CAAC,IAAI,IAAE,CAAC,EAAC;gBACb,KAAI,CAAC,KAAK,CAAC,qCAAiB,CAAC,kBAAkB,CAAC,CAAC;aACpD;iBAAK,IAAG,KAAK,CAAC,IAAI,IAAE,CAAC,EAAC;gBACnB,IAAI,cAAc,GAAmB,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,gBAAgB,CAAC,CAAC;gBAClG,IAAI,QAAQ,GAAiB,cAAc,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;gBAChE,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;gBACzB,KAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;aACjC;QACL,CAAC,EAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACvC,CAAC;IAEO,uCAAe,GAAvB,UAAyB,IAAU;QAC/B,IAAG,IAAI,CAAC,OAAO,IAAI,IAAI,EAAC;YACpB,MAAM,CAAC,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YAChC,OAAO,KAAK,CAAC;SAChB;QACD,OAAO,IAAI,CAAC;IAChB,CAAC;IAGL,oBAAC;AAAD,CAzDA,AAyDC,CAzD0C,mBAAS,GAyDnD","file":"","sourceRoot":"/","sourcesContent":["import ModelBase from \"../../../framework/model/ModelBase\";\r\nimport {NetAppface} from \"../../core/net/hall/NetEvent\"\r\nimport { FeedbackConstants } from \"../../hall/ui/Feedback/FeedbackConstants\";\r\nimport RightPanelView from \"../../hall/ui/Feedback/RightPanelView\";\r\nimport FeedbackView from \"../../hall/ui/Feedback/FeedbackView\";\r\n\r\nexport default class FeedbackModel extends ModelBase{\r\n\r\n\r\n    private total: number;\r\n    public totalPage: number;\r\n    public responePage: number;\r\n    private limit: number = 5;\r\n    // private data: Array<any>=[];\r\n\r\n    public get Name(){\r\n        return \"FeedbackModel\";\r\n    }\r\n\r\n    public GetProblemList(curPage:number, isFromHall :boolean = false, isFresh :boolean=false,showwaiting :boolean = false){\r\n        Global.HallServer.send(NetAppface.mod, NetAppface.GetProblem, {limit:this.limit,page:curPage},(msg) =>{\r\n            let data = msg.data;\r\n            this.responePage = msg.page;\r\n            this.total = msg.total;\r\n            this.totalPage = Math.ceil(this.total/this.limit);\r\n            this.event(FeedbackConstants.FeedbackListCallback,data);\r\n            \r\n        },this.SpreadErronFunc.bind(this), showwaiting);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param param \r\n     * {\r\n     *  \"type\":  //0 提交 1删除\r\n\t *\t\"problem\":\"222212\" //问题 0的时候\r\n     *\t\"id\": 1的时候\r\n     *  }\r\n     *     \r\n     */\r\n    public dealFeedback(param, dealPage: number){\r\n        Global.HallServer.send(NetAppface.mod, NetAppface.SetProblem, param,(msg) =>{\r\n            // let ss=msg;\r\n            if(param.type==0){\r\n                this.event(FeedbackConstants.DealFeedbackCommit);\r\n            }else if(param.type==1){\r\n                let rightPanelView = <RightPanelView>Global.UI.getWindow(\"WndFeedback\").getView(\"RightPanelView\");\r\n                let feedback = <FeedbackView>rightPanelView.getView(\"feedback\");\r\n                feedback.clearItem(true);\r\n                this.GetProblemList(dealPage);\r\n            }\r\n        },this.SpreadErronFunc.bind(this));\r\n    }\r\n    \r\n    private SpreadErronFunc( data : any ){\r\n        if(data._errstr != null){\r\n            Global.UI.fastTip(data._errstr);\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    \r\n\r\n}"]}