{"version":3,"sources":["assets\\hall\\scripts\\logic\\hall\\ui\\hall\\WndHall.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import WndBase, { DestoryType } from \"../../../core/ui/WndBase\";\r\nimport HallModel, { HallRedSpotType } from \"../../../hallcommon/model/HallModel\";\r\nimport GlobalEvent from \"../../../core/GlobalEvent\";\r\nimport HallBottomView from \"./views/HallBottomView\";\r\nimport HallTopView from \"./views/HallTopView\";\r\nimport HallPaoMaDengView from \"./views/HallPaoMaDengView\";\r\nimport { NetAppface } from \"../../../core/net/hall/NetEvent\";\r\nimport MsgModel from \"../../../hallcommon/model/MsgModel\";\r\nimport BindingGiftModel from \"../../../hallcommon/model/BindingGiftModel\";\r\nimport IntoHallAnimComp from \"../../../core/component/IntoHallAnimComp\";\r\n// import RebateModel from \"../rebate/RebateModel\";\r\nimport HallPopMsgHelper, { PopWndName } from \"../../tool/HallPopMsgHelper\";\r\nimport GameListView from \"./views/GameListView\";\r\nimport EventComp from \"../../../core/component/EventComp\";\r\nimport BannerView from \"./views/BannerView\";\r\nimport AppHelper from \"../../../core/tool/AppHelper\";\r\nimport HallMoreGameTopNode from \"./views/HallMoreGameTopNode\";\r\nimport HallGuiDelinesView from \"./views/HallGuiDelinesView\";\r\nimport PlayerInfoModel from \"../../../hallcommon/model/PlayerInfoModel\";\r\nimport RechargeGiftModel from \"../../../hallcommon/model/RechargeGiftModel\";\r\nimport GameListViewA from \"./views/GameListViewA\";\r\nimport HallBtnHelper from \"./views/HallBtnHelper\";\r\nexport default class WndHall extends WndBase {\r\n\r\n    private model: HallModel;\r\n\r\n\r\n    private MsgModel: MsgModel\r\n    private rechargeModel: RechargeGiftModel\r\n    private itemAreaWidget: cc.Widget\r\n    private gonggaoAreaWidget: cc.Widget\r\n    private headViewWidget: cc.Widget\r\n    private leftArrowWidget: cc.Widget\r\n    private walletViewWidget: cc.Widget\r\n\r\n    gameListView: cc.ScrollView;\r\n    gameListItem: any;\r\n    gameContent: cc.Node;\r\n\r\n    //组件\r\n    private topView: HallTopView;\r\n    private bottomView: HallBottomView;\r\n    private guiDelinesView: HallGuiDelinesView;\r\n    //\r\n    private gongGao: BannerView;\r\n    //\r\n\r\n    private gamesView: any;\r\n\r\n    private moreGameTopView: HallMoreGameTopNode;\r\n    private moreGameBtn: cc.Node;//更多游戏按钮\r\n    private canBack: boolean = false;//避免同时按下(能否返回)\r\n    private canMore: boolean = true;//避免同时按下(能否按更多游戏列表)\r\n\r\n    private intoHallAnimComp: IntoHallAnimComp;\r\n    private paoMaDengNode: cc.Node;\r\n    private eventComp: EventComp;\r\n\r\n    protected onInit() {\r\n        this.name = \"WndHall\";\r\n        this.layer = \"MainLayer\";\r\n        this.resPath = \"hall@ui/HallUI\";\r\n        this.model = <HallModel>Global.ModelManager.getModel(\"HallModel\");\r\n        this.MsgModel = <MsgModel>Global.ModelManager.getModel(\"MsgModel\");\r\n        this.rechargeModel = <RechargeGiftModel>Global.ModelManager.getModel(\"RechargeGiftModel\");\r\n        this.destoryType = DestoryType.None;\r\n    }\r\n\r\n    protected initView() {\r\n        this.node.width = cc.Canvas.instance.node.width;\r\n        this.node.height = cc.Canvas.instance.node.height;\r\n\r\n        let csNode = this.getChild(\"bottomNode/layoutNode/caishenNode\");\r\n        this.model.csNodePos = csNode;\r\n\r\n\r\n        this.leftArrowWidget = this.getComponent(\"centerNode/shan_left\", cc.Widget)\r\n        this.itemAreaWidget = this.getComponent(\"centerNode/centerContent/contentView/content/itemParent\", cc.Widget)\r\n        this.gonggaoAreaWidget = this.getComponent(\"centerNode/centerContent/contentView/content/gonggaoArea/gonggaoNode\", cc.Widget)\r\n        this.headViewWidget = this.getComponent(\"bottomNode/PlayerHeadView\", cc.Widget)\r\n        if (this.itemAreaWidget && this.gonggaoAreaWidget && this.headViewWidget) {\r\n            this.initAreaWidget()\r\n        }\r\n\r\n        this.moreGameTopView = <HallMoreGameTopNode>this.addView(\"HallMoreGameTopNode\", this.getChild(\"moreGametopNode\"), HallMoreGameTopNode);\r\n        this.moreGameTopView.active = false;\r\n        //更多游戏开关按钮\r\n        this.moreGameBtn = this.addCommonClick(\"centerNode/centerContent/contentView/content/moreGameBtn\", this.clickMoreGame, this);\r\n        this.moreGameBtn.active = false;\r\n\r\n        //公告组件\r\n        this.initGongGaoView()\r\n        //跑马灯组件\r\n        // this.paoMaDeng = <HallPaoMaDengView>this.addView(\"HallPaoMaDengView\", this.getChild(\"centerNode/PaoMaDengBox\"), HallPaoMaDengView);\r\n        this.paoMaDengNode = this.getChild(\"centerNode/PaoMaDengBox\");\r\n        let paomadengMask = this.getChild(\"centerNode/PaoMaDengBox/MsgBox\");\r\n        let ttffont = this.getChild(\"centerNode/PaoMaDengBox/MsgBox/PMDMsgItem\");\r\n        Global.UIHelper.addPaoMaDengComp(paomadengMask, true, null, ttffont.getComponent(cc.RichText).font);\r\n        Global.UIHelper.addPrivateMarqueeComp(this.getChild(\"showNode\"));\r\n        //上下Bar组件\r\n        this.topView = <HallTopView>this.addView(\"HallTopView\", this.getChild(\"topNode\"), HallTopView);\r\n        this.bottomView = <HallBottomView>this.addView(\"HallBottomView\", this.getChild(\"bottomNode\"), HallBottomView);\r\n        this.guiDelinesView = <HallGuiDelinesView>this.addView(\"HallGuiDelinesView\", this.getChild(\"guidelines\"), HallGuiDelinesView);\r\n        this.initGameList()\r\n        //游戏列表初始化\r\n        this.gameListView = this.getComponent(\"centerNode/centerContent\", cc.ScrollView);\r\n        this.gameListItem = this.getChild(\"centerNode/gameListItem\");\r\n        this.gameContent = this.gameListView.content;\r\n        this.gameListView.inertia = true;\r\n        this.gameListView.brake = 0.2;\r\n\r\n        Global.Toolkit.adjustIphoneX([this.getChild(\"centerNode\")], 30);\r\n\r\n        Global.Toolkit.adjustIphoneX([this.getChild(\"topNode\")], 10);\r\n\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this)\r\n\r\n        Global.Event.on(GlobalEvent.UPDATE_GAME_LIST, this, this.initGameListView);\r\n        Global.Event.on(GlobalEvent.POP_BIND_PHONE, this, this.PopUpBindPhone);\r\n        Global.Event.on(GlobalEvent.OpenWebViewGame, this, this.onOpenWebViewGame)\r\n        Global.Event.on(GlobalEvent.CloseWebViewGame, this, this.onCloseWebViewGame)\r\n        Global.Event.on(GlobalEvent.RecordGameListOffsetX, this, this.RecorGameListScrollX);\r\n        Global.Event.on(GlobalEvent.CloseMoreGame, this, this.closeMoreGame)\r\n\r\n\r\n        //切场景时，hall界面不关闭  通过脚本ondisable触发onClose\r\n        this.eventComp = this.node.addComponent(EventComp);\r\n        this.eventComp.disableCallback = this.onClose;\r\n        this.eventComp.target = this;\r\n    }\r\n    initGongGaoView() {\r\n        this.gongGao = <BannerView>this.addView(\"BannerView\", this.getChild(\"centerNode/centerContent/contentView/content/gonggaoArea/gonggaoNode\"), BannerView);\r\n        // return\r\n        // let storgeHall = Global.customApp.getHallBundleName()\r\n        // if (storgeHall.endsWith('0'))\r\n        // {\r\n        //     this.gongGao = <BannerView>this.addView(\"BannerView\", this.getChild(\"centerNode/centerContent/gonggaoArea/gonggaoNode\"), BannerView);\r\n        // }\r\n        // else if(storgeHall.endsWith('1'))\r\n        // {\r\n        //     this.gongGao = <BannerView>this.addView(\"BannerView\", this.getChild(\"centerNode/centerContent/itemArea/contentView/content/gonggaoArea/gonggaoNode\"), BannerView);\r\n        // }\r\n\r\n    }\r\n\r\n    initGameList() {\r\n        this.gamesView = this.getGameListByHall()\r\n        this.gamesView.setNode(this.getChild(\"centerNode\"));\r\n        this.gamesView.subViewState = true;\r\n    }\r\n\r\n    private RecorGameListScrollX() {\r\n        this.model.setEnterGameOffsetX(this.gameListView.getScrollOffset().x);\r\n    }\r\n\r\n    getGameListByHall() {\r\n        let storgeHall = Global.customApp.getHallBundleName()\r\n        if (storgeHall.endsWith('0')) {\r\n            return new GameListViewA()\r\n        }\r\n        else if (storgeHall.endsWith('1') || storgeHall.endsWith('2')) {\r\n            return new GameListViewA()\r\n        }\r\n    }\r\n    initAreaWidget() {\r\n        // let hall = Global.customApp.getHallBundleName()\r\n        // if(!hall.endsWith('0'))\r\n        // {\r\n        //     return\r\n        // }\r\n        let screenWidth = cc.Canvas.instance.node.width\r\n        let screenHeight = cc.Canvas.instance.node.height\r\n        let ratio = screenWidth / screenHeight\r\n        let hallWidgetCfg = Global.Setting.SkinConfig.getHallWidgetCfg()\r\n        if (Math.abs(ratio - 1280 / 720) < 0.02) { // 1280 系列分辨率\r\n            if (this.itemAreaWidget)\r\n                this.itemAreaWidget.left = hallWidgetCfg[\"itemAreaWidget\"][0]\r\n            // if (this.leftArrowWidget)\r\n            //     this.leftArrowWidget.left = hallWidgetCfg[\"leftArrowWidget\"][0]\r\n            if (this.gonggaoAreaWidget)\r\n                this.gonggaoAreaWidget.left = hallWidgetCfg[\"gonggaoAreaWidget\"][0]\r\n            if (this.headViewWidget)\r\n                this.headViewWidget.left = hallWidgetCfg[\"headViewWidget\"][0]\r\n        }\r\n        else {\r\n            //450\r\n            if (this.itemAreaWidget)\r\n                this.itemAreaWidget.left = hallWidgetCfg[\"itemAreaWidget\"][1]\r\n            // if (this.leftArrowWidget)\r\n            //     this.leftArrowWidget.left = hallWidgetCfg[\"leftArrowWidget\"][1]\r\n            if (this.gonggaoAreaWidget)\r\n                this.gonggaoAreaWidget.left = hallWidgetCfg[\"gonggaoAreaWidget\"][1]\r\n            if (this.headViewWidget)\r\n                this.headViewWidget.left = hallWidgetCfg[\"headViewWidget\"][1]\r\n\r\n        }\r\n    }\r\n\r\n    private onKeyDown(event) {\r\n        if (!CC_PREVIEW)\r\n            return;\r\n        switch (event.keyCode) {\r\n            case cc.macro.KEY.a:\r\n                {\r\n                    Logger.error(\"EVENT_CALL_RECONNECT\");\r\n                    Game.Event.event(Game.EVENT_CALL_RECONNECT);\r\n                    break;\r\n                }\r\n            case cc.macro.KEY.s:\r\n                {\r\n                    Global.UI.showSingleBox(\"test\");\r\n                    Game.Event.event(Game.EVENT_FORCE_LEAVE_GAME, true);\r\n                    break;\r\n                }\r\n            case cc.macro.KEY.d:\r\n                {\r\n                    Global.Toolkit.dumpRes(false);\r\n                    break;\r\n                }\r\n            case cc.macro.KEY.escape:\r\n                {\r\n                    Global.UI.showSingleBox(\"测试子游戏内收到的大厅弹窗消息\");\r\n                    break;\r\n                }\r\n            case cc.macro.KEY.back: {\r\n                Global.NativeEvent.onShowExitDialog()\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    protected onOpen() {\r\n        //游戏恢复(断线重连)\r\n        if (this.model.needQuaryState)\r\n            this.model.reqQueryState();\r\n        //打开大厅  请求玩家货币\r\n        Global.HallServer.send(NetAppface.mod, NetAppface.GetUserPoint, {});\r\n        this.checkGameMsg();\r\n        Global.Event.event(GlobalEvent.ON_HALL_OPEN);\r\n        this.showAllSubView()\r\n        //请求活动 右上角活动小红点需要\r\n        this.model.requestMyActivityList();\r\n        cc.find(\"Canvas/loading\").active = false;\r\n        this.initMusic()\r\n        this.tryInitGamelist()\r\n        if (this.guiDelinesView && this.model.moreGameStatus == false) {\r\n            this.guiDelinesView.getNewMsg();\r\n        }\r\n        // this.initHallActivity()\r\n\r\n    }\r\n\r\n    private closeMoreGame(isClose: boolean) {\r\n        if (isClose && this.canBack) {\r\n            //关闭更多游戏列表页面效果\r\n            this.closeMoreGameAni();\r\n            //重置enterGameOffsetX\r\n            this.model.setEnterGameOffsetX(0);\r\n            //刷新游戏列表\r\n            this.gamesView.refreshGameList(this.model.enterGameOffsetX, false, this.animationCallBack.bind(this));\r\n            //保存游戏列表状态\r\n            this.model.setMoreGameStatus(false);\r\n            this.guiDelinesView.getNewMsg();\r\n\r\n        }\r\n    }\r\n\r\n    private clickMoreGame() {\r\n        if (this.canMore) {\r\n            //更多游戏列表页面效果\r\n            this.moreGameAni();\r\n            //重置enterGameOffsetX\r\n            this.model.setEnterGameOffsetX(0);\r\n            //刷新游戏列表动画\r\n            this.gamesView.refreshGameList(this.model.enterGameOffsetX, true, this.animationCallBack.bind(this));\r\n            //保存游戏列表状态\r\n            this.model.setMoreGameStatus(true);\r\n        }\r\n    }\r\n\r\n    //打开更多游戏列表页面效果\r\n    private moreGameAni() {\r\n        //原先头部隐藏\r\n        this.topView.node.runAction(cc.sequence(cc.hide(), cc.callFunc(() => {\r\n            this.topView.subViewState = false;\r\n        }, this)));\r\n        //新头部出现\r\n        this.moreGameTopView.subViewState = true;\r\n        this.moreGameTopView.node.opacity = 1;\r\n        this.moreGameTopView.node.runAction(cc.sequence(cc.show(), cc.fadeIn(0.5), cc.callFunc(() => {\r\n            this.canBack = true; //可以返回\r\n        })));\r\n        //自身隐藏动画\r\n        this.moreGameBtn.runAction(cc.sequence(cc.fadeOut(0.5), cc.callFunc(() => {\r\n            this.moreGameBtn.active = false;\r\n            this.canMore = false;\r\n        }, this)));\r\n        //公告缩进左边动画\r\n        this.gongGao.node.runAction(cc.sequence(cc.fadeOut(0.5), cc.callFunc(() => {\r\n            this.gongGao.subViewState = false;\r\n        }, this)));\r\n        //底部消息动画\r\n        this.bottomView.node.runAction(cc.sequence(cc.fadeOut(0.5), cc.callFunc(() => {\r\n            this.bottomView.subViewState = false;\r\n        }, this)));\r\n    }\r\n\r\n    //关闭更多游戏列表页面效果\r\n    private closeMoreGameAni() {\r\n        //新头部消失\r\n        this.moreGameTopView.node.runAction(cc.sequence(cc.hide(), cc.callFunc(() => {\r\n            this.moreGameTopView.subViewState = false;\r\n        }, this)));\r\n        //旧头部出现\r\n        this.canBack = false;\r\n        this.topView.subViewState = true;\r\n        this.topView.node.opacity = 1;\r\n        this.topView.node.runAction(cc.sequence(cc.show(), cc.fadeIn(0.5)));\r\n        //公告出现\r\n        this.gongGao.subViewState = true;\r\n        this.gongGao.node.runAction(cc.fadeIn(0.5));\r\n        //更多游戏按钮出现\r\n        this.canMore = true; //可以点击更多游戏按钮\r\n        // this.moreGameBtn.active = true;\r\n        // this.moreGameBtn.runAction(cc.sequence(cc.fadeIn(0.5), cc.callFunc(() => {\r\n        //     this.canMore = true; //可以点击更多游戏按钮\r\n        // })));\r\n        //底部出现\r\n        this.bottomView.subViewState = true;\r\n        this.bottomView.node.runAction(cc.fadeIn(0.5));\r\n    }\r\n\r\n\r\n\r\n    //大厅红包 保险金 私人跑马灯等活动\r\n    initHallActivity() {\r\n        //红包\r\n        this.model.requestGetRewardPackCount()\r\n    }\r\n\r\n    tryInitGamelist() {\r\n        let flag = Global.GameData.dataInitFinish\r\n        if (flag) {\r\n            this.initGameListView()\r\n        }\r\n    }\r\n    initMusic() {\r\n        if (CC_JSB) {\r\n            var model: PlayerInfoModel = Global.ModelManager.getModel(\"PlayerInfoModel\")\r\n            if (model) {\r\n                model.InitBgm()\r\n            }\r\n        } else {\r\n            Global.Audio.playHallBGM();\r\n        }\r\n    }\r\n    showAllSubView() {\r\n        this.topView.subViewState = true\r\n        this.bottomView.subViewState = true\r\n        this.gongGao.subViewState = true\r\n        this.rechargeModel.reqGetActivityCfg(false)\r\n    }\r\n\r\n\r\n\r\n    public animationCallBack() {\r\n        HallPopMsgHelper.Instance.popMsgList();\r\n    }\r\n\r\n    private checkGameMsg() {\r\n        if (Game.DataBridge.msg == null && Game.DataBridge.fastTipMsg == null && Game.DataBridge.cacheShow == null)\r\n            return;\r\n        if (Game.DataBridge.cacheShow) {\r\n            Global.UI.show(Game.DataBridge.cacheShow.window, Game.DataBridge.cacheShow.args)\r\n            Game.DataBridge.cacheShow = null\r\n        }\r\n        if (Game.DataBridge.msg) {\r\n            let msg = Game.DataBridge.msg;\r\n            Game.DataBridge.msg = null;\r\n            if (msg.content == null || msg.content == \"\")\r\n                return;\r\n            if (msg.type == 1) {\r\n                Global.UI.showSingleBox(msg.content, msg.yFunc, msg.nFunc);\r\n            }\r\n            else {\r\n                Global.UI.showYesNoBox(msg.content, msg.yFunc, msg.nFunc);\r\n            }\r\n        }\r\n        else if (Game.DataBridge.fastTipMsg) {\r\n            Global.UI.fastTip(Game.DataBridge.fastTipMsg);\r\n            Game.DataBridge.fastTipMsg = null;\r\n        }\r\n\r\n    }\r\n\r\n    private PopUpNotice() {\r\n        let status = this.MsgModel.Status\r\n        if (status == 1) {\r\n            HallPopMsgHelper.Instance.addLock(PopWndName.Notice);\r\n            Global.UI.show(\"WndNotice\");\r\n        }\r\n    }\r\n\r\n\r\n    private PopUpBindPhone() {\r\n        HallPopMsgHelper.Instance.addLock(PopWndName.BindPhone);\r\n        Global.UI.show(\"WndBindPhone\");\r\n    }\r\n\r\n    protected onClose() {\r\n        if (Global.SceneManager.inGame()) {\r\n            this.gamesView.close();\r\n            this.gongGao.close();\r\n        }\r\n    }\r\n\r\n    protected onDispose() {\r\n\r\n        Global.Event.off(GlobalEvent.UPDATE_GAME_LIST, this, this.initGameListView)\r\n\r\n        Global.Event.off(GlobalEvent.POP_BIND_PHONE, this, this.PopUpBindPhone);\r\n        Global.Event.off(GlobalEvent.OpenWebViewGame, this, this.onOpenWebViewGame)\r\n        Global.Event.off(GlobalEvent.CloseWebViewGame, this, this.onCloseWebViewGame)\r\n        Global.Event.off(GlobalEvent.RecordGameListOffsetX, this, this.RecorGameListScrollX);\r\n        Global.Event.off(GlobalEvent.CloseMoreGame, this, this.closeMoreGame)\r\n\r\n        if (this.gameContent) {\r\n            this.gameContent.stopAllActions();\r\n        }\r\n        this.gamesView.destroy();\r\n    }\r\n\r\n\r\n    //初始化游戏列表\r\n    initGameListView(bAnim: boolean = true) {\r\n        //先适配完再计算位置\r\n        Global.Component.frameEnd(() => {\r\n            if (!this.node.isValid)\r\n                return;\r\n            this.gamesView.refreshGameList(this.model.enterGameOffsetX, this.model.moreGameStatus, this.animationCallBack.bind(this));\r\n            if (this.model.moreGameStatus) {\r\n                this.moreGameAni();\r\n            }\r\n            bAnim = this.model.firstOpenHall && bAnim;\r\n            // let rightNodeArr = this.gamesView.getNodesArr();\r\n            if (bAnim) {\r\n                // this.model.firstOpenHall = false;\r\n                // this.intoHallAnimComp = Global.UIHelper.safeGetComponent(this.node, \"\", IntoHallAnimComp);\r\n                // //this.intoHallAnimComp.alphaNode = this.getChild(\"centerNode/PaoMaDengBox\");\r\n                // this.intoHallAnimComp.bottomNodeArr = [this.bottomView.node];\r\n                // this.intoHallAnimComp.topNodeArr = [this.topView.node];\r\n                // this.intoHallAnimComp.rightNodeArr = rightNodeArr;\r\n                // Global.Component.frameEnd(() => {\r\n                //     this.intoHallAnimComp.init();\r\n                //     this.intoHallAnimComp.startAnimation();\r\n                // });\r\n            }\r\n            else {\r\n                this.animationCallBack();\r\n            }\r\n        });\r\n    }\r\n\r\n    onOpenWebViewGame(url, scheme, actionViewHidden, gid) {\r\n        if (cc.sys.isBrowser) {\r\n            Global.GameWebView.gameWebViewShow(url, false, gid == 9001);\r\n            Logger.log(\"浏览器环境下\")\r\n        } else {\r\n            Global.WebViewControl.showWebView(url, scheme, actionViewHidden, this.node, gid)\r\n        }\r\n        Logger.log(\" WebViewGame open HallModel requestApplyEnterGame base64 url \", url, scheme, actionViewHidden);\r\n    }\r\n    onCloseWebViewGame() {\r\n        this.gamesView.onResume()\r\n        this.initMusic()\r\n        Logger.log(\"WebViewGame --外接游戏已关闭\");\r\n    }\r\n}"]}