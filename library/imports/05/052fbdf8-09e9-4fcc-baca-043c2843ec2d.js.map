{"version":3,"sources":["assets\\hall\\scripts\\logic\\core\\scene\\SceneManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import HallPopMsgHelper from \"../../hall/tool/HallPopMsgHelper\";\r\nimport { ReportTool } from \"../tool/ReportTool\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\nexport enum SceneType {\r\n    None = 0,\r\n    Login = 1,\r\n    Hall = 2,\r\n    Game = 3,\r\n}\r\n\r\n@ccclass\r\nexport default class SceneManager {\r\n    public LOGIN_SCENE_ID = 1;\r\n    public HALL_SCENE_ID = 2;\r\n    public GAME_SCENE_ID = 3;\r\n    public _sceneType: SceneType;\r\n\r\n    private switchSceneTimer = null\r\n    public setup() {\r\n        this.sceneType = SceneType.None;\r\n    }\r\n\r\n    public inGame() {\r\n        return this.sceneType == SceneType.Game;\r\n    }\r\n\r\n    public set sceneType(value){\r\n        Logger.error(\"set sceneType from, to\", SceneType[this._sceneType], SceneType[value]);\r\n        this._sceneType = value;\r\n    }\r\n\r\n    public get sceneType(){\r\n        return this._sceneType;\r\n    }\r\n\r\n    public goToLogin() {\r\n        //注销账号管理器缓存数据清空\r\n        Global.ModelManager.clear();\r\n        //返回登录界面\r\n        Global.UI.closeAllUIPrefab();\r\n        HallPopMsgHelper.releaseInstance();\r\n\r\n        if (this.sceneType == SceneType.None) {\r\n            this.sceneType = SceneType.Login;\r\n            this.loadHallScene();\r\n        }\r\n        else if (this.sceneType == SceneType.Game) {\r\n            Game.Event.event(Game.EVENT_FORCE_LEAVE_GAME, true);\r\n            Game.Control.shutDown(true);\r\n            Global.SceneManager.goToHall();\r\n            this.sceneType = SceneType.Login;\r\n        }\r\n        else {\r\n            this.sceneType = SceneType.Login;\r\n            if(cc.director.getScene() && cc.director.getScene().name != \"LoadingScene\")\r\n                Global.UI.show(\"WndLogin\");\r\n        }\r\n    }\r\n\r\n    public goToHall() {\r\n        if (this.sceneType == SceneType.Hall)\r\n        {\r\n            return;\r\n        }\r\n        Global.NativeJSBBridge.addClickGames(\"hall\")\r\n        Global.UI.closeAllUIPrefab();\r\n        if (this.sceneType == SceneType.Game) {\r\n            this.sceneType = SceneType.Hall;\r\n            if (Global.Setting.isStartHotUpdate) {\r\n                Global.SceneManager.onLoadHallScene();\r\n            } else {\r\n                Global.SceneManager.loadHallScene();\r\n            }\r\n        }\r\n        else {\r\n            this.sceneType = SceneType.Hall;\r\n            Global.UI.show(\"WndHall\"); \r\n            let data = Global.PlayerData;\r\n            if(data.type !== 1)\r\n            {\r\n                Global.Audio.playAudioSource(\"hall/sound/inithall\")\r\n            }\r\n            Global.UI.closeHallLoading();\r\n        }\r\n    }\r\n\r\n    public onLoadHallScene() {\r\n        if (this.sceneType == SceneType.Game) {\r\n            this.sceneType = SceneType.Hall;\r\n        }\r\n        Global.UI.closeAllUIPrefab();\r\n       \r\n        let HotUpdateManager = Global.HotUpdateManager;\r\n        let gameName = HotUpdateManager.updateHelper.gameType();\r\n        let storagePath = HotUpdateManager.updateHelper.genStoragePath(gameName);\r\n        Logger.log(\"onLoadHallScene -----------\" + storagePath);\r\n        // window.require(storagePath + '/src/dating.js')\r\n        let curHallBundle = Global.customApp.getHallBundleName()\r\n        if (curHallBundle){\r\n            if (Global.ResourceManager.checkBundleValid(curHallBundle)){\r\n                this.doLoadHallScene(null);\r\n            }else {\r\n                Global.customApp.loadHallBundle((error,bundle)=>{\r\n                    if (error){\r\n                        Logger.error(\"onLoadHallScene load hall bundle error \" + error.message)\r\n                        return;\r\n                    }   \r\n                    this.doLoadHallScene(null);\r\n                })\r\n            }\r\n        }else {\r\n            this.doLoadHallScene(null);\r\n        }\r\n        \r\n        // this.releaseCurGameBundle()     // debug 放在外面子游戏退回到大厅会有一帧的页面虚化\r\n        return;\r\n    }\r\n\r\n    public loadHallScene(cb?: Function) {\r\n        if (this.sceneType == SceneType.Game) {\r\n            this.sceneType = SceneType.Hall;\r\n        }\r\n        Logger.log(\"--------loadHallScene-------\")\r\n        Global.UI.closeAllUIPrefab();\r\n        let curHallBundle = Global.customApp.getHallBundleName()\r\n        if (curHallBundle){\r\n            if (Global.ResourceManager.checkBundleValid(curHallBundle)){\r\n                this.doLoadHallScene(cb);\r\n            }else {\r\n                Global.customApp.loadHallBundle((error,bundle)=>{\r\n                    if (error){\r\n                        Logger.error(\"onLoadHallScene load hall bundle error \" + error.message)\r\n                        return;\r\n                    }   \r\n                    this.doLoadHallScene(cb);\r\n                })\r\n            }\r\n        }else {\r\n            this.doLoadHallScene(cb);\r\n        }\r\n        \r\n        \r\n    }\r\n\r\n    private doLoadHallScene(cb:Function){\r\n        cc.director.loadScene('HallScene', () => {\r\n            if (cb) {\r\n                cb();\r\n            }\r\n            this.releaseCurGameBundle()\r\n            this.adjustRedMiUI12()\r\n        })\r\n    }\r\n\r\n    //适配小米10系列 MIUI12 Android11系统 进入大厅闪退\r\n    private adjustRedMiUI12(){\r\n        let phone_device_brand = Global.Setting.SystemInfo.deviceBrand\r\n        let osVer = cc.sys.osVersion\r\n        if (phone_device_brand && (phone_device_brand.toLowerCase() == \"xiaomi\") && (osVer == \"11\" || osVer == \"11.0\" || osVer == \"11.0.0\")){ // 小米Android系统11系列执行\r\n            // Logger.error(\"adjustRedMiUI12 excute success +++++++++++++\")\r\n            let canvas = cc.find(\"Canvas\")\r\n            let camNode = canvas.getChildByName(\"CameraClearStencil\")\r\n            let camera = null\r\n            if (!cc.isValid(camNode)){\r\n                Logger.error(\"adjustRedMiUI12 camNode null\")\r\n                camNode = new cc.Node(\"CameraClearStencil\")\r\n                camera = camNode.addComponent(cc.Camera)\r\n                canvas.addChild(camNode)\r\n            }\r\n            camNode.groupIndex = 1\r\n            camera.clearFlags = cc.Camera.ClearFlags.DEPTH | cc.Camera.ClearFlags.STENCIL\r\n            camera.depth = 10\r\n            camera.cullingMask = 0\r\n        }else {\r\n            Logger.error(\"adjustRedMiUI12 excute failed +++++++++++++ phone_device_brand \" + phone_device_brand + \" osVersion = \" + osVer)\r\n        }\r\n        \r\n    }\r\n\r\n    public releaseCurGameBundle(){\r\n        let releaseHelper = Global.ResourceManager.releaseHelper\r\n        let gameBundle = Global.ResourceManager.gameBundle\r\n        releaseHelper.releaseBundle(gameBundle)\r\n        Global.ResourceManager.gameBundle = ''\r\n    }\r\n\r\n    public loadGameScene(cb?: Function) {\r\n        if (this.sceneType == SceneType.Game) {\r\n            Logger.error(\"this.sceneType == SceneType.Game\")\r\n            return;\r\n        }\r\n\r\n        Global.UI.SetMessageBoxInGame(false);\r\n        this.sceneType = SceneType.Game;\r\n        //进游戏关闭大厅音乐\r\n        Global.Audio.stopMusic();\r\n        Global.UI.closeAllUIPrefab(true);\r\n        Global.UI.RestorePersistNode()\r\n        let HotUpdateManager = Global.HotUpdateManager;\r\n        let currentGame = HotUpdateManager.CurrentGame;\r\n        Global.ResourceManager.gameBundle = currentGame\r\n        Global.NativeJSBBridge.addClickGames(currentGame.toString())\r\n        this.setGameSearchPath(currentGame);\r\n        Logger.log(\"----------------------------currentGame ====\" + currentGame)\r\n        let bundlePath = currentGame.toString()\r\n        \r\n        this.loadGameSceneByGid(bundlePath);\r\n    }\r\n\r\n    private loadGameSceneByGid(bundleName: string, finishCall?: Function){\r\n        let currentGame = bundleName;\r\n        this.switchSceneTimer = setTimeout(() => {\r\n            Global.Toolkit.removeDir(Number(currentGame),\"进入子游戏失败\")\r\n        }, 5000);\r\n        let self = this;\r\n        Global.ResourceManager.loadBundle(currentGame, async (err, bundle:cc.AssetManager.Bundle)=>{\r\n            this.clearTimer()\r\n            if (err){\r\n                Global.Toolkit.removeDir(Number(currentGame),\"加载子游戏bundle失败\")\r\n                Logger.error(\"load failed \" + currentGame)\r\n                return;\r\n            }\r\n            \r\n            let sceneID = Number(currentGame);\r\n            if(Game.Control.GAME_DDZ_HJ_ARR.indexOf(sceneID) >= 0){\r\n                if(Game.Control.curGid > 0){\r\n                    sceneID = Game.Control.curGid;\r\n                }\r\n            }\r\n            let sceneName = ''\r\n            switch (sceneID.toString()) {\r\n                case \"1002\"://百人牛牛\r\n                    sceneName = \"BullPVEGame\";\r\n                    break;\r\n                case \"1005\"://龙虎斗\r\n                    sceneName = 'LongHuGame'\r\n                    break;\r\n                case \"1006\":\r\n                    sceneName = 'HongHeiGame'\r\n                    break;\r\n                case \"1007\"://百家乐\r\n                    sceneName = 'BaccaratGame'\r\n                    break;\r\n                case \"1009\":\r\n                    sceneName = 'bzbw'\r\n                    break;\r\n                case \"1010\"://推筒子\r\n                    sceneName = 'TuitongziGame'\r\n                    break;\r\n                case \"1011\"://欢乐至尊\r\n                    sceneName = 'HuanlezhizunGame'\r\n                    break;\r\n                case \"1014\":\r\n                    sceneName = 'WanRenGame'\r\n                    break;\r\n                case \"1015\"://五星宏辉\r\n                    sceneName = 'WuxinghonghuiGame'\r\n                    break;\r\n                case \"1016\"://二八杠\r\n                    sceneName = 'ErbagangGame'\r\n                    break;\r\n                case \"1017\"://百变五张\r\n                    sceneName = 'BbwzGame'\r\n                    break;\r\n                case \"1018\"://决战五张\r\n                    sceneName = 'JzwzGame'\r\n                    break;\r\n                case \"1019\"://飞禽走兽\r\n                    sceneName = 'FqzsGameScene'\r\n                    break;\r\n                case \"1020\":// 鱼虾蟹\r\n                    sceneName = 'YxxScene'\r\n                    break;\r\n                case \"1021\":    // 秦皇汉武\r\n                    sceneName = 'QhhwScene'\r\n                    break;\r\n                case \"1022\":    // 西游记\r\n                    sceneName = 'XyjGameScene'\r\n                    break;\r\n                case \"2001\":\r\n                    sceneName = 'BullPVPScene'\r\n                    break;\r\n                case \"2002\":\r\n                    sceneName = 'BullTwoScene'\r\n                    break;\r\n                case \"2003\":\r\n                    sceneName = 'ZJHScene'\r\n                    break;\r\n                case \"2004\"://十三水\r\n                    sceneName = 'ShisanshuiGame';\r\n                    break;\r\n                case \"2005\":\r\n                    sceneName = 'DDZPvpScene';\r\n                    break;\r\n                case \"2006\":\r\n                    sceneName = 'BullTBScene'\r\n                    break;\r\n                case \"2007\":\r\n                    sceneName = 'BullKPScene'\r\n                    break;\r\n                case \"2008\":    // 21点\r\n                    sceneName = 'BlackJackScene'\r\n                    break;\r\n                case \"2009\":    // 疯狂牛牛\r\n                    sceneName = 'FknnScene'\r\n                    break;\r\n                case \"2010\":    // 德州扑克\r\n                    sceneName = 'TexasHoldemScene'\r\n                    break;\r\n                case \"2011\":    // 一拳超人\r\n                    sceneName = 'OnePunchScene'\r\n                    break;\r\n                case \"2012\":\r\n                    sceneName = 'PdkScene';\r\n                    break;\r\n                case \"2013\":\r\n                    sceneName = 'DdzTwoScene';\r\n                    break;\r\n                case \"2014\":\r\n                    sceneName = 'BullHPScene'\r\n                    break;\r\n                case \"2101\":    // 二人麻将\r\n                    sceneName = 'ErmjScene'\r\n                    break;\r\n                case \"2102\":    // 血流麻将\r\n                    sceneName = 'XlmjScene'\r\n                    break;\r\n                case \"4001\": //红包扫雷\r\n                    sceneName = 'RedPackScene'\r\n                    break;\r\n                case \"4002\": //红包接龙\r\n                    sceneName = 'HbjlGame'\r\n                    break;\r\n                case \"3001\":\r\n                    sceneName = 'main'\r\n                    break;\r\n                case \"3002\"://3D捕鱼\r\n                    sceneName = 'Fish3DGame'\r\n                    break;\r\n                case \"3003\":\r\n                    sceneName = 'DntgFishScene'\r\n                    break;\r\n                case \"3004\":\r\n                    sceneName = 'JcbyFishScene'\r\n                    break;\r\n                case \"3005\":\r\n                    sceneName = 'FishGameScene'\r\n                    break;\r\n                case \"3006\":\r\n                    sceneName = 'Fish3GameScene'\r\n                    break;\r\n                case \"1001\":\r\n                    sceneName = 'toubao'\r\n                    break;\r\n                case \"5001\":\r\n                    sceneName = 'CqbyScene'\r\n                    break;\r\n                case \"5002\"://多福多财\r\n                    sceneName = 'DuofuduocaiGame'\r\n                    break;\r\n                case \"5003\"://跑马水果机\r\n                    sceneName = 'shuiguoji'\r\n                    break;\r\n                case \"5004\"://澳门风云\r\n                    sceneName = 'AmfyGame'\r\n                    break;\r\n                case \"5005\"://古惑仔\r\n                    sceneName = 'GhzGameScene'\r\n                    break;\r\n                case \"5006\"://拳皇97\r\n                    sceneName = 'Qh97GameScene'\r\n                    break;\r\n                case \"6001\"://六合彩\r\n                    sceneName = 'MK6Game'\r\n                    break;\r\n                case \"7005\"://真人龙虎\r\n                    sceneName = 'ShixunLonghuGame'\r\n                    break;\r\n                default:\r\n                    Logger.error(\"enter hall -----\")\r\n                    break;\r\n            }\r\n            \r\n            Game.GamePreloadTool.setup(Number(currentGame));        // debug 这里加载处理杀掉进程重连情况\r\n            if (Game.GamePreloadTool.checkPreloadBundleExist(Number(currentGame))){\r\n               await Game.GamePreloadTool.preloadBundle();              // 后续子游戏preload优先级提高, 需要先一步加载 先预埋\r\n               await Game.GamePreloadTool.preloadPrefab(Game.GamePreloadTool.lobbyUIPath);      // 杀掉进程重连时候要预加载选场以便退出游戏时快速显示\r\n            }\r\n            this.switchSceneTimer = setTimeout(() => {\r\n                Global.Toolkit.removeDir(Number(currentGame),\"加载子游戏场景失败\")\r\n            }, 5000);\r\n            try {\r\n                bundle.loadScene(sceneName,(err:Error,sceneAsset)=>{\r\n                    this.clearTimer()\r\n                    if (err){\r\n                        \r\n                        Logger.error(\"加载子游戏bundle失败--------------loadScene------\")\r\n                        Logger.error(\"bundle loadScene \" + sceneName + \" error = \" + err.message)\r\n                        Global.Toolkit.removeDir(Number(currentGame),err)\r\n                        return;\r\n                    }\r\n                    cc.director.loadScene(sceneName, ()=>{\r\n                        if (finishCall){\r\n                            finishCall()\r\n                        }\r\n                        self.adjustRedMiUI12();\r\n                    });\r\n                })\r\n              } catch (error) {\r\n                Global.Toolkit.removeDir(Number(currentGame),error)\r\n                // expected output: ReferenceError: nonExistentFunction is not defined\r\n                // Note - error messages will vary depending on browser\r\n              }\r\n           \r\n        })\r\n    }\r\n\r\n    \r\n\r\n    public switchGameScene(gid: number){\r\n        if (this.sceneType !== SceneType.Game) {\r\n            Logger.error(\"this.sceneType !== SceneType.Game\")\r\n            return;\r\n        }\r\n        \r\n        let oldGameId = Global.HotUpdateManager.CurrentGame;\r\n        let oldGameBundle = Global.ResourceManager.gameBundle;\r\n\r\n        Global.UI.SetMessageBoxInGame(false);\r\n        Global.UI.closeAllUIPrefab();\r\n        let currentGame = String(gid);\r\n        Global.HotUpdateManager.CurrentGame = currentGame;\r\n        Global.ResourceManager.gameBundle = currentGame;\r\n        Global.NativeJSBBridge.addClickGames(currentGame)\r\n        this.setGameSearchPath(currentGame);\r\n        Global.UI.close(\"WndGameLobbyShell\");       // debug 跳转到无选场游戏时, 再退出重新进会显示前个游戏残影\r\n        this.loadGameSceneByGid(currentGame, ()=>{\r\n            // 跳转清理旧游戏资源 debug 旧选场资源还无法释放, UI还保存着在map里 只会多出一份选场资源暂不处理\r\n            if(currentGame == oldGameId){\r\n                //合集类游戏会出现这种情况\r\n                return;\r\n            }\r\n            Global.ResourceManager.releaseHelper.releaseBundle(oldGameBundle);\r\n        });\r\n    }\r\n\r\n    public setGameSearchPath(gid: string){\r\n        if (cc.sys.isNative){\r\n            let updateHelper = Global.HotUpdateManager.updateHelper\r\n            updateHelper.init(gid)\r\n            \r\n            let storagePath = updateHelper.storagePath();\r\n            Global.SearchPathHelper.addOneGamePath(storagePath);\r\n        }\r\n    }\r\n\r\n    public removeGameSearchPath(gid: string){\r\n        if (cc.sys.isNative){\r\n            let storagePath = jsb.fileUtils.getWritablePath()  + 'gameUpdate/' + gid;\r\n            Global.SearchPathHelper.removeOnePath(storagePath)\r\n        }\r\n    }\r\n\r\n    private removeStoragePathFromSearchPaths(storagePath){\r\n        let searchPaths = jsb.fileUtils.getSearchPaths();\r\n        if (storagePath && searchPaths && searchPaths.length > 0){\r\n            let pathIndex = -1\r\n            for (let i =0;i<searchPaths.length;i++){\r\n                let path = searchPaths[i]\r\n                if (path && (path == storagePath || path == (storagePath + \"/\"))){\r\n                    pathIndex = i;\r\n                    break;\r\n                }   \r\n            }\r\n            searchPaths.splice(pathIndex,1)\r\n        }else {\r\n            Logger.error(\"removeStoragePathFromSearchPaths searPaths or storagepath == null\")\r\n            //添加大厅热更目录\r\n            if (searchPaths && searchPaths.length == 0)\r\n            {\r\n                Logger.error(\"removeStoragePathFromSearchPaths add Hall SearchPath\")\r\n                let hallNativeUpdatePath = Global.HotUpdateManager.getNativeHotUpdatePath('hall')\r\n                searchPaths.unshift(hallNativeUpdatePath)\r\n            }\r\n            \r\n        }\r\n        return searchPaths\r\n    }\r\n    clearTimer(){\r\n        if (this.switchSceneTimer) {\r\n            clearTimeout(this.switchSceneTimer)\r\n            this.switchSceneTimer = null\r\n        }\r\n    }\r\n}\r\n"]}