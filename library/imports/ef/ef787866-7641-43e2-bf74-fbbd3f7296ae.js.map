{"version":3,"sources":["assets\\ddz\\ddz\\scripts\\subView\\DdzRoleView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import DdzBaseView from \"./DdzBaseView\";\r\nimport DdzDriver from \"../DdzDriver\";\r\n\r\nexport enum DdzRoleDefine{\r\n    FLandord = 1,   // 男地主\r\n    FFramer,        // 男农民\r\n}\r\n\r\nexport default class DdzRoleView extends DdzBaseView{\r\n    public static RoleAct = {\r\n        Normal: 'idle',\r\n        Play: 'idle_chupai',\r\n        Win: 'idle_win',\r\n        Lose: 'idle_shibai',\r\n        Think: 'idle_sikao',\r\n    };\r\n    private farmerSk: sp.Skeleton;\r\n    private landlordSk: sp.Skeleton;\r\n    private switchSk: sp.Skeleton;\r\n    private nCurRole: number = 0;   // 1地主 2农民\r\n    constructor(node){\r\n        super();\r\n        this.setNode(node);\r\n    }\r\n\r\n    protected initView(){\r\n        this.farmerSk = <sp.Skeleton>this.getComponent('farmer', sp.Skeleton);\r\n        this.farmerSk.node.active = false;\r\n        this.landlordSk = <sp.Skeleton>this.getComponent('landlord', sp.Skeleton);\r\n        this.landlordSk.node.active = false;\r\n        this.switchSk = <sp.Skeleton>this.getComponent('switch', sp.Skeleton);\r\n        this.switchSk.node.active = false;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param isShow \r\n     * @param nRole 1地主 2农民\r\n     */\r\n    public showRole(isShow: boolean, nRole: number = 0){\r\n        if (!DdzDriver.instance.skinDefine.useRole)\r\n            return;\r\n        \r\n        if (isShow){\r\n            if (nRole == DdzRoleDefine.FLandord){\r\n                this.farmerSk.node.active = false;\r\n                this.landlordSk.node.active = true;\r\n            }\r\n            else if (nRole == DdzRoleDefine.FFramer){\r\n                this.farmerSk.node.active = true;\r\n                this.landlordSk.node.active = false;\r\n            }\r\n            this.nCurRole = nRole;\r\n            this.playRoleNormalEffect();\r\n        }\r\n        else{\r\n            this.farmerSk.node.active = false;\r\n            this.landlordSk.node.active = false;\r\n        }\r\n    }\r\n\r\n    public switchRole(){\r\n        if (!DdzDriver.instance.skinDefine.useRole)\r\n            return;\r\n\r\n        this.showRole(false);\r\n        this.switchSk.node.active = true;\r\n        this.switchSk.setAnimation(0, 'idle', false);\r\n        Game.Component.scheduleOnce(()=>{\r\n            this.switchSk.node.active = false;\r\n            this.showRole(true, 1);\r\n        }, 0.3);\r\n    }\r\n\r\n    public playRoleEffect(actName: string, isLoop: boolean = true, delay = 1){\r\n        if (!DdzDriver.instance.skinDefine.useRole)\r\n            return;\r\n\r\n        if (this.nCurRole == DdzRoleDefine.FLandord){\r\n            this.landlordSk.setAnimation(0, actName, isLoop);\r\n            if (!isLoop){\r\n                this.landlordSk.addAnimation(0, DdzRoleView.RoleAct.Normal, true, delay);\r\n            }\r\n        }\r\n        else if(this.nCurRole == DdzRoleDefine.FFramer){\r\n            this.farmerSk.setAnimation(0, actName, isLoop);\r\n            if (!isLoop){\r\n                this.farmerSk.addAnimation(0, DdzRoleView.RoleAct.Normal, true, delay);\r\n            }\r\n        }\r\n    }\r\n\r\n    public playRoleNormalEffect(){\r\n        if (!DdzDriver.instance.skinDefine.useRole)\r\n            return;\r\n        \r\n        if (this.nCurRole == DdzRoleDefine.FLandord){\r\n            this.landlordSk.setAnimation(0, DdzRoleView.RoleAct.Normal, true);\r\n        }\r\n        else if(this.nCurRole == DdzRoleDefine.FFramer){\r\n            this.farmerSk.setAnimation(0, DdzRoleView.RoleAct.Normal, true);\r\n        }\r\n    }\r\n\r\n    public playRoleThinkEffect(){\r\n        if (!DdzDriver.instance.skinDefine.useRole)\r\n            return;\r\n        \r\n        if (this.nCurRole == DdzRoleDefine.FLandord){\r\n            this.landlordSk.setAnimation(0, DdzRoleView.RoleAct.Think, true);\r\n        }\r\n        else if(this.nCurRole == DdzRoleDefine.FFramer){\r\n            this.farmerSk.setAnimation(0, DdzRoleView.RoleAct.Think, true);\r\n        }\r\n    }\r\n\r\n    public playRoleSettleEffect(isWin: boolean){\r\n        if (!DdzDriver.instance.skinDefine.useRole)\r\n            return;\r\n        \r\n        let animName = isWin && DdzRoleView.RoleAct.Win || DdzRoleView.RoleAct.Lose;\r\n        if (this.nCurRole == DdzRoleDefine.FLandord){\r\n            this.landlordSk.setAnimation(0, animName, true);\r\n        }\r\n        else if(this.nCurRole == DdzRoleDefine.FFramer){\r\n            this.farmerSk.setAnimation(0, animName, true);\r\n        }\r\n    }\r\n\r\n    public playRoleOutPokersEffect(isBomb: boolean){\r\n        if (!DdzDriver.instance.skinDefine.useRole)\r\n            return;\r\n        \r\n        if (this.nCurRole == DdzRoleDefine.FLandord){\r\n            this.landlordSk.setAnimation(0, DdzRoleView.RoleAct.Play, false);\r\n            if (isBomb){\r\n                this.landlordSk.addAnimation(0, DdzRoleView.RoleAct.Win, false, 1);\r\n                this.landlordSk.addAnimation(0, DdzRoleView.RoleAct.Normal, true, 1);\r\n            }\r\n            else{\r\n                this.landlordSk.addAnimation(0, DdzRoleView.RoleAct.Normal, true, 1);\r\n            }\r\n        }\r\n        else if(this.nCurRole == DdzRoleDefine.FFramer){\r\n            this.farmerSk.setAnimation(0, DdzRoleView.RoleAct.Play, false);\r\n            if (isBomb){\r\n                this.farmerSk.addAnimation(0, DdzRoleView.RoleAct.Win, false, 1);\r\n                this.farmerSk.addAnimation(0, DdzRoleView.RoleAct.Normal, true, 1);\r\n            }\r\n            else{\r\n                this.farmerSk.addAnimation(0, DdzRoleView.RoleAct.Normal, true, 1);\r\n            }\r\n        }\r\n    }\r\n}"]}