{"version":3,"sources":["assets\\hall\\scripts\\logic\\hall\\ui\\Activity\\DailyRecharge\\AwardBoxItem.ts"],"names":[],"mappings":";;;;;AAAA,sDAAsD;;;;;;;;;;;;;;;;;;;;;AAEtD,+DAAkD;AAG5C,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAA0C,gCAAY;IAAtD;QAAA,qEAiHC;QA9GG,sBAAgB,GAAgB,EAAE,CAAA;QAGlC,eAAS,GAAY,IAAI,CAAA;QAEzB,eAAS,GAAa,IAAI,CAAA;QAC1B,UAAI,GAAQ,IAAI,CAAA;QAEhB,aAAO,GAAY,KAAK,CAAA;QAExB,wBAAkB,GAAY,KAAK,CAAA;QAEnC,kBAAY,GAAa,KAAK,CAAA;;IAkGlC,CAAC;IAhGG,wBAAwB;IAExB;;;;OAIG;IACH,mCAAY,GAAZ,UAAa,IAAI,EAAE,OAAO,EAAC,YAAY,EAAC,kBAAkB;QACtD,IAAI,CAAC,IAAI,EAAE;YACP,IAAI,CAAC,WAAW,CAAC,+BAAQ,CAAC,MAAM,CAAC,CAAA;YACjC,OAAM;SACT;QACD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAA;QAChB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAA;QACtB,IAAI,CAAC,YAAY,GAAG,YAAY,CAAA;QAChC,IAAI,CAAC,kBAAkB,GAAG,kBAAkB,CAAA;QAE5C,IAAI,QAAQ,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,EAAC,YAAY,CAAC,CAAA;QACxD,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAA;IAC9B,CAAC;IACD,kCAAW,GAAX,UAAY,IAAI;QACZ,IAAI,CAAC,IAAI,EAAE;YACP,OAAM;SACT;QACD,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,GAAC,GAAG,CAAA;IACzC,CAAC;IACD,kCAAW,GAAX,UAAY,KAAe;QACvB,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAA;QAC3C,QAAQ,KAAK,EAAE;YACX,KAAK,+BAAQ,CAAC,MAAM;gBAChB,IAAI,GAAG,EAAE;oBACL,GAAG,CAAC,YAAY,GAAG,KAAK,CAAA;iBAC3B;gBACD,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAA;gBAC3C,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAA;gBAC5C,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAA;gBAC5C,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,KAAK,CAAA;gBAC7B,MAAM;YACV,KAAK,+BAAQ,CAAC,aAAa;gBACvB,IAAI,GAAG,EAAE;oBACL,GAAG,CAAC,YAAY,GAAG,IAAI,CAAA;iBAC1B;gBACD,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAA;gBAC3C,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAA;gBAC5C,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAA;gBAC3C,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,KAAK,CAAA;gBAC7B,MAAM;YACV,KAAK,+BAAQ,CAAC,YAAY;gBACtB,IAAI,GAAG,EAAE;oBACL,GAAG,CAAC,YAAY,GAAG,IAAI,CAAA;iBAC1B;gBACD,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAA;gBAC5C,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAA;gBAC5C,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAA;gBAC5C,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,IAAI,CAAA;gBAC5B,MAAM;YACV,KAAK,+BAAQ,CAAC,UAAU;gBACpB,IAAI,GAAG,EAAE;oBACL,GAAG,CAAC,YAAY,GAAG,KAAK,CAAA;iBAC3B;gBACD,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAA;gBAC5C,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAA;gBAC3C,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAA;gBAC5C,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,KAAK,CAAA;gBAC7B,MAAM;YACV;gBACI,MAAM;SACb;IACL,CAAC;IACD;;;;OAIG;IACH,wCAAiB,GAAjB,UAAkB,IAAI,EAAC,YAAY;QAE/B,IAAG,CAAC,IAAI;YAAE,OAAO,+BAAQ,CAAC,MAAM,CAAA;QAChC,IAAG,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK;SACtB;YACI,OAAO,+BAAQ,CAAC,MAAM,CAAA;SACzB;aACI,IAAG,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,YAAY,EAAE,QAAQ;SAC9D;YACI,OAAO,+BAAQ,CAAC,YAAY,CAAA;SAC/B;aACI,IAAG,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,YAAY,EAAE,QAAQ;SAC7D;YACI,OAAO,+BAAQ,CAAC,aAAa,CAAA;SAChC;aACI,IAAG,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,EAAC,QAAQ;SAC3C;YACI,OAAO,+BAAQ,CAAC,UAAU,CAAA;SAC7B;IAEL,CAAC;IA5GD;QADC,QAAQ,CAAC,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;0DACY;IAGlC;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;mDACO;IAEzB;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;mDACO;IART,YAAY;QADhC,OAAO;OACa,YAAY,CAiHhC;IAAD,mBAAC;CAjHD,AAiHC,CAjHyC,EAAE,CAAC,SAAS,GAiHrD;kBAjHoB,YAAY","file":"","sourceRoot":"/","sourcesContent":["// import { BoxState } from \"./DailyRechargeGiftView\";\r\n\r\nimport { BoxState } from \"./WndDailyRechargeGift\";\r\n\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class AwardBoxItem extends cc.Component {\r\n\r\n    @property([cc.Sprite])\r\n    awardStateSprite: cc.Sprite[] = []\r\n\r\n    @property(cc.Node)\r\n    shinyNode: cc.Node = null\r\n    @property(cc.Label)\r\n    rateLabel: cc.Label = null\r\n    data: any = null\r\n\r\n    is_done: boolean = false\r\n\r\n    isYesterdayAchieve: boolean = false\r\n\r\n    is_todayData : boolean = false\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    /**\r\n     * \r\n     * @param data 当前宝箱数据\r\n     * @param is_done 昨日奖励是否领取完成\r\n     */\r\n    refreshState(data, is_done,is_todayData,isYesterdayAchieve) {\r\n        if (!data) {\r\n            this.setBoxState(BoxState.Normal)\r\n            return\r\n        }\r\n        this.data = data\r\n        this.is_done = is_done\r\n        this.is_todayData = is_todayData\r\n        this.isYesterdayAchieve = isYesterdayAchieve\r\n        \r\n        let boxState = this.getBoxStateByData(data,is_todayData)\r\n        this.setBoxState(boxState)\r\n    }\r\n    refreshRate(data) {\r\n        if (!data) {\r\n            return\r\n        }\r\n        this.rateLabel.string = data.rate+\"%\"\r\n    }\r\n    setBoxState(state: BoxState) {\r\n        let btn = this.node.getComponent(cc.Button)\r\n        switch (state) {\r\n            case BoxState.Normal:\r\n                if (btn) {\r\n                    btn.interactable = false\r\n                }\r\n                this.awardStateSprite[0].node.active = true\r\n                this.awardStateSprite[1].node.active = false\r\n                this.awardStateSprite[2].node.active = false\r\n                this.shinyNode.active = false\r\n                break;\r\n            case BoxState.TodayAchieved:\r\n                if (btn) {\r\n                    btn.interactable = true\r\n                }\r\n                this.awardStateSprite[0].node.active = true\r\n                this.awardStateSprite[1].node.active = false\r\n                this.awardStateSprite[2].node.active = true\r\n                this.shinyNode.active = false\r\n                break;\r\n            case BoxState.RealAchieved:\r\n                if (btn) {\r\n                    btn.interactable = true\r\n                }\r\n                this.awardStateSprite[0].node.active = false\r\n                this.awardStateSprite[1].node.active = false\r\n                this.awardStateSprite[2].node.active = false\r\n                this.shinyNode.active = true\r\n                break;\r\n            case BoxState.AlreadyGot:\r\n                if (btn) {\r\n                    btn.interactable = false\r\n                }\r\n                this.awardStateSprite[0].node.active = false\r\n                this.awardStateSprite[1].node.active = true\r\n                this.awardStateSprite[2].node.active = false\r\n                this.shinyNode.active = false\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    /**\r\n     * \r\n     * @param data 当前宝箱数据\r\n     * @param is_todayData 昨日奖励是否领取完成\r\n     */\r\n    getBoxStateByData(data,is_todayData)\r\n    {\r\n        if(!data) return BoxState.Normal\r\n        if(!data.is_ava) //未达成\r\n        {\r\n            return BoxState.Normal\r\n        }\r\n        else if(data.is_ava && !data.status && !is_todayData) //达成且未领取\r\n        {\r\n            return BoxState.RealAchieved\r\n        }\r\n        else if(data.is_ava && !data.status && is_todayData) //达成且未领取\r\n        {\r\n            return BoxState.TodayAchieved\r\n        }\r\n        else if(data.is_ava && data.status)//达成且已领取\r\n        {\r\n            return BoxState.AlreadyGot\r\n        }\r\n\r\n    }\r\n\r\n}\r\n"]}