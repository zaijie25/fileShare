{"version":3,"sources":["assets\\ermj\\Ermj\\scripts\\manager\\ErmjOutMjViewManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ErmjBasePool from \"../tool/ErmjBasePool\";\r\nimport ErmjMahjongOutView from \"../subView/mahjong/ErmjMahjongOutView\";\r\nimport ErmjPathHelper from \"../data/ErmjPathHelper\";\r\nimport ErmjGameConst from \"../data/ErmjGameConst\";\r\n\r\nexport default class ErmjOutMjViewManager{\r\n    private poolHelper: ErmjOutMjViewPool;\r\n    private inUsedOutMjList: ErmjMahjongOutView[] = [];\r\n    private inUsedFlowerMjList: ErmjMahjongOutView[] = [];\r\n    private inUsedBrightMjList: ErmjMahjongOutView[] = [];\r\n    private inUsedWinMjList: ErmjMahjongOutView[] = [];\r\n\r\n    constructor(private rootNode: cc.Node){\r\n        this.rootNode.active = false;\r\n        this.poolHelper = new ErmjOutMjViewPool(this.rootNode);\r\n    }\r\n\r\n    /** 获取用于亮牌麻将子 */\r\n    public getOneBrightMj(){\r\n        let item = this.poolHelper.getItem();\r\n        this.inUsedBrightMjList.push(item);\r\n        return item;\r\n    }\r\n\r\n    /** 获取用于花牌麻将子 */\r\n    public getOneFlowerMj(){\r\n        let item = this.poolHelper.getItem();\r\n        this.inUsedFlowerMjList.push(item);\r\n        return item;\r\n    }\r\n\r\n    /** 获取用于打出的麻将子 */\r\n    public getOneOutMj(){\r\n        let item = this.poolHelper.getItem();\r\n        this.inUsedOutMjList.push(item);\r\n        return item;\r\n    }\r\n\r\n    /** 获取用于胡牌的麻将子 */\r\n    public getOneWinMj(){\r\n        let item = this.poolHelper.getItem();\r\n        this.inUsedWinMjList.push(item);\r\n        return item;\r\n    }\r\n\r\n    /** 获取最后一次出牌麻将子 主要用于吃碰杠 */\r\n    public getLastOutMj(){\r\n        let count = this.inUsedOutMjList.length;\r\n        return this.inUsedOutMjList[count - 1];\r\n    }\r\n\r\n    /** 获取最近一次胡牌展览麻将子 */\r\n    public getLastWinMj(){\r\n        let count = this.inUsedWinMjList.length;\r\n        return this.inUsedWinMjList[count - 1];\r\n    }\r\n\r\n    /** 回收最后一次麻将子 */\r\n    public recycleLastOutMj(){\r\n        let mjItem = this.inUsedOutMjList.pop();\r\n        this.poolHelper.recycleItem(mjItem);\r\n    }\r\n\r\n    public recycleOneOutMj(item: ErmjMahjongOutView){\r\n        // 作单个回收需要处理下, 从inUsedOutMjList中删除\r\n        // 暂时用不上\r\n    } \r\n\r\n    /** 回收所有打出 补花出的麻将 */\r\n    public clear(){\r\n        this.poolHelper.recycleAll(this.inUsedOutMjList);\r\n        this.inUsedOutMjList = [];\r\n        this.poolHelper.recycleAll(this.inUsedFlowerMjList);\r\n        this.inUsedFlowerMjList = [];\r\n        this.poolHelper.recycleAll(this.inUsedBrightMjList);\r\n        this.inUsedBrightMjList = [];\r\n        this.poolHelper.recycleAll(this.inUsedWinMjList);\r\n        this.inUsedWinMjList = [];\r\n    }\r\n}\r\n\r\nclass ErmjOutMjViewPool extends ErmjBasePool<ErmjMahjongOutView>{\r\n    protected get preCount(){\r\n        return 30;\r\n    }\r\n\r\n    protected get everyCount(){\r\n        return 30;\r\n    }\r\n\r\n    protected createItem(){\r\n        let prefab = Global.ResourceManager.getBundleRes(ErmjGameConst.Gid, ErmjPathHelper.gamePrefabsPath + \"panel/mahjong/mahjongOutView\", cc.Prefab);\r\n        let node = <cc.Node>cc.instantiate(prefab);\r\n        let item = new ErmjMahjongOutView(node);\r\n        return item;\r\n    }\r\n\r\n    protected resetItem(item: ErmjMahjongOutView){\r\n        item.reset();\r\n        item.node.setParent(this.root);\r\n        item.active = false;\r\n    }\r\n}"]}