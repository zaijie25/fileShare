{"version":3,"sources":["assets\\hall\\scripts\\logic\\hall\\ui\\Activity\\Turntable\\TurnTable.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ViewBase from \"../../../../core/ui/ViewBase\";\r\nimport ZhuanpanModel from \"../../../../hallcommon/model/ZhuanpanModel\";\r\n\r\nexport default class TurnTable extends ViewBase {\r\n\r\n\r\n    private timer: NodeJS.Timeout\r\n\r\n    /**\r\n     * 每帧时间 (估值)\r\n     */\r\n    private frameTime = 16\r\n    /**\r\n     * 活动图集\r\n     */\r\n    private atlasPath = \"hall/texture/hall/activity/activity\"\r\n    /**\r\n     * 转盘面板图集\r\n     */\r\n    private turnTablePathCrow = \"hall/texture/hall/turnTableCrow/turnTableCrow\"\r\n\r\n    /**\r\n     * 中奖区域闪光节点\r\n     */\r\n    shineNode: sp.Skeleton = null;\r\n\r\n    /**\r\n     * X秒内连点抽奖按钮无效\r\n     */\r\n    clickTime = 0;\r\n    /**\r\n     * 最大速度\r\n     */\r\n    speedMax = 270;\r\n    /**\r\n     * 最小速度\r\n     */\r\n    speedMin = 10;\r\n    /**\r\n     * 加速度\r\n     */\r\n    speedAdd = 160;\r\n    /**\r\n     * 减速度\r\n     */\r\n    speedReduce = 140;\r\n    /**\r\n     * 当前速度\r\n     */\r\n    currSpeed = 0;\r\n    /**\r\n     * 速度状态 -1：减速 0：匀速 1：加速\r\n     */\r\n    speedState = 0;\r\n\r\n    /**\r\n    * 旋转根节点\r\n    */\r\n    turnNode: cc.Node = null;\r\n    /**\r\n     * 转盘转动结果(中第几个奖品，从0开始)\r\n     */\r\n    result = -1;\r\n    /**\r\n    * 转盘上的奖品图标集合\r\n    */\r\n    awardSpriteArr: cc.Sprite[] = [];\r\n    /**\r\n     * 转盘上的奖品文本集合\r\n     */\r\n    awardLabelArr: cc.Label[] = [];\r\n    /**\r\n     * 抽奖按钮特效\r\n     */\r\n    /**\r\n     * 当前面板\r\n     */\r\n    private curPanel = \"silver\"\r\n\r\n    /**\r\n    * 当前页签索引\r\n    */\r\n    curPanelIndex = 0;\r\n    /**\r\n     * 转盘合集\r\n     */\r\n    private panelNameArr = [\"silver\", \"gold\", \"masonry\"];\r\n\r\n    private model: ZhuanpanModel\r\n    /**\r\n     * 转盘外框集合\r\n     */\r\n    private backgroundSprite: cc.Sprite = null\r\n\r\n    /**\r\n     * 转盘外框图片配置 为空表示三种级别转盘公用一个外框\r\n     */\r\n    private backgroundSpriteCfg = [\"img_bywh\", \"img_hjwh\", \"img_zswh\"]\r\n\r\n    /**\r\n     * 转盘\r\n     */\r\n    private spritePanel: cc.Sprite = null\r\n\r\n    /**\r\n     * 转盘面板名称配置表\r\n     */\r\n    private spritePanelCfg = [\"img_byzp\", \"img_hjzp\", \"img_zszp\"]\r\n\r\n    /**\r\n       * 开始按钮动效\r\n       */\r\n    spineStart: sp.Skeleton = null;\r\n    /**\r\n     * 转盘指针\r\n     */\r\n    private arrowSprite: cc.Sprite = null\r\n\r\n    /**\r\n       * 指针图片配置 为空表示三种级别转盘共用一个外框\r\n       */\r\n    private arrowSpriteCfg = [\"img_bycj\", \"img_hjcj\", \"img_zscj\"]\r\n\r\n    /**\r\n     * 奖品图片配置\r\n     */\r\n    private awardSpriteCfg = [\"hd_13\", \"heijin\", \"jd200\", \"jd1000\", \"jintiao\", \"jd5888\", \"xs\"]\r\n\r\n    /**\r\n     * 金币奖品配置\r\n     */\r\n    private awardCoinCfg = [\"caijin-01\", \"caijin-02\", \"caijin-03\", \"caijin-04\", \"caijin-05\", \"caijin-06\", \"caijin-07\"]\r\n\r\n\r\n    /**\r\n   * 页签按钮集合\r\n   */\r\n    private buttonArr = [];\r\n\r\n    /**\r\n    * 底座\r\n    */\r\n    private img_bydzCfg = [\"img_bydz\", \"img_hjdz\", \"img_zsdz\"]\r\n    private img_bydzSprite: cc.Sprite = null;\r\n    /**\r\n     * 箭头\r\n     */\r\n    private img_byzjCfg = [\"img_byzj\", \"img_hjkzj\", \"img_zskzj\"]\r\n    private img_byzjSprite: cc.Sprite = null;\r\n    /**\r\n     * 黄金箭头\r\n     */\r\n    private img_zsjbNode: cc.Node = null;\r\n\r\n    /**\r\n     * 转盘上的动画合集\r\n     */\r\n    private turnTableSpinArr = [];\r\n    /**\r\n     * 各转盘转动一次需要多少积分节点集合\r\n     */\r\n    private turnTableLabelArr = []\r\n\r\n    isChoujiang: boolean = false;//是否正在抽奖\r\n\r\n    num: number = 8;//转盘中分区数量\r\n\r\n\r\n    rotateTime: number = 10;//转盘动画旋转次数\r\n\r\n\r\n    time: number = 5;//抽奖动画持续时间\r\n    private StartChoujiang(num, call) {\r\n        this.isChoujiang = true;\r\n        //随机确定奖品分区\r\n        let index = num;\r\n        //过场动作\r\n        let targetAngle = this.rotateTime * 360 + (-index * (360 / this.num));\r\n        this.turnNode.rotation %= 360\r\n        //过场动作+缓入缓出\r\n        let action = cc.rotateTo(this.time, -targetAngle).easing(cc.easeCubicActionInOut());\r\n        //添加动作结束回调，显示中奖信息\r\n        this.turnNode.runAction(cc.sequence(action, cc.callFunc(() => {\r\n            this.isChoujiang = false;\r\n            if (call) { call() }\r\n        })));\r\n    }\r\n    protected initView() {\r\n        this.clickTime = 0;\r\n        this.result = -1;\r\n\r\n        this.model = Global.ModelManager.getModel(\"ZhuanpanModel\");\r\n        this.model.on(ZhuanpanModel.StartDrawLucky, this, this.startDrawLucky)\r\n        this.model.on(ZhuanpanModel.RefreshPanelUI, this, this.refreshPanel)\r\n        this.backgroundSprite = this.getComponent(\"bgNode/panelBg\", cc.Sprite)\r\n        // this.backgroundSprite1 = this.getComponent(\"bgNode/panelBg1\", cc.Sprite)\r\n        this.spritePanel = this.getComponent(\"TurnNode/panelNode/spritepanel\", cc.Sprite)\r\n        // this.spritePanel1 = this.getComponent(\"TurnNode/panelNode/spritepanel1\", cc.Sprite)\r\n        this.arrowSprite = this.getComponent(\"arrowNode/drawBtn/sprite_label\", cc.Sprite)\r\n        this.turnNode = this.getChild(\"TurnNode\")\r\n        this.shineNode = this.getComponent(\"arrowNode/spine_choose\", sp.Skeleton);\r\n        this.img_bydzSprite = this.getComponent(\"img_bydz\", cc.Sprite)\r\n        this.img_byzjSprite = this.getComponent(\"bgNode/panelBg/img_byzj\", cc.Sprite)\r\n        this.img_zsjbNode = this.getChild(\"bgNode/panelBg/img_zsjb\")\r\n        //蓝色皮肤没有此节点动效\r\n        this.spineStart = this.getComponent(\"arrowNode/spine_qianghongbaoanniu\", sp.Skeleton);\r\n        this.addCommonClick(\"arrowNode/drawBtn\", this.onDrawBtnClicked, this)\r\n        for (var i = 0; i < 8; i++) {\r\n            this.awardLabelArr[i] = this.getComponent(cc.js.formatStr(\"TurnNode/reward/reward_%s/label\", (i + 1)), cc.Label)\r\n            this.awardSpriteArr[i] = this.getComponent(cc.js.formatStr(\"TurnNode/reward/reward_%s/sprite_icon\", (i + 1)), cc.Sprite)\r\n        }\r\n\r\n        for (var i = 0; i < 3; i++) {\r\n            this.turnTableSpinArr[i] = this.getChild(\"bgNode/zhuanpan_\" + i);\r\n\r\n            this.addCommonClick(cc.js.formatStr(\"TurnBtnGroup/%s\", this.panelNameArr[i]), this.onTurnTypeBtnClick, this)\r\n            var yeqianArr = [];\r\n            this.buttonArr[i] = yeqianArr;\r\n            var darkNode: cc.Node = this.getChild(cc.js.formatStr(\"TurnBtnGroup/%s/button_dark\", this.panelNameArr[i]))\r\n            yeqianArr[0] = darkNode;\r\n            var lightNode: cc.Node = this.getChild(cc.js.formatStr(\"TurnBtnGroup/%s/button_light\", this.panelNameArr[i]))\r\n            yeqianArr[1] = lightNode;\r\n\r\n            let laNode = this.getChild(cc.js.formatStr(\"TurnBtnGroup/%s/button_dark/layout/la\", this.panelNameArr[i]))\r\n            let laNode11 = this.getChild(cc.js.formatStr(\"TurnBtnGroup/%s/button_light/layout/la\", this.panelNameArr[i]))\r\n\r\n            this.turnTableLabelArr[i] = laNode;\r\n            this.turnTableLabelArr[i + 3] = laNode11;\r\n        }\r\n\r\n        this.turnNode.rotation = 0;\r\n\r\n        if (this.shineNode) {\r\n            this.shineNode.node.active = false;\r\n        }\r\n\r\n\r\n    }\r\n    onDrawBtnClicked() {\r\n        if (this.result >= 0) {\r\n            return;\r\n        }\r\n        if (this.clickTime > 0) {\r\n            return;\r\n        }\r\n        if (this.spineStart) {\r\n            this.spineStart.setAnimation(0, \"idle2\", false);\r\n        }\r\n        var haveJifen = 0;\r\n        var needJifen = 1;\r\n        var data = this.model.data;\r\n        if (data) {\r\n            haveJifen = data[\"coin\"];\r\n\r\n            var yeqianObj = data[this.curPanel];\r\n            needJifen = yeqianObj[\"coin\"];\r\n        }\r\n        if (haveJifen < needJifen) {\r\n            Global.UI.fastTip(\"积分不足\");\r\n            return;\r\n        }\r\n        this.clickTime = 1;\r\n        this.model.reqChoujiang(this.curPanelIndex + 1)\r\n    }\r\n\r\n    onTurnTypeBtnClick(target) {\r\n\r\n        if (this.result >= 0) {\r\n            //正在转动\r\n            return;\r\n        }\r\n        if (this.shineNode) {\r\n            this.shineNode.node.active = false;\r\n        }\r\n        if (this.curPanel != target.node.name) {\r\n            this.curPanel = target.node.name;\r\n            this.curPanelIndex = this.panelNameArr.indexOf(this.curPanel);\r\n            this.refreshPanel();\r\n        }\r\n    }\r\n    startDrawLucky(resultIndex: number) {\r\n        this.turnNode.rotation = this.turnNode.rotation % 360;\r\n        this.currSpeed = 0;\r\n        this.speedState = 1;\r\n        if (this.shineNode) {\r\n            this.shineNode.node.active = false;\r\n        }\r\n        this.result = resultIndex;\r\n        this.starTurn()\r\n    }\r\n\r\n    starTurn() {\r\n        // let self = this\r\n        // Global.Component.schedule(self.runTurnTable.bind(self),0)\r\n        // this.timer = setInterval(this.runTurnTable.bind(this), this.frameTime)\r\n        this.StartChoujiang(this.result, () => {\r\n            this.turnEnd();\r\n        })\r\n    }\r\n\r\n\r\n    runTurnTable() {\r\n        let dt = this.frameTime / 1000\r\n        if (this.clickTime > 0) {\r\n            this.clickTime -= dt;\r\n        }\r\n        if (this.result >= 0) {\r\n            var endRotation = 360 * 5 - this.result * 45;\r\n            var speedJiasu = this.speedAdd;\r\n            if (this.turnNode.rotation >= endRotation - 270) {\r\n                //减速\r\n                this.speedState = -1;\r\n                speedJiasu = this.speedReduce;\r\n            }\r\n            this.currSpeed += dt * speedJiasu * this.speedState;\r\n            if (this.speedState > 0 && this.currSpeed > this.speedMax) {\r\n                this.currSpeed = this.speedMax;\r\n            } else if (this.speedState < 0 && this.currSpeed < this.speedMin) {\r\n                this.currSpeed = this.speedMin;\r\n            }\r\n            this.turnNode.rotation += this.currSpeed * dt;\r\n\r\n            if (this.turnNode.rotation >= endRotation) {\r\n                this.turnNode.rotation = endRotation;\r\n                //结束\r\n                this.turnEnd();\r\n            }\r\n        }\r\n    }\r\n\r\n    private refreshPanel() {\r\n        let data = this.model.data\r\n        if (!data) {\r\n            //this.model.reqActivityCfg()\r\n            return\r\n        }\r\n        this.updateAward(data)\r\n        this.updateAwardPanel()\r\n        this.updateBtn()\r\n    }\r\n\r\n    updateAward(data: any) {\r\n        if (!data) {\r\n            return;\r\n        }\r\n        let coinIndex = 0\r\n        var yeqianObj = data[this.curPanel];\r\n        for (var i = 0; i < this.awardLabelArr.length; i++) {\r\n            var label: cc.Label = this.awardLabelArr[i];\r\n            var sprite: cc.Sprite = this.awardSpriteArr[i];\r\n\r\n            var awardObj = yeqianObj[\"award\"][i];\r\n            if (awardObj) {\r\n                var name = awardObj.name;\r\n                var type = awardObj.type;\r\n                if (type > 1) {\r\n                    label.string = \"\";\r\n                    sprite.node.y = 250;\r\n                    sprite.node.scale = 1.5\r\n                    Global.ResourceManager.loadAutoAtlas(sprite, this.atlasPath, this.awardSpriteCfg[type])\r\n                }\r\n                else {\r\n                    label.string = \"\" + name;\r\n                    if (type == 1) {\r\n                        sprite.node.y = 186;\r\n                        sprite.node.scale = 2;\r\n                        Global.ResourceManager.loadAutoAtlas(sprite, this.atlasPath, this.awardCoinCfg[coinIndex])\r\n                        coinIndex += 1\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                sprite.node.y = 186;\r\n                sprite.node.scale = 2;\r\n                label.string = \"\";\r\n                sprite.spriteFrame = null;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n       * 更新抽奖盘子\r\n       */\r\n    updateAwardPanel() {\r\n        let spriteBgName = this.backgroundSpriteCfg ? this.backgroundSpriteCfg[this.curPanelIndex] : \"\"\r\n        if (spriteBgName) {\r\n            Global.ResourceManager.loadAutoAtlas(this.backgroundSprite, this.turnTablePathCrow, spriteBgName)\r\n\r\n            // Global.ResourceManager.loadAutoAtlas(this.backgroundSprite1,this.turnTablePath,spriteBgName) \r\n        }\r\n\r\n        let panelName = this.spritePanelCfg ? this.spritePanelCfg[this.curPanelIndex] : \"\"\r\n\r\n        if (panelName) {\r\n            Global.ResourceManager.loadAutoAtlas(this.spritePanel, this.turnTablePathCrow, panelName)\r\n\r\n            // Global.ResourceManager.loadAutoAtlas(this.spritePanel1,this.turnTablePath,panelName) \r\n        }\r\n\r\n        let arrName = this.arrowSpriteCfg ? this.arrowSpriteCfg[this.curPanelIndex] : \"\"\r\n\r\n        if (arrName) {\r\n            Global.ResourceManager.loadAutoAtlas(this.arrowSprite, this.turnTablePathCrow, arrName)\r\n        }\r\n        let img_bydzName = this.img_bydzCfg ? this.img_bydzCfg[this.curPanelIndex] : \"\"\r\n\r\n        if (img_bydzName) {\r\n            Global.ResourceManager.loadAutoAtlas(this.img_bydzSprite, this.turnTablePathCrow, img_bydzName)\r\n        }\r\n        let img_byzjName = this.img_byzjCfg ? this.img_byzjCfg[this.curPanelIndex] : \"\"\r\n\r\n        if (img_byzjName) {\r\n            Global.ResourceManager.loadAutoAtlas(this.img_byzjSprite, this.turnTablePathCrow, img_byzjName)\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n    updateBtn() {\r\n        for (var i = 0; i < this.buttonArr.length; i++) {\r\n            var arr = this.buttonArr[i];\r\n            if (this.curPanelIndex == i) {\r\n                arr[0].active = false;\r\n                arr[1].active = true;\r\n            } else {\r\n                arr[0].active = true;\r\n                arr[1].active = false;\r\n            }\r\n        }\r\n        if (this.curPanelIndex == 2) {\r\n            this.img_zsjbNode.active = true;\r\n        } else {\r\n            this.img_zsjbNode.active = false;\r\n        }\r\n        this.turnTableSpinArr.forEach(element => {\r\n            element.active = false;\r\n        });\r\n        this.turnTableSpinArr[this.curPanelIndex].active = true\r\n        let data = this.model.data;\r\n        this.turnTableLabelArr.forEach((e, index) => {\r\n            if (index < 3) {\r\n                e.getComponent(cc.Label).string = data[this.panelNameArr[index]].coin\r\n                this.turnTableLabelArr[index + 3].getComponent(cc.Label).string = data[this.panelNameArr[index]].coin\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 转动结束\r\n     */\r\n    turnEnd() {\r\n        if (this.timer) {\r\n            clearTimeout(this.timer)\r\n        }\r\n        this.currSpeed = 0\r\n        // let self = this\r\n        // Global.Component.unschedule(self.runTurnTable.bind(self)) \r\n        if (this.shineNode) {\r\n            this.shineNode.node.active = true;\r\n        }\r\n        this.spineStart.setAnimation(0, \"idle\", true);\r\n        this.result = -1;\r\n        this.clickTime = 0;\r\n        this.refreshPanel();\r\n        Global.UI.show(\"WndRebateGet\", this.model.awardResult)\r\n    }\r\n\r\n\r\n\r\n\r\n    protected onSubViewShow() {\r\n        this.turnNode.rotation = 0;\r\n        this.clickTime = 0;\r\n        this.currSpeed = 0;\r\n        this.result = -1;\r\n        if (this.shineNode) {\r\n            this.shineNode.node.active = false;\r\n        }\r\n        this.refreshPanel()\r\n    }\r\n\r\n    protected onSubViewHide() {\r\n        if (this.timer) {\r\n            clearTimeout(this.timer)\r\n        }\r\n    }\r\n\r\n    onDispose() {\r\n        if (this.timer) {\r\n            clearTimeout(this.timer)\r\n        }\r\n        this.model.off(ZhuanpanModel.StartDrawLucky, this, this.startDrawLucky)\r\n        this.model.off(ZhuanpanModel.RefreshPanelUI, this, this.refreshPanel)\r\n\r\n    }\r\n\r\n}"]}