{"version":3,"sources":["assets\\hall\\scripts\\logic\\hall\\ui\\recharge\\CashView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ViewBase from \"../../../core/ui/ViewBase\";\r\nimport ExtractModel from \"../../../hallcommon/model/ExtractModel\";\r\nimport aliBandWin from \"../money/ui/extractCash/aliBandWin\";\r\nimport aliExtractCashWin from \"../money/ui/extractCash/aliExtractCashWin\";\r\nimport unionBandWin from \"../money/ui/extractCash/unionBandWin\";\r\nimport unionExtractCashWin from \"../money/ui/extractCash/unionExtractCashWin\";\r\n// import MoneyRecordBox from \"../money/ui/common/MoneyRecordBox\";\r\nimport { ExtractEvent } from \"../money/ui/extractCash/ExtractEvent\";\r\nimport CashListView from \"./CashListView\";\r\nimport overseasBankWin from \"../money/ui/extractCash/overseasBankWin\";\r\nimport overseasExtractCashWin from \"../money/ui/extractCash/overseasExtractCashWin\";\r\nimport WaitingView from \"../waiting/WaitingView\";\r\n\r\nexport default class CashView extends ViewBase {\r\n    private model : ExtractModel;\r\n    private curWin : number = 0;//0银行 1支付宝 2海外 3列表\r\n\r\n\r\n    private aliToggle:cc.Node;\r\n    private unionToggle:cc.Node;\r\n    private listToggle:cc.Node;\r\n    // private overseasToggle:cc.Node; //提现 海外 按钮\r\n\r\n    private aliBandWin:aliBandWin;\r\n    private aliExtractCashWin:aliExtractCashWin;\r\n    private unionBandWin:unionBandWin;\r\n    private unionExtractCashWin:unionExtractCashWin;\r\n    //private cashListView:CashListView;\r\n    protected curMoneyNumLabel: cc.Label = null;\r\n    private overseasBankWin:overseasBankWin;\r\n    private overseasExtractCashWin:overseasExtractCashWin;\r\n\r\n    private subViewParentNode:cc.Node\r\n\r\n    private waitingNode :cc.Node;\r\n    private subViewPath :any = {\r\n        \"aliBandWin\":\"hall/prefabs/ui/Recharge/subView/cash/aliBandWin\",\r\n        \"aliExtractCashWin\":\"hall/prefabs/ui/Recharge/subView/cash/aliExtractCashWin\",\r\n        \"unionBandWin\":\"hall/prefabs/ui/Recharge/subView/cash/unionBandWin\",\r\n        \"unionExtractCashWin\":\"hall/prefabs/ui/Recharge/subView/cash/unionExtractCashWin\",\r\n        \"overseasBankWin\":\"hall/prefabs/ui/Recharge/subView/cash/overseasBandWin\",\r\n        \"overseasExtractCashWin\":\"hall/prefabs/ui/Recharge/subView/cash/overseasExtractCashWin\"\r\n    }\r\n\r\n    private viewKeyTypeMap :any = {\r\n        \"aliBandWin\":aliBandWin,\r\n        \"aliExtractCashWin\":aliExtractCashWin,\r\n        \"unionBandWin\":unionBandWin,\r\n        \"unionExtractCashWin\":unionExtractCashWin,\r\n        \"overseasBankWin\":overseasBankWin,\r\n        \"overseasExtractCashWin\":overseasExtractCashWin\r\n    }\r\n\r\n\r\n\r\n    protected onSubViewShow()\r\n    {\r\n        super.onSubViewShow()\r\n        if(this.waitingNode)\r\n        {\r\n            this.waitingNode.active = true;\r\n        }\r\n        //Listener\r\n        this.model.reqGetBankInfo();\r\n        this.model.allPutList = null;\r\n        this.curWin = -1;\r\n        this.updateInfoNode();\r\n        this.model.reqGetAllPutList();\r\n    }\r\n    protected initView()\r\n    {\r\n        this.node.width = cc.Canvas.instance.node.width;\r\n        this.node.height = cc.Canvas.instance.node.height;\r\n        \r\n        this.subViewParentNode = this.getChild(\"InfoNode\")\r\n        //可用余额\r\n        this.model = <ExtractModel>Global.ModelManager.getModel(\"ExtractModel\");\r\n        Global.Event.on(GlobalEvent.PERSONALINFOUPDATE,this,this.updateCurMoney);\r\n        this.model.on(ExtractEvent.OnUpdateBankBindInfo,this,this.updateInfoNode);\r\n        //leftBtn\r\n        this.aliToggle = this.getChild(\"leftBtns/layout/aliBtn\");\r\n        this.unionToggle = this.getChild(\"leftBtns/layout/unionBtn\");\r\n        this.listToggle = this.getChild(\"leftBtns/layout/listBtn\");\r\n        // this.overseasToggle = this.getChild(\"leftBtns/layout/overseasBtn\"); //提现 海外 按钮\r\n        \r\n        this.aliToggle.on(\"click\",this.changeInfoNode,this);\r\n        this.unionToggle.on(\"click\",this.changeInfoNode,this);\r\n        this.listToggle.on(\"click\",this.changeInfoNode,this);\r\n        // this.overseasToggle.on(\"click\",this.changeInfoNode,this); //提现 海外 按钮 点击事件\r\n\r\n\r\n        this.curMoneyNumLabel = this.getComponent(\"InfoNode/tabBar/CurMoneyBox/curMoneyNumLabel\",cc.Label);\r\n\r\n\r\n        this.initSubViewClass(this.viewKeyTypeMap)\r\n        \r\n        this.InitScripts()\r\n        //view 内的loading\r\n        if(this.waitingNode == null|| this.waitingNode == undefined){\r\n            //view 内的loading\r\n            this.waitingNode = WaitingView.initWaitingView(this.node,cc.v2(138,0));\r\n        }\r\n        //infoNode\r\n        // this.aliBandWin = <aliBandWin>this.addView(\"aliBandWin\",this.getChild(\"InfoNode/aliBandWin\"),aliBandWin, false);\r\n        // this.aliExtractCashWin = <aliExtractCashWin>this.addView(\"aliExtractCashWin\",this.getChild(\"InfoNode/aliExtractCashWin\"),aliExtractCashWin, false);\r\n        // this.unionBandWin = <unionBandWin>this.addView(\"unionBandWin\",this.getChild(\"InfoNode/unionBandWin\"),unionBandWin, false);\r\n        // this.unionExtractCashWin = <unionExtractCashWin>this.addView(\"unionExtractCashWin\",this.getChild(\"InfoNode/unionExtractCashWin\"),unionExtractCashWin, false);\r\n        // //this.cashListView =  <CashListView>this.addView(\"CashListView\",this.getChild(\"InfoNode/payList\"),CashListView, false);\r\n\r\n        // //提现 海外\r\n        // this.overseasBankWin = <overseasBankWin>this.addView(\"overseasBankWin\",this.getChild(\"InfoNode/overseasBandWin\"),overseasBankWin,false);\r\n        // this.overseasExtractCashWin = <overseasExtractCashWin>this.addView(\"overseasExtractCashWin\",this.getChild(\"InfoNode/overseasExtractCashWin\"),overseasExtractCashWin,false);\r\n    }\r\n\r\n    async InitScripts() {\r\n        await this.initSubView(this.subViewPath,this.viewKeyTypeMap,this.subViewParentNode)\r\n    }\r\n\r\n    protected onDispose()\r\n    {\r\n        this.model.off(ExtractEvent.OnUpdateBankBindInfo,this,this.updateInfoNode);\r\n        Global.Event.off(GlobalEvent.PERSONALINFOUPDATE,this,this.updateCurMoney);\r\n        \r\n    }\r\n    protected onSubViewHide()\r\n    {\r\n        super.onSubViewHide()\r\n        //Listener\r\n    }\r\n\r\n        /** 更新当前可提现金额 */\r\n    protected updateCurMoney(){\r\n\r\n        if(!this.model.bankDatas){\r\n            return;\r\n        }\r\n        var playerMoney = Global.PlayerData.point - ((this.model.bankDatas.forzen_point || 0) * Global.Setting.glodRatio );\r\n        playerMoney = Math.max(0,playerMoney);\r\n        this.curMoneyNumLabel.string = Global.Toolkit.GetMoneyFormat(playerMoney);\r\n    }\r\n\r\n    setToggleChecked(targe:cc.Node,flag:boolean)\r\n    {\r\n        let check = targe.getChildByName(\"checkmark\")\r\n        let normal = targe.getChildByName(\"Background\")\r\n        if (check) {\r\n            check.active = flag\r\n        }\r\n        if (normal) {\r\n            normal.active = !flag\r\n        }\r\n        \r\n    }\r\n\r\n\r\n    showAliWin(){\r\n        var haveData = this.model.haveAli();\r\n        this.aliBandWin.subViewState = !haveData;\r\n        this.aliExtractCashWin.subViewState = haveData;\r\n        //this.cashListView.active = false;\r\n    }\r\n\r\n    showUnionWin(){\r\n        var haveData = this.model.haveUnion();\r\n        this.unionBandWin.subViewState = !haveData;\r\n        this.unionExtractCashWin.subViewState = haveData;\r\n        //this.cashListView.active = false;\r\n    }\r\n    // showListView(){\r\n    //     this.cashListView.active = true;\r\n    //     this.cashListView.onOpenRecharge(false)\r\n    // }\r\n    showOverseasWin(){\r\n        var havaData = this.model.haveOverseas();\r\n        this.overseasBankWin.subViewState = !havaData;\r\n        this.overseasExtractCashWin.subViewState = havaData;\r\n        //this.cashListView.active = false;\r\n    }\r\n    // showListView(){\r\n    //     this.cashListView.active = true;\r\n    //     this.cashListView.onOpenRecharge(false)\r\n    // }\r\n    closeAllWin(){\r\n        this.aliBandWin.subViewState = false;\r\n        this.aliExtractCashWin.subViewState = false;\r\n        this.unionBandWin.subViewState = false;\r\n        this.unionExtractCashWin.subViewState = false;\r\n        //this.cashListView.active = false;\r\n        this.aliToggle.active = false;\r\n        this.unionToggle.active = false;\r\n        // this.overseasToggle.active = false;\r\n        this.overseasBankWin.subViewState = false;\r\n        this.overseasExtractCashWin.subViewState = false;\r\n    }\r\n\r\n    updateInfoNode(){\r\n        if(this.waitingNode){\r\n            this.waitingNode.active = false;\r\n        }\r\n        this.updateCurMoney();\r\n        this.closeAllWin();\r\n        if(!this.model.bankDatas) return;\r\n        this.aliToggle.active = this.model.bankDatas.ali_status > 0;\r\n        this.unionToggle.active = this.model.bankDatas.bank_status > 0;\r\n        // this.overseasToggle.active = this.model.bankDatas.over_sea_bank_status > 0;\r\n        if(this.curWin == -1){\r\n            //重置默认显示\r\n            if(this.model.bankDatas.ali_status == 1){\r\n                this.curWin = 1;\r\n            }else if(this.model.bankDatas.bank_status == 1){\r\n                this.curWin = 0    \r\n            }else if(this.model.bankDatas.over_sea_bank_status == 1){\r\n                this.curWin = 2;    \r\n            }else{\r\n                this.curWin = 3; \r\n            }\r\n        }\r\n\r\n        if(this.curWin == 1 && this.model.bankDatas.ali_status){\r\n            this.showAliWin();\r\n            this.setToggleChecked(this.aliToggle,true)\r\n            this.setToggleChecked(this.unionToggle,false)\r\n            // this.setToggleChecked(this.overseasToggle,false)\r\n            this.setToggleChecked(this.listToggle,false)\r\n        }else if(this.curWin == 0 && this.model.bankDatas.bank_status){\r\n            this.showUnionWin();\r\n            this.setToggleChecked(this.aliToggle,false)\r\n            this.setToggleChecked(this.unionToggle,true)\r\n            // this.setToggleChecked(this.overseasToggle,false)\r\n            this.setToggleChecked(this.listToggle,false)\r\n        }else if(this.curWin == 2 && this.model.bankDatas.over_sea_bank_status){\r\n            this.showOverseasWin();\r\n            this.setToggleChecked(this.aliToggle,false)\r\n            this.setToggleChecked(this.unionToggle,false)\r\n            // this.setToggleChecked(this.overseasToggle,true)\r\n            this.setToggleChecked(this.listToggle,false)\r\n        }else{\r\n            // this.showListView();\r\n            this.setToggleChecked(this.aliToggle,false)\r\n            this.setToggleChecked(this.unionToggle,false)\r\n            // this.setToggleChecked(this.overseasToggle,false)\r\n            this.setToggleChecked(this.listToggle,true)\r\n        }\r\n    }\r\n\r\n    //提现界面切换\r\n    changeInfoNode( target : any ){\r\n        var curWin = 1;\r\n        if(target.node == this.aliToggle){\r\n            curWin = 1;\r\n        }else if(target.node == this.unionToggle){\r\n            curWin = 0;\r\n        }\r\n        // else if(target.node == this.overseasToggle){\r\n        //     curWin = 2;\r\n        // }\r\n        else if(target.node == this.listToggle){\r\n            curWin = 3;\r\n        }\r\n        if(curWin == this.curWin){\r\n            return;\r\n        }\r\n        Global.Audio.playBtnSound();\r\n        this.curWin = curWin;\r\n        this.updateInfoNode();\r\n    }\r\n\r\n}\r\n\r\n"]}