{"version":3,"sources":["assets\\bbwz\\Bbwz\\scripts\\panel\\BbwzGamePanel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import BbwzDriver from \"../BbwzDriver\";\r\nimport BbwzData from \"../data/BbwzData\";\r\nimport BbwzConstDefine, { BbwzRole, BbwzGameState } from \"../data/BbwzConstDefine\";\r\nimport BbwzPathHelper from \"../tool/BbwzPathHelper\";\r\nimport BbwzBigWinnerView from \"../subview/BbwzBigWinnerView\";\r\nimport BbwzStateView from \"../subview/BbwzStateView\";\r\nimport BbwzChipsManager from \"../manager/BbwzChipsManager\";\r\nimport BbwzMenuView from \"../subview/BbwzMenuView\";\r\nimport BbwzOnlinePlayerView from \"../subview/player/BbwzOnlinePlayerView\";\r\nimport BbwzSelfPlayerView from \"../subview/player/BbwzSelfPlayerView\";\r\nimport BbwzOtherPlayerView from \"../subview/player/BbwzOtherPlayerView\";\r\nimport BbwzSelectChipsView from \"../subview/BbwzSelectChipsView\";\r\nimport BbwzBetManager from \"../manager/BbwzBetManager\";\r\nimport BbwzGameEvent from \"../data/BbwzGameEvent\";\r\nimport BbwzBetAreaRootView from \"../subview/BbwzBetAreaRootView\";\r\nimport BbwzComparePokerView from \"../subview/poker/BbwzComparePokerView\";\r\nimport BbwzRewardAreaRootView from \"../subview/BbwzRewardAreaRootView\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\nconst taskEnable = false;\r\nconst betInterval = 0.1;\r\n\r\n// 游戏层 根节点组件\r\n@ccclass\r\nexport default class BbwzGamePanel extends cc.Component {\r\n    // 添加子View注册管理实例 提供统一的调度钩子\r\n    public viewSet: ViewSet;\r\n\r\n    public playerMap = {\r\n        [BbwzRole.Self]: null,\r\n        [BbwzRole.Wiser]: null,\r\n        [BbwzRole.Online]: null,\r\n        [BbwzRole.Richer1]: null,\r\n        [BbwzRole.Richer2]: null,\r\n        [BbwzRole.Richer3]: null,\r\n        [BbwzRole.Richer4]: null,\r\n        [BbwzRole.Richer5]: null\r\n    }\r\n\r\n    // 下注帧循环相关\r\n    public betEnable: boolean = false;\r\n    private betDtCount: number;\r\n\r\n    // 子view\r\n    public bigWinnerView: BbwzBigWinnerView;\r\n    public selectChipsView: BbwzSelectChipsView;\r\n    public stateView: BbwzStateView;\r\n    public betAreaRootView: BbwzBetAreaRootView;\r\n    public compareRootView: BbwzComparePokerView;\r\n    public rewardAreaView: BbwzRewardAreaRootView;\r\n\r\n    public headTipsManager: HeadTipsManager;\r\n    public taskManager: TaskManager;\r\n\r\n    onLoad() {\r\n        this.viewSet = new ViewSet();\r\n        this.node.setContentSize(cc.Canvas.instance.node.getContentSize());\r\n        this.initView();\r\n    }\r\n\r\n    protected onEnable() {\r\n        Game.Event.on(BbwzGameEvent.onUserInfoTouch, this, this.onUserInfoShow);\r\n        Global.Event.on(GlobalEvent.TYPE_VIP_ENTER_GAME, this, this.vipEnterGame);\r\n    }\r\n\r\n    protected onDisable() {\r\n        Game.Event.off(BbwzGameEvent.onUserInfoTouch, this, this.onUserInfoShow);\r\n        Global.Event.off(GlobalEvent.TYPE_VIP_ENTER_GAME, this, this.vipEnterGame);\r\n    }\r\n\r\n    private vipEnterGame(msg) {\r\n        if (msg.data._gid == BbwzConstDefine.GAME_ID && msg.data._glv === Game.Control.curLv){\r\n            Global.Event.event(GlobalEvent.VIPADMISSION, msg.data);\r\n        }\r\n    }\r\n\r\n\r\n    protected initView() {\r\n        this.initFloatView();\r\n        this.initTopView();\r\n        this.initBottomView();\r\n        this.initCenterView();\r\n\r\n        this.initManager();\r\n\r\n        this.initMenuView();\r\n\r\n        this.initHeadTipsManager();\r\n        this.initTaskManager();\r\n\r\n        BbwzConstDefine.addCommonClick(this.node, \"topNode/button_history\", this.historyBtnFunc, this);\r\n\r\n        let paomadengNode: cc.Node = cc.find(\"topNode/paomadeng\", this.node);\r\n        let paomadengMask: cc.Node = cc.find(\"MsgBox\", paomadengNode);\r\n        Global.UIHelper.addPaoMaDengComp(paomadengMask, false, paomadengNode);\r\n        Global.UIHelper.addWifiComp(cc.find(\"wifi\", this.node), 2);\r\n\r\n        Global.UIHelper.addAdmissionComp(cc.find(\"topNode/admissionBox\", this.node));\r\n\r\n        BbwzConstDefine.addCommonClick(this.node, \"button_test\", () => {\r\n            Game.Event.event(Game.EVENT_CALL_RECONNECT);\r\n        }, this);\r\n\r\n    }\r\n\r\n    /**\r\n     *头像附加脚本\r\n     */\r\n\r\n    private initPlayers() {\r\n        let centerNode = cc.find(\"centerNode\", this.node);\r\n        let onlinePlayer = new BbwzOnlinePlayerView(cc.find(\"onlinePlayer\", centerNode), BbwzRole.Online);\r\n        onlinePlayer.active = true;\r\n        this.playerMap[BbwzRole.Online] = onlinePlayer;\r\n\r\n        let selfPlayer = new BbwzSelfPlayerView(cc.find(\"head/selfHead\", centerNode), BbwzRole.Self);\r\n        selfPlayer.active = true;\r\n        this.playerMap[BbwzRole.Self] = selfPlayer;\r\n\r\n        let wisePlayer = new BbwzOtherPlayerView(cc.find(\"head/headNode_0\", centerNode), BbwzRole.Wiser);\r\n        wisePlayer.active = false;\r\n        this.playerMap[BbwzRole.Wiser] = wisePlayer;\r\n\r\n        for (let i = 1; i <= 5; i++) {\r\n            let node = cc.find(\"head/headNode_\" + i, centerNode);\r\n            let chair = BbwzRole.Richer1 + i - 1;\r\n            let player = new BbwzOtherPlayerView(node, chair);\r\n            player.active = false;\r\n            this.playerMap[chair] = player;\r\n        }\r\n    }\r\n\r\n    private initFloatView() {\r\n        let floatNode = cc.find('floatNode', this.node);\r\n        // 牌局状态\r\n        let statePrefab = Global.ResourceManager.getBundleRes(BbwzConstDefine.GAME_ID, BbwzPathHelper.gamePrefabsPath + \"panel/subView/stateView\", cc.Prefab);\r\n        let stateNode = <cc.Node>cc.instantiate(statePrefab);\r\n        stateNode.setParent(floatNode);\r\n        stateNode.setPosition(cc.Vec2.ZERO);\r\n        this.stateView = new BbwzStateView(stateNode);\r\n        this.stateView.active = false;\r\n        this.registView(BbwzConstDefine.ViewState, this.stateView);\r\n\r\n        // 大赢家\r\n        let bigWinnerPrefab = Global.ResourceManager.getBundleRes(BbwzConstDefine.GAME_ID, BbwzPathHelper.gamePrefabsPath + \"panel/subView/bigWinner\", cc.Prefab);\r\n        let bigWinnerNode = <cc.Node>cc.instantiate(bigWinnerPrefab);\r\n        bigWinnerNode.setParent(floatNode);\r\n        bigWinnerNode.setPosition(cc.Vec2.ZERO);\r\n        this.bigWinnerView = new BbwzBigWinnerView(bigWinnerNode);\r\n        this.bigWinnerView.active = false;\r\n        this.registView(BbwzConstDefine.ViewBigWinner, this.bigWinnerView);\r\n\r\n    }\r\n\r\n    private initTopView() {\r\n        let topNode = cc.find(\"topNode\", this.node);\r\n        // 荷官位置\r\n        let dealerNode = cc.find(\"dealerNode\", topNode);\r\n        BbwzData.instance.playerChipsFlyPos[BbwzRole.Dealer] = topNode.convertToWorldSpaceAR(dealerNode.position);\r\n\r\n        // 比牌面板\r\n        let compareRootPrefab = Global.ResourceManager.getBundleRes(BbwzConstDefine.GAME_ID, BbwzPathHelper.gamePrefabsPath + \"panel/subView/comparePoker\", cc.Prefab);\r\n        let compareRootNode = <cc.Node>cc.instantiate(compareRootPrefab);\r\n        compareRootNode.setParent(topNode);\r\n        compareRootNode.setPosition(cc.Vec2.ZERO);\r\n        this.compareRootView = new BbwzComparePokerView(compareRootNode);\r\n        this.compareRootView.active = false;\r\n        this.registView(BbwzConstDefine.ViewComparePoker, this.compareRootView);\r\n    }\r\n\r\n    private initBottomView() {\r\n        let bottomNode = cc.find(\"bottomNode\", this.node);\r\n\r\n        // 下注区域\r\n        let betAreaPrefab = Global.ResourceManager.getBundleRes(BbwzConstDefine.GAME_ID, BbwzPathHelper.gamePrefabsPath + \"panel/subView/betArea\", cc.Prefab);\r\n        let betAreaRoot = <cc.Node>cc.instantiate(betAreaPrefab);\r\n        betAreaRoot.setParent(bottomNode);\r\n        betAreaRoot.setPosition(cc.Vec2.ZERO);\r\n        this.betAreaRootView = new BbwzBetAreaRootView(betAreaRoot);\r\n        this.betAreaRootView.active = true;\r\n        this.registView(BbwzConstDefine.ViewBetAreaRoot, this.betAreaRootView);\r\n    }\r\n\r\n    private initCenterView() {\r\n        let centerNode = cc.find(\"centerNode\", this.node);\r\n        this.initPlayers();\r\n\r\n\r\n        // 结算区域\r\n        let rewardAreaPrefab = Global.ResourceManager.getBundleRes(BbwzConstDefine.GAME_ID, BbwzPathHelper.gamePrefabsPath + \"panel/subView/rewardArea\", cc.Prefab);\r\n        let rewardAreaRoot = <cc.Node>cc.instantiate(rewardAreaPrefab);\r\n        rewardAreaRoot.setParent(centerNode);\r\n        rewardAreaRoot.setPosition(cc.Vec2.ZERO);\r\n        this.rewardAreaView = new BbwzRewardAreaRootView(rewardAreaRoot);\r\n        this.rewardAreaView.active = true;\r\n        this.registView(BbwzConstDefine.ViewRewardAreaRoot, this.rewardAreaView);\r\n\r\n        // 底部筹码栏\r\n        let chipsPrefab = Global.ResourceManager.getBundleRes(BbwzConstDefine.GAME_ID, BbwzPathHelper.gamePrefabsPath + \"panel/subView/selectChipsNode\", cc.Prefab);\r\n        let chipsNode = <cc.Node>cc.instantiate(chipsPrefab);\r\n        chipsNode.setParent(centerNode);\r\n        chipsNode.setPosition(cc.Vec2.ZERO);\r\n        this.selectChipsView = new BbwzSelectChipsView(chipsNode);\r\n        this.selectChipsView.active = true;\r\n        this.registView(BbwzConstDefine.ViewSelectChip, this.selectChipsView);\r\n    }\r\n\r\n    private initHeadTipsManager(){\r\n        this.headTipsManager = new HeadTipsManager();\r\n        this.headTipsManager.init(cc.find('floatNode', this.node), cc.find('floatNode', this.node), true);\r\n    }\r\n\r\n    private initTaskManager(){\r\n        this.taskManager = new TaskManager();\r\n        this.taskManager.init(cc.find('taskRoot', this.node), BbwzConstDefine.GAME_ID, -1);\r\n        this.taskManager.reqGetGameTaskList();\r\n    }\r\n\r\n    /**\r\n     * 桌面上的小筹码\r\n     */\r\n    private initManager() {\r\n        let rootNode = cc.find(\"centerNode/chips\", this.node);\r\n        BbwzDriver.instance.chipManager = new BbwzChipsManager(rootNode);\r\n    }\r\n\r\n    private initMenuView() {\r\n        let node = cc.find(\"menuNode\", this.node);\r\n        Global.Toolkit.adjustIphoneX([node]);\r\n        let menuView = new BbwzMenuView(node);\r\n        menuView.active = true;\r\n        this.registView(BbwzConstDefine.ViewMenu, menuView);\r\n    }\r\n\r\n    protected onDestroy(){\r\n        this.taskManager.onDispose();\r\n    }\r\n\r\n    /**\r\n     * 历史记录 按钮\r\n     */\r\n    private historyBtnFunc() {\r\n        BbwzConstDefine.playBtnSound();\r\n        BbwzDriver.instance.historyPop.node.active = true;\r\n    }\r\n\r\n    protected update(dt: number) {\r\n        if (!this.betEnable || !BbwzDriver.instance.inGame)\r\n            return;\r\n\r\n        this.betDtCount += dt;\r\n        if (this.betDtCount < betInterval)\r\n            return;\r\n\r\n        this.betDtCount = 0;\r\n        let map = BbwzBetManager.getAllPlayerQueue();\r\n        let bChip = false;\r\n        for (let key in map) {\r\n            let playerSeat = Number(key);\r\n            if (playerSeat == BbwzRole.Self) {\r\n                const count = BbwzBetManager.getSendCount(BbwzBetManager.getOneRoleBetQueueLength(playerSeat));       // 计算一次飞几个 可能为0不飞\r\n                if (count > 0) {\r\n                    for (let i = 0; i < count; i++) {\r\n                        let data = BbwzBetManager.shiftOneRoleBetQueue(playerSeat);\r\n                        if (!data)\r\n                            continue;\r\n                        //飞筹码\r\n                        let areaIndex: number = BbwzConstDefine.BET_AREA_NAME.indexOf(data.tableType);\r\n                        BbwzDriver.instance.chipManager.flyChipAnim(playerSeat, areaIndex, data.betNum);\r\n                    }\r\n                    // 播放下注音效\r\n                    Global.Audio.playBundleSound(BbwzConstDefine.GAME_ID, BbwzConstDefine.SOUND_BET_BUTTON, true);\r\n                }\r\n            }\r\n            else {\r\n                const count = BbwzBetManager.getSendCount(BbwzBetManager.getOneRoleBetQueueLength(playerSeat));       //一次飞几个\r\n                if (count > 0) {\r\n                    bChip = true;\r\n                    for (let i = 0; i < count; i++) {\r\n                        let data = BbwzBetManager.shiftOneRoleBetQueue(playerSeat);\r\n                        if (!data)\r\n                            continue;\r\n                        //智多星效果\r\n                        if (playerSeat == BbwzRole.Wiser) {\r\n                            this.showWiserStar(true, [data.tableType]);\r\n                        }\r\n                        //飞筹码\r\n                        let areaIndex: number = BbwzConstDefine.BET_AREA_NAME.indexOf(data.tableType);\r\n                        BbwzDriver.instance.chipManager.flyChipAnim(playerSeat, areaIndex, data.betNum);\r\n                    }\r\n                    if (playerSeat == BbwzRole.Online) {\r\n                        //在线玩家下注\r\n                        let olPlayer = this.getOnlinePlayer();\r\n                        olPlayer.playBetAnim(0.5);\r\n                    }\r\n                    else {\r\n                        //头像抖动\r\n                        let player = <BbwzOtherPlayerView>this.getPlayer(playerSeat);\r\n                        player.playBetAnim(0.1, 1);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (bChip)          // 所有其他人下注只播一次音效\r\n            Global.Audio.playBundleSound(BbwzConstDefine.GAME_ID, BbwzConstDefine.SOUND_BET, true);\r\n    }\r\n\r\n    private onUserInfoShow(seat: number, headworldPos: cc.Vec3) {\r\n        if (seat == BbwzRole.Self || seat == BbwzRole.Online)\r\n            return;\r\n        let data = BbwzData.instance.playerDataArr[seat];\r\n        if (data) {\r\n            this.headTipsManager.showHeadView(true, seat, headworldPos, data);\r\n        }\r\n    }\r\n\r\n    /************************* 业务逻辑 *************************/\r\n    // 玩家进场 \r\n    public onPlayerEnter(localSit: number, data: any) {\r\n        if (localSit == BbwzRole.Online)\r\n            return;\r\n        this.callPlayer(localSit, \"onSit\", data);\r\n    }\r\n\r\n    // 玩家离场\r\n    public onPlayerLeave(localSit: number) {\r\n        if (localSit == BbwzRole.Online)\r\n            return;\r\n        this.callPlayer(localSit, \"onLeave\");\r\n    }\r\n\r\n    /**\r\n     * 自己下注\r\n     * @param data 下注返回数据 {point: 637500, bets: [{k: \"mix\", v: 50000}, ...], my_bets: {mix: 50000}}\r\n     */\r\n    public onSelfBet(data: any) {\r\n        // 自己下注不推refresh\r\n        let player = <BbwzSelfPlayerView>this.getPlayer(BbwzRole.Self);\r\n        player.setGoldLbl(data.point);\r\n        //更新显示自己的下注\r\n        this.betAreaRootView.updateSelfBetLabel(BbwzData.instance.gameTableBetInfo);\r\n        //更新显示总下注\r\n        this.betAreaRootView.updateTotalBetLabel(BbwzData.instance.gameTableBetInfo);\r\n        //更新显示下注按钮\r\n        this.updateBetSelectButton();\r\n    }\r\n\r\n    // 刷新自己金币文本显示\r\n    public onSelfPointRefresh(point: number) {\r\n        let player = <BbwzSelfPlayerView>this.getPlayer(BbwzRole.Self);\r\n        player.setGoldLbl(point);\r\n    }\r\n\r\n    /**\r\n     * 其他人下注\r\n     * @param bets 下注数据 [{c: 10004, k: \"dragon\", v: 5000000}, {c: 10000, k: \"mix\", v: 1000000}]\r\n     */\r\n    public onPlayerBet(bets: any[]) {\r\n        let tmp = Global.Toolkit.getOutOrderArray(bets);\r\n        for (let index = 0; index < tmp.length; index++) {\r\n            const betData = tmp[index];\r\n            let chair = betData.c;\r\n            if (!this.getPlayer(chair)) {\r\n                chair = BbwzRole.Online;      //没有对应头像的就当成在线玩家\r\n            }\r\n            let betArea = betData.k;\r\n            let allBetNum = betData.v;\r\n            //过滤总筹码为一次次下注筹码\r\n            while (allBetNum > 0) {\r\n                let betIndex = BbwzData.instance.tryRight(allBetNum);\r\n                let curNum = BbwzData.instance.chipList[betIndex];\r\n                allBetNum -= curNum;\r\n                BbwzBetManager.addBetQueue(chair, betArea, curNum);\r\n            }\r\n\r\n            // 实时更新其他玩家金币（用于点击玩家头像弹出tips详情）\r\n            let player = BbwzData.instance.playerDataArr[chair];\r\n            if (player) {\r\n                player.point -= betData.v;\r\n                this.headTipsManager.updatePoint(chair, player.point);\r\n            }\r\n        }\r\n        //更新总下注显示\r\n        this.betAreaRootView.updateTotalBetLabel(BbwzData.instance.gameTableBetInfo);\r\n    }\r\n\r\n    // 更新显示在线玩家数量\r\n    public updateOnlinePlayer(count: number) {\r\n        // let player = <BbwzOnlinePlayerView>this.getPlayer(BbwzRole.Online);\r\n        // player.setCountLbl(true, count);\r\n    }\r\n\r\n    public dispatchCompareReward(isAnim: boolean, pokers: any) {\r\n        this.compareRootView.active = true;\r\n        this.compareRootView.doAllGroupPokerDispatch(isAnim, pokers);\r\n    }\r\n\r\n    public showCompareReward(group: string[], pokers: any, isAnim: boolean) {\r\n        this.compareRootView.active = true;\r\n        for (let i = 0; i < group.length; i++) {\r\n            this.compareRootView.doOneGroupPokersFlop(group[i], pokers, isAnim);\r\n        }\r\n    }\r\n\r\n    public dealCompareReward(group: string, isAnim: boolean) {\r\n        this.compareRootView.active = true;\r\n        for (let i = 0; i < group.length; i++) {\r\n            this.compareRootView.doOneGroupPokersFirstDeal(group[i], isAnim);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 结算飘分\r\n     * @param data { 0: {win: 9500000, bet_win: {dragon: 20000000}, total_win: 19500000}, 9999: ... }\r\n     */\r\n    public showPlayerRewardLbl(data: any) {\r\n        for (let key in this.playerMap) {\r\n            let seat = Number(key);\r\n            let obj = data[seat];\r\n            if (seat != BbwzRole.Online && obj) {\r\n                if (obj.bet_win && !Global.Toolkit.isEmptyObject(obj.bet_win))      // debug 没有下注也飘0分 判断是否下注处理\r\n                    this.callPlayer(seat, \"setReward\", obj.win);\r\n            }\r\n        }\r\n    }\r\n\r\n    // 更新底部下注筹码和续压状态\r\n    public updateBetSelectButton() {\r\n        if (BbwzData.instance.isBetEnable()) {\r\n            let point = BbwzData.getMyGold();\r\n            let left = BbwzData.instance.bet_max - BbwzData.instance.getMyTotalBet();\r\n            let min = BbwzData.instance.bet_min;\r\n            this.selectChipsView.checkBtnSelectActive(point, left, min);\r\n            this.selectChipsView.enableBetChipBtn();\r\n            this.selectChipsView.updateContinueBtn(BbwzData.instance.canContinueBet());\r\n        }\r\n        else {\r\n            this.selectChipsView.disableAllBetChipBtn();\r\n            this.selectChipsView.updateContinueBtn(false);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 智多星下注\r\n     * @param isAnim 是否播放飞行动画\r\n     * @param areaNameArr 下注区域数组, 支持多个区域, 一个就传[\"xxx\"]\r\n     */\r\n    public showWiserStar(isAnim: boolean, areaNameArr: string[] = []) {\r\n        areaNameArr.forEach(name => {\r\n            this.betAreaRootView.showStarBetEffect(isAnim, name, this.getWiserPlayer().getCenterWorldPos());\r\n        })\r\n    }\r\n\r\n    /**\r\n     * 清台，进入等待下一局的状态\r\n     */\r\n    public clearByRound() {\r\n        BbwzData.instance.gameState = BbwzGameState.Wait;\r\n        this.stateView.runState(BbwzData.instance.gameState, false);\r\n        BbwzDriver.instance.chipManager.clear();\r\n        BbwzBetManager.clearBetQueue();\r\n        this.betEnable = false;\r\n\r\n        this.callAllPlayers(\"clearByRound\");\r\n        this.viewSet.callAll(\"clearByRound\");        // 调用所有注册子view的clearByGame\r\n    }\r\n\r\n    /**\r\n     * 清场 退出当前房间\r\n     */\r\n    public clearByGame() {\r\n        BbwzData.instance.clearHistory();\r\n\r\n        this.callAllPlayers(\"clearByGame\");\r\n        this.viewSet.callAll(\"clearByGame\");       // 调用所有注册子view的clearByRound\r\n    }\r\n\r\n    /************************* 通用接口 *************************/\r\n    public registView(key: string, view: any) {\r\n        this.viewSet.registView(key, view);\r\n    }\r\n\r\n    public getView<T>(key: string): T {\r\n        return this.viewSet.getViewEx<T>(key);\r\n    }\r\n\r\n    public getPlayer<T>(chair: number): T {\r\n        let player = this.playerMap[chair];\r\n        if (!player) {\r\n            Logger.error(\"座位异常, 找不到指定玩家\", chair);\r\n            return null;\r\n        }\r\n        return player;\r\n    }\r\n\r\n    public callPlayer(chair: number, func: string, ...args) {\r\n        let player = this.getPlayer(chair);\r\n        if (player == null) {\r\n            Logger.error(\"找不到player!!!\", chair);\r\n            return;\r\n        }\r\n        if (player[func] && player[func].apply) {\r\n            player[func].apply(player, args);\r\n        }\r\n    }\r\n\r\n    public callAllPlayers(func: string, ...args) {\r\n        for (let key in this.playerMap) {\r\n            this.callPlayer(Number(key), func, args);\r\n        }\r\n    }\r\n\r\n    public getSelfPlayer(): BbwzSelfPlayerView {\r\n        return <BbwzSelfPlayerView>this.getPlayer(BbwzRole.Self);\r\n    }\r\n\r\n    public getOnlinePlayer(): BbwzOnlinePlayerView {\r\n        return <BbwzOnlinePlayerView>this.getPlayer(BbwzRole.Online);\r\n    }\r\n\r\n    public getWiserPlayer(): BbwzOtherPlayerView {\r\n        return <BbwzOtherPlayerView>this.getPlayer(BbwzRole.Wiser);\r\n    }\r\n\r\n    public getRicherPlayers(): BbwzOtherPlayerView[] {\r\n        let arr: BbwzOtherPlayerView[] = [];\r\n        for (let key in this.playerMap) {\r\n            if (this.playerMap[key] && Number(key) != BbwzRole.Self && Number(key) != BbwzRole.Online && Number(key) != BbwzRole.Wiser)\r\n                arr.push(this.playerMap[key]);\r\n        }\r\n        return arr;\r\n    }\r\n}"]}