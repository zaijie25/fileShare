{"version":3,"sources":["assets\\hall\\scripts\\logic\\core\\component\\IntoHallAnimComp.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\n\r\n// Learn TypeScript:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n/**进入子游戏时场景过渡动画组件 */\r\n@ccclass\r\nexport default class IntoHallAnimComp extends cc.Component {\r\n    \r\n    callBackFunc:any;\r\n    callBackTarget:any;\r\n\r\n    alphaNode: cc.Node;\r\n\r\n    bottomNodeArr:cc.Node[];\r\n    bottomNodeYArr:number[] = [];\r\n\r\n    topNodeArr:cc.Node[];\r\n    topNodeYArr:number[] = [];\r\n    \r\n    leftNodeArr:cc.Node[];\r\n    leftNodeXArr:number[] = [];\r\n    \r\n    rightNodeArr:cc.Node[];\r\n    rightNodeXArr:number[] = [];\r\n\r\n    public init(){\r\n        if(this.alphaNode == null || !this.alphaNode.isValid)\r\n            return;\r\n        this.alphaNode.opacity = 1;\r\n\r\n        if(!this.bottomNodeArr){\r\n            this.bottomNodeArr = [];\r\n        }\r\n        for(let i = 0; i < this.bottomNodeArr.length; i++){\r\n            let node = this.bottomNodeArr[i];\r\n            this.bottomNodeYArr[i] = node.y;\r\n            node.y -= 100;\r\n        }\r\n\r\n        if(!this.topNodeArr){\r\n            this.topNodeArr = [];\r\n        }\r\n        for(let i = 0; i < this.topNodeArr.length; i++){\r\n            let node = this.topNodeArr[i];\r\n            this.topNodeYArr[i] = node.y;\r\n            node.y += 200;\r\n        }\r\n        \r\n        if(!this.leftNodeArr){\r\n            this.leftNodeArr = [];\r\n        }\r\n        for(let i = 0; i < this.leftNodeArr.length; i++){\r\n            let node = this.leftNodeArr[i];\r\n            this.leftNodeXArr[i] = node.x;\r\n            node.x -= 200;\r\n        }\r\n        \r\n        if(!this.rightNodeArr){\r\n            this.rightNodeArr = [];\r\n        }\r\n        for(let i = 0; i < this.rightNodeArr.length; i++){\r\n            let node = this.rightNodeArr[i];\r\n            this.rightNodeXArr[i] = node.x;\r\n            node.x += 400;\r\n        }\r\n    }\r\n\r\n    //开始动画\r\n    public startAnimation(){\r\n        this.nodesAnimation();\r\n        this.danru();\r\n    }\r\n\r\n    //淡入\r\n    protected danru(){\r\n        if(this.alphaNode){\r\n            let ac1 = cc.delayTime(0.5);\r\n            let ac2 = cc.fadeIn(0.5);\r\n            let af = cc.callFunc(()=>{\r\n                if(this.callBackFunc){\r\n                    this.callBackFunc.call(this.callBackTarget);\r\n                }\r\n            });\r\n            this.alphaNode.runAction(cc.sequence(ac1, ac2, af));\r\n        }\r\n    }\r\n\r\n    //游戏内节点动画\r\n    protected nodesAnimation(time: number = 0.8){\r\n        if (time < 0.2){\r\n            time = 0.2;     // 防错\r\n        }\r\n        let d = 0;\r\n        var delayTime:number = d;\r\n        for(let i = 0; i < this.bottomNodeArr.length; i++){\r\n            let node = this.bottomNodeArr[i];\r\n            let x = node.x;\r\n            let y = this.bottomNodeYArr[i];\r\n            let tween = new cc.Tween(node);//Game.Tween.get(node);\r\n            tween.delay(delayTime).to(time-0.2, {position: new cc.Vec2(x, y)}, cc.easeBackOut()).start();\r\n            delayTime += 0.1;\r\n        }\r\n\r\n        delayTime = d;\r\n        for(let i = 0; i < this.topNodeArr.length; i++){\r\n            let node = this.topNodeArr[i];\r\n            let x = node.x;\r\n            let y = this.topNodeYArr[i];\r\n            let tween = new cc.Tween(node);\r\n            tween.delay(delayTime).to(time-0.4, {position: new cc.Vec2(x, y)}, cc.easeOut(8)).start();\r\n            delayTime += 0.1;\r\n        }\r\n        \r\n        delayTime = d;\r\n        for(let i = 0; i < this.leftNodeArr.length; i++){\r\n            let node = this.leftNodeArr[i];\r\n            let x = this.leftNodeXArr[i]\r\n            let y = node.y;\r\n            let tween = new cc.Tween(node);\r\n            tween.delay(delayTime).to(time-0.5, {position: new cc.Vec2(x, y)}, cc.easeBackOut()).start();\r\n            delayTime += 0.1;\r\n        }\r\n        \r\n        delayTime = d;\r\n        for(let i = 0; i < this.rightNodeArr.length; i++){\r\n            let node = this.rightNodeArr[i];\r\n            let x = this.rightNodeXArr[i]\r\n            let y = node.y;\r\n            let tween = new cc.Tween(node);\r\n            tween.delay(delayTime).to(time-0.3, {position: new cc.Vec2(x, y)}, cc.easeBackOut()).start();\r\n            delayTime += 0.02;\r\n        }\r\n    }\r\n}\r\n"]}