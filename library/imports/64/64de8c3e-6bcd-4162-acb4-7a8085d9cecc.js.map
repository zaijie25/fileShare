{"version":3,"sources":["assets\\hall\\scripts\\logic\\hall\\ui\\safe\\WndBuySafeUI.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import PoolBase from \"../../../core/tool/PoolBase\";\r\nimport WndBase from \"../../../core/ui/WndBase\";\r\nimport RechargeGiftModel from \"../../../hallcommon/model/RechargeGiftModel\";\r\nimport { NetAppface } from \"../../../core/net/hall/NetEvent\";\r\nexport default class WndBuySafeUI extends WndBase{\r\n    private  rechargeModel:RechargeGiftModel\r\n    private gmbxNode:cc.Node\r\n    private lqbxjNode:cc.Node\r\n    copyItem: any;\r\n    contentNode: any;\r\n    itemPool: GiftMoneyItemPool;\r\n    nodeList: any[] = [];\r\n    /**\r\n     * 当前页签\r\n     */\r\n    currYeqian:number = -1;\r\n    /**\r\n     * 页签节点集合\r\n     */\r\n    yeqianArr:cc.Node[] = [];\r\n    private  list = null;\r\n    protected onInit() {\r\n        this.name = \"WndBuySafeUI\";\r\n        this.layer = Global.UI.PopLayer;\r\n        this.resPath = \"hall/prefabs/ui/safe/BuySafeUI\";\r\n        this.rechargeModel = <RechargeGiftModel>Global.ModelManager.getModel(\"RechargeGiftModel\");\r\n    }\r\n\r\n    protected initView() {\r\n        this.rechargeModel.on(RechargeGiftModel.GetCfg, this, this.onGetConfig);\r\n        this.copyItem = this.getChild(\"scrollview/view/content/item\")\r\n        this.contentNode = this.getChild(\"scrollview/view/content\")\r\n        this.initItemPool();\r\n        this.addCommonClick('close', this.close, this)\r\n        this.addCommonClick('btn_gz', this.onRule, this)\r\n        this.updateUI();\r\n    }\r\n    //保险金\r\n    onGetConfig(data){\r\n        if(data == null) return\r\n        let arr = data.data\r\n        for (let index = 0; index < arr.length; index++) {\r\n            let cfg = arr[index];\r\n            if(cfg && cfg.atype == 19 )\r\n            {\r\n                this.rechargeModel.safeData = cfg.cfg;\r\n                this.updateUI();\r\n                break\r\n            }\r\n        }\r\n    }\r\n    updateUI(){\r\n        let yesterdayBet = this.getChild(\"centerNode/yesterdayBet\").getComponent(cc.Label);\r\n        let point = Number(this.rechargeModel.safeData.profit)*-1 // 显示时需要正负转换\r\n        yesterdayBet.string = Global.Toolkit.formatPointStr(point, true)\r\n        this.gmbxNode =  this.addCommonClick('centerNode/btn_gmbx/btn_gmbx', this.onBuySafe, this)\r\n        this.lqbxjNode = this.addCommonClick('centerNode/btn_lqbxj/btn_lqbxj', this.onReceiveSafe, this)\r\n        let btn_lqbxj_1 = this.getChild(\"centerNode/btn_lqbxj/btn_lqbxj_1\")\r\n        let btn_gmbx_1 = this.getChild(\"centerNode/btn_gmbx/btn_gmbx_1\")\r\n        if(this.rechargeModel.safeData.recive_point == 0){ //可以领取保险的金额\r\n            this.lqbxjNode.active = false;\r\n            btn_lqbxj_1.active = true;\r\n        }else{\r\n            this.lqbxjNode.active = true;\r\n            btn_lqbxj_1.active = false;\r\n        }\r\n        if(this.rechargeModel.safeData.premium != 0){ //是否购买了保险\r\n            this.gmbxNode.active = false;\r\n            btn_gmbx_1.active = true;\r\n        }else{\r\n            this.gmbxNode.active = true;\r\n            btn_gmbx_1.active = false;\r\n        }\r\n        this.list = this.rechargeModel.safeData.cfg.list;\r\n        for(var i = 0; i < 3; i++){\r\n            var yeqianNode = this.addCommonClick(\"topyeqian/yeqian_\" + i, this.yeqianBtnFunc, this);\r\n            this.yeqianArr[i * 2] = cc.find(\"noSelected\", yeqianNode);\r\n            this.yeqianArr[i * 2 + 1] = cc.find(\"selected\", yeqianNode);\r\n            if(this.list && this.list[i]){\r\n                let data = this.list[i];\r\n                let label =  cc.find(\"noSelected/num\", yeqianNode).getComponent(cc.Label);\r\n                label.string = (data.premium/Global.Setting.glodRatio).toString();\r\n                let slabel =  cc.find(\"selected/num\", yeqianNode).getComponent(cc.Label);\r\n                slabel.string = (data.premium/Global.Setting.glodRatio).toString();\r\n                yeqianNode.active = true\r\n            }else{\r\n                yeqianNode.active = false\r\n            }\r\n        }\r\n    }\r\n    yeqianBtnFunc(target){\r\n        var arr = target.node.name.split(\"_\");\r\n        var param = arr[arr.length - 1];\r\n        var yeqian = parseInt(param);\r\n        this.ChangeYeqian(yeqian);\r\n    }\r\n    UpdatBtn(){\r\n        for(var i = 0; i < 3; i++){\r\n            var bShow:boolean = (i == this.currYeqian);\r\n            var yeqianNode = this.yeqianArr[i * 2 + 1];\r\n            yeqianNode.active = bShow;\r\n            if(this.list[i] && bShow){\r\n                this.RefreshScrollView(this.list[i])\r\n            }\r\n        }\r\n    }\r\n    protected onOpen(args?: any[]) {\r\n        this.copyItem.active = false\r\n        this.ChangeYeqian(0);\r\n        if(this.list[0]){\r\n            this.RefreshScrollView(this.list[0])\r\n        }\r\n        this.rechargeModel.reqGetActivityCfg(false)\r\n    }\r\n    RefreshScrollView(data: any) {\r\n        this.recycle()\r\n        for (let j = 0; j < data.odds.length; j++) {\r\n            let node = this.itemPool.getItem();\r\n            this.nodeList.push(node);\r\n            node.active = true;\r\n            node.setParent(this.contentNode);\r\n            if(data.odds[j]){\r\n                node.getComponent(\"GiftMoneyItem\").InitSafe(data.odds[j],data.premium)\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 切换页签\r\n     * @param yeqian \r\n     */\r\n    ChangeYeqian(yeqian: number) {\r\n        if (this.currYeqian != yeqian) {\r\n            this.currYeqian = yeqian;\r\n            this.UpdatBtn();\r\n        }\r\n    }\r\n    onRule(){\r\n        Global.UI.show(\"WndSafeRuleUI\")\r\n    }\r\n    /**\r\n     * 购买保险\r\n     */\r\n    onBuySafe(){\r\n        Global.HallServer.send(NetAppface.mod, NetAppface.BuyInsurance, {premium:this.list[this.currYeqian].premium},(retObj) => {\r\n            Global.UI.fastTip(\"购买保险成功\");\r\n            this.rechargeModel.reqGetActivityCfg(false)\r\n            Global.HallServer.send(NetAppface.mod,NetAppface.GetUserPoint,{});\r\n        },(error) => {\r\n            Global.UI.fastTip(error._errstr);\r\n        },false);\r\n    }\r\n    /**\r\n     * 领取保险\r\n     */\r\n    onReceiveSafe(){\r\n        Global.HallServer.send(NetAppface.mod, NetAppface.ReciveInsurance, {},(retObj) => {\r\n            Global.UI.show(\"WndRebateGet\", retObj.recive_point,null,() => {\r\n            })\r\n            Global.HallServer.send(NetAppface.mod,NetAppface.GetUserPoint,{});\r\n            this.rechargeModel.reqGetActivityCfg(false)\r\n        },(error) => {\r\n            Global.UI.fastTip(error._errstr);\r\n        },false);\r\n    }\r\n    /**\r\n     * 界面关闭回调\r\n     */\r\n    protected onClose(){\r\n        this.currYeqian = -1\r\n    }\r\n    protected onDispose() {\r\n        this.currYeqian = -1\r\n        this.itemPool.resetPool()\r\n        this.nodeList = [];\r\n        this.rechargeModel.off(RechargeGiftModel.GetCfg, this, this.onGetConfig);\r\n    }\r\n    private initItemPool() {\r\n\r\n        this.itemPool = new GiftMoneyItemPool(this.copyItem);\r\n    }\r\n    public recycle() {\r\n        this.itemPool.recycleAll(this.nodeList);\r\n        this.nodeList = [];\r\n    }\r\n}\r\nclass GiftMoneyItemPool extends PoolBase {\r\n    constructor(private copyNode: cc.Node) {\r\n        super();\r\n    }\r\n\r\n    protected createItem() {\r\n        return cc.instantiate(this.copyNode);\r\n    }\r\n\r\n    protected resetItem(node: cc.Node) {\r\n        node.active = false;\r\n        node.setParent(null);\r\n    }\r\n}"]}