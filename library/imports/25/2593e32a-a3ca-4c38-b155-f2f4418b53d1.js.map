{"version":3,"sources":["assets\\hall\\scripts\\logic\\hall\\ui\\Spread\\WndMyGroup.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ViewBase from \"../../../core/ui/ViewBase\";\r\nimport PoolBase from \"../../../core/tool/PoolBase\";\r\nimport SpreadModel from \"../../../hallcommon/model/SpreadModel\";\r\nimport { NetAppface } from \"../../../core/net/hall/NetEvent\";\r\nimport WaitingView from \"../waiting/WaitingView\";\r\n\r\nexport default class WndMyGroup extends ViewBase {\r\n    copyItem: any;\r\n    contentNode: any;\r\n    SpreadModel: SpreadModel\r\n    itemPool: GroupItemPool;\r\n    nodeList: any[] = [];\r\n    /**直属玩家 */\r\n    DirDelegate: cc.Label\r\n    /**团队成员 */\r\n    GroupAmount: cc.Label\r\n    /**其他玩家 */\r\n    DelegateAmount: cc.Label\r\n    /**本日总业绩 */\r\n    TodayNew: cc.Label\r\n    /**新增其他玩家 */\r\n    DirectPlayer: cc.Label\r\n    TotalInfoLabel: cc.Label\r\n    PageLabel: cc.Label\r\n    editBox: cc.EditBox\r\n    LastPageBtn: cc.Node\r\n    NextPageBtn: cc.Node\r\n    cmmi_type;\r\n\r\n    page = 1\r\n    limit = 4\r\n    TotalPage = 0\r\n\r\n    private waitingNode :cc.Node;\r\n    protected initView() {\r\n        if(this.waitingNode == null|| this.waitingNode == undefined){\r\n            //view 内的loading\r\n            this.waitingNode = WaitingView.initWaitingView(this.node,cc.v2(0,0));\r\n        }\r\n        this.SpreadModel = <SpreadModel>Global.ModelManager.getModel(\"SpreadModel\");\r\n        this.LastPageBtn = this.getChild(\"View/BotBtn/LastPage\")\r\n        this.NextPageBtn = this.getChild(\"View/BotBtn/NextPage\")\r\n        this.LastPageBtn.on(\"click\", this.OnLastPageBtnClick, this);\r\n        this.NextPageBtn.on(\"click\", this.OnNextPagePageBtnClick, this);\r\n        this.addCommonClick(\"EditItem/SearchButton\", this.OnSearchBtnClick, this);\r\n        this.contentNode = this.getChild(\"View/scrollview/view/content\");\r\n        this.copyItem = this.getChild(\"View/scrollview/view/content/item\");\r\n        this.copyItem.active = false;\r\n        this.cmmi_type = this.SpreadModel.commiType\r\n        this.TodayNew = this.getChild(\"TopRight/TodayAdd/Count\").getComponent(cc.Label)\r\n\r\n        this.DirDelegate = this.getChild(\"TopLeft/DirectPlayer/Count\").getComponent(cc.Label)\r\n        // if (this.cmmi_type == 1) {\r\n        //     this.DirectPlayer = this.getChild(\"TopRight/DirectPlayer/Count\").getComponent(cc.Label)\r\n        // }\r\n        this.GroupAmount = this.getChild(\"TopLeft/GroupCountTitle/GroupCount\").getComponent(cc.Label)\r\n        this.DelegateAmount = this.getChild(\"TopLeft/OtherPlayer/Count\").getComponent(cc.Label)\r\n\r\n        this.TotalInfoLabel = this.getChild(\"View/BotBtn/TotalInfoLabel\").getComponent(cc.Label)\r\n        this.PageLabel = this.getChild(\"View/BotBtn/TotalInfoLabel/PageLabel\").getComponent(cc.Label)\r\n        this.editBox = this.getChild(\"EditItem/SearchEditBox\").getComponent(cc.EditBox)\r\n        this.initItemPool();\r\n    }\r\n    OnNextPagePageBtnClick() {\r\n        Global.Audio.playBtnSound();\r\n        this.page++\r\n        if (this.page > this.TotalPage) {\r\n            this.page = this.TotalPage\r\n            Global.UI.fastTip(\"没有更多数据\")\r\n            return\r\n        }\r\n        if(this.waitingNode)\r\n        {\r\n            this.waitingNode.active = true;\r\n        }\r\n        // if (this.cmmi_type == 1) {\r\n        //     this.SpreadModel.ReqGetSelfTeam(this.page, this.limit)\r\n        // }\r\n        else if (this.cmmi_type == 2) {\r\n            this.SpreadModel.GetDayAgentTeamInfo(0, this.page, this.limit)\r\n        }\r\n\r\n    }\r\n\r\n    OnLastPageBtnClick() {\r\n        Global.Audio.playBtnSound();\r\n        this.page--\r\n        if (this.page <= 0) {\r\n            this.page = 1\r\n            Global.UI.fastTip(\"已经是第一页了\")\r\n            return\r\n        }\r\n        if(this.waitingNode)\r\n        {\r\n            this.waitingNode.active = true;\r\n        }\r\n        // if (this.cmmi_type == 1) {\r\n        //     this.SpreadModel.ReqGetSelfTeam(this.page, this.limit)\r\n        // }\r\n        else if (this.cmmi_type == 2) {\r\n            this.SpreadModel.GetDayAgentTeamInfo(0, this.page, this.limit)\r\n        }\r\n\r\n    }\r\n\r\n    OnSearchBtnClick() {\r\n        this.CheckEmptyFunc(this.editBox.string)\r\n    }\r\n\r\n\r\n    CheckEmptyFunc(str) {\r\n        if (!this.checkTextEmptyAndShowTips(str, \"ID不能为空\"))\r\n            return;\r\n        // if (this.cmmi_type == 1) {\r\n        //     this.SpreadModel.ReqSearchSelfTeam(Number(str))\r\n        // }\r\n        else if (this.cmmi_type == 2) {\r\n            this.SpreadModel.SeachSelfTeamUser(Number(str))\r\n        }\r\n    }\r\n\r\n    private checkTextEmptyAndShowTips(text: string, tipsLabel: string) {\r\n        if (text.length <= 0) {\r\n            Global.UI.fastTip(tipsLabel);\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    private initItemPool() {\r\n\r\n        this.itemPool = new GroupItemPool(this.copyItem);\r\n    }\r\n\r\n\r\n     onSubViewShow() {\r\n        if(this.waitingNode)\r\n        {\r\n            this.waitingNode.active = true;\r\n        }\r\n        Global.HallServer.on(NetAppface.SeachSelfTeam, this, this.OnQueryTeamUser)\r\n        Global.HallServer.on(NetAppface.SeachSelfTeamUser, this, this.OnQueryTeamUser)\r\n        Global.HallServer.on(NetAppface.GetSelfTeam, this, this.InitTeamListView)\r\n        Global.HallServer.on(NetAppface.GetDayAgentTeamInfo, this, this.InitTeamListView)\r\n        if (this.cmmi_type == 1) {\r\n         //   this.SpreadModel.ReqGetSelfTeam(this.page, this.limit)\r\n        }\r\n        else if (this.cmmi_type == 2) {\r\n            this.SpreadModel.GetDayAgentTeamInfo(0, this.page, this.limit)\r\n        }\r\n\r\n    }\r\n    OnQueryTeamUser(data) {\r\n        Global.UI.show(\"WndLowerSearch\", data)\r\n\r\n    }\r\n    InitTeamListView(data) {\r\n        if(this.waitingNode)\r\n        {\r\n            this.waitingNode.active = false;\r\n        }\r\n        if (data == null) {\r\n            return\r\n        }\r\n        // if (this.cmmi_type == 1) {\r\n        //     this.InitTopView(data)\r\n        // }\r\n        else if (this.cmmi_type == 2) {\r\n            this.InitTopViewCommi(data)\r\n        }\r\n\r\n        let arr: Array<any> = data.data || [];\r\n        let count = arr.length;\r\n\r\n        this.recycle()\r\n\r\n        for (let j = 0; j < count; j++) {\r\n\r\n            let node = this.itemPool.getItem();\r\n            this.nodeList.push(node);\r\n            node.active = true;\r\n\r\n            node.setParent(this.contentNode);\r\n            node.getComponent(\"GroupItem\").Init(arr[j], j)\r\n        }\r\n        let msgFormat = \"共%s条\"\r\n        this.TotalInfoLabel.string = cc.js.formatStr(msgFormat, data.total);\r\n        let str = \"第%s页\"\r\n        this.PageLabel.string = cc.js.formatStr(str, data.page);\r\n        this.TotalPage = Math.ceil(data.total / data.limit)\r\n    }\r\n    InitTopView(data) {\r\n        if (data == null) {\r\n            this.DirDelegate.string = \"\"\r\n            this.GroupAmount.string = \"\"\r\n            this.DelegateAmount.string = \"\"\r\n            if (this.TodayNew)\r\n                this.TodayNew.string = \"\"\r\n            if (this.DirectPlayer)\r\n                this.DirectPlayer.string = \"\"\r\n        }\r\n        else {\r\n            this.DirDelegate.string = data.unter_num\r\n            this.GroupAmount.string = data.team_num\r\n            this.DelegateAmount.string = data.other_num\r\n            if (this.TodayNew)\r\n                this.TodayNew.string = data.new_unter_num\r\n            if (this.DirectPlayer)\r\n                this.DirectPlayer.string = data.new_other_num\r\n        }\r\n    }\r\n\r\n    InitTopViewCommi(data) {\r\n        if (data == null) {\r\n            this.DirDelegate.string = \"\"\r\n            this.GroupAmount.string = \"\"\r\n            this.DelegateAmount.string = \"\"\r\n            this.TodayNew.string = \"\"\r\n        }\r\n        else {\r\n            this.DirDelegate.string = data.unter_user_num\r\n            this.GroupAmount.string = data.all_user_num\r\n            this.DelegateAmount.string = data.team_user_num\r\n            this.TodayNew.string =  Global.Toolkit.formatPointStr(data.total_flow, true)\r\n        }\r\n    }\r\n\r\n    onSubViewHide() {\r\n        Global.HallServer.offAllByCaller(this)\r\n        //Global.HallServer.off(NetAppface.QueryTeamUser,this,this.OnQueryTeamUser)\r\n        this.ResetData()\r\n    }\r\n\r\n    public ResetData() {\r\n        this.page = 1\r\n        this.TotalPage = 0\r\n        this.editBox.string = \"\"\r\n    }\r\n    protected onDispose() {\r\n        this.itemPool.resetPool()\r\n    }\r\n\r\n    public recycle() {\r\n        this.itemPool.recycleAll(this.nodeList);\r\n        this.nodeList = [];\r\n    }\r\n\r\n}\r\nclass GroupItemPool extends PoolBase {\r\n    constructor(private copyNode: cc.Node) {\r\n        super();\r\n    }\r\n\r\n    protected createItem() {\r\n        return cc.instantiate(this.copyNode);\r\n    }\r\n\r\n    protected resetItem(node: cc.Node) {\r\n        node.active = false;\r\n        node.setParent(null)\r\n    }\r\n    public recycleAll(arr: Array<any>) {\r\n        super.recycleAll(arr)\r\n        arr.forEach(ele => {\r\n            this.resetItem(ele);\r\n        });\r\n\r\n    }\r\n\r\n}\r\n"]}