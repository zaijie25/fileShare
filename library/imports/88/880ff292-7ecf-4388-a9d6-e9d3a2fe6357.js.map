{"version":3,"sources":["assets\\hall\\scripts\\logic\\hall\\ui\\login\\WndRegist.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import WndBase from \"../../../core/ui/WndBase\";\r\nimport LoginModel from \"../../../hallcommon/model/LoginModel\";\r\nimport PhoneInputView from \"./view/PhoneInputView\";\r\nimport AutoCodeView from \"./view/AutoCodeView\";\r\nimport PwdInputView from \"./view/PwdInputView\";\r\n\r\nexport default class WndRegist extends WndBase\r\n{\r\n    private inviteInput:cc.EditBox;\r\n    private clickTagMap = {}\r\n\r\n    private phoneInputView:PhoneInputView;\r\n    private authCodeView:AutoCodeView;\r\n    private pwdInputView:PwdInputView;\r\n\r\n    private loginModel:LoginModel;\r\n    protected onInit()\r\n    {\r\n        this.name = \"WndRegist\";\r\n        this.layer = \"PopLayer\";\r\n        this.resPath = \"hall/prefabs/ui/RegistUI\";\r\n        this.loginModel = <LoginModel>Global.ModelManager.getModel(\"LoginModel\");\r\n    }\r\n\r\n    protected initView()\r\n    {\r\n        this.addCommonClick(\"bg/close\", this.close, this);\r\n        this.addCommonClick(\"sureBtn\", this.onSureBtnClick, this);\r\n        this.addCommonClick(\"cancelBtn\",this.close,this);\r\n\r\n        this.phoneInputView = <PhoneInputView>this.addView(\"PhoneInputView\", this.getChild(\"phoneContainer\"), PhoneInputView);\r\n        this.authCodeView = <AutoCodeView>this.addView(\"AutoCodeView\", this.getChild(\"authCodeView\"), AutoCodeView);\r\n        this.authCodeView.setPhoneInputAndType(this.phoneInputView, 1);\r\n        this.pwdInputView = <PwdInputView>this.addView(\"PwdInputView\", this.getChild(\"pwdContainer\"), PwdInputView);\r\n\r\n        this.inviteInput = this.getComponent(\"invite\", cc.EditBox);\r\n\r\n        this.inviteInput.placeholderFontColor = new cc.Color().fromHEX(\"#cfe3fc\");\r\n        this.inviteInput.fontColor = new cc.Color().fromHEX(\"#eafdff\");\r\n        this.clickTagMap[\"RegTag\"] = true\r\n    }\r\n\r\n\r\n    onOpen()\r\n    {\r\n        this.phoneInputView.subViewState = true\r\n        this.authCodeView.subViewState = true\r\n        this.pwdInputView.subViewState = true\r\n    }\r\n\r\n    private onSureBtnClick()\r\n    {\r\n       \r\n        if (!this.clickTagMap[\"RegTag\"]) {\r\n            return\r\n        }\r\n        this.clickTagMap[\"RegTag\"] = false\r\n        this.clickTagMap[\"RegTimer\"] = setTimeout(() => {\r\n            this.clickTagMap[\"RegTag\"] = true\r\n        }, 1000);\r\n\r\n        if(this.phoneInputView.phone == \"\")\r\n        {\r\n            Global.UI.fastTip(\"请输入手机号码\");\r\n            return;\r\n        }\r\n        if(this.pwdInputView.pwd == \"\")\r\n        {\r\n            Global.UI.fastTip(\"请输入密码\");\r\n            return;\r\n        }\r\n        if(this.authCodeView.code == \"\")\r\n        {\r\n            Global.UI.fastTip(\"请输入验证码\");\r\n            return;\r\n        }\r\n\r\n        if(!this.phoneInputView.isAreaVaild())\r\n        {\r\n            Global.UI.fastTip(\"请选择正确的地区信息\");\r\n            return;\r\n        }\r\n\r\n        let phone = this.phoneInputView.phone;\r\n        let code = this.authCodeView.code;\r\n        let area = this.phoneInputView.area;\r\n        let pwd = this.pwdInputView.pwd;\r\n        let invitecode = this.inviteInput.string;\r\n\r\n        if(!Global.Toolkit.checkPWFormat(pwd))\r\n        {\r\n            Global.UI.fastTip(\"请输入6-16位字母或数字密码\");\r\n            return;\r\n        }\r\n\r\n        pwd = Global.Toolkit.md5(pwd);\r\n        this.loginModel.reqRegist(phone, pwd, area, code, invitecode);\r\n    }\r\n\r\n    onDispose()\r\n    {\r\n        super.onDispose()\r\n        this.resetTag()\r\n        \r\n    }\r\n\r\n    onClose()\r\n    {\r\n        this.resetTag()\r\n    }\r\n\r\n    resetTag()\r\n    {\r\n        if(this.clickTagMap[\"RegTimer\"])\r\n        {\r\n            clearTimeout(this.clickTagMap[\"RegTimer\"])\r\n        }\r\n      \r\n        this.clickTagMap[\"RegTag\"] = true\r\n    }\r\n}"]}