{"version":3,"sources":["assets\\ermj\\Ermj\\scripts\\subView\\ErmjWinListTipsView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ErmjBaseView from \"./ErmjBaseView\";\r\nimport ErmjPathHelper from \"../data/ErmjPathHelper\";\r\nimport ErmjMjStyleHelper from \"../tool/ErmjMjStyleHelper\";\r\nimport ErmjGameConst from \"../data/ErmjGameConst\";\r\n\r\nconst bgMinWidth = 264;\r\nconst bgMinContain = 2;     // 最小宽可容纳数\r\nconst bgStepWidth = 65;\r\nexport default class ErmjWinListTipsView extends ErmjBaseView{\r\n    private bgNode: cc.Node;\r\n    private winCount: cc.Label;\r\n    private listLayout: cc.Layout;\r\n    private copyNode: cc.Node;\r\n    private winMjItemList: WinMjItemView[] = [];\r\n\r\n    constructor(node: cc.Node){\r\n        super();\r\n        this.setNode(node);\r\n    }\r\n\r\n    protected initView(){\r\n        this.bgNode = this.getChild(\"bgNode\");\r\n        this.winCount = this.getComponent(\"winCount\", cc.Label);\r\n        this.listLayout = this.getComponent(\"listLayout\", cc.Layout);\r\n        this.copyNode = this.getChild(\"winMjItem\");\r\n        this.copyNode.active = false;\r\n    }\r\n\r\n    public updateWinList(winArr: any[] = []){\r\n        this.hideAllMj();\r\n        let typeCount = winArr.length;\r\n        let mjCount = 0;\r\n        for(let i =0; i < winArr.length; i++){\r\n            let info = winArr[i];\r\n            let mjItem = this.winMjItemList[i];\r\n            if(!mjItem)\r\n                mjItem = this.getOneWinMjItem();\r\n            mjItem.active = true;\r\n            mjItem.setInfo(info.card, info.fan, info.num);\r\n            mjCount += info.num;\r\n        }\r\n        this.winCount.string = `${mjCount}`;\r\n        let mul = typeCount >= bgMinContain ? typeCount - bgMinContain : 0;\r\n        this.bgNode.width = bgMinWidth + mul * bgStepWidth;\r\n    }\r\n\r\n    private getOneWinMjItem(){\r\n        let node = <cc.Node>cc.instantiate(this.copyNode);\r\n        node.setParent(this.listLayout.node);\r\n        let view = new WinMjItemView(node);\r\n        this.winMjItemList.push(view);\r\n        return view;\r\n    }\r\n\r\n    private hideAllMj(){\r\n        this.winMjItemList.forEach(item=>{\r\n            item.active = false;\r\n        })\r\n    }\r\n}\r\n\r\nclass WinMjItemView extends ErmjBaseView{\r\n    private frontSp: cc.Sprite;\r\n    private countLbl: cc.Label;\r\n    private multLbl: cc.Label;\r\n\r\n    constructor(node: cc.Node){\r\n        super();\r\n        this.setNode(node);\r\n    }\r\n\r\n    protected initView(){\r\n        this.frontSp = this.getComponent(\"front\", cc.Sprite);\r\n        this.countLbl = this.getComponent(\"countLbl\", cc.Label);\r\n        this.multLbl = this.getComponent(\"multLbl\", cc.Label);\r\n    }\r\n\r\n    public setInfo(value: number, nMult: number, nCount: number){\r\n        Global.ResourceManager.loadBundleAutoAtlas(ErmjGameConst.Gid, this.frontSp, ErmjPathHelper.gameTexturePath + \"mahjong/atlas_mahjong\", ErmjMjStyleHelper.mjOutMap[value], null, true);\r\n        this.countLbl.string = `x${nCount}`;\r\n        this.multLbl.string = `${nMult}番`;\r\n    }\r\n}"]}