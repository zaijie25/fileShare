{"version":3,"sources":["assets\\hall\\scripts\\logic\\core\\component\\TextRollSceen.ts.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class TextRollSceen extends cc.Component {\r\n    private showText: cc.Label;\r\n    private showOrderArr = [];\r\n    private index = 0;\r\n    private timeInterval = 6;\r\n    private changeTime = 1;\r\n\r\n    onLoad(){\r\n        this.showText = cc.find(\"txt\", this.node).getComponent(cc.Label);\r\n    }\r\n\r\n    // 有需求再优化通用\r\n    start(){\r\n        if(window[\"Global\"] == null)\r\n        {\r\n            Logger.error(\"global is null\")\r\n            return;\r\n        }\r\n        if(Global.Setting.SkinConfig && Global.Setting.SkinConfig.loadedFinish)\r\n            this.startRun();\r\n        else\r\n            Global.Event.once(GlobalEvent.SkinConfigLoadFinish, this, this.startRun)\r\n    }\r\n\r\n\r\n    private startRun()\r\n    {\r\n        this.showOrderArr = Global.Toolkit.getOutOrderArray(Global.Setting.SkinConfig.loadingTips);\r\n        this.setShowText(this.showOrderArr[this.index]);\r\n        this.schedule(this.onTimerUpdate, this.timeInterval);\r\n    }\r\n\r\n    private setShowText(str: string = ''){\r\n        if(this.showText == null)\r\n            return;\r\n        this.showText.string = str;\r\n        this.scheduleOnce(()=>{\r\n            if(this.node.isValid)\r\n                this.node.width = this.showText.node.width + 200;\r\n        }, 0)\r\n        // let len = Global.Toolkit.getTotalBytes(str);\r\n        // this.node.width = len * 15 + 80;\r\n    }\r\n\r\n    private onTimerUpdate(){\r\n        this.index++;\r\n        let fadeOutAc = cc.fadeTo(this.changeTime / 2, 30);\r\n        let funcAc = cc.callFunc(()=>{\r\n            this.setShowText(this.showOrderArr[this.index]);\r\n        }, this);\r\n        let fadeInAc = cc.fadeTo(this.changeTime / 2, 255);\r\n        this.node.runAction(cc.sequence(fadeOutAc, funcAc, fadeInAc));\r\n        if (this.index == this.showOrderArr.length-1){\r\n            this.index = 0;\r\n        }\r\n    }\r\n\r\n    onDestroy(){\r\n        this.node.stopAllActions();\r\n        this.unschedule(this.onTimerUpdate);\r\n    }\r\n}\r\n"]}