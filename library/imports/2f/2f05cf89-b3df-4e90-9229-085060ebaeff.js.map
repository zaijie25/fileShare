{"version":3,"sources":["assets\\hall\\scripts\\logic\\hall\\ui\\CommissionSys\\CommisionItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport RechargeGiftModel from \"../../../hallcommon/model/RechargeGiftModel\";\r\nimport CommisionModel from \"../../../hallcommon/model/CommisionModel\";\r\nimport { SkinType } from \"../../../hallcommon/app/SkinConfig\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class CommisionItem extends cc.Component {\r\n\r\n    @property([cc.Node])\r\n    btnArrary: cc.Node[] = [];\r\n\r\n    @property (cc.Label)\r\n    awardLable: cc.Label = null\r\n\r\n    @property (cc.ProgressBar)\r\n    progress: cc.ProgressBar = null\r\n\r\n    @property (cc.Label)\r\n    commisionName: cc.Label = null\r\n\r\n    @property (cc.Label)\r\n    commisionDescribe: cc.Label = null\r\n\r\n    @property (cc.Label)\r\n    progressLabel: cc.Label = null\r\n\r\n    @property (cc.Node)\r\n    getAwardBtn: cc.Node = null\r\n\r\n    data :any = null\r\n    private model: CommisionModel = null\r\n\r\n    private global_task_type = - 1\r\n\r\n\r\n\r\n    onLoad()\r\n    {\r\n       Global.UIHelper.addCommonClick(this.node,\"getAward\",this.onGetAwardBtnClicked,this)\r\n       this.model = <CommisionModel>Global.ModelManager.getModel(\"CommisionModel\");\r\n       this.model.on(CommisionModel.GetCommisionAward, this,this.onGetAward);\r\n      \r\n    }\r\n    \r\n    onGetAward(data) {\r\n        if (!data || !data.task_reward) return\r\n        if (data.global_task_type == this.global_task_type && this.data.task_id == data.task_id) {\r\n            Global.UI.show(\"WndRebateGet\", data.task_reward);\r\n            // Global.UI.show(\"WndCongratulationGet\",data.task_reward);\r\n            this.data.task_status = 2\r\n            this.UpdateUI(this.data,this.global_task_type)\r\n        }\r\n\r\n    }\r\n\r\n    onDestroy()\r\n    {\r\n        this.model.off(CommisionModel.GetCommisionAward, this,this.onGetAward);\r\n\r\n    }\r\n    onGetAwardBtnClicked(target) {\r\n        if(!this.data)\r\n        {\r\n            return\r\n        }\r\n        this.model.reqGetCommisionAward(this.global_task_type,this.data.task_id)\r\n    }\r\n\r\n    /**\r\n     * name\r\n     */\r\n    public UpdateUI(data, type) {\r\n        if(!data || !cc.isValid(this.node)) return\r\n        this.data = data\r\n        this.global_task_type = type\r\n        if(this.btnArrary)\r\n        {\r\n            this.btnArrary[0].active = data.task_status == 0\r\n            this.btnArrary[1].active = data.task_status == 1\r\n            this.btnArrary[2].active = data.task_status == 2\r\n        }\r\n        if(this.getAwardBtn)\r\n        {\r\n            let btn = this.getAwardBtn.getComponent(cc.Button)\r\n            if(btn)\r\n            {\r\n                btn.interactable = data.task_status == 1\r\n            }\r\n        }\r\n        if(this.awardLable)\r\n        {\r\n            this.awardLable.string = Global.Toolkit.formatPointStr(data.task_reward)\r\n        }\r\n\r\n\r\n        if(this.progress)\r\n        {\r\n            this.progress.progress = data.task_num != 0 ? (data.task_self_num/data.task_num) : 0\r\n        }\r\n\r\n        if(this.progressLabel)\r\n        {\r\n            this.progressLabel.string = cc.js.formatStr(\"%s/%s\",data.task_self_num,data.task_num)\r\n        }\r\n\r\n        if(this.commisionName)\r\n        {\r\n            this.commisionName.string = data.name\r\n        }\r\n\r\n        if(this.commisionDescribe)\r\n        {\r\n            this.commisionDescribe.string = data.task_desc\r\n        }\r\n        \r\n    }\r\n}\r\n\r\n"]}