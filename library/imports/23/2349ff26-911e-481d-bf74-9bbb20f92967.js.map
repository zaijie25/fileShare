{"version":3,"sources":["assets\\hall\\scripts\\logic\\hallcommon\\model\\HallModel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ModelBase from \"../../../framework/model/ModelBase\";\r\nimport { NetAppface } from \"../../core/net/hall/NetEvent\";\r\nimport GlobalEvent from \"../../core/GlobalEvent\";\r\nimport { ActivityEntity } from \"../../hall/ui/Activity/WndActivityCenter\";\r\nimport Base64Cls from \"../../../framework/libs/Base64Cls\";\r\nimport { WindowKeyType } from \"../../../framework/native/WebNative\";\r\nimport { GameType } from \"../data/GameData\";\r\nimport { log } from \"async\";\r\n\r\nexport enum HallRedSpotType {\r\n    Rank,\r\n    Tixian,\r\n    Bank,\r\n    Mail,\r\n    Activity,\r\n    Kefu,\r\n    Gonggao,\r\n    // Rebate,\r\n    Spread,\r\n    // rechargeGift,\r\n    CashBackDay,\r\n    LoginKefu, //登陆客服\r\n    WealthKefu, //财富咨询\r\n    YunPalyKefu, //云闪付\r\n    BonusKefu, //彩金客服\r\n    SignActivity,//签到送金\r\n    Commision,//任务系统\r\n    DailyGift,//每日礼金\r\n}\r\n\r\nexport enum webGamePointType {\r\n    TransferSave = 0,   //上分\r\n    TransferTake = 1    //下分\r\n}\r\n\r\nexport default class HallModel extends ModelBase {\r\n    public get Name() {\r\n        return \"HallModel\";\r\n    }\r\n\r\n    public rankRedSpotSwitch = false;\r\n    public tixianRedSpotSwitch = false;\r\n    public bankRedSpotSwitch = false;\r\n    public mailRedSpotSwitch = false;\r\n    public activityRedSpotSwitch = false;\r\n    public kefuSpotSwitch = false;\r\n    public NoticeRedSpot = false;\r\n    // public RebateRedSpot = false;\r\n    public SpreadRedSpot = false\r\n    public BonusKefuRedSpot = false\r\n    public WealthKefuRedSpot = false\r\n    // public RechargeGiftRedSpotActive = false\r\n    public signActivitySwitch = false\r\n    public CommisionRedSpotActive = false\r\n    public DailyGiftRedSpotActive = false\r\n\r\n    public firstOpenHall = true;\r\n    public isShowActivityCenter = false;\r\n    public isShowRedEnvelope = false;\r\n    public moreGameStatus: boolean = false; //大厅显示原始列表还是更多游戏列表状态\r\n    public enterGameOffsetX: number = 0;//大厅进子游戏记录偏移\r\n    public gameListKey: number = -1;    //当前大厅游戏列表页签  默认为非有效的-1 避免初始return\r\n    public recharge_red = null;\r\n\r\n    private popupWindowHasUpPoint = false;//外部链接子游戏是否上分状态\r\n    private popupWindowGameId: number = 0; //外部链接子游戏的gameid \r\n\r\n    private _webGameId: number = 0;      //外接webview游戏id\r\n    private _webHasUpPoint: boolean = false;     //外接webview游戏是否上分\r\n    // private _webWindow:Window = null;      //外接子游戏外部窗口\r\n    public csNodePos:cc.Node = null;    // 财神Node\r\n\r\n    public set webGameId(val) {\r\n        this._webGameId = val;\r\n    }\r\n\r\n    public get webGameId() {\r\n        return this._webGameId;\r\n    }\r\n\r\n    public set webHasUpPoint(val) {\r\n        this._webHasUpPoint = val;\r\n    }\r\n\r\n    public get webHasUpPoint() {\r\n        return this._webHasUpPoint;\r\n    }\r\n\r\n    protected onInit() {\r\n        //红点事件监听\r\n        Global.Event.on(GlobalEvent.ShowRedSpot, this, this.showRedSpot);\r\n        Global.Event.on(GlobalEvent.CloseRedSpot, this, this.closeRedSpot);\r\n        //web版子游戏(webview形式)上下分\r\n        Global.Event.on(GlobalEvent.WebUpPoint, this, this.WebUpPoint);\r\n        Global.Event.on(GlobalEvent.WebDownPoint, this, this.WebDownPoint)\r\n        if (cc.sys.isBrowser) {           //监听浏览器是否在当前页面\r\n            document.addEventListener(\"visibilitychange\", () => {\r\n                if (!document.hidden) {   //在当前页面\r\n                    if (this.popupWindowHasUpPoint && this.popupWindowGameId != 0) {     //外部链接子游戏有上分才需要下分\r\n                        this.popUpGameDownPoint(this.popupWindowGameId);\r\n                        if (cc.sys.os == cc.sys.OS_IOS && cc.sys.isBrowser) { //下分后将原先的弹窗对象清掉\r\n                            // this._webWindow = null;\r\n                            Global.WebNative.clearWindowMap();\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    WebUpPoint() {\r\n        if (!this.webHasUpPoint) {\r\n            this.requestApplyTopPoint(Game.Control.curGid);\r\n            this.webHasUpPoint = true;\r\n            this.webGameId = Game.Control.curGid;\r\n        }\r\n\r\n    }\r\n\r\n    WebDownPoint() {\r\n        if (this.webHasUpPoint) {\r\n            this.requestApplyDownPoint(Game.Control.curGid);\r\n            this.webHasUpPoint = false;\r\n            this.webGameId = 0;\r\n        }\r\n    }\r\n    /**\r\n     * \r\n     * @param data [1 = 是否需要刷新数据，2 = 按钮枚举]\r\n     */\r\n    private showRedSpot(data) {\r\n        let redSpotType = data[1]\r\n        switch (redSpotType) {\r\n            case HallRedSpotType.Rank:\r\n                {\r\n                    this.rankRedSpotSwitch = true;\r\n                    break;\r\n                }\r\n            case HallRedSpotType.Tixian:\r\n                {\r\n                    this.tixianRedSpotSwitch = true;\r\n                    break;\r\n                }\r\n            // case HallRedSpotType.Bank:\r\n            //     {\r\n            //         this.bankRedSpotSwitch = true;\r\n            //         break;\r\n            //     }\r\n            case HallRedSpotType.Mail:\r\n                {\r\n                    this.mailRedSpotSwitch = true;\r\n                    break;\r\n                }\r\n            case HallRedSpotType.Gonggao:\r\n                {\r\n                    this.mailRedSpotSwitch = true;\r\n                    break;\r\n                }\r\n            case HallRedSpotType.Activity:\r\n                {\r\n                    this.NoticeRedSpot = true;\r\n                    break;\r\n                }\r\n            case HallRedSpotType.Kefu:\r\n                {\r\n                    this.kefuSpotSwitch = true;\r\n                    break;\r\n                }\r\n            // case HallRedSpotType.Gonggao:\r\n            // {\r\n            //     this.NoticeRedSpot = true;\r\n            //     break;\r\n            // }\r\n            // case HallRedSpotType.Rebate:\r\n            // {\r\n            //     this.RebateRedSpot = true;   \r\n            //     break;\r\n            // }\r\n            case HallRedSpotType.Spread:\r\n                {\r\n                    this.SpreadRedSpot = true;\r\n                    break;\r\n                }\r\n            case HallRedSpotType.WealthKefu:\r\n                {\r\n                    this.WealthKefuRedSpot = true;\r\n                    break;\r\n                }\r\n            case HallRedSpotType.BonusKefu:\r\n                {\r\n                    this.BonusKefuRedSpot = true;\r\n                    break;\r\n                }\r\n            case HallRedSpotType.Commision:\r\n                {\r\n                    this.CommisionRedSpotActive = true;\r\n                    break;\r\n                }\r\n            case HallRedSpotType.SignActivity:\r\n                {\r\n                    this.signActivitySwitch = true;\r\n                    break;\r\n                }\r\n            case HallRedSpotType.DailyGift:\r\n                {\r\n                    this.DailyGiftRedSpotActive = true;\r\n                    break;\r\n                }\r\n\r\n        }\r\n        this.event(\"UpdateResSpot\", redSpotType);\r\n    }\r\n\r\n    public closeRedSpot(redSpotType) {\r\n        switch (redSpotType) {\r\n            case HallRedSpotType.Rank:\r\n                {\r\n                    this.rankRedSpotSwitch = false;\r\n                    break;\r\n                }\r\n            case HallRedSpotType.Tixian:\r\n                {\r\n                    this.tixianRedSpotSwitch = false;\r\n                    break;\r\n                }\r\n            // case HallRedSpotType.Bank:\r\n            //     {\r\n            //         this.bankRedSpotSwitch = false;\r\n            //         break;\r\n            //     }\r\n            case HallRedSpotType.Gonggao:\r\n            case HallRedSpotType.Mail:\r\n                {\r\n                    this.mailRedSpotSwitch = false;\r\n                    break;\r\n                }\r\n            case HallRedSpotType.Activity:\r\n                {\r\n                    this.NoticeRedSpot = false;\r\n                    break;\r\n                }\r\n            case HallRedSpotType.Kefu:\r\n                {\r\n                    this.kefuSpotSwitch = false;\r\n                    break;\r\n                }\r\n            // case HallRedSpotType.Gonggao:\r\n            // {\r\n            //     this.NoticeRedSpot = false;\r\n            //     break;\r\n            // }\r\n            // case HallRedSpotType.Rebate:\r\n            // {\r\n            //     this.RebateRedSpot = false;   \r\n            //     break;\r\n            // }\r\n            case HallRedSpotType.Spread:\r\n                {\r\n                    this.SpreadRedSpot = false;\r\n                    break;\r\n                }\r\n            case HallRedSpotType.WealthKefu:\r\n                {\r\n                    this.WealthKefuRedSpot = false;\r\n                    break;\r\n                }\r\n            case HallRedSpotType.BonusKefu:\r\n                {\r\n                    this.BonusKefuRedSpot = false;\r\n                    break;\r\n                }\r\n            case HallRedSpotType.Commision:\r\n                {\r\n                    this.CommisionRedSpotActive = false;\r\n                    break;\r\n                }\r\n            case HallRedSpotType.SignActivity:\r\n                {\r\n                    this.signActivitySwitch = false;\r\n                    break;\r\n                }\r\n            case HallRedSpotType.DailyGift:\r\n                {\r\n                    this.DailyGiftRedSpotActive = false;\r\n                    break;\r\n                }\r\n        }\r\n        this.event(\"UpdateResSpot\", redSpotType);\r\n    }\r\n\r\n    //是否需要quaryState\r\n    public needQuaryState = true;\r\n\r\n    public reqQueryState() {\r\n        this.needQuaryState = false;\r\n        Global.HallServer.send(NetAppface.mod, NetAppface.QuaryState, {}, (msg) => {\r\n            if (msg.locks == null || msg.locks.length == 0)\r\n                return;\r\n            //在游戏场景中不处理quaryState\r\n            if (Global.SceneManager.inGame())\r\n                return;\r\n            //重新请求进入游戏\r\n            let locker = msg.locks[0];\r\n            this.rebackGame(locker)\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 重返游戏\r\n     * \r\n    */\r\n    private rebackGame(locker) {\r\n        if (!locker) {\r\n            Logger.error(\"locker = null\")\r\n            return;\r\n        }\r\n        if (locker.ret == 1 && locker._gid) {\r\n            let defalutStr = \"当前正在游戏中，是否回到游戏?\"\r\n            let gid = locker._gid\r\n            let gameData = Global.GameData.getGameInfo(gid);\r\n            if (gameData && gameData.gtype == 8) {\r\n                if (gameData.name) {\r\n                    defalutStr = \"您正在【\" + gameData.name + \"】游戏中，金币暂扣，是否需要重新进入游戏？\"\r\n                }\r\n\r\n                Global.UI.showYesNoBox(defalutStr, () => {\r\n                    this.requestApplyEnterGame(gid)\r\n                })\r\n            } else {\r\n                let str = Global.GameData.getReturnGameStr(locker._gid, locker._glv, true);\r\n                Global.UI.showYesNoBox(str || defalutStr, () => {\r\n                    Game.Control.goToGameByLocker(locker);\r\n                })\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    public requestGetRewardPackCount() {\r\n        Global.HallServer.send(NetAppface.mod, NetAppface.GetRewardPackCount, {}, (retObj) => {\r\n            if (retObj && retObj.list && retObj.list.length > 0 && !this.isShowRedEnvelope) {\r\n                let data = retObj.list[0]\r\n                this.isShowRedEnvelope = true\r\n                Global.UI.show(\"WndRedEnvelope\", data, () => {\r\n                    Global.UI.show(\"WndRebateGet\", data.point, null, () => {\r\n                        this.isShowRedEnvelope = false;\r\n                        this.requestGetRewardPackCount();\r\n                    })\r\n                })\r\n            }\r\n        }, (error) => {\r\n            // Global.UI.fastTip(error._errstr);\r\n        }, false);\r\n\r\n    }\r\n    public requestMyActivityList(callback = null) {\r\n        Global.HallServer.send(NetAppface.mod, \"GetMyActivityList\", {},\r\n            function (data: any) {\r\n                //成功\r\n                let serverInfo = data.activity_list;\r\n                if (serverInfo.length > 0) {\r\n                    let actMap = new Map<number, ActivityEntity>();\r\n                    let activity_red = false;   //小红点状态\r\n                    for (let i = 0; i < serverInfo.length; i++) {\r\n                        let ptype = serverInfo[i].ptype;\r\n                        //屏蔽每日充值红包-16 3日签到-11 每日返利-7 首充 返利-8 每日礼金-18\r\n                        if (!ptype) { //活动中心只显示线下活动\r\n                            continue;\r\n                        }\r\n                        let infoData = serverInfo[i];\r\n                        let entity = new ActivityEntity();\r\n                        for (let key in entity) {\r\n                            if (infoData[key] != null && infoData[key] != undefined) {\r\n                                entity[key] = infoData[key];\r\n                            }\r\n                            entity.red_status = infoData['satus'] == 1 ? 0 : -1;    //红点状态\r\n                        }\r\n                        if (!activity_red) {//右上角活动红点\r\n                            activity_red = activity_red || (infoData.satus === 1)\r\n                        }\r\n                        actMap.set(entity.atype, entity);\r\n                    }\r\n                    if (activity_red) {\r\n                        Global.Event.event(GlobalEvent.ShowRedSpot, [false, HallRedSpotType.Activity])\r\n                    }\r\n                    if (callback) {\r\n                        callback(actMap);\r\n                    }\r\n                }\r\n\r\n            }.bind(this),\r\n\r\n            function (data: any) {\r\n                //失败\r\n                Logger.error(\"HallModel GetMyActivityList failed\");\r\n            }.bind(this),\r\n            false,\r\n        );\r\n    }\r\n    public requestApplyEnterGame(gid) {\r\n        Game.Control.curGid = gid\r\n        let gameInfo = Global.GameData.getGameInfo(gid)\r\n        let gameType = gameInfo ? gameInfo.gameType : -1\r\n        let params = { \"gid\": gid }\r\n        if (cc.sys.isBrowser && cc.sys.os == cc.sys.OS_IOS) { //ios新页面无法在异步回调中open(ios会视为骚扰弹窗默认进行屏蔽),因此需要在此先打开空白页面之后请求成功后重定向\r\n            if (this.needPopUpWindow(gid)) {\r\n                // this._webWindow = window.open(\"\",\"_blank\");\r\n                Global.WebNative.initWindow(WindowKeyType.GameWin);\r\n            }\r\n        }\r\n        if (gameType === GameType.WEBGAME) {\r\n            Global.HallServer.send(NetAppface.mod, NetAppface.ApplyEnterGame, params,\r\n                (data) => {\r\n                    //正常拿到url\r\n                    if (data && data.url) {\r\n                        let url = data.url\r\n                        //actionViewHidden  是否隐藏原生功能按钮 0是不隐藏，1是隐藏\r\n                        let actionViewHidden = \"1\"\r\n                        let scheme = \"\"\r\n                        if (actionViewHidden == \"1\") {\r\n                            url = Global.UrlUtil.replaceUrlParmVal(data.url, \"return_url\", Base64Cls.encode(\"gohall://gohall.com\"))\r\n                            scheme = \"gohall\"\r\n                        } else {\r\n                            url = Global.UrlUtil.replaceUrlParmVal(data.url, \"return_type\", 1)\r\n                        }\r\n\r\n                        if (url) {\r\n                            if (Global.Setting.resServerUrl) {\r\n                                let logoUrl = Global.Setting.resServerUrl + \"/logo/\" + gid + \".png?\" + (new Date()).valueOf()\r\n                                Logger.error(\"logo url = \" + logoUrl)\r\n                                url += \"&is_app=1&logo_type=1&logo_url=\" + Base64Cls.encode(logoUrl)\r\n                            } else {\r\n                                url += \"&is_app=1\"\r\n                            }\r\n                            Logger.error(\"HallModel requestApplyEnterGame base64 url \" + url);\r\n                            Global.Event.event(GlobalEvent.OpenWebViewGame, url, scheme, actionViewHidden)\r\n                        }\r\n                    } else {\r\n                        //重新请求进入游戏\r\n                        if (data.locks && data.locks.length > 0) {\r\n                            let locker = data.locks[0];\r\n                            this.rebackGame(locker)\r\n                        }\r\n                    }\r\n                },\r\n                null,\r\n                true\r\n            );\r\n        } else if (gameType === GameType.AGBG) {\r\n            Global.HallServer.send(NetAppface.gameAgent, NetAppface.EnterGame, params,\r\n                (data) => {\r\n                    //正常拿到url\r\n                    if (data && data.url) {\r\n                        let url = encodeURI(data.url)\r\n                        //actionViewHidden  是否隐藏原生功能按钮 0是不隐藏，1是隐藏\r\n                        let actionViewHidden = \"0\"\r\n                        let scheme = \"\"\r\n                        if (actionViewHidden == \"1\") {\r\n                            url = Global.UrlUtil.replaceUrlParmVal(data.url, \"return_url\", Base64Cls.encode(\"gohall://gohall.com\"))\r\n                            scheme = \"gohall\"\r\n                        } else {\r\n                            url = Global.UrlUtil.replaceUrlParmVal(data.url, \"return_type\", 1)\r\n                        }\r\n                        Logger.log(\"跳转url\", url, gid)\r\n                        if (this.needPopUpWindow(gid)) {    //判断是否需要弹出新页面\r\n                            this.popUpGameWindow(gid, url);\r\n                        } else {\r\n                            Global.Event.event(GlobalEvent.OpenWebViewGame, url, scheme, actionViewHidden, gid)\r\n                        }\r\n                    } else {\r\n                        Logger.log(\"跳转url\", \"获取失败\", gid)\r\n                        //重新请求进入游戏\r\n                        if (data.locks && data.locks.length > 0) {\r\n                            let locker = data.locks[0];\r\n                            this.rebackGame(locker)\r\n                        }\r\n                    }\r\n                },\r\n                null,\r\n                true\r\n            );\r\n        }\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * 判断是否需要用popup形式打开\r\n     * @param gid 游戏id\r\n     * ios下大部分外接游戏都需要以新页签的形式打开，无法用webview\r\n     */\r\n    public needPopUpWindow(gid) {\r\n        if (!cc.sys.isBrowser) {\r\n            return false;\r\n        }\r\n        // if(gid == 9061 || gid == 9062 || gid == 9063 || gid == 9064){   //AG所有视讯\r\n        //     return true;\r\n        // }\r\n        if (CC_DEV) {\r\n            return false;\r\n        }\r\n        if (gid == 9031 || gid == 9001) {     //CMD体育与SHABA一定调外部链接\r\n            return true;\r\n        }\r\n        if (cc.sys.os == cc.sys.OS_ANDROID) {\r\n            return false;\r\n        }\r\n        if (cc.sys.os == cc.sys.OS_IOS) {     //ios情况下以下游戏也跳转外部链接\r\n            if (gid == 9065 || gid == 9066 || gid == 9067 || gid == 9068 || gid == 9069 || gid == 9070) { //AG所有老虎机\r\n                return true;\r\n            }\r\n            if (gid == 9061 || gid == 9062 || gid == 9063 || gid == 9064) {   //AG所有视讯\r\n                return true;\r\n            }\r\n        }\r\n        return false\r\n    }\r\n\r\n    /**\r\n     * 某些外部子游戏需要跳外部链接访问(先上分再跳外部链接)\r\n     * @param gid 游戏id\r\n     * @param url 外部游戏链接\r\n     */\r\n    public popUpGameWindow(gid, url: string) {\r\n        if (this.popupWindowHasUpPoint) return;\r\n        let params = {\r\n            \"gid\": gid,\r\n            \"action\": 1\r\n        }\r\n        Global.HallServer.send(NetAppface.gameAgent, NetAppface.TransferSave, params,\r\n            (data) => {\r\n                Logger.error(\"popUpGame requestApplyTopPoint success\");\r\n                this.popupWindowHasUpPoint = true;\r\n                this.popupWindowGameId = gid;\r\n                if (cc.sys.os == cc.sys.OS_IOS) {\r\n                    Global.WebNative.openWindowByKey(WindowKeyType.GameWin, url);\r\n                    // this._webWindow.location.href = url;\r\n                    // console.log(\"点击:新页面形式\",url)\r\n                    // let linkA:HTMLAnchorElement = document.createElement(\"a\");\r\n                    // linkA.href = url;\r\n                    // linkA.target = \"_blank\";\r\n                    // linkA.click();\r\n                } else {\r\n                    window.open(url);\r\n                }\r\n            },\r\n            () => {\r\n                Logger.error(\"popUpGame requestApplyTopPoint failed\");\r\n            },\r\n            true\r\n        );\r\n    }\r\n\r\n    /**\r\n     * 跳外部链接子游戏下分\r\n     * @param gameid 游戏id\r\n     */\r\n    public popUpGameDownPoint(gameid) {\r\n        let params = {\r\n            \"gid\": gameid,\r\n            \"action\": 0\r\n        }\r\n        Global.HallServer.send(NetAppface.gameAgent, NetAppface.TransferTake, params,\r\n            (data) => {\r\n                this.popupWindowHasUpPoint = false;\r\n                this.popupWindowGameId = 0;\r\n                Logger.error(\"popUpGame requestApplyDownPoint success\");\r\n            },\r\n            () => {\r\n                Logger.error(\"popUpGame requestApplyDownPoint failed\");\r\n            },\r\n            true\r\n        );\r\n    }\r\n\r\n    public requestApplyTopPoint(gameid) {\r\n        let gameInfo = Global.GameData.getGameInfo(gameid)\r\n        let gameType = gameInfo ? gameInfo.gameType : -1\r\n        if (gameType === GameType.WEBGAME) {\r\n            let params = {}\r\n            Global.HallServer.send(NetAppface.mod, NetAppface.ApplyTopPoint, params,\r\n                (data) => {\r\n                    Logger.error(\"HallModel requestApplyTopPoint success\");\r\n                },\r\n                () => {\r\n                    Logger.error(\"HallModel requestApplyTopPoint failed\");\r\n                },\r\n                true\r\n            );\r\n        } else {\r\n            let params = {\r\n                \"gid\": gameid,\r\n                \"action\": 1\r\n            }\r\n            Global.HallServer.send(NetAppface.gameAgent, NetAppface.TransferSave, params,\r\n                (data) => {\r\n                    Logger.error(\"HallModel requestApplyTopPoint success\");\r\n                },\r\n                () => {\r\n                    Logger.error(\"HallModel requestApplyTopPoint failed\");\r\n                },\r\n                true\r\n            );\r\n        }\r\n    }\r\n\r\n    public requestApplyDownPoint(gameid) {\r\n        let gameInfo = Global.GameData.getGameInfo(gameid)\r\n        let gameType = gameInfo ? gameInfo.gameType : -1\r\n        if (gameType === GameType.WEBGAME) {\r\n            let params = {}\r\n            Global.HallServer.send(NetAppface.mod, NetAppface.ApplyDownPoint, params,\r\n                (data) => {\r\n                    Logger.error(\"HallModel requestApplyDownPoint success\");\r\n                },\r\n                () => {\r\n                    Logger.error(\"HallModel requestApplyDownPoint failed\");\r\n                },\r\n                true\r\n            );\r\n        } else {\r\n            let params = {\r\n                \"gid\": gameid,\r\n                \"action\": 0\r\n            }\r\n            Global.HallServer.send(NetAppface.gameAgent, NetAppface.TransferTake, params,\r\n                (data) => {\r\n                    Logger.error(\"HallModel requestApplyDownPoint success\");\r\n                },\r\n                () => {\r\n                    Logger.error(\"HallModel requestApplyDownPoint failed\");\r\n                },\r\n                true\r\n            );\r\n        }\r\n    }\r\n    //大厅游戏列表显示状态\r\n    public setMoreGameStatus(val: boolean) {\r\n        this.moreGameStatus = val;\r\n    }\r\n\r\n    //记录大厅进子游戏记录偏移\r\n    public setEnterGameOffsetX(val: number) {\r\n        this.enterGameOffsetX = val;\r\n    }\r\n    public setGameListKey(key: number) {\r\n        this.gameListKey = key;\r\n    }\r\n\r\n    public clear() {\r\n        this.needQuaryState = true;\r\n        this.firstOpenHall = true;\r\n        this.DailyGiftRedSpotActive = false;\r\n        Global.GameData.dataInitFinish = false\r\n    }\r\n}\r\nexport enum GamePos {\r\n    Popular = 0,    //热门\r\n    Poker = 1,      //棋牌\r\n    Games = 2,      //电子\r\n    Video = 3,      //视讯\r\n    Fishing = 4,    //捕鱼\r\n    Sports = 5,     //体育\r\n    Lottery = 6,    //彩票\r\n}"]}